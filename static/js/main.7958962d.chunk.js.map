{"version":3,"sources":["resources/home-wallpaper.jpg","constants/actionTypes.js","constants/misc.js","store/initialState.js","services/translations/translations.js","reducers/configReducer.js","reducers/index.js","reducers/accountReducer.js","reducers/itemsReducer.js","reducers/uiReducer.js","reducers/languageReducer.js","reducers/web3TransactionsReducer.js","reducers/tagsReducer.js","reducers/ethNetworkReducer.js","reducers/analyticsReducer.js","reducers/signinReducer.js","reducers/identityReducer.js","reducers/walletReducer.js","reducers/newItemsReducer.js","reducers/spinnersReducer.js","reducers/toastsReducer.js","reducers/confirmReducer.js","reducers/navReducer.js","reducers/validateItemsReducer.js","reducers/newTransactionsReducer.js","store/history.js","store/configureStore.js","actions/common.js","helpers/miscHelpers.js","selectors/selectors.js","selectors/accountSelectors.js","selectors/identitySelectors.js","selectors/locationSelectors.js","selectors/uiSelectors.js","selectors/translationsSelectors.js","helpers/formatters.js","selectors/analyticsSelectors.js","selectors/validationsSelectors.js","services/store-data/loop.js","helpers/errors.js","services/store-data/campaigns.js","services/store-data/account.js","services/store-data/analytics.js","services/store-data/auth.js","services/requester/index.js","services/requester/requester.js","services/adex-market/actions.js","actions/uiActions.js","services/auth/auth.js","services/adex-relayer/actions.js","services/smart-contracts/contractsCfg.js","services/smart-contracts/ethers.js","services/smart-contracts/signers/trezor.js","helpers/localStorageHelpers.js","services/wallet/wallet.js","services/smart-contracts/signers/local.js","services/smart-contracts/signers/metamask.js","actions/transactionActions.js","services/smart-contracts/actions/ethers.js","services/adex-validator/actions.js","services/smart-contracts/actions/stats.js","services/adex-relayer/config.js","services/smart-contracts/actions/identity.js","services/smart-contracts/actions/core.js","actions/accountActions.js","helpers/mediaHelpers.js","constants/targeting.js","actions/itemActions.js","services/smart-contracts/actions/erc20.js","services/smart-contracts/actions/common.js","helpers/validators.js","actions/validationActions.js","actions/identityActions.js","actions/bidActions.js","actions/analyticsActions.js","actions/index.js","components/toast/Toast.js","components/toast/styles.js","components/translate/Translate.js","components/confirm/Confirm.js","components/common/rr_hoc/RRHoc.js","components/common/icons/createSvgIconCustom.js","components/common/icons/CampaignIcon.js","components/common/anchor/anchor.js","components/dashboard/dashboard/styles.js","components/dashboard/dashboard/SideSwitch.js","components/common/icons/AdexIconTxt.js","components/common/spinners/index.js","components/dashboard/dashboard/SideNav.js","components/common/button_menu/ButtonMenuMui.js","helpers/logosHelpers.js","components/dashboard/dashboard/TopBar.js","components/common/img/Img.js","components/common/img/styles.js","services/images/crop.js","components/dashboard/forms/ImgForm/ImgForm.js","components/dashboard/forms/ImgForm/styles.js","components/dashboard/forms/ValidImageHoc.js","components/dashboard/forms/ValidItemHoc.js","components/dashboard/containers/ImgDialog/styles.js","components/dashboard/containers/ImgDialog/ImgDialog.js","components/dashboard/containers/SaveBtn/SaveBtn.js","components/dashboard/containers/SaveBtn/styles.js","components/dashboard/containers/ItemHoc/styles.js","components/page_not_found/PageNotFound.js","components/page_not_found/styles.js","components/dashboard/containers/ItemHoc/ItemHoc.js","components/common/dropdown/Dropdown.js","components/common/dropdown/styles.js","components/dashboard/containers/Lists/styles.js","components/dashboard/containers/Lists/Controls.js","components/dashboard/containers/Lists/ListWithControls.js","components/dashboard/collection/Rows.js","components/common/stepper/MaterialUiStepper.js","components/common/stepper/styles.js","components/dashboard/forms/FormSteps.js","components/common/dialog/styles.js","components/common/dialog/WithDialog.js","components/dashboard/forms/items/AdUnit/NewAdUnitHoc.js","components/dashboard/forms/items/AdUnit/AdUnitBasic.js","helpers/utmHelpers.js","components/dashboard/forms/items/AdUnit/AdUnitMedia.js","components/common/autocomplete/common.js","components/common/autocomplete/DownshiftMultiple.js","components/common/autocomplete/DownshiftSingle.js","components/common/autocomplete/Autocomplete.js","components/common/autocomplete/styles.js","components/dashboard/forms/items/AdUnit/AdUnitTargeting.js","components/dashboard/containers/UnitTargets/UnitTargets.js","components/common/dialog/content.js","components/dashboard/forms/items/styles.js","components/dashboard/forms/items/AdUnit/AdUnitFormPreview.js","components/dashboard/forms/items/Campaign/NewCampaignHoc.js","components/dashboard/forms/items/Campaign/CampaignUnits.js","components/common/DateTimePicker/DateTimePicker.js","components/dashboard/forms/items/Campaign/CampaignFinance.js","components/common/DateTimePicker/styles.js","components/dashboard/forms/FormsCommon.js","components/dashboard/forms/items/Campaign/CampaignFormPreview.js","components/dashboard/forms/items/AdSlot/NewAdSlotHoc.js","components/dashboard/forms/items/AdSlot/AdSlotBasic.js","components/dashboard/forms/items/AdSlot/AdSlotMedia.js","components/dashboard/forms/items/AdSlot/AdSlotTargeting.js","components/dashboard/forms/items/AdSlot/AdSlotPreview.js","components/dashboard/forms/items/NewItems.js","components/dashboard/containers/ItemsList/ItemsList.js","components/dashboard/containers/ItemsList/styles.js","components/dashboard/containers/ItemCommon/styles.js","components/dashboard/containers/ItemCommon/ItemCommon.js","components/dashboard/containers/Campaign/Campaign.js","components/dashboard/containers/Campaign/styles.js","components/common/icons/AdexPublisher.js","components/common/icons/AdexAdvertiser.js","components/signin/side-select/SideSelect.js","components/signin/side-select/styles.js","components/common/tooltips/index.js","components/dashboard/containers/DashboardStats/StatsCard.js","components/dashboard/containers/DashboardStats/styles.js","components/dashboard/charts/options.js","components/dashboard/charts/simplified.js","components/App/themeMUi.js","components/dashboard/containers/DashboardStats/BasicStats.js","components/dashboard/containers/DashboardStats/DashboardStats.js","components/dashboard/containers/Unit/Unit.js","components/dashboard/containers/Slot/Slot.js","components/dashboard/containers/Slot/styles.js","components/dashboard/containers/Items/Items.js","components/dashboard/forms/web3/TransactionHoc.js","components/dashboard/forms/web3/WithdrawFromIdentity.js","components/dashboard/forms/web3/WithdrawAnyTokenFromIdentity.js","components/dashboard/forms/web3/SeAddressPrivilege.js","components/dashboard/forms/web3/previews.js","components/dashboard/forms/web3/TransactionPreview.js","components/dashboard/forms/web3/styles.js","components/dashboard/forms/web3/transactions.js","components/dashboard/account/styles.js","components/dashboard/account/AccountInfo.js","components/dashboard/dashboard/Dashboard.js","components/signin/styles.js","components/signin/auth-select/AuthSelect.js","components/signin/auth-select/styles.js","components/signin/ConnectHoc.js","components/signin/identity/IdentityHoc.js","components/signin/identity/styles.js","components/signin/identity/IdentityContractAddressEthDeploy.js","components/common/stepper/ValidItemHoc.js","components/signin/identity/ownerAuth/AuthHoc.js","components/signin/identity/ownerAuth/styles.js","components/signin/identity/ownerAuth/AuthCommon.js","components/signin/identity/ownerAuth/AuthMetamask.js","components/signin/identity/ownerAuth/AuthTrezor.js","components/signin/identity/ownerAuth/AuthLedger.js","components/signin/identity/ownerAuth/AuthMethod.js","components/signin/identity/IdentityContractOwner.js","components/signin/identity/QuickInfo.js","components/signin/identity/QuickDeploy.js","components/signin/identity/QuickLogin.js","components/signin/identity/FullLogin.js","components/signin/identity/ExternalWalletConnect.js","components/signin/identity/IdentitySteps.js","components/signin/identity/Identity.js","components/signin/Home.js","components/common/dialog/JustDialog.js","components/App/Root.js","components/App/App.js","serviceWorker.js","index.js","services/crypto/crypto.js","resources/no-image-box-eddie.jpg","resources/trezor-logo-h.png","resources/ledger_logo_header.png","services/smart-contracts/signers/ledger.js","services/adex-validator/ewt.js","../external \"Module\"","resources/metamask-logo.png","resources/demo-logo.png","resources/video-placeholder.jpg","resources/404.png","resources/download-metamask.png","resources/metamask.png","resources/eddie/eddie-14.png"],"names":["module","exports","__webpack_require__","p","ADD_ITEM","UPDATE_ITEM","UPDATE_NEW_ITEM","RESET_NEW_ITEM","RESET_ALL_NEW_ITEMS","DELETE_ITEM","REMOVE_ITEM_FROM_ITEM","ADD_ITEM_TO_ITEM","UPDATE_ALL_ITEMS","RESET_ALL_ITEMS","SET_CURRENT_ITEM","UPDATE_CURRENT_ITEM","UPDATE_SPINNER","UPDATE_UI","ADD_TOAST","REMOVE_TOAST","CONFIRM_ACTION","UPDATE_NAV","CHANGE_LANGUAGE","UPDATE_ITEM_VALIDATION","RESET_ITEM_VALIDATION","UPDATE_NEW_BID","RESET_NEW_BID","UPDATE_SIGNIN","RESET_SIGNIN","CREATE_ACCOUNT","UPDATE_ACCOUNT","RESET_ACCOUNT","UPDATE_NEW_TRANSACTION","RESET_NEW_TRANSACTION","ADD_WEB3_TRANSACTION","UPDATE_WEB3_TRANSACTION","RESET_WEB3_TRANSACTION","UPDATE_TAGS","ADD_NEW_TAG","UPDATE_IDENTITY","RESET_IDENTITY","UPDATE_GAS_DATA","UPDATE_WALLET","RESET_WALLET","UPDATE_RELAYER_CFG","UPDATE_ANALYTICS","RESET_ANALYTICS","BID_STATES","ExchangeConstants","TIMEOUTS","SignatureModes","constants","AdTypes","AdUnitsTypes","map","type","value","label","split","SORT_PROPERTIES_ITEMS","Object","keys","key","id","FILTER_PROPERTIES_ITEMS","labelIsProp","values","AUTH_TYPES","METAMASK","name","signType","GETH","limit","TREZOR","LEDGER","DEMO","GRANT","QUICK","SEED","ETHEREUM_NETWORKS","1","for","5","production","development","SORT_PROPERTIES_CAMPAIGN","FILTER_PROPERTIES_CAMPAIGN","status.name","UTM_PARAMS","utm_source","utm_medium","utm_campaign","utm_content","VALIDATOR_ANALYTICS_METRICS","VALIDATOR_ANALYTICS_SIDES","VALIDATOR_ANALYTICS_EVENT_TYPES","VALIDATOR_ANALYTICS_TIMEFRAMES","initialState","account","Account","signin","email","password","passConfirm","seed","publicKey","seedCheck","authenticated","newItem","Campaign","plainObj","AdUnit","temp","addUtmLink","AdSlot","currentItem","items","spinners","ui","toasts","confirm","data","nav","side","language","validations","newTransactions","default","web3Transactions","tags","identity","ethNetwork","networkId","gasData","wallet","config","relayer","market","validators","analytics","forEach","eventType","metric","timeframe","getValidatorAnalyticsInitialState","translations","adexTranslations","lang","translate","val","arguments","length","undefined","_ref","_ref$isProp","isProp","_ref$args","args","replace","toUpperCase","translation","Array","isArray","tpl","_","v","arg","component","renderToString","interpolate","a","setLang","lng","updateCfg","current","cfg","newCfg","objectSpread","persistReducers","newState","state","action","Base","updateObject","item","newValues","objModel","filterActions","newCollection","collectionId","collection","defineProperty","itemType","Item","addItem","_id","toAdd","prop","newCol","removeCollectionProp","removeItem","toRemove","newItems","reduce","index","currentItems","ipfs","match","category","types","newLang","newTx","newAddrTxs","pendingTxs","updatePendingTxs","_ref2","pTxs","status","indexOf","hash","push","filter","tx","addr","toConsumableArray","obj","updateObj","txHash","tag","memoryReducers","newSignin","newIdentity","newWallet","spinner","newToast","toast","added","Date","now","concat","t","onConfirm","onCancel","active","noActionBtns","calledOn","newErrors","errors","hasOwnProperty","updateTx","history","createHashHistory","reduxRouterMiddleware","routerMiddleware","configStorage","storage","localStorage","rootReducer","combineReducers","persist","persistCombineReducers","memory","router","connectRouter","configureStore","middlewares","thunk","store","createStore","compose","applyMiddleware","apply","persistor","persistStore","execute","dispatch","getState","miscHelpers","hexToRgbaColorString","hex","alpha","Error","substr","hexToDec","h","parseInt","r","g","b","getErrMsg","err","stack","message","toString","error","isInt","int","shuffleArray","array","sort","Math","random","c","prefix","substring","min","max","floor","this","getRandomInt","maxDaysPast","maxDaysAhead","initialMoment","initial","moment","isMoment","valueOf","add","queryParams","encodeURIComponent","join","createDeepEqualSelector","createSelectorCreator","defaultMemoize","isEqual","selectAccount","selectAuth","createSelector","address","authSig","authType","selectAuthSig","selectWallet","_ref3","selectAccountIdentity","_ref4","selectAccountIdentityAddr","_ref5","selectAccountStats","_ref6","stats","selectAccountStatsFormatted","_ref7","raw","_ref8","formatted","selectIdentity","selectLocation","location","selectNavTitle","navTitle","selectSide","selectSpinners","selectSpinnerById","selectLang","ids","selectTranslations","opts","_opts$isProp","_opts$args","MomentUtils","formatDateTime","timestamp","format","date","formatTokenAmount","amountString","decimals","pretty","formatUnits","commify","formatAddress","formatNumberWithCommas","x","selectAnalytics","selectAnalyticsDataAggr","aggr","selectTotalImpressions","eventCounts","Number","selectTotalMoney","eventPayouts","selectAverageCPM","totalMoney","totalImpressions","selectStatsChartData","_ref9","noLastOne","rest","objectWithoutProperties","_ref10","_ref10$data","slice","memo","time","labels","datasets","parseFloat","parseValueByMetric","selectValidations","selectValidationsById","Looper","_this","timeout","syncAction","loopName","classCallCheck","clearLoopTimeout","loopTimeout","clearTimeout","syncData","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","_x","startLoop","_callee2","_context2","checkLoop","t0","console","_x2","setTimeout","start","getErrorMsg","msg","errMsg","campaignsLoop","Loop","hasAuth","_selectAccount","campaigns","campaignsMapped","getCampaigns","creator","sent","toLowerCase","spec","updateItems","addToast","toastStr","accountStatsLoop","updateAccountStats","analyticsLoop","updateAccountAnalytics","logOut","skipRedirect","statsLoop","resetIdentity","resetAllItems","resetAllNewItems","resetAllBids","resetAccount","resetAnalytics","requester","AdexNodeRequester","baseUrl","getAuthHeaders","authSignature","X-User-Signature","noCacheHeaders","Cache-Control","Expires","Pragma","getUrl","base","route","query","url","fetch","_ref3$route","_ref3$queryParams","_ref3$method","method","body","_ref3$headers","headers","_ref3$authSig","userAddr","_ref3$noCache","authToken","noCache","qp","_authType","demo","Helper","getQuery","hdrs","Requester","process","processResponse","res","dontThrow","json","text","then","statusText","getSession","mode","signature","typedData","signerAddress","JSON","stringify","Content-Type","checkSession","skipErrToast","convertItemToJSON","itemToConvert","created","unix","getAdUnits","postAdUnit","unit","updateAdUnit","getAdSlots","postAdSlot","slot","updateAdSlot","byCreator","getAllCampaigns","all","updateSpinner","updateUi","_ref$label","_ref$timeout","unclosable","anchorOrigin","top","getGuid","removeToast","toastId","confirmAction","_ref2$confirmLabel","confirmLabel","_ref2$cancelLabel","cancelLabel","_ref2$title","title","_ref2$text","updateNav","changeLanguage","addSig","_ref$addr","sig","expiryTime","_ref$identity","setItem","getSig","_ref2$addr","_ref2$identity","sigAndTIme","getItem","grantAccount","ownerAddr","mail","couponCode","getGrantType","checkCoupon","coupon","getOwnerIdentities","owner","sendOpenChannel","txnsRaw","signatures","channel","identityAddr","registerExpectedIdentity","getRelayerConfigData","executeTx","setAddrPriv","_ref11","privLevel","setAddr","regAccount","_ref12","bytecode","identityFactoryAddr","identityBaseAddr","salt","privileges","getQuickWallet","_ref14","backupWallet","_ref15","encryptedWallet","contracts","Identity","abi","AdExCore","DAI","Dai","IdentityFactory","ethers","setLogLevel","localWeb3","provider","adexCore","dai","identityFactory","results","providers","JsonRpcProvider","Contract","abrupt","loadInjectedWeb3","Promise","resolve","reject","window","addEventListener","ethereum","web3","injectedWeb3","enable","Web3Provider","getLocalWeb3","log","getEthers","ethereumSelectedAddress","_callee3","_context3","selectedAddress","utils","getAddress","ethereumNetworkId","_callee4","_context4","networkVersion","getEthereumProvider","_callee5","_context5","isMetaMask","DEFAULT_HD_PATH","TrezorConnect","manifest","appUrl","TrezorSigner","possibleConstructorReturn","getPrototypeOf","call","getAddsParams","_ref$from","from","_ref$to","to","bundle","path","showOnTrezor","getAddresses","_ref3$from","_ref3$to","success","payload","_args","ethereumGetAddress","signTx","params","txProps","txSigned","resolveProperties","hexlify","ethereumSignTransaction","transaction","s","serializeTransaction","sendTransaction","txData","signMessage","_args4","ethereumSignMessage","_x3","connect","_provider","_path","Signer","loadFromLocalStorage","parse","saveToLocalStorage","serialized","warn","getCipherKey","pass","generateSalt","pbkdf2","pbkdf2Sync","generateWallet","mnemonic","randomEntropy","randomBytes","HDNode","entropyToMnemonic","getRandomMnemonic","Wallet","fromMnemonic","privateKey","encrKey","encryptLegacy","encrData","isLegacy","jsonData","encrypt","wEncrypt","decrData","decryptedStr","decryptLegacy","decrypt","wDecrypt","createLocalWallet","_ref7$email","_ref7$password","_ref7$mnemonic","_ref7$authType","walletData","migrateLegacyWallet","_ref8$email","_ref8$password","getLocalWallet","getEncrypted","removeLegacyKey","_ref9$email","_ref9$password","removeFromLocalStorage","addDataToWallet","_ref10$email","_ref10$password","_ref10$dataKey","dataKey","_ref10$dataValue","dataValue","getRecoveryWalletData","props","walletInfo","getAllWallets","_ref13","isWallet","getWalletHash","passwordId","dataStr","keccak256","LocalSigner","_wallet","signetTx","sign","arrayify","MetaMaskSigner","_signer","_args3","t1","t2","t3","getSigner","updateNewTransaction","resetNewTransaction","addWeb3Transaction","updateWeb3Transaction","resetWeb3Transaction","_getSigner","signer","_signer2","_signer3","LedgerSigner","getTypedDataHash","entry","toUtf8Bytes","valuesHash","schema","schemaHash","solidityKeccak256","getAuthSig","_x4","_getAuthSig","MAX_SAFE_INTEGER","_x6","_signTx","_callee6","_context6","Transaction","hashHex","splitSig","getMultipleTxSignatures","_x7","_getMultipleTxSignatures","_callee7","txns","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_context7","Symbol","iterator","done","return","finish","getValidatorRequester","getRequesters","campaign","leader","follower","validator","getValidatorAuthToken","validatorId","existingAuth","token","validatorAuthTokens","era","ewt","sendMessage","_authTokens","options","_getRequesters","followerAuthToken","leaderAuthToken","followerResult","leaderResult","authorization","authTokens","lastApprovedState","closeCampaign","events","identityAnalytics","campaignId","leaderAuth","aggregates","idenityAddr","privilegesNames","valueToKey","IdentityPrivilegeLevel","getAddressBalances","_getAddressBalances","calls","balances","getBalance","balanceOf","serializedPath","balanceEth","balanceDai","getAccountStats","_getAccountStats","_ref2$outstandingBala","outstandingBalanceDai","_identity$status","identityContract","privilegesAction","walletBalanceEth","walletBalanceDai","_ref8$","identityBalanceDai","walletPrivileges","total","bigNumberify","available","deployed","catch","e","slicedToArray","totalOutstandingBalanceDai","availableIdentityBalanceDai","totalIdentityBalanceDai","walletAddress","walletAuthType","formatEther","identityAddress","getOutstandingBalance","_getOutstandingBalance","withBalance","bigZero","allOutstanding","amounts","ch","outstanding","outstandingAvailable","gt","getAllValidatorsAuthForIdentity","_getAllValidatorsAuthForIdentity","allValidators","tokenCalls","allTokens","validatorsAuth","_objectSpread2","_x5","relayerConfig","feeAmountTransfer","IDENTITY_BASE_ADDR","IDENTITY_FACTORY_ADDR","feeAmountSetPrivileges","ERC20","Interface","getRelayerRoutinesAuthAuth","outpace","registry","validUntil","feeTokenAddr","weeklyFeeAmount","relayerAuth","RoutineAuthorization","getIdentityBytecode","_getIdentityBytecode","routineAuthorizations","_ref2$privileges","privSlot","routineAuthsSlot","getProxyDeployBytecode","solc","getIdentityDeployData","_getIdentityDeployData","addReleyerRoutinesAuth","_ref3$relayerRoutineA","relayerRoutineAuthValidUntil","_relayerConfig","registryAddr","identityRecoveryAddr","coreAddr","feeTokenWhitelist","generateAddress2","withdrawFromIdentity","_withdrawFromIdentity","amountToWithdraw","withdrawTo","getFeesOnly","tokenAddress","toWithdraw","sweepTxns","sweepFees","fees","tokenAmount","tokenAddr","tx1","result","parseUnits","getSweepingTxnsIfNeeded","amountNeeded","feeAmount","sub","toGet","functions","transfer","encode","getIdentityTnxsWithNonces","setIdentityPrivilege","_setIdentityPrivilege","identityInterface","setAddrPrivilege","_getIdentityTnxsWithNonces","_ref9$txns","initialNonce","withNonce","nonce","toNumber","i","Core","feeAmountApprove","feeAmountOpen","VALID_UNTIL_COEFFICIENT","VALID_UNTIL_MIN_PERIOD","totalFeesFormatted","toEthereumChannel","specHash","crypto","createHash","update","digest","Channel","depositAsset","depositAmount","getReadyCampaign","newCampaign","activeFrom","withdrawPeriodStart","period","getValidUntil","adUnits","minPerImpression","div","maxPerImpression","eventSubmission","allow","uids","rateLimit","lastChecked","getExpiredWithdrawnOutstanding","withdrawn","states","ChannelState","Active","getWithdrawnPerUserOutstanding","balance","withdrawnPerUser","getChannelsWithOutstanding","_getChannelsWithOutstanding","channels","_relayerConfig$feeTok","channelWithdrawFee","_channel$status","lastApprovedSigs","lastApprovedBalances","allLeafs","entries","_ref16","k","getBalanceLeaf","mTree","MerkleTree","_ref17","_ref19","_ref18","_x9","getChannelsToSweepFrom","amountToSweep","allChannels","_allChannels$filter$s","eligible","c1","c2","sum","lt","getChannelWithdrawData","ethChannelTuple","leaf","proof","vsig1","vsig2","channelWithdraw","getRoot","getSweepChannelsTxns","_getSweepChannelsTxns","_ref20","channelsToSweep","toSolidityTuple","channelWithdrawExpired","_getSweepingTxnsIfNeeded","needed","accountBalance","openChannel","_openChannel","_callee8","_ref21","readyCampaign","openReady","ethChannel","tx2","_context8","approve","channelOpen","closeChannel","_x8","_closeChannel","_callee9","_context9","UPDATE_SETTINGS_INTERVAL","VALIDATOR_LEADER_ID","updateSignin","resetSignin","createAccount","acc","updateAccount","meta","updateGasData","registerAccount","identityTxData","updateAccountSettings","_getState$persist$acc","settings","grantType","updated","doUpdate","newSettings","updateValidatorAuthTokens","newAuth","newTokens","createSession","deleteLegacyKey","sessionSignature","leaderValidatorAuth","getRelayerConfig","getNetworkId","_callee13","_ref25","_context13","getNetwork","chainId","getNetworkData","_callee14","network","_context14","onMetamaskNetworkChange","_getState","search","isMetamaskMatters","t4","t5","_x11","_x12","onMetamaskAccountChange","accountAddress","_account$wallet","identityContractOwner","_x13","_x14","metamaskAccountCheck","_x15","_x16","metamaskNetworkCheck","_callee10","_context10","_x17","_x18","metamaskChecks","_callee11","_context11","on","accounts","_x19","_x20","hasBackup","_callee15","_ref22","_ref26","_context15","makeBackup","_callee16","_ref23","walletSalt","walletHash","_context16","ensureQuickWalletBackup","_ref24","_callee12","_selectWallet","isLocal","_context12","_x23","_x24","isVideoMedia","getMediaSize","mime","src","video","document","createElement","onloadedmetadata","target","width","videoWidth","height","videoHeight","getVideoSize","image","Image","onload","getImageSize","checkExactishAspect","widthTarget","heightTarget","maxPercentTolerance","targetAspect","aspect","aspectDiff","abs","SOURCES","locations","AllCountries","country","genders","Genders","gender","PredefinedTags","custom","AddToastUi","getImgsIpfsFromBlob","tempUrl","resp","blob","imgBlob","URL","revokeObjectURL","imageBlob","_ref3$imageName","imageName","formData","FormData","append","uploadImage","updateNewItem","resetNewItem","addUnit","imageIpfs","resItem","mediaUrl","mediaMime","marketAdd","addSlot","fallbackUnit","resUnit","useFallback","targetUrl","description","targeting","passback","getAllItems","units","slots","resUnits","resSlots","openCampaign","removeItemFromItem","addItemToItem","updateItem","updatedItem","marketUpdate","_x10","deleteItem","_deleted","restoreItem","successMsg","findSourceByTag","find","cloneItem","response","mediaURL","mediaSize","targets","source","placeholder","helpers","getMediaUrlWithProvider","createObjectURL","archiveItem","_archived","unarchiveItem","setCurrentItem","updateCurrentItem","newMeta","updateTags","addNewTag","updateCampaignState","_ref27","_ref28","isEthAddressERC20","contract","isEthAddress","ERC20TokenABI","totalSupply","AddressZero","allowance","getERC20Balance","_ref3$addr","_ref3$balanceFor","balanceFor","isConnectionLost","eth","race","getBlockNumber","urlRegex","emailRegex","passwordRegex","couponRegex","validUrl","test","validEmail","validateNumber","numberStr","isNaN","isFinite","validName","errMsgArgs","validPassword","validQuickAccountCoupon","isEthAddressZero","isZero","validEthAddress","nonZeroAddr","nonERC20","ethAddressZero","ethAddressERC20","validateAddress","dirty","validate","setBalance","isValid","updateValidationErrors","resetValidationErrors","validateId","_ref4$err","_ref4$dirty","_ref4$removeAll","removeAll","validateEmail","validateEmailCheck","emailCheck","validatePassword","validatePasswordCheck","passwordCheck","validateTOS","accepted","validateGrantCode","hasGrantCode","cpn","exist","used","updateIdentity","initIdentity","updateWallet","resetWallet","getGrantAccount","walletAddr","grantCode","identityData","getIdentityTxData","getRegisterExpectedIdentity","onUploadLocalWallet","event","file","reader","onError","files","FileReader","ev","onerror","abort","onabort","readAsText","identityWithdraw","ownerIdentities","addrIdentityPrivilege","getQuickWalletSalt","login","registerAccountAction","validateQuickLogin","actualAuthType","info","identityPrivileges","handleAfterValidation","onValid","onInvalid","validateStandardLogin","identityContractAddress","identityDataSplit","validateQuickDeploy","grantIdentity","validateQuickInfo","tosCheck","every","_x21","updateNewBid","bidId","resetNewBid","updateBids","advBids","pubBids","bidsById","analyticsParams","callsParams","checkAccountChanged","accountCheck","accountChanged","allAnalytics","src_actions","common","itemActions","uiActions","accountActions","identityActions","bidActions","transactionActions","validationActions","analyticsActions","variantIcon","accept","CheckCircleIcon","warning","WarningIcon","cancel","ErrorIcon","InfoIcon","Toast","_Component","close","setState","actions","inherits","createClass","nextProps","nextToast","_classnames","_this2","classes","Icon","vertical","horizontal","react_default","Snackbar","open","autoHideDuration","onClose","SnackbarContent","aria-describedby","className","classnames","icon","iconVariant","IconButton","aria-label","color","onClick","Close_default","snackbar","Component","bindActionCreators","withStyles","theme","spacing","border","borderRadius","backgroundColor","&.active","transform","margin","borderColor","fontSize","opacity","marginRight","display","alignItems","wordBreak","maxWidth","Translate","Decorated","useSelector","assign","Confirm","bind","assertThisInitialized","visible","_this$props","children","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","autoFocus","withReactRouterLink","_React$Component","_getPrototypeOf2","_len","_key","resolveToLocation","pathname","createHref","handleClick","preventDefault","stopPropagation","_this$props2","staticContext","toLocation","href","React","withRouter","createSvgIconCustom","displayName","viewBox","SvgIcon","pure","muiName","d","Anchor","Link","underline","draggable","rel","style","styles","_appBar","_drawerPaper","root","flexGrow","zIndex","overflow","position","minHeight","appBar","left","right","breakpoints","up","flex","flexDirection","flexRow","flexBasis","paddingTop","paddingBottom","&:last-child","paddingRight","paddingLeft","toolbarControls","justifyContent","toolbarTitle","navIconHide","toolbar","flexFlow","mixins","drawerPaper","content","palette","background","padding","marginLeft","contentInner","EddieSwitch","advColor","accentOne","main","pubColor","accentTwo","switchBase","&$checked","&$checked + $track","checked","track","Switch","RRSwitch","ListItem","ListItemText","primary","ListItemSecondaryAction","SideSwitch","fill","InputLoading","_ref$color","LinearProgress","LoadingSection","loading","Box","ml","mr","CircularProgress","RRListItem","ETH_SCAN_ADDR_HOST","useStyles","makeStyles","activeBgColor","navigation","paper","sntPadding","navListRoot","secondary","navList","bottom","overflowY","overflowX","sideNavToolbar","version","borderTopWidth","borderTopColor","divider","borderTopStyle","contrastText","&:focus","adxLink","hint","&:hover","useCommonStyles","SideNav","commonClasses","List","AdexIconTxt","spinners_LoadingSection","Typography","variant","toFixed","gutterBottom","Divider","dashboard_SideSwitch","button","ListItemIcon","Dashboard_default","Fragment","CampaignIcon","List_default","anchor_anchor","HelpOutline_default","SwapHoriz_default","AccountBox_default","getFullYear","packageJson","ImgIcon","alt","ButtonMenu","btnStyle","rightIcon","leftIconSrc","_useState","useState","_useState2","setActive","_useState3","_useState4","anchorEl","setAnchorEl","Boolean","leftIcon","ButtonMenuMui_ImgIcon","currentTarget","aria-owns","aria-haspopup","textOverflow","Menu","getAuthLogo","metamaskLogo","trezorLogo","ledgerLogo","demoLogo","RRMenuItem","MenuItem","handleDrawerToggle","imgSrc","btnMenuLabel","AppBar","Toolbar","Menu_default","react_jazzicon_lib_default","diameter","jsNumberForAddress","ButtonMenuMui","ExpandMore_default","caption","ExitToApp_default","noWrap","MAX_IMG_LOAD_TIME","Img","ipfsSrc","Regexes","ipfsRegex","handleToggle","componentWillReceiveProps","nextSrc","thisSrc","nextFallback","fallbackSrc","displayVideo","setDisplayVideo","fallback","NO_IMAGE","displayImage","setDisplayImage","clearLoadTimeout","loadTimeout","onFail","videoSrc","allowVideo","isVideo","VIDEO_IMAGE","Fab","mini","fullscreenIcon","Fullscreen_default","renderFullscreenDialog","_this$state","dialog","dialogImageParent","dialogImage","imgLoading","onDragStart","autoPlay","muted","loop","controls","_this3","_this$props3","allowFullscreen","fullScreenOnClick","_this$state2","imgParent","wrapper","img","fullScreenBtn","circular","cursor","@media(max-width:744px)","minWidth","@media(max-height:823px)","@media(max-width:1080px)","maxHeight","getCroppedImgUrl","objUrl","pixelCrop","fileName","size","cropCanvas","scaleCanvas","crossOrigin","crop","round","y","getContext","drawImage","toBlob","ImgForm","onDrop","acceptedFiles","rejectedFiles","that","objectUrl","imgName","onChange","onRemove","preventBubbling","onCropChange","saveCropped","croppedBlob","cropMode","nativeEvent","stopImmediatePropagation","UploadInfo","uploadInfo","uploadActions","dropzoneBtn","Crop_default","Clear_default","CloudUpload_default","additionalInfo","_this$state3","imgForm","header","dropzone","Grid","container","alignContent","sm","md","react_image_crop_default","imageStyle","imgDropzonePreview","disabled","Save_default","dist_es","img_Img","marginBottom","grey","marginTop","ValidImageHoc","ValidImage","propsName","mediaWidth","mediaHeight","exact","required","masgArgs","validateMedia","media","ValidationHoc","_ref$err","_ref$dirty","_ref$removeAll","invalidFields","ImgDialog","handleChange","onOk","vals","onChangeReady","errImg","imgPropName","Cancel_default","forms_ImgForm_ImgForm","imgLabel","ValidItemHoc","SaveBtn","dirtyProps","save","validationId","fabButton","Check_default","fabProgress","spinnerId","buttonSuccess","buttonProgress","mediaRoot","buttonRight","buttonLeft","textField","flexWrap","changesLine","changeChip","editIcon","RRButton","PageNotFound","subtitle","goToTxt","goToPath","skipGoToButton","justify","inline","textTransform","IMG_404","adSlotPut","schemas","adUnitPut","AdSizesByValue","ItemsConstants","ItemHoc","dp","returnPropToInitialState","propName","initialItemState","initialItemStateValue","setActiveFields","field","newActiveFields","activeFields","editImg","_activeInput","_this$props4","matchId","nextState","currentItemInst","nexItemInst","modifiedOn","_this$props5","Joi","_this$props6","_this$props7","page_not_found_PageNotFound","isDemo","canEdit","fallbackMediaUrl","titleErr","descriptionErr","Prompt","when","containers_ImgDialog_ImgDialog","updateImgWidth","updateImgHeight","updateImgLabel","updateImgInfoLabel","updateImgExact","updateImgErrMsg","Info_default","Chip","onDelete","xs","lg","FormControl","fullWidth","InputLabel","Input","validateTitle","maxLength","onBlur","onFocus","endAdornment","InputAdornment","Edit_default","FormHelperText","htmlFor","multiline","rows","validateDescription","showLogo","Paper","imgContainer","fullName","pointer","canEditImg","containers_SaveBtn_SaveBtn","inEdit","toggleImgEdit","tryGetItemByIpfs","_ipfs","itemId","Dropdown","_this$props$label","_this$props$source","_this$props$htmlId","htmlId","_this$props$name","_this$props$disabled","_this$props$error","helperText","_this$props$fullWidth","noSrcLabel","formControl","Select","input","spinners_InputLoading","selectEmpty","flexItem","rowButton","rwoButtonRoot","row","bottomControls","listRoot","controlsRoot","pageSize","Pagination","page","pages","goToPrevPage","goToNextPage","goToPage","dropdown_Dropdown","getAllPagedValues","ChevronLeft_default","ChevronRight_default","INT_STRING","mapFilterProps","_ref$filterProps","filterProps","labelArgs","mapSortProperties","_ref2$sortProps","sortProps","ListWithControls","context","newStateValue","filterByValues","filterProperties","filterByValueFilter","handleChangeRxState","uiStateId","changePageSize","newPageSize","itemsLength","searchMatch","regex","RegExp","matchString","exec","filterItems","sortProperty","sortOrder","filterBy","filterArchived","filtered","isItem","archived","o","propA","propB","filteredLength","maxPages","ceil","sortProperties","filteredItems","renderItems","renderRows","startAdornment","Search_default","ArrowUpward_default","ArrowDownward_default","goToLastPage","goToFirstPage","rowsView","viewModeId","Rows","handleRowSelect","selected","newSelected","Table","tableHeadRenderer","TableBody","u","rowRenderer","errColor","&$active","stepperWrapper","pagePaper","pageContent","WebkitOverflowScrolling","@media(max-width:500px)","textAlign","@media(max-width:475px)","mobileStepper","& div","mobileStepLabel","& span","buttonProgressWrapper","errChip","& svg","StepperNav","currentPage","innerWidth","StepLabel","MobileStepper","activeStep","steps","Stepper","alternativeLabel","Step","MaterialStepper","_props$pages","setCurrentPage","canReverse","pageProps","Comp","pageValidation","dirtyErrors","dirtyErrs","getDirtyValidationErrors","isValidPage","useCallback","nextStep","canGoBack","goToPreviousPage","useEffect","onKeyPressed","onKeyPress","stepperNav","MaterialUiStepper_StepperNav","Error_default","disableBtnsIfValid","cancelBtn","cancelFunction","completeBtn","CancelBtn","onSave","stepsId","stepsPages","stepsPreviewPage","validateIdBase","cancelButton","MaterialUiStepper","fullHeight","innerHeight","dialogTitle","wordWrap","&:first-child","contentBox","propRow","contentBody","contentTopLoadingCircular","flexShrink","contentTopLoading","& > div","textBtn","btnIconLeft","leftCol","down","rightCol","progressCircleCenter","floating","breakLong","overflowWrap","hyphens","demoImg","demoBody","contentStickyTop","TextBtn","Transition","Slide","direction","iconButton","textButton","fabVariant","btnLabelArgs","btnLabel","dialogActions","btnProps","setOpen","onBeforeOpen","ButtonComponent","btnLabelTranslated","react","first","second","TransitionComponent","disableTypography","closeDialog","NewAdUnitHoc","ItemForm","saved","adUnitPost","AdUnitBasic","validateAndUpdateType","validateTargetUrl","prevProps","addUtmParameters","removeFromUrl","protocol","host","newQuery","_i","_Object$entries","addUrlUtmTracking","newTemp","errTitle","errDescription","errTargetUrl","TextField","FormControlLabel","control","Checkbox","handleChangeAddUtmLink","getWidAndHightFromType","sizes","handleImgChange","_getWidAndHightFromTy","_getWidAndHightFromTy2","renderInput","inputProps","InputProps","ref","other","inputRef","inputRoot","renderSuggestion","suggestion","itemProps","highlightedIndex","selectedItem","showSelected","isHighlighted","isSelected","fontWeight","getSuggestions","inputValue","allowCreate","validateCreation","trim","includes","newSuggestion","DownshiftMultiple","handleKeyDown","keycode","newItemValue","handleInputChange","handleDelete","splice","openOnClick","allValues","downshift_esm","itemToString","getInputProps","getItemProps","isOpen","inputValue2","selectedItem2","toggleMenu","tabIndex","chip","onKeyDown","square","DownshiftSingle","onInit","errorText","suggestions","clearSelection","react_virtualized_auto_sizer_dist_index_esm","dist_index_esm","itemSize","itemCount","multiple","autocomplete_DownshiftMultiple","autocomplete_DownshiftSingle","marks","SourcesSelect","score","AdUnitTargeting","handleTargetChange","newValue","newTargets","newTarget","updateNewItemCollections","removeTarget","validateAutocomplete","targetTag","autocomplete_Autocomplete","suggestionMatch","showSuggestionsWhenValueIsSet","Slider","slider","markLabel","aria-labelledby","step","valueLabelDisplay","collections","tg","_ref4$target","targetIcon","LocationOnIcon","WcIcon","age","ChildCareIcon","getTargetType","UnitTargets","targetArrayValues","TargetIcon","CompareArrows","isTarget","TargetsList","_ref$targets","subHeader","dense","subheader","ListSubheader","PropRow","classNameLeft","classNameRight","_ref$style","uppercase","ContentBox","ContentBody","ContentStickyTop","TopLoading","subMsg","FullContentSpinner","imgPreview","boxShadow","shadows","imgPreviewWrapper","AdUnitFormPreview","containers_UnitTargets_UnitTargets","NewAdUnitFormPreview","NewCampaignHoc","waitingAction","adUnitsArray","CampaignUnits","handleSelect","validateUnits","hasAdUnits","containers_ItemsList_ItemsList","selectMode","selectedItems","onSelect","listMode","noActions","NewItems_NewUnitDialog","CalendarIconAdor","_ref$icon","DateRange_default","iconColor","onIconClick","DateTimePicker","calendarIcon","material_ui_pickers_esm","DateTimePicker_CalendarIconAdor","datepickerContrastInput","white","datepickerContrastLabel","&$datepickerContrastLabelFocused","datepickerContrastLabelFocused","datepickerContrastUnderline","&:after","&:before","DateTimePicker_DateTimePicker","InputLabelProps","FormLabelClasses","focused","VALIDATOR_LEADER_URL","VALIDATOR_LEADER_FEE","VALIDATOR_FOLLOWER_URL","VALIDATOR_FOLLOWER_ID","VALIDATOR_FOLLOWER_FEE","VALIDATOR_SOURCES","fee","validateCampaignDates","_ref2$created","NewCampaignFinance","validateAndUpdateValidator","newValidators","handleDates","validateAmount","isNumberString","_ref4$availableIdenti","_ref3$maxDeposit","maxDeposit","maxDep","dep","validateAmounts","minTargetingScore","_ref5$availableIdenti","errDepAmnt","errMin","errFrom","errTo","impressions","getTotalImpressions","common_DateTimePicker_DateTimePicker","emptyLabel","disablePast","minDate","maxDate","FormGroup","WalletAction","CampaignFormPreview","AdUnitsTable","noControls","FormsCommon_WalletAction","NewCampaignFormPreview","adSlotPost","NewAdSlotHoc","updateMinPerImpression","validateImage","validateFallbackUrl","handleFallbackChange","_this$props$newItem","errFallbackUrl","Switch_Switch","Collapse","in","AdSlotTargeting","SlotFallback","AdSlotPreview","AdSlotPreview_SlotFallback","NewAdSlotPreview","SaveBtnWithAdUnit","SaveBtnWithCampaign","saveBtnLabel","saveBtnIcon","HourglassEmpty_default","SaveBtnWithAdSlot","esm_extends","CancelBtnWithItem","CancelBtnWithCampaign","CancelBtnWithAdSlot","dialogCommon","darkerBackground","Add_default","NewUnitStepsWithDialog","WithDialog","forms_FormSteps","AdUnitMedia","noDefaultImg","itemModel","NewUnitDialog","copyProps","FileCopy_default","NewCloneUnitDialog","NewCampaignStepsWithDialog","CampaignFinance","imgAdditionalInfo","NewCampaignDialog","NewSlotStepsWithDialog","AdSlotBasic","AdSlotMedia","descriptionHelperTxt","NewSlotDialog","TableCell","TableCell_TableCell","RRTableCell","ItemsList","renderTableHead","TableHead","TableRow","ItemsList_TableCell","renderCampaignTableHead","renderTableRow","cellImg","fallbackMediaiUrl","renderActions","renderCampaignTableRow","firstUnit","fundsDistributedRatio","mul","Tooltip","enterDelay","ItemsList_RRButton","NewItems_NewCloneUnitDialog","collection_Rows","Lists_ListWithControls","archive","card","@media(max-width:380px)","basicInfo","ValidatedFallbackAdData","rightComponent","toggleFallbackImgEdit","errFallbackAdUrl","Card","raised","CardMedia","fallbackTargetUrl","CardContent","ValidatedSlotMinCPM","minCPM","_ref2$prop","_ref2$value","_ref2$item","updateItemTemp","MediaCard","BasicProps","ItemCommon_MediaCard","CampaignProps","VIEW_MODE","handleTabChange","CampaignActions","statistics","CampaignModel","Tabs","scrollable","scrollButtons","indicatorColor","textColor","Tab","removeFromItem","AdUnitModel","CampaignItem","datepicker","RRSideBox","_ref$salePoints","salePoints","linkTitle","sideBox","point","SideSelect","dialogPaper","BackdropProps","backdrop","AdexAdvertiser","AdexPublisher","verticalAlign","&:hover:not(.disabled)","&.disabled","@media(max-width:425px)","& li","listStyle","tooltip","useStylesArrow","black","popper","&[x-placement*=\"bottom\"] $arrow","&::before","borderWidth","&[x-placement*=\"top\"] $arrow","&[x-placement*=\"right\"] $arrow","&[x-placement*=\"left\"] $arrow","arrow","borderStyle","ArrowTooltip","_useStylesArrow","_React$useState","_React$useState2","arrowRef","setArrowRef","PopperProps","popperOptions","modifiers","enabled","element","typography","pxToRem","_ref$bgColor","bgColor","_ref2$bgColor","infoCard","linkCard","&:hover, &:focus","progress","StatsCard","explain","infoStatsContainer","dashboardCardBody","CHARTS_COLORS","CHARTS_COMMON_OPTIONS","responsive","tooltips","cornerRadius","merge","defaults","global","commonDsProps","lineTension","pointRadius","pointHitRadius","SimpleStatistics","_ref$timeframe","_ref$options","_ref$xLabel","xLabel","_ref$y1Label","y1Label","_ref$y2Label","y2Label","_ref$y1Color","y1Color","_ref$y2Color","y2Color","payouts","counts","Chart","pluginService","register","afterDraw","chart","_active","activePoint","controller","ctx","tooltipPosition","topY","scales","bottomY","beginPath","moveTo","lineTo","lineWidth","setLineDash","strokeStyle","stroke","restore","chartData","yAxisID","pointBackgroundColor","linesOptions","maintainAspectRatio","intersect","callbacks","datasetIndex","yLabel","hover","xAxes","gridLines","scaleLabel","labelString","yAxes","ticks","beginAtZero","precision","drawOnChartArea","react_chartjs_2_es","deepOrange","amber","lime","contrastThreshold","tonalOffset","createMuiTheme","fontFamily","overrides","MuiButton","outlined","MuiTableCell","head","whiteSpace","MuiPaper","rounded","MuiTooltip","themeMUI","responsiveFontSizes","factor","timeFrames","tf","translated","metrics","publisher","advertiser","timeHints","hour","day","week","BasicStats","setTimeframe","averageCPM","loadingImpressions","loadingMoney","loadingCPM","DashboardStats_StatsCard","simplified_SimpleStatistics","DashboardStats","goToAccount","side_select_SideSelect","UnitItem","Unit","adUrl","ADVIEW_URL","adviewUrl","origin","AUTO_HIDE_STRING","IntegrationCode","_ref$slot","onCopy","publisherAddr","whitelistedToken","whitelistedType","randomize","marketSlot","iframeStr","integrationLabel","copy","integrationCode","Slot","handleFallbackImgUpdateToggle","editFallbackImg","tabsFocus","scrollIntoView","behavior","block","createRef","Slot_IntegrationCode","SlotItem","alignSelf","Items","newItemBtn","NewTransactionHoc","TransactionHoc","txId","manyTxs","resetTransaction","handleSaveRes","saveFn","txs","txResults","WithdrawFromIdentityForm","numStr","amount","identityAvailable","withdrawAmount","withdrawToSpinner","errAmount","errAddr","WithdrawAnyTokenFromIdentityForm","balanceAnySpinner","tokenBalance","errToken","bal","PRIV_LEVELS_SRC","SeAddressPrivilegeForm","setAddrSpinner","IdentityWithdrawPreview","SetPrivilegePreview","IdentityWithdrawAnyPreview","TransactionPreviewForm","TransactionPreview","gas","getFeesFn","_this$props2$transact","previewWarnMsgs","_transaction$fees","waitingForWalletAction","Warning_default","previews_IdentityWithdrawPreview","previews_SetPrivilegePreview","previews_IdentityWithdrawAnyPreview","A700","centralSpinner","FormStepsWithDialog","FormSteps","txCommon","cancelBtnLabel","WithdrawTokenFromIdentity","WithdrawFromExchangePage","SetIdentityPrivilege","SeAddressPrivilege","WithdrawAnyTokenFromIdentity","WithdrawAnyTokenFromIdentityPage","actionBtn","advancedList","iconBtnLeft","localWalletDownloadHref","walletJsonData","expanded","setExpanded","_formatted$walletAuth","_formatted$walletPriv","_account$wallet2","chr","py","download","SaveAlt_default","pr","widget","RampInstantSDK","hostAppName","hostLogoUrl","swapAsset","userAddress","domNodes","overlay","show","displayRampWidget","CreditCard_default","transactions_WithdrawTokenFromIdentity","identityAvailableRaw","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","heading","ExpansionPanelDetails","transactions_SetIdentityPrivilege","transactions_WithdrawAnyTokenFromIdentity","Campaigns","NewItems_NewCampaignDialog","accent","containers_Items_Items","AdUnits","AdSlots","NewItems_NewSlotDialog","AdSlotModel","Dashboard","mobileOpen","setMobileOpen","drawer","dashboard_SideNav","TopBar","Hidden","mdUp","Drawer","anchor","ModalProps","keepMounted","smDown","implementation","Route","containers_Campaign_Campaign","containers_Unit_Unit","containers_Slot_Slot","account_AccountInfo","DashboardStats_DashboardStats","signinContainer","backgroundRepeat","backgroundSize","backgroundPosition","backgroundImage","require","buttons","adxVersion","adexLogoTop","logo","noBg","limitedWidthBtn","btnLogo","btnLogoNoTxt","metamaskBtn","trezorBtn","AuthSelect","wallets","setWallets","auth","w","goTo","confirmLogout","toExecute","align","m","AuthSelect_RRButton","ConnectHoc","xl","ArrowDropDown_default","auth_select_AuthSelect","IdentityHoc","IdentityForm","ready","waitingExpected","waiting","waitingUpload","infoPaper","gutters","IdentityContractAddressStep","validateIdentity","getIdentityContractData","_this$props$identity","code","validateCode","currIdentity","isValidFormat","waitingCheck","checkAccessCode","paragraph","NewItemHoc","AuthHoc","Auth","hdWalletAddrPath","hdWalletAddrIdx","sideSelect","addrListItem","addrInfo","& strong","addrInfoLabel","tabsContainer","tabLogo","tabLabel","dlBtnImg","leftBtnIcon","AddrItem","installingMetamask","setInstallingMetamask","setAddress","_useState5","_useState6","setStats","_useState7","_useState8","waitingMetamaskAction","setWaitingMetamaskAction","_useState9","_useState10","waitingAddrsData","setWaitingAddrsData","isOpera","opr","opera","navigator","userAgent","_useState11","_useState12","isMetamaskEthereumProvider","setIsMetamaskEthereumProvider","ethereumProvider","setEth","onfocus","reload","checkMetamask","metamaskSigner","_address","_stats","tabBox","METAMASK_IMG","dangerouslySetInnerHTML","__html","METAMASK_DL_IMG","metamaskLAbel","AuthTrezor","connectTrezor","waitingTrezorAction","trezorSigner","addresses","allAddressesData","hdPath","AddressSelect","onAddrSelect","addrData","TREZOR_DL_IMG","AuthLedger","connectLedger","waitingLedgerAction","ledgerSigner","LEDGER_DL_IMG","AuthMethod","ownerAuth_AuthMetamask","ownerAuth_AuthTrezor","ownerAuth_AuthLedger","IdentityContractOwnerStep","validateContractOwner","currOwner","ownerAuth_AuthMethod","QuickInfo","QuickDeploy","QuickLogin","getIdentitiesForDropdown","balanceDAI","FullLogin","updateOwnerIdentities","ExternalConnect","connectType","setConnectType","identity_FullLogin","identity_IdentityContractAddressEthDeploy","IdentitySteps","mapPages","GoBtn","_this$props$stepsPage","goToNextPageIfValid","final","finalValidationQuick","finalValidationStandard","vitalik","SNT_VITALIK_BUTERIN_RIDES_EDDIE_WHILE_PUMPING_IT_UP","DialogHoc","ConnectedCreateQuickIdentity","JustDialog","identity_IdentitySteps","ConnectedQuickLogin","ConnectedCreateFullIdentity","IdentityContractOwner","IdentityContractAddressEthDeploy","ConnectedLoginStandardIdentity","ConnectedRoot","PrivateRoute","render","Redirect","handleLegacyWallet","Root_PrivateRoute","noBackground","onBeforeLift","App","CssBaseline","ThemeProvider","es","integration_react","esm","react_router_dom","App_Root","toast_Toast","confirm_Confirm","hostname","_Object$keys","ReactDOM","components_App_App","getElementById","serviceWorker","registration","unregister","Buffer","__webpack_exports__","getKeyHash","iv","cipher","createCipheriv","encr","encrypted","textParts","shift","encryptedText","decipher","createDecipheriv","decr","createCipher","crypted","createDecipher","dec","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","addrsFromPubKey","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","chainCode","_ref2$from","_ref2$to","hdKey","addrs","derivedKey","HDKey","derive","publicExtendedKey","fromExtendedKey","_ref4$from","_ref4$to","transport","_args2","_transport","create","LedgerEth","txUnsigned","signTransaction","_args5","signPersonalMessage","joinSignature","TransportU2F","HEADER","base64","alg","payloadEncoded","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","sigBuf","verify","parts","verifyMessage","decode","Module"],"mappings":"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","file":"static/js/main.7958962d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/home-wallpaper.9793fae1.jpg\";","export const ADD_ITEM = 'ADD_ITEM'\r\nexport const UPDATE_ITEM = 'UPDATE_ITEM'\r\nexport const UPDATE_NEW_ITEM = 'UPDATE_NEWITEM'\r\nexport const RESET_NEW_ITEM = 'RESET_NEWITEM'\r\nexport const RESET_ALL_NEW_ITEMS = 'RESET_ALL_NEWITEMS'\r\nexport const DELETE_ITEM = 'DELETE_ITEM'\r\nexport const REMOVE_ITEM_FROM_ITEM = 'REMOVE_ITEM_FROM_ITEM'\r\nexport const ADD_ITEM_TO_ITEM = 'ADD_ITEM_TO_ITEM'\r\nexport const UPDATE_ALL_ITEMS = 'UPDATE_ALL_ITEMS' // SYNC?\r\nexport const RESET_ALL_ITEMS = 'RESET_ALL_ITEMS'\r\nexport const SET_CURRENT_ITEM = 'SET_CURRENTITEM'\r\nexport const UPDATE_CURRENT_ITEM = 'UPDATE_CURRENTITEM'\r\nexport const SAVE_CURRENT_ITEM = 'SAVE_CURRENTITEM'\r\nexport const UPDATE_SPINNER = 'UPDATE_SPINNER'\r\nexport const UPDATE_UI = 'UPDATE_UI'\r\nexport const ADD_TOAST = 'ADD_TOAST'\r\nexport const REMOVE_TOAST = 'REMOVE_TOAST'\r\nexport const CONFIRM_ACTION = 'CONFIRM_ACTION'\r\nexport const UPDATE_NAV = 'UPDATE_NAV'\r\nexport const CHANGE_LANGUAGE = 'CHANGE_LANGUAGE'\r\nexport const UPDATE_ITEM_VALIDATION = 'UPDATE_ITEM_VALIDATION'\r\nexport const RESET_ITEM_VALIDATION = 'RESET_ITEM_VALIDATION'\r\nexport const UNIT_PLACE_BID = 'PLACE_BID'\r\nexport const UNIT_CANCEL_BID = 'UNIT_CANCEL_BID'\r\nexport const SLOT_ACCEPT_BID = 'SLOT_ACCEPT_BID'\r\nexport const SLOT_REJECT_BID = 'SLOT_REJECT_BID'\r\nexport const UPDATE_NEW_BID = 'UPDATE_NEW_BID'\r\nexport const RESET_NEW_BID = 'RESET_NEW_BID'\r\nexport const UPDATE_SIGNIN = 'UPDATE_SIGNIN'\r\nexport const RESET_SIGNIN = 'RESET_SIGNIN'\r\nexport const CREATE_ACCOUNT = 'CREATE_ACCOUNT'\r\nexport const UPDATE_ACCOUNT = 'UPDATE_ACCOUNT'\r\nexport const RESET_ACCOUNT = 'RESET_ACCOUNT'\r\nexport const UPDATE_NEW_TRANSACTION = 'UPDATE_NEW_TRANSACTION'\r\nexport const RESET_NEW_TRANSACTION = 'RESET_NEW_TRANSACTION'\r\nexport const ADD_WEB3_TRANSACTION = 'ADD_WEB3_TRANSACTION'\r\nexport const UPDATE_WEB3_TRANSACTION = 'UPDATE_WEB3_TRANSACTION'\r\nexport const RESET_WEB3_TRANSACTION = 'RESET_WEB3_TRANSACTION'\r\nexport const UPDATE_ALL_BIDS = 'UPDATE_ALL_BIDS'\r\nexport const RESET_ALL_BIDS = 'RESET_ALL_BIDS'\r\nexport const UPDATE_TAGS = 'UPDATE_TAGS'\r\nexport const ADD_NEW_TAG = 'ADD_NEW_TAG'\r\nexport const UPDATE_IDENTITY = 'UPDATE_IDENTITY'\r\nexport const RESET_IDENTITY = 'RESET_IDENTITY'\r\nexport const UPDATE_GAS_DATA = 'UPDATE_GAS_DATA'\r\nexport const UPDATE_WALLET = 'UPDATE_WALLET'\r\nexport const RESET_WALLET = 'RESET_WALLET'\r\nexport const UPDATE_RELAYER_CFG = 'UPDATE_RELAYER_CFG'\r\nexport const UPDATE_ANALYTICS = 'UPDATE_ANALYTICS'\r\nexport const RESET_ANALYTICS = 'RESET_ANALYTICS'\r\n","import { exchange as ExchangeConstants } from 'adex-constants'\r\nimport { constants } from 'adex-models'\r\n\r\nconst { BID_STATES, TIMEOUTS } = ExchangeConstants\r\nconst { SignatureModes } = constants\r\nconst AdTypes = constants.AdUnitsTypes.map(type => {\r\n\treturn {\r\n\t\tvalue: type,\r\n\t\tlabel: type.split('_')[1],\r\n\t}\r\n})\r\n\r\nexport const AVATAR_MAX_WIDTH = 600\r\nexport const AVATAR_MAX_HEIGHT = 400\r\n\r\nexport const SORT_PROPERTIES_BIDS = [\r\n\t{ value: '_state', label: '' },\r\n\t{ value: '_target', label: '' },\r\n\t{ value: '_amount', label: '' },\r\n\t{ value: '_timeout', label: '' },\r\n]\r\n\r\nexport const FILTER_PROPERTIES_BIDS = {\r\n\t_state: {\r\n\t\tlabel: '_state',\r\n\t\tlabelIsProp: true,\r\n\t\tvalues: Object.keys(BID_STATES).map(key => {\r\n\t\t\treturn { value: BID_STATES[key].id, label: BID_STATES[key].label }\r\n\t\t}),\r\n\t},\r\n\t_timeout: { label: '_timeout', labelIsProp: true, values: TIMEOUTS },\r\n}\r\n\r\nexport const FILTER_PROPERTIES_BIDS_NO_STATE = {\r\n\t_timeout: FILTER_PROPERTIES_BIDS._timeout,\r\n}\r\n\r\nexport const SORT_PROPERTIES_ITEMS = [\r\n\t{ value: 'created' },\r\n\t{ value: 'title' },\r\n\t{ value: 'type' },\r\n]\r\n\r\nexport const SORT_PROPERTIES_COLLECTION = [\r\n\t{ value: 'created' },\r\n\t{ value: 'title' },\r\n]\r\n\r\nexport const FILTER_PROPERTIES_ITEMS = {\r\n\ttype: { label: 'type', labelIsProp: true, values: AdTypes },\r\n}\r\n\r\nexport const AUTH_TYPES = {\r\n\tMETAMASK: { name: 'metamask', signType: SignatureModes.GETH, limit: 0 },\r\n\tTREZOR: { name: 'trezor', signType: SignatureModes.GETH, limit: 0 },\r\n\tLEDGER: { name: 'ledger', signType: SignatureModes.GETH, limit: 0 },\r\n\tDEMO: { name: 'demo', signType: SignatureModes.GETH, limit: 0 },\r\n\tGRANT: { name: 'grant', signType: SignatureModes.GETH, limit: 50 },\r\n\tQUICK: { name: 'quick', signType: SignatureModes.GETH, limit: 50 },\r\n\tSEED: { name: 'seed', signType: SignatureModes.GETH, limit: 500 },\r\n}\r\n\r\nexport const NETWORK_STATUS = {\r\n\t0: 'pending',\r\n\t1: 'success',\r\n\t2: 'failed',\r\n}\r\n\r\nexport const ETHEREUM_NETWORKS = {\r\n\t1: { name: 'Mainnet', for: 'production' },\r\n\t5: { name: 'Goerli', for: 'development' },\r\n\tproduction: { name: 'Mainnet', for: 'production' },\r\n\tdevelopment: { name: 'Goerli', for: 'development' },\r\n}\r\n\r\nexport const SORT_PROPERTIES_CAMPAIGN = [\r\n\t{ value: 'created', label: 'Created' },\r\n\t{ value: 'status.name', label: 'Status' },\r\n\t{ value: 'withdrawPeriodStart', label: 'Ends' },\r\n\t{ value: 'activeFrom', label: 'Starts' },\r\n\t{ value: 'depositAmount', label: 'depositAmount' },\r\n\t{ value: 'maxPerImpression', label: 'cpm' },\r\n]\r\n\r\nexport const FILTER_PROPERTIES_CAMPAIGN = {\r\n\t'status.name': {\r\n\t\tlabel: 'ststus',\r\n\t\tlabelIsProp: true,\r\n\t\tvalues: [\r\n\t\t\t{ value: 'Pending', label: 'Pending' }, // UI only state\r\n\t\t\t{ value: 'Initializing', label: 'Initializing' },\r\n\t\t\t{ value: 'Offline', label: 'Offline' },\r\n\t\t\t{ value: 'Disconnected', label: 'Disconnected' },\r\n\t\t\t{ value: 'Invalid', label: 'Invalid' },\r\n\t\t\t{ value: 'Unhealthy', label: 'Unhealthy' },\r\n\t\t\t{ value: 'Ready', label: 'Ready' },\r\n\t\t\t{ value: 'Active', label: 'Active' },\r\n\t\t\t{ value: 'Exhausted', label: 'Exhausted' },\r\n\t\t\t{ value: 'Expired', label: 'Expired' },\r\n\t\t],\r\n\t},\r\n}\r\n\r\nexport const UTM_PARAMS = {\r\n\tutm_source: 'ADEX',\r\n\tutm_medium: 'CPM',\r\n\tutm_campaign: 'none',\r\n\tutm_content: 'none',\r\n}\r\n\r\nexport const VALIDATOR_ANALYTICS_METRICS = [\r\n\t'eventPayouts', //\r\n\t'eventCounts',\r\n]\r\nexport const VALIDATOR_ANALYTICS_SIDES = [\r\n\t'advertiser',\r\n\t'publisher', //\r\n]\r\nexport const VALIDATOR_ANALYTICS_EVENT_TYPES = ['IMPRESSION']\r\n\r\n// TEMP: disable long periods\r\nexport const VALIDATOR_ANALYTICS_TIMEFRAMES = [\r\n\t{ label: 'LABEL_HOUR', value: 'hour' },\r\n\t{ label: 'LABEL_DAY', value: 'day' },\r\n\t{ label: 'LABEL_WEEK', value: 'week' },\r\n\t// { label: 'LABEL_MONTH', value: 'month' },\r\n\t// { label: 'LABEL_YEAR', value: 'year' },\r\n]\r\n\r\nexport const MOON_GRAVITY_ACCELERATION = 1.625\r\nexport const MOON_TO_EARTH_WEIGHT = 0.166\r\n","import { AdUnit, AdSlot, Campaign, Account } from 'adex-models'\r\nimport {\r\n\tVALIDATOR_ANALYTICS_SIDES,\r\n\tVALIDATOR_ANALYTICS_EVENT_TYPES,\r\n\tVALIDATOR_ANALYTICS_METRICS,\r\n\tVALIDATOR_ANALYTICS_TIMEFRAMES,\r\n} from 'constants/misc'\r\n\r\nexport const getValidatorAnalyticsInitialState = () => {\r\n\tconst initialState = {}\r\n\r\n\tVALIDATOR_ANALYTICS_SIDES.forEach(side =>\r\n\t\tVALIDATOR_ANALYTICS_EVENT_TYPES.forEach(eventType =>\r\n\t\t\tVALIDATOR_ANALYTICS_METRICS.forEach(metric =>\r\n\t\t\t\tVALIDATOR_ANALYTICS_TIMEFRAMES.forEach(timeframe => {\r\n\t\t\t\t\tinitialState[side] = initialState[side] || {}\r\n\t\t\t\t\tinitialState[side][eventType] = initialState[side][eventType] || {}\r\n\t\t\t\t\tinitialState[side][eventType][metric] =\r\n\t\t\t\t\t\tinitialState[side][eventType][metric] || {}\r\n\t\t\t\t\tinitialState[side][eventType][metric][timeframe.value] =\r\n\t\t\t\t\t\tinitialState[side][eventType][metric][timeframe.value] || {}\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t)\r\n\t)\r\n\r\n\treturn initialState\r\n}\r\n\r\nlet initialState = {\r\n\taccount: new Account(),\r\n\tsignin: {\r\n\t\tname: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\tpassConfirm: '',\r\n\t\tseed: '',\r\n\t\tpublicKey: '',\r\n\t\tseedCheck: [],\r\n\t\tauthenticated: false,\r\n\t},\r\n\tnewItem: {\r\n\t\tCampaign: new Campaign().plainObj(),\r\n\t\tAdUnit: new AdUnit({ temp: { addUtmLink: true } }).plainObj(),\r\n\t\tAdSlot: new AdSlot().plainObj(),\r\n\t},\r\n\tcurrentItem: {},\r\n\titems: {\r\n\t\tCampaign: {},\r\n\t\tAdUnit: {},\r\n\t\tAdSlot: {},\r\n\t},\r\n\tspinners: {},\r\n\tui: {},\r\n\ttoasts: [],\r\n\tconfirm: {\r\n\t\tdata: {},\r\n\t},\r\n\tnav: {\r\n\t\tside: '',\r\n\t},\r\n\tlanguage: 'en-US',\r\n\tvalidations: {},\r\n\tnewTransactions: {\r\n\t\tdefault: {},\r\n\t},\r\n\tweb3Transactions: {},\r\n\ttags: {},\r\n\tidentity: {},\r\n\tethNetwork: {\r\n\t\tnetworkId: null,\r\n\t\tgasData: {},\r\n\t},\r\n\twallet: {},\r\n\tconfig: {\r\n\t\trelayer: {},\r\n\t\tmarket: {},\r\n\t\tvalidators: {},\r\n\t},\r\n\tanalytics: getValidatorAnalyticsInitialState(),\r\n}\r\n\r\nexport default initialState\r\n","import adexTranslations from 'adex-translations'\r\nimport { renderToString } from 'react-dom/server'\r\n\r\nconst translations = adexTranslations()\r\n\r\nlet lang = 'en-US'\r\n\r\n// TODO: sanitization\r\nconst interpolate = (tpl, args) => {\r\n\tif (typeof tpl !== 'string') {\r\n\t\treturn ''\r\n\t}\r\n\r\n\treturn tpl.replace(/\\${(\\w+)}/g, (_, v) => {\r\n\t\tlet arg = args[v]\r\n\t\tif (typeof arg === 'object' && !!arg && arg.component) {\r\n\t\t\treturn renderToString(arg.component)\r\n\t\t} else {\r\n\t\t\treturn arg || ''\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const translate = (\r\n\tval = '',\r\n\t{ isProp = false, args = [''] } = {},\r\n\tlanguage = lang\r\n) => {\r\n\tlet key = val + ''\r\n\tif (isProp) {\r\n\t\tkey = 'PROP_' + key.replace(/^_/, '')\r\n\t}\r\n\r\n\tkey = key.toUpperCase()\r\n\r\n\tlet translation = translations[language][key] || val\r\n\r\n\tif (args.length && Array.isArray(args)) {\r\n\t\tconst translatedArgs = args.map(a => {\r\n\t\t\tif (typeof a === 'string') {\r\n\t\t\t\treturn translations[language][a] || a\r\n\t\t\t} else {\r\n\t\t\t\treturn a\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\ttranslation = interpolate(translation, translatedArgs)\r\n\t}\r\n\r\n\treturn translation\r\n}\r\n\r\n// TODO: fix that\r\nexport const setLang = lng => {\r\n\tlang = lng\r\n}\r\n","import { UPDATE_RELAYER_CFG } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nconst updateCfg = (current, type, cfg) => {\r\n\tconst newCfg = { ...current }\r\n\tnewCfg[type] = { ...cfg }\r\n\treturn newCfg\r\n}\r\n\r\nexport default function uiReducer(state = initialState.config, action) {\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_RELAYER_CFG:\r\n\t\t\treturn updateCfg(state, 'relayer', action.cfg)\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import account from './accountReducer'\r\nimport signin from './signinReducer'\r\nimport identity from './identityReducer'\r\nimport wallet from './walletReducer'\r\nimport items from './itemsReducer'\r\nimport newItem from './newItemsReducer'\r\n// import currentItem from './currentItemsReducer'\r\nimport spinners from './spinnersReducer'\r\nimport ui from './uiReducer'\r\nimport toasts from './toastsReducer'\r\nimport confirm from './confirmReducer'\r\nimport nav from './navReducer'\r\nimport language from './languageReducer'\r\nimport validations from './validateItemsReducer'\r\nimport newTransactions from './newTransactionsReducer'\r\nimport web3Transactions from './web3TransactionsReducer'\r\nimport tags from './tagsReducer'\r\nimport ethNetwork from './ethNetworkReducer'\r\nimport config from './configReducer'\r\nimport analytics from './analyticsReducer'\r\nimport { filterActions } from 'redux-ignore'\r\nimport * as types from 'constants/actionTypes'\r\n\r\nexport const persistReducers = {\r\n\taccount,\r\n\titems: filterActions(items, action => action.type.match(/_ITEM/)),\r\n\tui: filterActions(ui, [types.UPDATE_UI]),\r\n\tlanguage,\r\n\tweb3Transactions,\r\n\ttags,\r\n\tethNetwork,\r\n\tconfig,\r\n\tanalytics,\r\n}\r\n\r\nexport const memoryReducers = {\r\n\tsignin,\r\n\tidentity,\r\n\twallet,\r\n\tnewItem: filterActions(newItem, action => action.type.match(/_NEWITEM/)),\r\n\tspinners: filterActions(spinners, [types.UPDATE_SPINNER]),\r\n\ttoasts,\r\n\tconfirm: filterActions(confirm, [types.CONFIRM_ACTION]),\r\n\tnav: filterActions(nav, [types.UPDATE_NAV]),\r\n\tvalidations,\r\n\tnewTransactions,\r\n}\r\n","import {\r\n\tCREATE_ACCOUNT,\r\n\tRESET_ACCOUNT,\r\n\tUPDATE_ACCOUNT,\r\n} from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\nimport { Base, Account } from 'adex-models'\r\n\r\nexport default function accountReducer(state = initialState.account, action) {\r\n\tlet newState\r\n\tlet newAccount\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase CREATE_ACCOUNT:\r\n\t\t\tnewAccount = { ...action.account }\r\n\t\t\tnewState = newAccount\r\n\t\t\treturn newState\r\n\t\tcase RESET_ACCOUNT:\r\n\t\t\tnewAccount = initialState.account\r\n\t\t\tnewState = newAccount\r\n\t\t\treturn newState\r\n\t\tcase UPDATE_ACCOUNT:\r\n\t\t\tnewAccount = Base.updateObject({\r\n\t\t\t\titem: newState,\r\n\t\t\t\tnewValues: { ...action.newValues },\r\n\t\t\t\tobjModel: Account,\r\n\t\t\t})\r\n\t\t\tnewState = newAccount\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tADD_ITEM,\r\n\tDELETE_ITEM,\r\n\tUPDATE_ITEM,\r\n\tREMOVE_ITEM_FROM_ITEM,\r\n\tADD_ITEM_TO_ITEM,\r\n\tUPDATE_ALL_ITEMS,\r\n\tRESET_ALL_ITEMS,\r\n} from 'constants/actionTypes' // eslint-disable-line no-unused-vars\r\nimport initialState from 'store/initialState'\r\nimport { Item } from 'adex-models'\r\n\r\nexport default function itemsReducer(state = initialState.items, action) {\r\n\tlet newState\r\n\tlet newCollection\r\n\tlet newItem\r\n\tlet collectionId\r\n\tlet item\r\n\r\n\tconst collection = (state = {}, action) => {\r\n\t\tif (!action.item) return state\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\t[action.item.id]: action.item,\r\n\t\t}\r\n\t}\r\n\r\n\tconst removeCollectionProp = (collection = {}, prop) => {\r\n\t\tlet newCol = { ...collection }\r\n\t\tdelete newCol[prop]\r\n\t\treturn newCol\r\n\t}\r\n\r\n\tif (action.item && action.itemType) {\r\n\t\tnewState = { ...state }\r\n\t\titem = { ...action.item }\r\n\t\tcollectionId = action.itemType\r\n\t}\r\n\r\n\tswitch (action.type) {\r\n\t\tcase ADD_ITEM:\r\n\t\t\t// TODO: the item should come here ready (with id from bc and ipsf)\r\n\t\t\t// id is going to be set when it comes here\r\n\t\t\tnewItem = item\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase ADD_ITEM_TO_ITEM:\r\n\t\t\tnewItem = Item.addItem(newState[collectionId][item._id], action.toAdd)\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase DELETE_ITEM:\r\n\t\t\tnewCollection = removeCollectionProp(newState[collectionId], item._id)\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase REMOVE_ITEM_FROM_ITEM:\r\n\t\t\tnewItem = Item.removeItem(\r\n\t\t\t\tnewState[collectionId][item._id],\r\n\t\t\t\taction.toRemove\r\n\t\t\t)\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase UPDATE_ITEM:\r\n\t\t\tnewItem = item\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase UPDATE_ALL_ITEMS:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tconst newItems = action.items.reduce((items, item, index) => {\r\n\t\t\t\tconst currentItems = { ...items }\r\n\t\t\t\tconst newItem = { ...item }\r\n\t\t\t\tcurrentItems[newItem.id || newItem.ipfs] = newItem\r\n\t\t\t\treturn currentItems\r\n\t\t\t}, newState[action.itemType])\r\n\r\n\t\t\tnewState[action.itemType] = newItems\r\n\t\t\treturn newState\r\n\t\tcase RESET_ALL_ITEMS:\r\n\t\t\tnewState = { ...initialState.items }\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_UI } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function uiReducer(state = initialState.ui, action) {\r\n\tlet newState\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_UI:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tif (action.category) {\r\n\t\t\t\tnewState[action.category] = { ...newState[action.category] }\r\n\t\t\t\tnewState[action.category][action.item] = action.value\r\n\t\t\t} else {\r\n\t\t\t\tnewState[action.item] = action.value\r\n\t\t\t}\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import initialState from 'store/initialState'\r\nimport { CHANGE_LANGUAGE } from 'constants/actionTypes'\r\nimport { setLang } from 'services/translations/translations'\r\n\r\nexport default function languageReducer(state = initialState.language, action) {\r\n\tswitch (action.type) {\r\n\t\tcase CHANGE_LANGUAGE:\r\n\t\t\tlet newLang = action.lang || state\r\n\t\t\tsetLang(newLang)\r\n\t\t\treturn newLang\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tADD_WEB3_TRANSACTION,\r\n\tUPDATE_WEB3_TRANSACTION,\r\n\tRESET_WEB3_TRANSACTION,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function web3TransactionsReducer(\r\n\tstate = initialState.web3Transactions,\r\n\taction\r\n) {\r\n\tlet newState\r\n\tlet newTx\r\n\tlet newAddrTxs\r\n\tlet pendingTxs\r\n\r\n\tnewState = { ...state }\r\n\r\n\t// No model update\r\n\tconst updateObj = ({ obj, key, val }) => {\r\n\t\tobj = obj || {}\r\n\t\tobj[key] = val\r\n\r\n\t\treturn obj\r\n\t}\r\n\r\n\tconst updatePendingTxs = ({ pTxs, newTx }) => {\r\n\t\tif (newTx.status === 0 && pTxs.indexOf(newTx.hash)) {\r\n\t\t\tpTxs.push(newTx.hash)\r\n\t\t} else {\r\n\t\t\tpTxs = pTxs.filter(tx => tx !== newTx.hash)\r\n\t\t}\r\n\r\n\t\treturn pTxs\r\n\t}\r\n\r\n\tif (!action.addr) {\r\n\t\treturn state\r\n\t}\r\n\r\n\tnewAddrTxs = { ...(newState[action.addr] || {}) }\r\n\tpendingTxs = [...(newAddrTxs.pendingTxs || [])]\r\n\r\n\t// NOTE: keep transaction by address in order to keep them in the persist storage when the user is switch\r\n\t// If we keep the transactions on the node we can clean them from local storage on address change\r\n\tswitch (action.type) {\r\n\t\tcase ADD_WEB3_TRANSACTION:\r\n\t\t\tnewTx = { ...action.value }\r\n\t\t\tnewAddrTxs[action.tx] = newTx\r\n\t\t\tnewAddrTxs.pendingTxs = updatePendingTxs({\r\n\t\t\t\tpTxs: pendingTxs,\r\n\t\t\t\tnewTx: newTx,\r\n\t\t\t})\r\n\t\t\tnewState[action.addr] = newAddrTxs\r\n\t\t\treturn newState\r\n\t\tcase UPDATE_WEB3_TRANSACTION:\r\n\t\t\tnewTx = { ...(newAddrTxs[action.tx] || {}) }\r\n\t\t\tnewTx = updateObj({ obj: newTx, key: action.key, val: action.value })\r\n\t\t\tnewAddrTxs[action.tx] = newTx\r\n\t\t\tnewAddrTxs.pendingTxs = updatePendingTxs({\r\n\t\t\t\tpTxs: pendingTxs,\r\n\t\t\t\tnewTx: newTx,\r\n\t\t\t})\r\n\t\t\tnewState[action.addr] = newAddrTxs\r\n\t\t\treturn newState\r\n\t\tcase RESET_WEB3_TRANSACTION:\r\n\t\t\tnewTx = { ...initialState.web3Transactions.default }\r\n\t\t\tnewAddrTxs[action.tx] = newTx\r\n\t\t\tnewAddrTxs.pendingTxs = updatePendingTxs({\r\n\t\t\t\tpTxs: pendingTxs,\r\n\t\t\t\tnewTx: { txHash: action.tx },\r\n\t\t\t})\r\n\t\t\tnewState[action.tx] = newTx\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_TAGS, ADD_NEW_TAG } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function tagsReducer(state = initialState.tags, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_TAGS:\r\n\t\t\tnewState = { ...state, ...action.tags }\r\n\t\t\treturn newState\r\n\t\tcase ADD_NEW_TAG:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState[action.tag] = action.tag\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_GAS_DATA } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function tagsReducer(state = initialState.tags, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_GAS_DATA:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState.gasData = { ...action.gasData }\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_ANALYTICS, RESET_ANALYTICS } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function analyticsReducer(\r\n\tstate = initialState.analytics,\r\n\taction\r\n) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_ANALYTICS:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState[action.side] = { ...newState[action.side] }\r\n\t\t\tnewState[action.side][action.eventType] = {\r\n\t\t\t\t...newState[action.side][action.eventType],\r\n\t\t\t}\r\n\t\t\tnewState[action.side][action.eventType][action.metric] = {\r\n\t\t\t\t...newState[action.side][action.eventType][action.metric],\r\n\t\t\t}\r\n\t\t\tnewState[action.side][action.eventType][action.metric][\r\n\t\t\t\taction.timeframe\r\n\t\t\t] = { ...action.value }\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_ANALYTICS:\r\n\t\t\tnewState = { ...initialState.analytics }\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_SIGNIN, RESET_SIGNIN } from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function signinReducer(state = initialState.signin, action) {\r\n\tlet newState\r\n\tlet newSignin\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_SIGNIN:\r\n\t\t\tnewSignin = { ...newState }\r\n\t\t\tif (Array.isArray(newSignin[action.prop])) {\r\n\t\t\t\tnewSignin[action.prop] = [...action.value]\r\n\t\t\t} else {\r\n\t\t\t\tnewSignin[action.prop] = action.value\r\n\t\t\t}\r\n\r\n\t\t\tnewState = newSignin\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_SIGNIN:\r\n\t\t\tnewSignin = { ...initialState.signin }\r\n\t\t\tnewState = newSignin\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_IDENTITY, RESET_IDENTITY } from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function identityReducer(state = initialState.identity, action) {\r\n\tlet newState\r\n\tlet newIdentity\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_IDENTITY:\r\n\t\t\tnewIdentity = newState\r\n\t\t\tif (Array.isArray(newIdentity[action.prop])) {\r\n\t\t\t\tnewIdentity[action.prop] = [...action.value]\r\n\t\t\t} else {\r\n\t\t\t\tnewIdentity[action.prop] = action.value\r\n\t\t\t}\r\n\r\n\t\t\tnewState = newIdentity\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_IDENTITY:\r\n\t\t\tnewIdentity = { ...initialState.identity }\r\n\t\t\tnewState = newIdentity\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_WALLET, RESET_WALLET } from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function walletReducer(state = initialState.wallet, action) {\r\n\tlet newState\r\n\tlet newWallet\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_WALLET:\r\n\t\t\tnewWallet = newState\r\n\t\t\tif (Array.isArray(newWallet[action.prop])) {\r\n\t\t\t\tnewWallet[action.prop] = [...action.value]\r\n\t\t\t} else {\r\n\t\t\t\tnewWallet[action.prop] = action.value\r\n\t\t\t}\r\n\r\n\t\t\tnewState = newWallet\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_WALLET:\r\n\t\t\tnewWallet = { ...initialState.wallet }\r\n\t\t\tnewState = newWallet\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tUPDATE_NEW_ITEM,\r\n\tRESET_NEW_ITEM,\r\n\tRESET_ALL_NEW_ITEMS,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function newItemsReducer(state = initialState.newItem, action) {\r\n\tlet newState\r\n\tlet newItem\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_NEW_ITEM:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewItem = { ...action.item }\r\n\t\t\tnewState[action.itemType] = newItem\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_NEW_ITEM:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewItem = { ...initialState.newItem[action.item] }\r\n\t\t\tnewState[action.item] = newItem\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_ALL_NEW_ITEMS:\r\n\t\t\tnewState = { ...initialState.newItem }\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_SPINNER, UPDATE_ITEM } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function spinnersReducer(state = initialState.spinners, action) {\r\n\tlet newState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_SPINNER:\r\n\t\t\tnewState[action.spinner] = action.value\r\n\r\n\t\t\treturn newState\r\n\t\tcase UPDATE_ITEM:\r\n\t\t\tnewState['update' + action.item._id] = false\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { ADD_TOAST, REMOVE_TOAST } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function toastsReducer(state = initialState.toasts, action) {\r\n\tlet newState\r\n\tlet newToast\r\n\r\n\tswitch (action.type) {\r\n\t\tcase ADD_TOAST:\r\n\t\t\tnewToast = { ...action.toast }\r\n\t\t\tnewToast.added = Date.now()\r\n\t\t\tnewState = [newToast, ...state]\r\n\t\t\treturn newState\r\n\r\n\t\tcase REMOVE_TOAST:\r\n\t\t\tnewState = state.filter(t => t.id !== action.toast)\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { CONFIRM_ACTION } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n// import Helper from './../helpers/miscHelpers'\r\n\r\nexport default function confirmReducer(state = initialState.confirm, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase CONFIRM_ACTION:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState.data = { ...action.confirm.data }\r\n\t\t\tnewState.onConfirm = action.confirm.onConfirm\r\n\t\t\tnewState.onCancel = action.confirm.onCancel\r\n\t\t\tnewState.active =\r\n\t\t\t\taction.confirm.active !== undefined ? action.confirm.active : true\r\n\t\t\tnewState.noActionBtns = !!action.confirm.noActionBtns\r\n\r\n\t\t\t// Force react-redux connect to update props if confirm is called again with same action\r\n\t\t\tnewState.calledOn = Date.now()\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_NAV } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function navReducer(state = initialState.nav, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_NAV:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState[action.item] = action.value\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tUPDATE_ITEM_VALIDATION,\r\n\tRESET_ITEM_VALIDATION,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function validateItemsReducer(\r\n\tstate = initialState.validations,\r\n\taction\r\n) {\r\n\tlet newState\r\n\tlet newErrors\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_ITEM_VALIDATION:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewErrors = { ...newState[action.item], ...action.errors }\r\n\t\t\tnewState[action.item] = newErrors\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_ITEM_VALIDATION:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewErrors = { ...newState[action.item] }\r\n\t\t\tif (newErrors && newErrors.hasOwnProperty(action.key)) {\r\n\t\t\t\t// TODO: Keep it like that or change canAdvance function\r\n\t\t\t\tdelete newErrors[action.key]\r\n\t\t\t} else if (newErrors && !action.key) {\r\n\t\t\t\tnewErrors = {}\r\n\t\t\t}\r\n\r\n\t\t\tnewState[action.item] = newErrors\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tUPDATE_NEW_TRANSACTION,\r\n\tRESET_NEW_TRANSACTION,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function newTransactionsReducer(\r\n\tstate = initialState.newTransactions,\r\n\taction\r\n) {\r\n\tlet newState\r\n\tlet newTx\r\n\r\n\tnewState = { ...state }\r\n\r\n\t// No model update\r\n\tconst updateTx = ({ tx, key, val }) => {\r\n\t\ttx = tx || {}\r\n\t\ttx[key] = val\r\n\r\n\t\treturn tx\r\n\t}\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_NEW_TRANSACTION:\r\n\t\t\tnewTx = {\r\n\t\t\t\t...(newState[action.tx] || initialState.newTransactions.default),\r\n\t\t\t}\r\n\t\t\tnewTx = updateTx({ tx: newTx, key: action.key, val: action.value })\r\n\r\n\t\t\t// console.log('newTx', newTx)\r\n\t\t\tnewState[action.tx] = newTx\r\n\t\t\treturn newState\r\n\t\tcase RESET_NEW_TRANSACTION:\r\n\t\t\tnewTx = { ...initialState.newTransactions.default }\r\n\t\t\tnewState[action.tx] = newTx\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { createHashHistory } from 'history'\r\n\r\nconst history = createHashHistory()\r\n\r\nexport default history\r\n","import { createStore, compose, applyMiddleware, combineReducers } from 'redux'\r\nimport reduxImmutableStateInvariant from 'redux-immutable-state-invariant'\r\nimport thunk from 'redux-thunk'\r\nimport { persistReducers, memoryReducers } from 'reducers'\r\nimport history from './history'\r\nimport { routerMiddleware, connectRouter } from 'connected-react-router'\r\nimport { persistStore, persistCombineReducers } from 'redux-persist'\r\nimport localStorage from 'redux-persist/es/storage'\r\n// import session from 'redux-persist/lib/storage/session'\r\n\r\nconst reduxRouterMiddleware = routerMiddleware(history)\r\n\r\nconst configStorage = {\r\n\tkey: 'persist',\r\n\tstorage: localStorage,\r\n}\r\n\r\n// const configSession = {\r\n//   key: 'session',\r\n//   storage: session,\r\n// }\r\n\r\n// const rootReducer = combineReducers(reducers)\r\n\r\n// TODO: make session reducer(signin) - RAM reducer (no persist)\r\nconst rootReducer = combineReducers({\r\n\tpersist: persistCombineReducers(configStorage, persistReducers),\r\n\tmemory: combineReducers(memoryReducers), // persistCombineReducers(configSession, sessionReducers), //\r\n\trouter: connectRouter(history),\r\n})\r\n\r\nconst logger = store => next => action => {\r\n\t// if (action.type === 'UPDATE_NEWITEM') {\r\n\t//   return next(action)\r\n\t// }\r\n\r\n\tconsole.groupCollapsed(action.type)\r\n\tconsole.info('dispatching', action)\r\n\tlet result = next(action)\r\n\tconsole.log('next state', store.getState())\r\n\tconsole.groupEnd(action.type)\r\n\treturn result\r\n}\r\n\r\nfunction configureStoreProd(initialState) {\r\n\tconst middlewares = [\r\n\t\t// Add other middleware on this line...\r\n\r\n\t\t// thunk middleware can also accept an extra argument to be passed to each thunk action\r\n\t\t// https://github.com/gaearon/redux-thunk#injecting-a-custom-argument\r\n\t\tthunk,\r\n\t\treduxRouterMiddleware,\r\n\t\t// logger\r\n\t]\r\n\r\n\tlet store = createStore(\r\n\t\trootReducer,\r\n\t\tinitialState,\r\n\t\tcompose(applyMiddleware(...middlewares))\r\n\t)\r\n\r\n\tlet persistor = persistStore(store)\r\n\r\n\treturn { persistor, store }\r\n}\r\n\r\nfunction configureStoreDev(initialState) {\r\n\tconst middlewares = [\r\n\t\t// Add other middleware on this line...\r\n\r\n\t\t// Redux middleware that spits an error on you when you try to mutate your state either inside a dispatch or between dispatches.\r\n\t\treduxImmutableStateInvariant(),\r\n\r\n\t\t// thunk middleware can also accept an extra argument to be passed to each thunk action\r\n\t\t// https://github.com/gaearon/redux-thunk#injecting-a-custom-argument\r\n\t\tthunk,\r\n\t\treduxRouterMiddleware,\r\n\t\tlogger,\r\n\t]\r\n\r\n\tconst composeEnhancers =\r\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose // add support for Redux dev tools\r\n\tconst store = createStore(\r\n\t\trootReducer,\r\n\t\tinitialState,\r\n\t\tcomposeEnhancers(applyMiddleware(...middlewares))\r\n\t)\r\n\r\n\tif (module.hot) {\r\n\t\t// Enable Webpack hot module replacement for reducers\r\n\t\tmodule.hot.accept('../reducers', () => {\r\n\t\t\tconst nextReducer = require('../reducers').default // eslint-disable-line global-require\r\n\t\t\tstore.replaceReducer(nextReducer)\r\n\t\t})\r\n\t}\r\n\r\n\tlet persistor = persistStore(store)\r\n\treturn { persistor, store }\r\n}\r\n\r\nconst configureStore =\r\n\tprocess.env.NODE_ENV === 'production' ? configureStoreProd : configureStoreDev\r\n\r\nexport default configureStore()\r\n","import configureStore from 'store/configureStore'\r\nconst { store } = configureStore\r\n\r\nexport const execute = store.dispatch\r\n\r\nexport const dispatch = store.dispatch\r\n\r\nexport const getState = () => {\r\n\treturn store.getState()\r\n}\r\n","import moment from 'moment'\r\n\r\n// TODO: separate exports - not class\r\nclass Helper {\r\n\tgetGuid() {\r\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t\tvar r = (Math.random() * 16) | 0,\r\n\t\t\t\tv = c === 'x' ? r : (r & 0x3) | 0x8 // eslint-disable-line no-mixed-operators\r\n\t\t\treturn v.toString(16)\r\n\t\t})\r\n\t}\r\n\r\n\tgetRndHash32(prefix) {\r\n\t\tlet h = 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t\tvar r = (Math.random() * 16) | 0,\r\n\t\t\t\tv = c === 'x' ? r : (r & 0x3) | 0x8 // eslint-disable-line no-mixed-operators\r\n\t\t\treturn v.toString(16)\r\n\t\t})\r\n\t\tif (prefix) {\r\n\t\t\th = prefix + h.substring(prefix.length)\r\n\t\t}\r\n\t\treturn h\r\n\t}\r\n\r\n\tgetRandomInt(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1) + min)\r\n\t}\r\n\r\n\tgetRandomBool() {\r\n\t\treturn !!this.getRandomInt(0, 1)\r\n\t}\r\n\r\n\tgetRandomPropFromObj(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn obj[keys[(keys.length * Math.random()) << 0]]\r\n\t}\r\n\r\n\tgetRandomKeyFromObj(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn keys[(keys.length * Math.random()) << 0]\r\n\t}\r\n\r\n\tgeRandomMoment(maxDaysPast, maxDaysAhead, initialMoment) {\r\n\t\t// TODO: fix +/- 1 day bug\r\n\t\tlet initial = moment.isMoment(initialMoment)\r\n\t\t\t? initialMoment.valueOf()\r\n\t\t\t: undefined\r\n\r\n\t\treturn moment(initial)\r\n\t\t\t.add(this.getRandomInt(-maxDaysPast, maxDaysAhead), 'd')\r\n\t\t\t.add(this.getRandomInt(-24, 24), 'h')\r\n\t\t\t.add(this.getRandomInt(-60, 60), 'm')\r\n\t}\r\n\r\n\thexToRgbaColorString = (hex, alpha) => {\r\n\t\tif (!hex || typeof hex !== 'string') {\r\n\t\t\tthrow new Error('Invalid color')\r\n\t\t} else if (hex.length === 4) {\r\n\t\t\thex = hex + hex.substr(1, 4)\r\n\t\t}\r\n\r\n\t\tif (typeof alpha === 'object' || typeof alpha === 'undefined') {\r\n\t\t\talpha = 1\r\n\t\t}\r\n\r\n\t\tconst hexToDec = h => {\r\n\t\t\treturn parseInt('0x' + h, 16)\r\n\t\t}\r\n\r\n\t\tlet r = hexToDec(hex.substr(1, 2))\r\n\t\tlet g = hexToDec(hex.substr(3, 2))\r\n\t\tlet b = hexToDec(hex.substr(5, 2))\r\n\r\n\t\treturn `rgba(${r},${g},${b},${alpha})`\r\n\t}\r\n\r\n\tgetQuery(queryParams) {\r\n\t\tif (\r\n\t\t\t!queryParams ||\r\n\t\t\t(typeof queryParams === 'object' && !Object.keys(queryParams).length)\r\n\t\t) {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t'?' +\r\n\t\t\t\tObject.keys(queryParams)\r\n\t\t\t\t\t.filter(key => queryParams[key] !== undefined)\r\n\t\t\t\t\t.map(key => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tencodeURIComponent(key) +\r\n\t\t\t\t\t\t\t'=' +\r\n\t\t\t\t\t\t\tencodeURIComponent(queryParams[key])\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}, '')\r\n\t\t\t\t\t.join('&') || ''\r\n\t\t)\r\n\t}\r\n\r\n\tgetErrMsg = err => {\r\n\t\tlet stack = (err.message || err || '').toString().split(/\\r\\n|\\n|\\r/g)\r\n\r\n\t\tif (stack.length > 1) {\r\n\t\t\treturn (err.name ? err.name + ': ' : '') + stack[0].toString()\r\n\t\t} else {\r\n\t\t\treturn (err.error || err || '').toString()\r\n\t\t}\r\n\t}\r\n\r\n\tisInt = int => {\r\n\t\treturn typeof int === 'number' && int % 1 === 0\r\n\t}\r\n\r\n\tshuffleArray = array => {\r\n\t\treturn [...array].sort(() => Math.random() - 0.5)\r\n\t}\r\n}\r\n\r\nexport default new Helper()\r\n","import { createSelectorCreator, defaultMemoize } from 'reselect'\r\nimport isEqual from 'lodash.isequal'\r\n\r\n// deep equal memoization instad reference check\r\nexport const createDeepEqualSelector = createSelectorCreator(\r\n\tdefaultMemoize,\r\n\tisEqual\r\n)\r\n","import { createSelector } from 'reselect'\r\nimport { createDeepEqualSelector } from './selectors'\r\n\r\nexport const selectAccount = state => state.persist.account\r\n\r\nexport const selectAuth = createSelector(\r\n\tselectAccount,\r\n\t({ wallet, identity }) =>\r\n\t\t!!wallet &&\r\n\t\t!!wallet.address &&\r\n\t\t!!wallet.authSig &&\r\n\t\t!!wallet.authType &&\r\n\t\t!!identity.address\r\n)\r\n\r\nexport const selectAuthSig = createSelector(\r\n\tselectAccount,\r\n\t({ wallet }) => wallet.authSig\r\n)\r\n\r\nexport const selectWallet = createDeepEqualSelector(\r\n\tselectAccount,\r\n\t({ wallet }) => wallet\r\n)\r\n\r\nexport const selectAccountIdentity = createSelector(\r\n\tselectAccount,\r\n\t({ identity }) => identity\r\n)\r\n\r\nexport const selectAccountIdentityAddr = createSelector(\r\n\tselectAccountIdentity,\r\n\t({ address }) => address\r\n)\r\n\r\nexport const selectAccountStats = createSelector(\r\n\tselectAccount,\r\n\t({ stats }) => stats || {}\r\n)\r\n\r\nexport const selectAccountStatsRaw = createSelector(\r\n\tselectAccountStats,\r\n\t({ raw }) => raw || {}\r\n)\r\n\r\nexport const selectAccountStatsFormatted = createSelector(\r\n\tselectAccountStats,\r\n\t({ formatted }) => formatted || {}\r\n)\r\n","export const selectIdentity = state => state.memory.identity\r\n","export const selectLocation = state => state.router.location\r\n","import { createSelector } from 'reselect'\r\n\r\nexport const selectNavTitle = state => state.memory.nav.navTitle\r\nexport const selectSide = state => state.memory.nav.side\r\n\r\nexport const selectSpinners = state => state.memory.spinners\r\n\r\nexport const selectSpinnerById = createSelector(\r\n\t[selectSpinners, (_, id) => id],\r\n\t(spinners, id) => spinners[id]\r\n)\r\n\r\nexport const selectMultipleSpinnersByIds = createSelector(\r\n\t[selectSpinners, (_, ids) => ids],\r\n\t(spinners, ids) => ids.map(id => spinners[id])\r\n)\r\n","import { createSelector } from 'reselect'\r\nimport { getState } from 'actions'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nexport const selectLang = state => state.persist.language\r\n\r\nexport const selectTranslations = createSelector(\r\n\t[\r\n\t\tselectLang,\r\n\t\t(_, val, opts = {}) => {\r\n\t\t\treturn { val, opts }\r\n\t\t},\r\n\t],\r\n\t(lang, { val, opts }) => {\r\n\t\tconst { isProp = false, args = [''] } = opts\r\n\t\treturn translate(val, { isProp, args }, lang)\r\n\t}\r\n)\r\n\r\n// Need to useSelector for language in top component where this will be used\r\n// Now this is don by using Translate Hoc on Root\r\n// It will work in actions too as the state isg get when they are called and don't need update\r\nexport const t = (val, opts) => selectTranslations(getState(), val, opts)\r\n","import { formatUnits, commify } from 'ethers/utils'\r\nimport MomentUtils from '@date-io/moment'\r\nconst moment = new MomentUtils()\r\n\r\nconst DEFAULT_DATETIME_FORMAT = 'YYYY-MM-DD HH:mm'\r\n\r\nexport const formatDateTime = (timestamp, format = DEFAULT_DATETIME_FORMAT) => {\r\n\tif (!timestamp) {\r\n\t\treturn 'no date'\r\n\t}\r\n\tconst date = moment.date(timestamp)\r\n\treturn date.format(format)\r\n}\r\n\r\nexport const formatTokenAmount = (amountString, decimals = 18, pretty) => {\r\n\tconst formatted = formatUnits(amountString, decimals)\r\n\tif (pretty) {\r\n\t\treturn commify(formatted)\r\n\t} else {\r\n\t\treturn formatted\r\n\t}\r\n}\r\n\r\nexport const formatAddress = (address = '') => {\r\n\treturn `${address.substring(0, 8)}...${address.substring(36, 42)}`\r\n}\r\n\r\nexport const formatNumberWithCommas = x => {\r\n\treturn x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\r\n}\r\n","import { createSelector } from 'reselect'\r\nimport { formatTokenAmount, formatDateTime } from 'helpers/formatters'\r\n\r\nexport const selectAnalytics = state => state.persist.analytics\r\n\r\nexport const selectAnalyticsData = createSelector(\r\n\t[selectAnalytics, (_, side) => side],\r\n\t(analytics, side) => {\r\n\t\treturn analytics[side] || {}\r\n\t}\r\n)\r\n\r\nexport const selectAnalyticsDataAggr = createSelector(\r\n\t[selectAnalytics, (_, opts = {}) => opts],\r\n\t(analytics, { side, eventType, metric, timeframe }) => {\r\n\t\treturn analytics[side][eventType][metric][timeframe].aggr\r\n\t}\r\n)\r\n\r\nexport const selectTotalImpressions = createSelector(\r\n\t(state, { side, timeframe } = {}) =>\r\n\t\tselectAnalyticsDataAggr(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType: 'IMPRESSION',\r\n\t\t\tmetric: 'eventCounts',\r\n\t\t}),\r\n\teventCounts =>\r\n\t\teventCounts\r\n\t\t\t? eventCounts.reduce((a, { value }) => a + Number(value) || 0, 0)\r\n\t\t\t: null\r\n)\r\n\r\nexport const selectTotalMoney = createSelector(\r\n\t(state, { side, timeframe } = {}) =>\r\n\t\tselectAnalyticsDataAggr(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType: 'IMPRESSION',\r\n\t\t\tmetric: 'eventPayouts',\r\n\t\t}),\r\n\teventPayouts =>\r\n\t\teventPayouts\r\n\t\t\t? eventPayouts.reduce(\r\n\t\t\t\t\t(a, { value }) => a + Number(formatTokenAmount(value, 18)) || 0,\r\n\t\t\t\t\t0\r\n\t\t\t  )\r\n\t\t\t: null\r\n)\r\n\r\nexport const selectAverageCPM = createSelector(\r\n\t[\r\n\t\t(state, { side, timeframe } = {}) =>\r\n\t\t\tselectTotalMoney(state, { side, timeframe }),\r\n\t\t(state, { side, timeframe } = {}) =>\r\n\t\t\tselectTotalImpressions(state, { side, timeframe }),\r\n\t],\r\n\t(totalMoney, totalImpressions) =>\r\n\t\ttotalMoney !== null && totalImpressions !== null\r\n\t\t\t? (1000 * Number(totalMoney)) / Number(totalImpressions)\r\n\t\t\t: null\r\n)\r\n\r\nconst parseValueByMetric = ({ value, metric }) => {\r\n\tswitch (metric) {\r\n\t\tcase 'eventPayouts':\r\n\t\t\treturn parseFloat(formatTokenAmount(value, 18))\r\n\t\tcase 'eventCounts':\r\n\t\t\treturn parseInt(value, 10)\r\n\t\tdefault:\r\n\t\t\treturn value\r\n\t}\r\n}\r\n\r\nexport const selectStatsChartData = createSelector(\r\n\t[\r\n\t\t(state, { noLastOne, ...rest } = {}) => {\r\n\t\t\treturn { data: selectAnalyticsDataAggr(state, rest), noLastOne, ...rest }\r\n\t\t},\r\n\t],\r\n\t({ data = [], noLastOne, metric, ...rest }) => {\r\n\t\tconst aggr = noLastOne ? data.slice(0, -1) : data\r\n\t\treturn aggr.reduce(\r\n\t\t\t(memo, item) => {\r\n\t\t\t\tconst { time, value } = item\r\n\t\t\t\tmemo.labels.push(formatDateTime(time))\r\n\t\t\t\tmemo.datasets.push(parseValueByMetric({ value, metric }))\r\n\t\t\t\treturn memo\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabels: [],\r\n\t\t\t\tdatasets: [],\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n)\r\n","import { createSelector } from 'reselect'\r\n\r\nexport const selectValidations = state => state.memory.validations\r\n\r\nexport const selectValidationsById = createSelector(\r\n\t[selectValidations, (_, id) => id],\r\n\t(validations, id) => validations[id]\r\n)\r\n\r\nexport const selectMultipleValidationsByIds = createSelector(\r\n\t[selectValidations, (_, ids) => ids],\r\n\t(validations, ids) => ids.map(id => validations[id])\r\n)\r\n","export default class Looper {\r\n\tconstructor({ timeout, syncAction, loopName = '' }) {\r\n\t\tif (!timeout) {\r\n\t\t\tthrow new Error('LOOPER timeout prop is required')\r\n\t\t}\r\n\r\n\t\tif (typeof syncAction !== 'function') {\r\n\t\t\tthrow new Error('LOOPER syncAction prop is has to be a function')\r\n\t\t}\r\n\r\n\t\tthis.loopTimeout = null\r\n\t\tthis.timeout = timeout\r\n\t\tthis.syncAction = syncAction\r\n\t}\r\n\r\n\tclearLoopTimeout = () => {\r\n\t\tif (this.loopTimeout) {\r\n\t\t\tclearTimeout(this.loopTimeout)\r\n\t\t\tthis.loopTimeout = null\r\n\t\t}\r\n\t}\r\n\r\n\tsyncData = async opts => {\r\n\t\tawait this.syncAction()\r\n\t}\r\n\r\n\tstartLoop = async opts => {\r\n\t\ttry {\r\n\t\t\tawait this.syncData(opts)\r\n\t\t\tthis.checkLoop()\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(`ERR_LOOP${this.loopName}`, err)\r\n\t\t\tthis.checkLoop()\r\n\t\t}\r\n\t}\r\n\r\n\tcheckLoop = () => {\r\n\t\tthis.clearLoopTimeout()\r\n\r\n\t\tthis.loopTimeout = setTimeout(this.startLoop, this.timeout)\r\n\t}\r\n\r\n\tstart = () => {\r\n\t\tthis.clearLoopTimeout()\r\n\t\tthis.startLoop()\r\n\t}\r\n\r\n\tstop = () => {\r\n\t\tthis.clearLoopTimeout()\r\n\t}\r\n}\r\n","export const getErrorMsg = err => {\r\n\tif (!err) {\r\n\t\treturn ''\r\n\t} else if (typeof err === 'object') {\r\n\t\treturn err.msg || err.message || err.errMsg || err.error\r\n\t} else if (Array.isArray(err)) {\r\n\t\treturn err.join(', ')\r\n\t} else {\r\n\t\treturn err\r\n\t}\r\n}\r\n","import Loop from './loop'\r\nimport { getState, updateItems, execute, addToast } from 'actions'\r\nimport { getCampaigns } from 'services/adex-market/actions'\r\nimport { selectAccount, selectAuth } from 'selectors'\r\nimport { MOON_GRAVITY_ACCELERATION, MOON_TO_EARTH_WEIGHT } from 'constants/misc'\r\nimport { getErrorMsg } from 'helpers/errors'\r\n\r\nconst LOOP_TIMEOUT =\r\n\t(69 - Math.floor(MOON_GRAVITY_ACCELERATION / MOON_TO_EARTH_WEIGHT)) * 500\r\n\r\nconst syncCampaigns = async () => {\r\n\tconst hasAuth = selectAuth(getState())\r\n\tconst { wallet, identity } = selectAccount(getState())\r\n\tconst { authSig } = wallet\r\n\tconst { address } = identity\r\n\r\n\tif (hasAuth && authSig && address) {\r\n\t\ttry {\r\n\t\t\tconst campaigns = await getCampaigns({ authSig, creator: address })\r\n\r\n\t\t\tconst campaignsMapped = campaigns\r\n\t\t\t\t.filter(\r\n\t\t\t\t\tc => c.creator && c.creator.toLowerCase() === address.toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t\t.map(c => {\r\n\t\t\t\t\treturn { ...c, ...c.spec }\r\n\t\t\t\t})\r\n\r\n\t\t\texecute(updateItems({ items: campaignsMapped, itemType: 'Campaign' }))\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_CAMPAIGNS', err)\r\n\t\t\texecute(\r\n\t\t\t\taddToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\ttoastStr: 'ERR_GETTING_ITEMS',\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst campaignsLoop = new Loop({\r\n\ttimeout: LOOP_TIMEOUT,\r\n\tsyncAction: syncCampaigns,\r\n\tloopName: '_CAMPAIGNS',\r\n})\r\n\r\nexport default campaignsLoop\r\n","import Loop from './loop'\r\nimport { execute, updateAccountStats } from 'actions'\r\n\r\nconst LOOP_TIMEOUT = 30 * 1000\r\n\r\nconst accountStatsLoop = new Loop({\r\n\ttimeout: LOOP_TIMEOUT,\r\n\tsyncAction: () => execute(updateAccountStats()),\r\n\tloopName: '_ACCOUNTS_STATS',\r\n})\r\n\r\nexport default accountStatsLoop\r\n","import Loop from './loop'\r\nimport { execute, updateAccountAnalytics } from 'actions'\r\n\r\nconst LOOP_TIMEOUT = 120 * 1000\r\n\r\nconst analyticsLoop = new Loop({\r\n\ttimeout: LOOP_TIMEOUT,\r\n\tsyncAction: () => execute(updateAccountAnalytics()),\r\n\tloopName: '_ANALYTICS',\r\n})\r\n\r\nexport default analyticsLoop\r\n","import {\r\n\tgetState,\r\n\texecute,\r\n\tresetAllNewItems,\r\n\tresetAllItems,\r\n\tresetAllBids,\r\n\tresetIdentity,\r\n\tresetAccount,\r\n\tresetAnalytics,\r\n} from 'actions'\r\n\r\nimport campaignsLoop from 'services/store-data/campaigns'\r\nimport statsLoop from 'services/store-data/account'\r\nimport analyticsLoop from 'services/store-data/analytics'\r\n\r\nimport { push } from 'connected-react-router'\r\n\r\nexport const logOut = skipRedirect => {\r\n\tanalyticsLoop.stop()\r\n\tcampaignsLoop.stop()\r\n\tstatsLoop.stop()\r\n\tif (!skipRedirect) {\r\n\t\texecute(push('/'))\r\n\t}\r\n\texecute(resetIdentity())\r\n\texecute(resetAllItems())\r\n\texecute(resetAllNewItems())\r\n\texecute(resetAllBids())\r\n\texecute(resetAccount())\r\n\texecute(resetAnalytics())\r\n}\r\n\r\nexport const isDemoMode = () => {\r\n\treturn getState().persist.account._authType === 'demo'\r\n}\r\n\r\nexport const getAccount = () => {\r\n\treturn getState().persist.account\r\n}\r\n","import requester from './requester'\r\n\r\nexport default requester\r\n","import Helper from 'helpers/miscHelpers'\r\nimport { getState } from 'actions'\r\nimport { selectAuthSig } from 'selectors'\r\nimport { isDemoMode } from 'services/store-data/auth'\r\n\r\nclass AdexNodeRequester {\r\n\tconstructor({ baseUrl }) {\r\n\t\tthis.baseUrl = baseUrl\r\n\t}\r\n\r\n\tgetAuthHeaders = ({ authSig } = {}) => {\r\n\t\tconst authSignature = selectAuthSig(getState())\r\n\t\treturn {\r\n\t\t\t'X-User-Signature': authSig || authSignature,\r\n\t\t}\r\n\t}\r\n\r\n\tnoCacheHeaders = {\r\n\t\t'Cache-Control': 'no-cache',\r\n\t\tExpires: '0',\r\n\t\tPragma: 'no-cache',\r\n\t}\r\n\r\n\tgetUrl = (base, route, query) => {\r\n\t\tlet url = base + '/'\r\n\t\tif (route) {\r\n\t\t\troute = route.replace(/^\\//, '')\r\n\t\t\turl += route\r\n\t\t}\r\n\r\n\t\turl += query\r\n\r\n\t\treturn url\r\n\t}\r\n\r\n\tfetch = ({\r\n\t\troute = '',\r\n\t\tqueryParams = {},\r\n\t\tmethod = 'GET',\r\n\t\tbody,\r\n\t\theaders = {},\r\n\t\tuserAddr,\r\n\t\tauthSig = '',\r\n\t\tauthToken,\r\n\t\tnoCache = false,\r\n\t}) => {\r\n\t\tconst qp = { ...queryParams }\r\n\t\tif (isDemoMode()) {\r\n\t\t\tqp.demo = true\r\n\t\t}\r\n\r\n\t\tconst query = Helper.getQuery(qp)\r\n\t\tconst url = this.getUrl(this.baseUrl, route, query)\r\n\r\n\t\tconst hdrs = {\r\n\t\t\t...(noCache ? this.noCacheHeaders : {}),\r\n\t\t\t...this.getAuthHeaders({ authSig }),\r\n\t\t\t...headers,\r\n\t\t}\r\n\t\treturn fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: hdrs,\r\n\t\t\tbody: body,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport default AdexNodeRequester\r\n","import Requester from 'services/requester'\r\nimport { logOut } from 'services/store-data/auth'\r\nimport moment from 'moment'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nconst ADEX_MARKET_HOST = process.env.ADEX_MARKET_HOST\r\nconst requester = new Requester({ baseUrl: ADEX_MARKET_HOST })\r\n\r\nconst processResponse = (res, dontThrow) => {\r\n\tif (res.status >= 200 && res.status < 400) {\r\n\t\treturn res.json()\r\n\t}\r\n\r\n\treturn res.text().then(text => {\r\n\t\tif (res.status === 401 || res.status === 403) {\r\n\t\t\tlogOut()\r\n\t\t}\r\n\t\tif (!dontThrow) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\ttranslate('SERVICE_ERROR_MSG', {\r\n\t\t\t\t\targs: [res.url, res.status, res.statusText, text],\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const getSession = ({\r\n\tidentity,\r\n\tmode,\r\n\tsignature,\r\n\tauthToken,\r\n\thash,\r\n\ttypedData,\r\n\tsignerAddress,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'auth/',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tidentity,\r\n\t\t\t\tmode,\r\n\t\t\t\tsignature,\r\n\t\t\t\tauthToken,\r\n\t\t\t\thash,\r\n\t\t\t\ttypedData,\r\n\t\t\t\tsignerAddress,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const checkSession = ({ authSig, skipErrToast }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'session',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tauthSig,\r\n\t\t\tskipErrToast,\r\n\t\t})\r\n\t\t.then(res => processResponse(res, true))\r\n}\r\n\r\nexport const uploadImage = ({ imageBlob, imageName = '', authSig }) => {\r\n\tconst formData = new FormData()\r\n\tformData.append('media', imageBlob, imageName)\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'media',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: formData,\r\n\t\t\tauthSig,\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nconst convertItemToJSON = item => {\r\n\tconst itemToConvert = { ...item }\r\n\tif (itemToConvert.created && moment.isMoment(itemToConvert.created)) {\r\n\t\titemToConvert.created = moment.unix(itemToConvert.created) / 1000\r\n\t}\r\n\r\n\treturn JSON.stringify(itemToConvert)\r\n}\r\n\r\nexport const getAdUnits = ({ identity }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'units',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams: { identity },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const postAdUnit = ({ unit, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'units',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: convertItemToJSON(unit),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const updateAdUnit = ({ unit, id, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `units/${id}`,\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tbody: convertItemToJSON(unit),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getAdSlots = ({ identity }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'slots',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams: { identity },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const postAdSlot = ({ slot, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'slots',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: convertItemToJSON(slot),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const updateAdSlot = ({ slot, id, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `slots/${id}`,\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tbody: convertItemToJSON(slot),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getCampaigns = ({ authSig, creator }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'campaigns/by-owner',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tnoCache: true,\r\n\t\t\tqueryParams: {\r\n\t\t\t\tbyCreator: creator, //\r\n\t\t\t\tt: Date.now(),\r\n\t\t\t},\r\n\t\t\tauthSig,\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getAllCampaigns = all => {\r\n\tconst queryParams = all\r\n\t\t? {\r\n\t\t\t\tall: true,\r\n\t\t  }\r\n\t\t: {}\r\n\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'campaigns',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams,\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport Helper from 'helpers/miscHelpers'\r\n\r\nexport function updateSpinner(item, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_SPINNER,\r\n\t\t\tspinner: item,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateUi(item, value, category) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_UI,\r\n\t\t\titem: item,\r\n\t\t\tvalue: value,\r\n\t\t\tcategory: category,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function addToast({\r\n\ttype,\r\n\taction,\r\n\tlabel = '',\r\n\ttimeout = false,\r\n\tunclosable,\r\n\tanchorOrigin,\r\n\ttop,\r\n}) {\r\n\treturn function(dispatch) {\r\n\t\tconst id = Helper.getGuid()\r\n\t\tdispatch({\r\n\t\t\ttype: types.ADD_TOAST,\r\n\t\t\ttoast: {\r\n\t\t\t\ttype,\r\n\t\t\t\taction,\r\n\t\t\t\tlabel,\r\n\t\t\t\ttimeout,\r\n\t\t\t\tunclosable,\r\n\t\t\t\tanchorOrigin,\r\n\t\t\t\ttop,\r\n\t\t\t\tid,\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn id\r\n\t}\r\n}\r\n\r\nexport function removeToast(toastId) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.REMOVE_TOAST,\r\n\t\t\ttoast: toastId,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function confirmAction(\r\n\tonConfirm,\r\n\tonCancel,\r\n\t{ confirmLabel = '', cancelLabel = '', title = '', text = '' } = {},\r\n\tnoActionBtns,\r\n\tactive\r\n) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.CONFIRM_ACTION,\r\n\t\t\tconfirm: {\r\n\t\t\t\tonConfirm: onConfirm,\r\n\t\t\t\tonCancel: onCancel,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tconfirmLabel: confirmLabel,\r\n\t\t\t\t\tcancelLabel: cancelLabel,\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t},\r\n\t\t\t\tnoActionBtns,\r\n\t\t\t\tactive,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateNav(item, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NAV,\r\n\t\t\titem: item,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function changeLanguage(lang) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.CHANGE_LANGUAGE,\r\n\t\t\tlang: lang,\r\n\t\t})\r\n\t}\r\n}\r\n","export const addSig = ({\r\n\taddr = '',\r\n\tsig,\r\n\tmode,\r\n\texpiryTime,\r\n\tidentity = 'notset',\r\n}) => {\r\n\tif (!addr || !sig || !expiryTime || mode === undefined) {\r\n\t\tthrow new Error('addSig - all args are required')\r\n\t}\r\n\r\n\tlocalStorage.setItem(\r\n\t\t'addr-' + mode + '-' + addr.toLowerCase() + '-' + identity,\r\n\t\tsig + '-' + expiryTime\r\n\t)\r\n}\r\n\r\nexport const getSig = ({ addr = '', identity = '', mode }) => {\r\n\tlet sigAndTIme = localStorage.getItem(\r\n\t\t'addr-' + mode + '-' + addr.toLowerCase() + '-' + identity\r\n\t)\r\n\r\n\tif (!sigAndTIme) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tsigAndTIme = sigAndTIme.split('-')\r\n\tlet sig = sigAndTIme[0]\r\n\tlet time = sigAndTIme[1]\r\n\r\n\tif (!time || parseInt(time, 10) <= Date.now()) {\r\n\t\treturn null\r\n\t} else {\r\n\t\treturn sig\r\n\t}\r\n}\r\n","import Requester from 'services/requester'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nconst ADEX_RELAYER_HOST = process.env.ADEX_RELAYER_HOST\r\nconst requester = new Requester({ baseUrl: ADEX_RELAYER_HOST })\r\n\r\nconst processResponse = res => {\r\n\tif (res.status >= 200 && res.status < 400) {\r\n\t\treturn res.json()\r\n\t}\r\n\r\n\treturn res.text().then(text => {\r\n\t\tthrow new Error(\r\n\t\t\ttranslate('SERVICE_ERROR_MSG', {\r\n\t\t\t\targs: [res.url, res.status, res.statusText, text],\r\n\t\t\t})\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport const identityToEmail = ({ identity, privileges, mail }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/info-mail',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tidentity,\r\n\t\t\t\tprivileges,\r\n\t\t\t\tmail,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const grantAccount = ({ ownerAddr, mail, couponCode }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/grant-account',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tmail,\r\n\t\t\t\townerAddr,\r\n\t\t\t\tcouponCode,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getGrantType = ({ identity }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/grant-type/${identity}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const checkCoupon = ({ coupon }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/valid-coupon/${coupon}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const checkAccessCode = ({ code }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/valid-accesscode/${code}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getOwnerIdentities = ({ owner }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/owners/${owner}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const identityBytecode = ({ owner, privLevel, identityBaseAddr }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/identity-bytecode',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\towner,\r\n\t\t\t\tprivLevel,\r\n\t\t\t\tidentityBaseAddr,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const sendOpenChannel = ({\r\n\ttxnsRaw,\r\n\tsignatures,\r\n\tchannel,\r\n\tidentityAddr,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'channel/open',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxnsRaw,\r\n\t\t\t\tsignatures,\r\n\t\t\t\tchannel,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const registerExpectedIdentity = ({ owner, mail }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/register-expected',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\towner,\r\n\t\t\t\tmail,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getRelayerConfigData = () => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'relayer/cfg',\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const executeTx = ({ txnsRaw, signatures, identityAddr }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/execute',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxnsRaw,\r\n\t\t\t\tsignatures,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const setAddrPriv = ({\r\n\ttxnsRaw,\r\n\tsignatures,\r\n\tidentityAddr,\r\n\tprivLevel,\r\n\tsetAddr,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/set-addr-privilege',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxnsRaw,\r\n\t\t\t\tsignatures,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t\tsetAddr,\r\n\t\t\t\tprivLevel,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const regAccount = ({\r\n\towner,\r\n\temail,\r\n\tbytecode,\r\n\tidentityFactoryAddr,\r\n\tidentityBaseAddr,\r\n\tsalt,\r\n\tidentityAddr,\r\n\tprivileges,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/register',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\towner,\r\n\t\t\t\temail,\r\n\t\t\t\tbytecode,\r\n\t\t\t\tidentityFactoryAddr,\r\n\t\t\t\tidentityBaseAddr,\r\n\t\t\t\tsalt,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t\tprivileges,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const quickWalletSalt = ({ email }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `wallet/salt/${encodeURIComponent(email)}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getQuickWallet = ({ hash }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `wallet/${encodeURIComponent(hash)}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const backupWallet = ({ email, salt, hash, encryptedWallet }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `wallet`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\temail,\r\n\t\t\t\tsalt,\r\n\t\t\t\thash,\r\n\t\t\t\tencryptedWallet,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n","import Identity from './build/Identity.json'\r\nimport AdExCore from './build/AdExCore.json'\r\nimport Dai from './build/Dai.json'\r\nimport IdentityFactory from './build/IdentityFactory.json'\r\n\r\nexport const contracts = {\r\n\tIdentity: {\r\n\t\tabi: Identity.abi,\r\n\t},\r\n\tAdExCore: {\r\n\t\taddress: process.env.ADEX_CORE_ADDR,\r\n\t\tabi: AdExCore.abi,\r\n\t},\r\n\tDAI: {\r\n\t\taddress: process.env.DAI_TOKEN_ADDR,\r\n\t\tabi: Dai.abi,\r\n\t\tdecimals: 18,\r\n\t},\r\n\tIdentityFactory: {\r\n\t\taddress: process.env.IDENTITY_FACTORY_ADDR,\r\n\t\tabi: IdentityFactory.abi,\r\n\t},\r\n}\r\n","import { ethers, utils } from 'ethers'\r\nimport { contracts } from './contractsCfg'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\n\r\nethers.errors.setLogLevel('error')\r\n\r\nconst { AdExCore, Identity, DAI, IdentityFactory } = contracts\r\n\r\nconst localWeb3 = async () => {\r\n\tconst provider = new ethers.providers.JsonRpcProvider(\r\n\t\tprocess.env.WEB3_NODE_ADDR\r\n\t)\r\n\tconst adexCore = new ethers.Contract(AdExCore.address, AdExCore.abi, provider)\r\n\tconst dai = new ethers.Contract(DAI.address, DAI.abi, provider)\r\n\tconst identityFactory = new ethers.Contract(\r\n\t\tIdentityFactory.address,\r\n\t\tIdentityFactory.abi,\r\n\t\tprovider\r\n\t)\r\n\r\n\tconst results = {\r\n\t\tprovider: provider,\r\n\t\tAdExCore: adexCore,\r\n\t\tIdentity: Identity,\r\n\t\tDai: dai,\r\n\t\tIdentityFactory: identityFactory,\r\n\t}\r\n\r\n\treturn results\r\n}\r\n\r\nconst loadInjectedWeb3 = new Promise((resolve, reject) => {\r\n\twindow.addEventListener('load', () => {\r\n\t\tconst ethereum = window.ethereum\r\n\t\tconst web3 = window.web3\r\n\t\treturn resolve({\r\n\t\t\tethereum,\r\n\t\t\tweb3,\r\n\t\t})\r\n\t})\r\n})\r\n\r\nconst injectedWeb3 = async () => {\r\n\tconst { web3, ethereum } = await loadInjectedWeb3.then()\r\n\tlet provider = null\r\n\tlet adexCore = null\r\n\tlet dai = null\r\n\tlet identityFactory = null\r\n\r\n\tif (ethereum) {\r\n\t\ttry {\r\n\t\t\tawait ethereum.enable()\r\n\r\n\t\t\tprovider = new ethers.providers.Web3Provider(ethereum)\r\n\t\t\tadexCore = new ethers.Contract(AdExCore.address, AdExCore.abi, provider)\r\n\t\t\tdai = new ethers.Contract(DAI.address, DAI.abi, provider)\r\n\t\t\tidentityFactory = new ethers.Contract(\r\n\t\t\t\tIdentityFactory.address,\r\n\t\t\t\tIdentityFactory.abi,\r\n\t\t\t\tprovider\r\n\t\t\t)\r\n\t\t\tconst results = {\r\n\t\t\t\tprovider: provider,\r\n\t\t\t\tAdExCore: adexCore,\r\n\t\t\t\tIdentity: Identity,\r\n\t\t\t\tDai: dai,\r\n\t\t\t\tIdentityFactory: identityFactory,\r\n\t\t\t}\r\n\r\n\t\t\treturn results\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Err getting injected ethereum.', err)\r\n\t\t\tthrow new Error(err.message)\r\n\t\t}\r\n\t}\r\n\t// Legacy dapp browsers...\r\n\t// TODO: we just have to throw or show notification\r\n\t// At the moment if it throws it will show error toast but not always.\r\n\telse if (web3) {\r\n\t\tconsole.error('Legacy web3 browser detected. It is not supported!')\r\n\t\tconsole.error('Fallback to local web3 provider')\r\n\t\treturn await localWeb3()\r\n\t} else {\r\n\t\tconsole.error('Non-Ethereum browser detected.')\r\n\t\tconsole.error('Fallback to local web3 provider')\r\n\t\treturn await localWeb3()\r\n\t}\r\n}\r\n\r\nconst getLocalWeb3 = new Promise(function(resolve, reject) {\r\n\tconsole.log('getLocalWeb3')\r\n\tresolve(localWeb3())\r\n})\r\n\r\nconst getEthers = mode => {\r\n\t/* NOTE: use Promise wrapper because despite getWeb3 is Promise itself it is not called by user action\r\n\t *   and this results in Trezor popup block by the browser\r\n\t */\r\n\tif (mode === AUTH_TYPES.METAMASK.name) {\r\n\t\treturn injectedWeb3()\r\n\t} else {\r\n\t\treturn getLocalWeb3\r\n\t}\r\n}\r\n\r\nconst ethereumSelectedAddress = async () => {\r\n\tconst { ethereum } = await loadInjectedWeb3.then()\r\n\tif (ethereum && ethereum.selectedAddress) {\r\n\t\treturn utils.getAddress(ethereum.selectedAddress)\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nconst ethereumNetworkId = async () => {\r\n\tconst { ethereum } = await loadInjectedWeb3.then()\r\n\tif (ethereum) {\r\n\t\tconst id = parseInt(ethereum.networkVersion, 10)\r\n\t\treturn id\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nconst getEthereumProvider = async () => {\r\n\tconst { ethereum } = await loadInjectedWeb3.then()\r\n\tif (!ethereum) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tif (ethereum.isMetaMask) {\r\n\t\treturn AUTH_TYPES.METAMASK.name\r\n\t}\r\n\r\n\treturn null\r\n}\r\n\r\nexport {\r\n\tgetEthers,\r\n\tethereumSelectedAddress,\r\n\tethereumNetworkId,\r\n\tgetEthereumProvider,\r\n}\r\n","import { Signer, utils } from 'ethers'\r\nimport TrezorConnect from 'trezor-connect'\r\nimport { constants } from 'adex-models'\r\n\r\nconst DEFAULT_HD_PATH = \"m/44'/60'/0'/0\"\r\n\r\nTrezorConnect.manifest({\r\n\temail: 'contactus@adex.network',\r\n\tappUrl: 'http://adex.network',\r\n})\r\n\r\nexport default class TrezorSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\t\tthis._provider = provider\r\n\t\tthis._path = opts.path || DEFAULT_HD_PATH\r\n\t}\r\n\r\n\tget path() {\r\n\t\treturn this._path\r\n\t}\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\tgetAddsParams = ({ from = 0, to = 10 } = {}) => {\r\n\t\tconst bundle = []\r\n\t\tfor (let index = from; index < to; index++) {\r\n\t\t\tbundle.push({\r\n\t\t\t\tpath: this.path + `/${index}`,\r\n\t\t\t\tshowOnTrezor: false,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn { bundle }\r\n\t}\r\n\r\n\tgetAddresses = async ({ from = 0, to = 9 } = {}) => {\r\n\t\tconst { success, payload } = await TrezorConnect.ethereumGetAddress(\r\n\t\t\tthis.getAddsParams({ from, to })\r\n\t\t)\r\n\r\n\t\treturn { success, payload }\r\n\t}\r\n\r\n\tsignTx = async params => {\r\n\t\tconst txProps = await utils.resolveProperties(params)\r\n\r\n\t\ttxProps.value = txProps.value || utils.hexlify(0)\r\n\r\n\t\tconst { success, payload } = await TrezorConnect.ethereumSignTransaction({\r\n\t\t\tpath: this.path,\r\n\t\t\ttransaction: txProps,\r\n\t\t})\r\n\r\n\t\tif (success) {\r\n\t\t\tconst signature = {\r\n\t\t\t\tr: payload.r,\r\n\t\t\t\ts: payload.s,\r\n\t\t\t\tv: parseInt(payload.v),\r\n\t\t\t}\r\n\r\n\t\t\tconst txSigned = utils.serializeTransaction(txProps, signature)\r\n\r\n\t\t\treturn txSigned\r\n\t\t} else {\r\n\t\t\tthrow new Error(payload.error)\r\n\t\t}\r\n\t}\r\n\r\n\tsendTransaction = async params => {\r\n\t\tconst txSigned = await this.signTx(params)\r\n\t\tconst txData = this.provider.sendTransaction(txSigned)\r\n\t\treturn txData\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tconst { success, payload } = await TrezorConnect.ethereumSignMessage({\r\n\t\t\tpath: this.path,\r\n\t\t\tmessage: message,\r\n\t\t\thex: !!opts.hex,\r\n\t\t})\r\n\r\n\t\tif (success) {\r\n\t\t\tconst res = {\r\n\t\t\t\t/*\r\n\t\t\t\t * NOTE: SignatureTypes.GETH\r\n\t\t\t\t * Current TrezorConnect window does not\r\n\t\t\t\t * accept device with old firmware\r\n\t\t\t\t */\r\n\t\t\t\tsignature: '0x' + payload.signature,\r\n\t\t\t\thash: message,\r\n\t\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\t\taddress: payload.address,\r\n\t\t\t}\r\n\r\n\t\t\treturn res\r\n\t\t} else {\r\n\t\t\tthrow new Error(payload.error)\r\n\t\t}\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new TrezorSigner(provider, { path: this.path })\r\n\t}\r\n}\r\n","export function loadFromLocalStorage(key) {\r\n\ttry {\r\n\t\tconst data = localStorage.getItem(key)\r\n\t\tif (data === null) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\treturn JSON.parse(data)\r\n\t} catch (err) {\r\n\t\treturn undefined\r\n\t}\r\n}\r\n\r\nexport function saveToLocalStorage(data, key) {\r\n\ttry {\r\n\t\tconst serialized = JSON.stringify(data)\r\n\t\tlocalStorage.setItem(key, serialized)\r\n\t} catch (err) {\r\n\t\tconsole.warn(err)\r\n\t}\r\n}\r\n\r\nexport function removeFromLocalStorage(key) {\r\n\tlocalStorage.removeItem(key)\r\n}\r\n\r\nexport function getKeys() {\r\n\treturn Object.keys(localStorage)\r\n}\r\n","import { ethers, utils } from 'ethers'\r\nimport pbkdf2 from 'pbkdf2'\r\nimport {\r\n\tencrypt,\r\n\tdecrypt,\r\n\tencryptLegacy,\r\n\tdecryptLegacy,\r\n} from 'services/crypto/crypto'\r\nimport {\r\n\tloadFromLocalStorage,\r\n\tsaveToLocalStorage,\r\n\tgetKeys,\r\n\tremoveFromLocalStorage,\r\n} from 'helpers/localStorageHelpers'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\n\r\nfunction getCipherKey({ email, password }) {\r\n\tconst pass = generateSalt(password)\r\n\tconst salt = generateSalt(email)\r\n\r\n\tconst key = pbkdf2.pbkdf2Sync(pass, salt, 10000, 64, 'sha512').toString('hex')\r\n\r\n\treturn key\r\n}\r\n\r\nfunction wEncrypt({ email, password, data, isLegacy }) {\r\n\tconst jsonData = JSON.stringify(data)\r\n\tif (isLegacy) {\r\n\t\treturn encryptLegacy(jsonData, email + password)\r\n\t} else {\r\n\t\treturn encrypt(jsonData, getCipherKey({ email, password }))\r\n\t}\r\n}\r\n\r\nfunction wDecrypt({ email, password, data, isLegacy }) {\r\n\tlet decryptedStr = ''\r\n\tif (isLegacy) {\r\n\t\tdecryptedStr = decryptLegacy(data, email + password)\r\n\t} else {\r\n\t\tdecryptedStr = decrypt(data, getCipherKey({ email, password }))\r\n\t}\r\n\r\n\ttry {\r\n\t\tconst decr = JSON.parse(decryptedStr)\r\n\t\treturn decr\r\n\t} catch (err) {\r\n\t\tthrow new Error('INVALID_PASSWORD_OR_EMAIL', err)\r\n\t}\r\n}\r\n\r\n// Returns 12 random words\r\nexport function getRandomMnemonic() {\r\n\tconst randomEntropy = utils.randomBytes(16)\r\n\tconst mnemonic = utils.HDNode.entropyToMnemonic(randomEntropy)\r\n\r\n\treturn mnemonic\r\n}\r\n\r\nexport function generateWallet(mnemonic) {\r\n\tconst seed = mnemonic || getRandomMnemonic()\r\n\tconst wallet = ethers.Wallet.fromMnemonic(seed)\r\n\r\n\treturn {\r\n\t\tmnemonic,\r\n\t\tprivateKey: wallet.privateKey,\r\n\t\taddress: wallet.address,\r\n\t\tpath: wallet.path,\r\n\t}\r\n}\r\n\r\nfunction encrKey({ email, password, authType }) {\r\n\tif (!authType) {\r\n\t\treturn encryptLegacy(email, password)\r\n\t} else if (typeof authType === 'string') {\r\n\t\treturn `adex-${authType}-wallet-${email}`\r\n\t} else {\r\n\t\tthrow new Error('INVALID_TYPE')\r\n\t}\r\n}\r\n\r\nexport function encrData({ email, password, data }) {\r\n\tconst encr = wEncrypt({ data: JSON.stringify(data), email, password })\r\n\treturn encr\r\n}\r\n\r\nexport function decrData({ email, password, data }) {\r\n\tconst decryptedStr = wDecrypt({ data, email, password })\r\n\ttry {\r\n\t\tconst decr = JSON.parse(decryptedStr)\r\n\t\treturn decr\r\n\t} catch (err) {\r\n\t\tthrow new Error('INVALID_PASSWORD_OR_EMAIL', err)\r\n\t}\r\n}\r\n\r\nexport function createLocalWallet({\r\n\temail = '',\r\n\tpassword = '',\r\n\tmnemonic = '',\r\n\tauthType = '',\r\n}) {\r\n\tconst walletData = generateWallet(mnemonic)\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst data = encrData({ data: walletData, email, password })\r\n\tsaveToLocalStorage({ data }, key)\r\n\r\n\twalletData.authType = authType\r\n\treturn walletData\r\n}\r\n\r\nexport function migrateLegacyWallet({ email = '', password = '' }) {\r\n\tconst wallet = getLocalWallet({\r\n\t\temail,\r\n\t\tpassword,\r\n\t\tgetEncrypted: true,\r\n\t})\r\n\r\n\tif (wallet && wallet.data) {\r\n\t\tconst newKey = encrKey({ email, password, authType: AUTH_TYPES.GRANT.name })\r\n\t\tsaveToLocalStorage(wallet, newKey)\r\n\t}\r\n}\r\n\r\nexport function removeLegacyKey({ email = '', password = '' }) {\r\n\tconst key = encrKey({ email, password })\r\n\tremoveFromLocalStorage(key)\r\n}\r\n\r\nexport function addDataToWallet({\r\n\temail = '',\r\n\tpassword = '',\r\n\tdataKey = '',\r\n\tdataValue = '',\r\n\tauthType,\r\n}) {\r\n\tif (dataKey === 'data') {\r\n\t\tthrow new Error('INVALID_DATA_KEY')\r\n\t}\r\n\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst wallet = loadFromLocalStorage(key)\r\n\r\n\tif (!wallet) {\r\n\t\tthrow new Error('WALLET_NOT_FOUND')\r\n\t}\r\n\r\n\tconst data = encrData({ data: dataValue, email, password })\r\n\twallet[dataKey] = data\r\n\tsaveToLocalStorage(wallet, key)\r\n}\r\n\r\nexport function getRecoveryWalletData({ email, password, authType }) {\r\n\tif (!email || !password) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst wallet = loadFromLocalStorage(key)\r\n\r\n\treturn {\r\n\t\tkey,\r\n\t\twallet,\r\n\t}\r\n}\r\n\r\nexport function getLocalWallet({ email, password, authType, getEncrypted }) {\r\n\tif (!email || !password) {\r\n\t\tthrow new Error('REQUIRED_EMAIL_AND_PASSWORD')\r\n\t}\r\n\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst wallet = loadFromLocalStorage(key)\r\n\r\n\tif (wallet) {\r\n\t\tif (getEncrypted) {\r\n\t\t\treturn wallet\r\n\t\t}\r\n\r\n\t\tconst data = Object.keys(wallet).reduce((props, key) => {\r\n\t\t\tprops[key] = decrData({\r\n\t\t\t\tdata: wallet[key],\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t})\r\n\r\n\t\t\treturn props\r\n\t\t}, {})\r\n\r\n\t\treturn data\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nfunction isWallet(item) {\r\n\treturn item && item.data && item.identity && item.privileges\r\n}\r\n\r\nexport function walletInfo(key, index, wallet) {\r\n\tconst split = key.split('-')\r\n\tconst mail = split.length >= 3 ? split.slice(3, split.length).join('-') : null\r\n\tconst authType = split[1] || 'legacy'\r\n\tconst name = mail || `Grant account # ${index + 1}`\r\n\r\n\tconst info = {\r\n\t\tkey,\r\n\t\twallet,\r\n\t\tname,\r\n\t\tauthType,\r\n\t}\r\n\r\n\treturn info\r\n}\r\n\r\nexport function getAllWallets() {\r\n\tconst walletKeys = getKeys()\r\n\t\t.map(key => {\r\n\t\t\treturn {\r\n\t\t\t\tkey,\r\n\t\t\t\titem: loadFromLocalStorage(key),\r\n\t\t\t}\r\n\t\t})\r\n\t\t.filter(({ item }) => isWallet(item))\r\n\t\t.map(({ item, key }, index) => walletInfo(key, index, item))\r\n\r\n\treturn walletKeys\r\n}\r\n\r\nexport function getWalletHash({ salt, password }) {\r\n\tconst passwordId = utils.id(password)\r\n\r\n\tconst hash = pbkdf2\r\n\t\t.pbkdf2Sync(passwordId, salt, 10000, 64, 'sha512')\r\n\t\t.toString('hex')\r\n\r\n\treturn hash\r\n}\r\n\r\nexport function generateSalt(dataStr) {\r\n\tif (typeof dataStr !== 'string') {\r\n\t\tthrow new Error('ERR_GEN_SALT_INPUT_NOT_STR')\r\n\t} else if (!dataStr.length) {\r\n\t\tthrow new Error('ERR_GEN_SALT_INPUT_TOO_SHORT')\r\n\t}\r\n\r\n\tconst id = utils.id(dataStr)\r\n\tconst salt = utils.keccak256(id)\r\n\treturn salt\r\n}\r\n","import { Signer, utils, Wallet } from 'ethers'\r\nimport { getLocalWallet } from 'services/wallet/wallet'\r\nimport { constants } from 'adex-models'\r\n\r\nexport default class LocalSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\r\n\t\tconst { email, password, authType } = opts\r\n\t\tthis._provider = provider\r\n\r\n\t\tconst walletData = getLocalWallet({\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\tauthType,\r\n\t\t})\r\n\r\n\t\tthis._wallet = new Wallet(walletData.data.privateKey, provider)\r\n\t}\r\n\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\tgetAddress = async () => {\r\n\t\treturn this._wallet.address\r\n\t}\r\n\r\n\tsignTx = async params => {\r\n\t\tconst signetTx = this._wallet.sign(params)\r\n\t\treturn signetTx\r\n\t}\r\n\r\n\tsendTransaction = async params => {\r\n\t\tconst txSigned = await this.signTx(params)\r\n\t\tconst txData = this.provider.sendTransaction(txSigned)\r\n\t\treturn txData\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tif (opts.hex) {\r\n\t\t\tmessage = utils.arrayify(message)\r\n\t\t}\r\n\r\n\t\tconst signature = await this._wallet.signMessage(message)\r\n\t\tconst res = {\r\n\t\t\tsignature,\r\n\t\t\thash: message,\r\n\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\taddress: this._wallet.address,\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new LocalSigner(provider, {\r\n\t\t\temail: this.email,\r\n\t\t\tpassword: this.password,\r\n\t\t})\r\n\t}\r\n}\r\n","import { Signer, utils } from 'ethers'\r\nimport { constants } from 'adex-models'\r\n\r\nexport default class MetaMaskSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\t\tthis._provider = provider\r\n\t\tthis._signer = provider.getSigner()\r\n\t}\r\n\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\tgetAddress = async () => {\r\n\t\treturn this._signer.getAddress()\r\n\t}\r\n\r\n\tsendTransaction = async params => {\r\n\t\treturn this._signer.sendTransaction(params)\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tif (opts.hex) {\r\n\t\t\tmessage = utils.arrayify(message)\r\n\t\t}\r\n\r\n\t\tconst signature = await this._signer.signMessage(message)\r\n\t\t// TODO: support EIP712\r\n\t\tconst res = {\r\n\t\t\tsignature,\r\n\t\t\thash: message,\r\n\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\taddress: await this._signer.getAddress(),\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new MetaMaskSigner(provider)\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\n\r\n// MEMORY STORAGE\r\nexport function updateNewTransaction({ tx, key, value }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NEW_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t\tkey: key,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetNewTransaction({ tx }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_NEW_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// PERSIST STORAGE\r\nexport function addWeb3Transaction({ tx, addr }) {\r\n\treturn function(dispatch) {\r\n\t\tif (!tx || !tx.hash || !addr) return\r\n\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.ADD_WEB3_TRANSACTION,\r\n\t\t\tvalue: tx,\r\n\t\t\ttx: tx.hash,\r\n\t\t\taddr: addr,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// TODO: make update multiple\r\nexport function updateWeb3Transaction({ tx, key, value, addr }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_WEB3_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t\tkey: key,\r\n\t\t\tvalue: value,\r\n\t\t\taddr: addr,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetWeb3Transaction({ tx, addr }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_WEB3_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t\taddr: addr,\r\n\t\t})\r\n\t}\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\nimport { utils } from 'ethers'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport TrezorSigner from 'services/smart-contracts/signers/trezor'\r\nimport LedgerSigner from 'services/smart-contracts/signers/ledger'\r\nimport LocalSigner from 'services/smart-contracts/signers/local'\r\nimport MetaMaskSigner from 'services/smart-contracts/signers/metamask'\r\nimport { translate } from 'services/translations/translations'\r\nimport { execute } from 'actions/common'\r\nimport {\r\n\t// addWeb3Transaction,\r\n\tupdateWeb3Transaction,\r\n} from 'actions/transactionActions'\r\nimport { addToast } from 'actions/uiActions'\r\nimport { updateAccount } from 'actions/accountActions'\r\nimport { splitSig, Transaction } from 'adex-protocol-eth/js'\r\nimport { getErrorMsg } from 'helpers/errors'\r\n\r\n/**\r\n * NOTE: DO NOT CALL WITH CONNECTED SIGNER\r\n * Will fill missing props gasLimit, nonce, chainId, etc..  *\r\n * */\r\nexport async function prepareTx({ tx, provider, sender, gasLimit, gasPrice }) {\r\n\tconst pTx = await utils.populateTransaction(tx, provider, sender)\r\n\r\n\t// TO work with all signers\r\n\tpTx.gasLimit = gasLimit || pTx.gasLimit.toHexString()\r\n\tpTx.gasPrice = gasPrice || pTx.gasPrice.toHexString()\r\n\tpTx.value = pTx.value || utils.hexlify(0)\r\n\tpTx.nonce = utils.hexlify(pTx.nonce)\r\n\r\n\treturn pTx\r\n}\r\n\r\nexport async function processTx({\r\n\ttx,\r\n\ttxSuccessData,\r\n\tfrom,\r\n\tfromType,\r\n\taccount,\r\n}) {\r\n\ttry {\r\n\t\tconst txRes = await tx\r\n\t\t// const txData = {\r\n\t\t// \t// id: txRes.hash,\r\n\t\t// \thash: txRes.hash,\r\n\t\t// \tnonce: txRes.nonce,\r\n\t\t// \t...txSuccessData,\r\n\t\t// \tstatus: 'pending',\r\n\t\t// \tsendingTime: Date.now(),\r\n\t\t// \ttxData: txRes\r\n\t\t// }\r\n\r\n\t\t// execute(\r\n\t\t// \taddWeb3Transaction({ tx: txData, addr: from })\r\n\t\t// )\r\n\t\texecute(\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\taction: 'X',\r\n\t\t\t\tlabel: translate('TRANSACTION_SENT_MSG', {\r\n\t\t\t\t\targs: [txRes.hash],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 50000,\r\n\t\t\t})\r\n\t\t)\r\n\r\n\t\tconst settings = { ...account.settings }\r\n\t\tsettings[fromType] = { ...settings[fromType] } || {}\r\n\t\tsettings[fromType].nextNonce = txRes.nonce + 1\r\n\t\texecute(\r\n\t\t\tupdateAccount({\r\n\t\t\t\tnewValues: { settings },\r\n\t\t\t})\r\n\t\t)\r\n\r\n\t\t// TODO: catch and toast\r\n\t\tconst receipt = await txRes.wait()\r\n\t\texecute(\r\n\t\t\tupdateWeb3Transaction({\r\n\t\t\t\ttx: txRes.hash,\r\n\t\t\t\tkey: 'status',\r\n\t\t\t\tvalue:\r\n\t\t\t\t\treceipt.status === 1 ||\r\n\t\t\t\t\treceipt.status === '0x1' ||\r\n\t\t\t\t\treceipt.status === true\r\n\t\t\t\t\t\t? 'success'\r\n\t\t\t\t\t\t: 'failed',\r\n\t\t\t\taddr: from,\r\n\t\t\t})\r\n\t\t)\r\n\t} catch (err) {\r\n\t\tconsole.error(err)\r\n\t\texecute(\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\taction: 'X',\r\n\t\t\t\tlabel: translate('TRANSACTION_ERR_MSG', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 50000,\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport async function getSigner({ wallet, provider }) {\r\n\t// TODO: Maybe get provider here?\r\n\tconst { authType, path, email, password } = wallet\r\n\r\n\tif (authType === AUTH_TYPES.METAMASK.name) {\r\n\t\tconst signer = new MetaMaskSigner(provider)\r\n\t\treturn signer\r\n\t}\r\n\tif (authType === AUTH_TYPES.LEDGER.name) {\r\n\t\tconst signer = new LedgerSigner(provider, { path })\r\n\r\n\t\treturn signer\r\n\t}\r\n\tif (authType === AUTH_TYPES.TREZOR.name) {\r\n\t\tconst signer = new TrezorSigner(provider, { path })\r\n\t\treturn signer\r\n\t}\r\n\tif (\r\n\t\tauthType === AUTH_TYPES.GRANT.name ||\r\n\t\tauthType === AUTH_TYPES.QUICK.name\r\n\t) {\r\n\t\tconst signer = new LocalSigner(provider, { email, password, authType })\r\n\r\n\t\treturn signer\r\n\t}\r\n\r\n\tthrow new Error(`Invalid wallet authType ${wallet.authType}`)\r\n}\r\n\r\n// NOTE: works with typed data in format {type: 'solidity data type', name: 'string (label)', value: 'preferable string'}\r\nexport const getTypedDataHash = ({ typedData }) => {\r\n\tconst values = typedData.map(entry => {\r\n\t\treturn typeof entry.value === 'string'\r\n\t\t\t? utils.toUtf8Bytes(entry.value)\r\n\t\t\t: utils.hexlify(entry.value)\r\n\t})\r\n\tconst valuesHash = utils.keccak256.apply(null, values)\r\n\tconst schema = typedData.map(entry => {\r\n\t\treturn utils.toUtf8Bytes(entry.type + ' ' + entry.name)\r\n\t})\r\n\r\n\tconst schemaHash = utils.keccak256.apply(null, schema)\r\n\tconst hash = utils.solidityKeccak256(\r\n\t\t['bytes32', 'bytes32'],\r\n\t\t[schemaHash, valuesHash]\r\n\t)\r\n\r\n\treturn hash\r\n}\r\n\r\nexport async function getAuthSig({ wallet }) {\r\n\tconst { provider } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\r\n\tconst authToken = Math.floor(\r\n\t\tMath.random() * Number.MAX_SAFE_INTEGER\r\n\t).toString()\r\n\r\n\tconst typedData = [{ type: 'uint', name: 'Auth token', value: authToken }]\r\n\tconst hash = getTypedDataHash({ typedData })\r\n\tconst signature = await signer.signMessage(hash, { hex: true })\r\n\r\n\treturn {\r\n\t\t...signature,\r\n\t\tauthToken,\r\n\t\thash,\r\n\t}\r\n}\r\n\r\nexport async function getTransactionsReceipts({ txHashes = [], authType }) {\r\n\tconst { provider } = await getEthers(authType)\r\n\tconst receipts = txHashes.map(tx => provider.getTransactionReceipt(tx))\r\n\r\n\treturn Promise.all(receipts)\r\n}\r\n\r\nexport async function signTx({ tx, signer }) {\r\n\tconst sig = await signer.signMessage(new Transaction(tx).hashHex(), {\r\n\t\thex: true,\r\n\t})\r\n\tconst signature = splitSig(sig.signature)\r\n\treturn signature\r\n}\r\n\r\nexport async function getMultipleTxSignatures({ txns, signer }) {\r\n\tconst signatures = []\r\n\tfor (const tx of txns) {\r\n\t\tsignatures.push(await signTx({ tx, signer }))\r\n\t}\r\n\r\n\treturn signatures\r\n}\r\n","import Requester from 'services/requester'\r\nimport { translate } from 'services/translations/translations'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\nimport ewt from './ewt'\r\n\r\nconst BEARER_PREFIX = 'Bearer '\r\nconst VALIDATOR_LEADER_URL = process.env.VALIDATOR_LEADER_URL\r\n\r\nconst getValidatorRequester = ({ baseUrl }) => {\r\n\treturn new Requester({ baseUrl })\r\n}\r\n\r\nconst getRequesters = ({ campaign }) => {\r\n\tconst leader = (campaign.validators || campaign.spec.validators)[0]\r\n\tconst follower = (campaign.validators || campaign.spec.validators)[1]\r\n\tconst leaderRequester = getValidatorRequester({ baseUrl: leader.url })\r\n\tconst followerRequester = getValidatorRequester({\r\n\t\tbaseUrl: follower.url,\r\n\t})\r\n\r\n\treturn {\r\n\t\tleader: { requester: leaderRequester, validator: leader },\r\n\t\tfollower: { requester: followerRequester, validator: follower },\r\n\t}\r\n}\r\n\r\nconst processResponse = res => {\r\n\tif (res.status >= 200 && res.status < 400) {\r\n\t\treturn res.json()\r\n\t}\r\n\r\n\treturn res.text().then(text => {\r\n\t\tthrow new Error(\r\n\t\t\ttranslate('SERVICE_ERROR_MSG', {\r\n\t\t\t\targs: [res.url, res.status, res.statusText, text],\r\n\t\t\t})\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport const getValidatorAuthToken = async ({ validatorId, account }) => {\r\n\tconst { identity, wallet } = account\r\n\tconst existingAuth = (identity.validatorAuthTokens || {})[validatorId]\r\n\tif (existingAuth) {\r\n\t\treturn existingAuth\r\n\t}\r\n\r\n\tconst { provider } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\r\n\tconst payload = {\r\n\t\tid: validatorId,\r\n\t\tidentity: identity.address,\r\n\t\tera: Math.floor(Date.now() / 60000),\r\n\t}\r\n\r\n\tconst token = ewt.sign(signer, payload)\r\n\r\n\treturn token\r\n}\r\n\r\nconst sendMessage = async ({ campaign, options, account }) => {\r\n\tconst { follower, leader } = getRequesters({ campaign })\r\n\r\n\tconst followerAuthToken = await getValidatorAuthToken({\r\n\t\tvalidatorId: follower.validator.id,\r\n\t\taccount,\r\n\t})\r\n\tconst leaderAuthToken = await getValidatorAuthToken({\r\n\t\tvalidatorId: leader.validator.id,\r\n\t\taccount,\r\n\t})\r\n\tconst followerResult = await follower.requester\r\n\t\t.fetch({\r\n\t\t\t...options,\r\n\t\t\theaders: {\r\n\t\t\t\t...options.headers,\r\n\t\t\t\tauthorization: BEARER_PREFIX + followerAuthToken,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(processResponse)\r\n\r\n\tconst leaderResult = await leader.requester\r\n\t\t.fetch({\r\n\t\t\t...options,\r\n\t\t\theaders: {\r\n\t\t\t\t...options.headers,\r\n\t\t\t\tauthorization: BEARER_PREFIX + leaderAuthToken,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(processResponse)\r\n\r\n\treturn {\r\n\t\tresults: {\r\n\t\t\tfollowerResult,\r\n\t\t\tleaderResult,\r\n\t\t},\r\n\t\tauthTokens: {\r\n\t\t\t[follower.id]: followerAuthToken,\r\n\t\t\t[leader.id]: leaderAuthToken,\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport const lastApprovedState = ({ campaign }) => {\r\n\tconst { leader } = getRequesters({ campaign })\r\n\r\n\treturn leader.requester\r\n\t\t.fetch({\r\n\t\t\troute: `channel/${campaign.id}/last-approved`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const closeCampaign = ({ campaign, account }) => {\r\n\tconst options = {\r\n\t\troute: `channel/${campaign.id}/events`,\r\n\t\tmethod: 'POST',\r\n\t\tbody: JSON.stringify({ events: [{ type: 'CLOSE' }] }),\r\n\t\theaders: { 'Content-Type': 'application/json' },\r\n\t}\r\n\r\n\treturn sendMessage({ campaign, options, account })\r\n}\r\n\r\nexport const identityAnalytics = async ({\r\n\tidenityAddr,\r\n\tcampaign,\r\n\tcampaignId,\r\n\tleaderAuth,\r\n\teventType,\r\n\tmetric,\r\n\ttimeframe,\r\n\tlimit,\r\n\tside,\r\n}) => {\r\n\tconst baseUrl = VALIDATOR_LEADER_URL\r\n\tconst requester = getValidatorRequester({ baseUrl })\r\n\r\n\tconst aggregates = await requester\r\n\t\t.fetch({\r\n\t\t\troute: `/analytics/for-${side}${campaignId || ''}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams: { eventType, metric, timeframe, limit },\r\n\t\t\theaders: {\r\n\t\t\t\tauthorization: BEARER_PREFIX + leaderAuth,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(processResponse)\r\n\r\n\treturn aggregates\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\nimport { constants } from 'adex-models'\r\nimport { Contract } from 'ethers'\r\nimport { getValidatorAuthToken } from 'services/adex-validator/actions'\r\nimport { bigNumberify, formatEther, formatUnits } from 'ethers/utils'\r\nconst privilegesNames = constants.valueToKey(constants.IdentityPrivilegeLevel)\r\n\r\nexport async function getAddressBalances({ address, authType }) {\r\n\tconst { provider, Dai } = await getEthers(authType)\r\n\r\n\tconst calls = [\r\n\t\tprovider.getBalance(address.address),\r\n\t\tDai.balanceOf(address.address),\r\n\t]\r\n\r\n\tconst balances = await Promise.all(calls)\r\n\tconst formatted = {\r\n\t\taddress: address.address,\r\n\t\tpath: address.serializedPath || address.path, // we are going to keep the entire path\r\n\t\tbalanceEth: balances[0].toString(),\r\n\t\tbalanceDai: balances[1].toString(),\r\n\t}\r\n\r\n\treturn formatted\r\n}\r\n\r\nexport async function getAccountStats({\r\n\taccount,\r\n\toutstandingBalanceDai = {\r\n\t\ttotal: bigNumberify('0'),\r\n\t\tavailable: bigNumberify('0'),\r\n\t},\r\n}) {\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai, Identity } = await getEthers(wallet.authType)\r\n\r\n\tconst { status = {} } = identity\r\n\tconst identityContract = new Contract(\r\n\t\tidentity.address,\r\n\t\tIdentity.abi,\r\n\t\tprovider\r\n\t)\r\n\tlet privilegesAction\r\n\ttry {\r\n\t\tawait identityContract.deployed()\r\n\t\tprivilegesAction = identityContract.privileges(wallet.address)\r\n\t} catch {\r\n\t\tprivilegesAction = Promise.resolve(status.type || 'Not Deployed')\r\n\t}\r\n\r\n\tconst calls = [\r\n\t\tprovider.getBalance(wallet.address),\r\n\t\tDai.balanceOf(wallet.address),\r\n\t\tDai.balanceOf(identity.address),\r\n\t\tprivilegesAction,\r\n\t]\r\n\r\n\tconst [\r\n\t\twalletBalanceEth,\r\n\t\twalletBalanceDai,\r\n\t\tidentityBalanceDai = bigNumberify('0'),\r\n\t\twalletPrivileges,\r\n\t] = await Promise.all(\r\n\t\tcalls.map(c =>\r\n\t\t\tc\r\n\t\t\t\t.then(res => res)\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\treturn undefined\r\n\t\t\t\t})\r\n\t\t)\r\n\t)\r\n\r\n\t// BigNumber values for balances\r\n\tconst raw = {\r\n\t\twalletBalanceEth,\r\n\t\twalletBalanceDai,\r\n\t\tidentityBalanceDai,\r\n\t\twalletPrivileges,\r\n\t\toutstandingBalanceDai: outstandingBalanceDai.available,\r\n\t\ttotalOutstandingBalanceDai: outstandingBalanceDai.total,\r\n\t\tavailableIdentityBalanceDai: identityBalanceDai.add(\r\n\t\t\toutstandingBalanceDai.available\r\n\t\t),\r\n\t\ttotalIdentityBalanceDai: identityBalanceDai.add(\r\n\t\t\toutstandingBalanceDai.total\r\n\t\t),\r\n\t}\r\n\r\n\tconst formatted = {\r\n\t\twalletAddress: wallet.address,\r\n\t\twalletAuthType: wallet.authType,\r\n\t\twalletPrivileges: privilegesNames[walletPrivileges],\r\n\t\twalletBalanceEth: formatEther(walletBalanceEth),\r\n\t\twalletBalanceDai: formatUnits(walletBalanceDai, 18),\r\n\t\tidentityAddress: identity.address,\r\n\t\tidentityBalanceDai: formatUnits(identityBalanceDai, 18),\r\n\t\toutstandingBalanceDai: formatUnits(raw.outstandingBalanceDai, 18),\r\n\t\ttotalOutstandingBalanceDai: formatUnits(raw.totalOutstandingBalanceDai, 18),\r\n\t\tavailableIdentityBalanceDai: formatUnits(\r\n\t\t\traw.availableIdentityBalanceDai,\r\n\t\t\t18\r\n\t\t),\r\n\t\ttotalIdentityBalanceDai: formatUnits(raw.totalIdentityBalanceDai, 18),\r\n\t}\r\n\r\n\treturn {\r\n\t\traw,\r\n\t\tformatted,\r\n\t}\r\n}\r\n\r\nexport async function getOutstandingBalance({ wallet, address, withBalance }) {\r\n\t// const sweepMin = minToSweep()\r\n\tconst bigZero = bigNumberify(0)\r\n\r\n\tconst initial = { total: bigNumberify('0'), available: bigNumberify('0') }\r\n\r\n\tconst allOutstanding = withBalance.reduce((amounts, ch) => {\r\n\t\tconst { outstanding, outstandingAvailable } = ch\r\n\t\tconst current = { ...amounts }\r\n\t\tcurrent.total = current.total.add(outstanding)\r\n\r\n\t\tif (outstandingAvailable.gt(bigZero)) {\r\n\t\t\tcurrent.available = current.available.add(outstandingAvailable)\r\n\t\t}\r\n\r\n\t\treturn current\r\n\t}, initial)\r\n\r\n\treturn allOutstanding || initial\r\n}\r\n\r\nexport async function getAllValidatorsAuthForIdentity({\r\n\twithBalance,\r\n\taccount,\r\n}) {\r\n\tconst validatorAuthTokens = account.identity.validatorAuthTokens || {}\r\n\r\n\tconst allValidators = withBalance.reduce((all, { channel }) => {\r\n\t\tconst leader = (channel.validators || channel.spec.validators)[0].id\r\n\t\tconst follower = (channel.validators || channel.spec.validators)[1].id\r\n\r\n\t\tconst validators = {\r\n\t\t\t...all,\r\n\t\t\t[leader]: all[leader] || validatorAuthTokens[leader] || null,\r\n\t\t\t[follower]: all[follower] || validatorAuthTokens[follower] || null,\r\n\t\t}\r\n\r\n\t\treturn validators\r\n\t}, {})\r\n\r\n\tconst keys = Object.keys(allValidators)\r\n\r\n\tconst tokenCalls = keys.map(async key => {\r\n\t\tif (allValidators[key]) {\r\n\t\t\treturn allValidators[key]\r\n\t\t} else {\r\n\t\t\tconst token = await getValidatorAuthToken({\r\n\t\t\t\tvalidatorId: key,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\treturn token\r\n\t\t}\r\n\t})\r\n\r\n\tconst allTokens = await Promise.all(tokenCalls)\r\n\r\n\tconst validatorsAuth = keys.reduce((all, key, index) => {\r\n\t\tconst validators = {\r\n\t\t\t...all,\r\n\t\t\t[key]: allTokens[index],\r\n\t\t}\r\n\r\n\t\treturn validators\r\n\t}, {})\r\n\r\n\treturn validatorsAuth\r\n}\r\n","import configureStore from 'store/configureStore'\r\nconst { store } = configureStore\r\n\r\nexport const relayerConfig = () => {\r\n\tconst cfg = store.getState().persist.config.relayer\r\n\r\n\treturn cfg\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\nimport {\r\n\tgetSigner,\r\n\tprepareTx,\r\n\tprocessTx,\r\n\tgetMultipleTxSignatures,\r\n} from 'services/smart-contracts/actions/ethers'\r\nimport { getSweepingTxnsIfNeeded } from 'services/smart-contracts/actions/core'\r\nimport { ethers, Contract } from 'ethers'\r\nimport {\r\n\tbigNumberify,\r\n\tparseUnits,\r\n\t// randomBytes,\r\n\tgetAddress,\r\n\thexlify,\r\n\tInterface,\r\n\tkeccak256,\r\n} from 'ethers/utils'\r\nimport { generateAddress2 } from 'ethereumjs-util'\r\nimport {\r\n\t// identityBytecode,\r\n\texecuteTx,\r\n\tsetAddrPriv,\r\n\trelayerConfig,\r\n} from 'services/adex-relayer'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\nimport { contracts } from '../contractsCfg'\r\nimport { getProxyDeployBytecode } from 'adex-protocol-eth/js/IdentityProxyDeploy'\r\n// import FactoryABI from 'adex-protocol-eth/abi/IdentityFactory'\r\n// const Factory = new Interface(FactoryABI)\r\n\r\nimport solc from 'solcBrowser'\r\nimport { RoutineAuthorization } from 'adex-protocol-eth/js/Identity'\r\n\r\nconst { DAI } = contracts\r\n\r\nconst { IDENTITY_BASE_ADDR, IDENTITY_FACTORY_ADDR } = process.env\r\n\r\nconst GAS_LIMIT_DEPLOY_CONTRACT = 150000\r\nconst feeAmountTransfer = '150000000000000000'\r\nconst feeAmountSetPrivileges = '150000000000000000'\r\nconst ERC20 = new Interface(DAI.abi)\r\n/*\r\nexport async function getIdentityBytecode({ owner, privLevel }) {\r\n\tconst res = await identityBytecode({\r\n\t\towner,\r\n\t\tprivLevel,\r\n\t\tidentityBaseAddr: IDENTITY_BASE_ADDR\r\n\t})\r\n\treturn res.bytecode\r\n}\r\n\r\nexport async function getIdentityDeployData({ owner, privLevel }) {\r\n\tconst bytecode = await getIdentityBytecode({ owner, privLevel })\r\n\tconst salt =\r\n\t\t`0x${Buffer.from(randomBytes(32)).toString('hex')}`\r\n\tconst expectedAddr = getAddress(\r\n\t\t`0x${generateAddress2(IDENTITY_FACTORY_ADDR, salt, bytecode)\r\n\t\t\t.toString('hex')}`\r\n\t)\r\n\r\n\treturn {\r\n\t\tbytecode,\r\n\t\tsalt,\r\n\t\texpectedAddr\r\n\t}\r\n}\r\n*/\r\n\r\nasync function getRelayerRoutinesAuthAuth({\r\n\trelayer,\r\n\toutpace,\r\n\tregistry,\r\n\tvalidUntil,\r\n\tfeeTokenAddr,\r\n\tweeklyFeeAmount,\r\n}) {\r\n\tconst relayerAuth = new RoutineAuthorization({\r\n\t\trelayer,\r\n\t\toutpace,\r\n\t\tregistry,\r\n\t\tvalidUntil,\r\n\t\tfeeTokenAddr,\r\n\t\tweeklyFeeAmount,\r\n\t})\r\n\r\n\treturn relayerAuth\r\n}\r\n\r\nexport async function getIdentityBytecode({\r\n\tidentityBaseAddr,\r\n\troutineAuthorizations,\r\n\tprivileges = [],\r\n}) {\r\n\tconst opts = {\r\n\t\tprivSlot: 0,\r\n\t}\r\n\r\n\tif (!!routineAuthorizations && routineAuthorizations.length) {\r\n\t\topts.routineAuthsSlot = 1\r\n\t\topts.routineAuthorizations = routineAuthorizations.map(a => a.hash())\r\n\t}\r\n\r\n\tconst bytecode = getProxyDeployBytecode(\r\n\t\tidentityBaseAddr,\r\n\t\tprivileges,\r\n\t\topts,\r\n\t\tsolc\r\n\t)\r\n\r\n\treturn bytecode\r\n}\r\n\r\nexport async function getIdentityDeployData({\r\n\towner,\r\n\tprivLevel,\r\n\taddReleyerRoutinesAuth,\r\n\trelayerRoutineAuthValidUntil = 10648454444,\r\n}) {\r\n\tconst {\r\n\t\tidentityFactoryAddr,\r\n\t\tregistryAddr,\r\n\t\tidentityBaseAddr,\r\n\t\tidentityRecoveryAddr,\r\n\t\tcoreAddr,\r\n\t\tfeeTokenWhitelist,\r\n\t\tweeklyFeeAmount,\r\n\t} = relayerConfig()\r\n\r\n\tconst privileges = [[owner, 3], [identityRecoveryAddr, 3]]\r\n\r\n\tconst opts = {\r\n\t\tidentityBaseAddr,\r\n\t\tprivileges,\r\n\t}\r\n\r\n\tif (addReleyerRoutinesAuth) {\r\n\t\tconst relayerAuth = getRelayerRoutinesAuthAuth({\r\n\t\t\tregistry: registryAddr,\r\n\t\t\toutpace: coreAddr,\r\n\t\t\tvalidUntil: relayerRoutineAuthValidUntil,\r\n\t\t\tfeeTokenAddr: feeTokenWhitelist[0].address,\r\n\t\t\tweeklyFeeAmount,\r\n\t\t})\r\n\r\n\t\topts.routineAuthorizations = [relayerAuth]\r\n\t}\r\n\r\n\tconst bytecode = await getIdentityBytecode(opts)\r\n\tconst salt = keccak256(owner)\r\n\r\n\tconst identityAddr = getAddress(\r\n\t\t`0x${generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex')}`\r\n\t)\r\n\r\n\treturn {\r\n\t\tidentityFactoryAddr,\r\n\t\tidentityBaseAddr,\r\n\t\tbytecode,\r\n\t\tsalt,\r\n\t\tidentityAddr,\r\n\t\tprivileges,\r\n\t}\r\n}\r\n\r\nexport function getPrivileges({ walletAddr, identityAddr, walletAuthType }) {\r\n\treturn getEthers(walletAuthType).then(({ provider, Identity }) => {\r\n\t\tconst contract = new ethers.Contract(identityAddr, Identity.abi, provider)\r\n\t\treturn contract.privileges(walletAddr)\r\n\t})\r\n}\r\n\r\nexport async function sendDaiToIdentity({\r\n\taccount,\r\n\tamountToSend,\r\n\t// gas,\r\n\testimateGasOnly,\r\n}) {\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst daiWithSigner = Dai.connect(signer)\r\n\tconst tokenAmount = parseUnits(amountToSend, 18).toString()\r\n\r\n\tconst pTx = await prepareTx({\r\n\t\ttx: Dai.transfer(identity.address, tokenAmount),\r\n\t\tprovider,\r\n\t\t// gasLimit,\r\n\t\tsender: wallet.address,\r\n\t})\r\n\r\n\tif (estimateGasOnly) {\r\n\t\treturn pTx.gasLimit\r\n\t}\r\n\r\n\tprocessTx({\r\n\t\ttx: daiWithSigner.transfer(identity.address, tokenAmount, pTx),\r\n\t\ttxSuccessData: { txMethod: 'TX_SEND_DAI_TO_IDENTITY' },\r\n\t\tfrom: wallet.address,\r\n\t\tfromType: 'wallet',\r\n\t\taccount,\r\n\t})\r\n\r\n\treturn {}\r\n}\r\n\r\nexport async function withdrawFromIdentity({\r\n\taccount,\r\n\tamountToWithdraw,\r\n\twithdrawTo,\r\n\tgetFeesOnly,\r\n\ttokenAddress,\r\n}) {\r\n\tconst toWithdraw = parseUnits(amountToWithdraw, 18)\r\n\tconst sweepTxns = await getSweepingTxnsIfNeeded({\r\n\t\tamountNeeded: toWithdraw,\r\n\t\taccount,\r\n\t})\r\n\tconst sweepFees = sweepTxns.reduce(\r\n\t\t(total, tx) => total.add(bigNumberify(tx.feeAmount)),\r\n\t\tbigNumberify(0)\r\n\t)\r\n\tconst fees = bigNumberify(feeAmountTransfer).add(sweepFees)\r\n\tconst tokenAmount = toWithdraw.sub(fees).toString()\r\n\r\n\tif (getFeesOnly) {\r\n\t\treturn {\r\n\t\t\tfees: formatTokenAmount(fees.toString(), 18),\r\n\t\t\ttoGet: formatTokenAmount(tokenAmount, 18),\r\n\t\t}\r\n\t}\r\n\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai, Identity } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst identityAddr = identity.address\r\n\t// TEMP HOTFIX\r\n\t// TODO: Make it work with multiple tokens\r\n\tconst tokenAddr = tokenAddress || Dai.address\r\n\r\n\tconst tx1 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: tokenAddr,\r\n\t\tfeeAmount: feeAmountTransfer,\r\n\t\tto: tokenAddr,\r\n\t\tdata: ERC20.functions.transfer.encode([withdrawTo, tokenAmount]),\r\n\t}\r\n\tconst txns = [...sweepTxns, tx1]\r\n\r\n\tconst txnsRaw = await getIdentityTnxsWithNonces({\r\n\t\ttxns,\r\n\t\tidentityAddr,\r\n\t\tprovider,\r\n\t\tIdentity,\r\n\t})\r\n\r\n\tconst signatures = await getMultipleTxSignatures({ txns: txnsRaw, signer })\r\n\r\n\tconst data = {\r\n\t\ttxnsRaw,\r\n\t\tsignatures,\r\n\t\tidentityAddr,\r\n\t}\r\n\r\n\tconst result = await executeTx(data)\r\n\r\n\treturn {\r\n\t\tresult,\r\n\t}\r\n}\r\n\r\nexport async function setIdentityPrivilege({\r\n\taccount,\r\n\tsetAddr,\r\n\tprivLevel,\r\n\tgetFeesOnly,\r\n}) {\r\n\tconst fees = bigNumberify(feeAmountSetPrivileges)\r\n\r\n\tif (getFeesOnly) {\r\n\t\treturn {\r\n\t\t\tfees: formatTokenAmount(fees.toString(), 18),\r\n\t\t}\r\n\t}\r\n\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai, Identity } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst identityAddr = identity.address\r\n\r\n\tconst identityInterface = new Interface(Identity.abi)\r\n\r\n\tconst tx1 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: Dai.address,\r\n\t\tfeeAmount: feeAmountSetPrivileges,\r\n\t\tto: identityAddr,\r\n\t\tdata: identityInterface.functions.setAddrPrivilege.encode([\r\n\t\t\tsetAddr,\r\n\t\t\tprivLevel,\r\n\t\t]),\r\n\t}\r\n\r\n\tconst txns = [tx1]\r\n\tconst txnsRaw = await getIdentityTnxsWithNonces({\r\n\t\ttxns,\r\n\t\tidentityAddr,\r\n\t\tprovider,\r\n\t\tIdentity,\r\n\t})\r\n\r\n\tconst signatures = await getMultipleTxSignatures({ txns: txnsRaw, signer })\r\n\r\n\tconst data = {\r\n\t\ttxnsRaw,\r\n\t\tsignatures,\r\n\t\tidentityAddr,\r\n\t\tsetAddr,\r\n\t\tprivLevel,\r\n\t}\r\n\r\n\tconst result = await setAddrPriv(data)\r\n\r\n\treturn {\r\n\t\tresult,\r\n\t}\r\n}\r\n\r\nexport async function getIdentityTnxsWithNonces({\r\n\ttxns = [],\r\n\tidentityAddr,\r\n\tprovider,\r\n\tIdentity,\r\n}) {\r\n\tconst identityContract = new Contract(identityAddr, Identity.abi, provider)\r\n\tconst initialNonce = (await identityContract.nonce()).toNumber()\r\n\tconst withNonce = txns.map((tx, i) => {\r\n\t\treturn {\r\n\t\t\t...tx,\r\n\t\t\tnonce: initialNonce + i,\r\n\t\t}\r\n\t})\r\n\r\n\treturn withNonce\r\n}\r\n","import crypto from 'crypto'\r\nimport {\r\n\tChannel,\r\n\tMerkleTree,\r\n\tsplitSig,\r\n\tChannelState,\r\n} from 'adex-protocol-eth/js'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getIdentityTnxsWithNonces } from 'services/smart-contracts/actions/identity'\r\nimport {\r\n\tgetSigner,\r\n\tgetMultipleTxSignatures,\r\n} from 'services/smart-contracts/actions/ethers'\r\nimport { contracts } from '../contractsCfg'\r\nimport { sendOpenChannel } from 'services/adex-relayer/actions'\r\nimport { closeCampaign } from 'services/adex-validator/actions'\r\nimport { Campaign, AdUnit } from 'adex-models'\r\nimport { getAllCampaigns } from 'services/adex-market/actions'\r\nimport {\r\n\tbigNumberify,\r\n\trandomBytes,\r\n\tparseUnits,\r\n\tInterface,\r\n\tformatUnits,\r\n} from 'ethers/utils'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\nimport { relayerConfig } from 'services/adex-relayer'\r\n\r\nconst { AdExCore, DAI } = contracts\r\nconst Core = new Interface(AdExCore.abi)\r\nconst ERC20 = new Interface(DAI.abi)\r\nconst feeAmountApprove = '150000000000000000'\r\nconst feeAmountTransfer = '150000000000000000'\r\nconst feeAmountOpen = '160000000000000000'\r\nconst timeframe = 15 * 1000 // 1 event per 15 seconds\r\nconst VALID_UNTIL_COEFFICIENT = 0.5\r\nconst VALID_UNTIL_MIN_PERIOD = 7 * 24 * 60 * 60 * 1000 // 7 days in ms\r\n\r\nexport const totalFeesFormatted = formatUnits(\r\n\tbigNumberify(feeAmountApprove)\r\n\t\t.add(bigNumberify(feeAmountOpen))\r\n\t\t.toString(),\r\n\t18\r\n)\r\n\r\nfunction toEthereumChannel(channel) {\r\n\tconst specHash = crypto\r\n\t\t.createHash('sha256')\r\n\t\t.update(JSON.stringify(channel.spec))\r\n\t\t.digest()\r\n\r\n\treturn new Channel({\r\n\t\tcreator: channel.creator,\r\n\t\ttokenAddr: channel.depositAsset,\r\n\t\ttokenAmount: channel.depositAmount,\r\n\t\tvalidUntil: channel.validUntil,\r\n\t\tvalidators: channel.spec.validators.map(v => v.id),\r\n\t\tspec: specHash,\r\n\t})\r\n}\r\n\r\nfunction getValidUntil(activeFrom, withdrawPeriodStart) {\r\n\tconst period = withdrawPeriodStart - activeFrom\r\n\tconst validUntil =\r\n\t\twithdrawPeriodStart +\r\n\t\tMath.max(period * VALID_UNTIL_COEFFICIENT, VALID_UNTIL_MIN_PERIOD)\r\n\r\n\treturn Math.floor(validUntil / 1000)\r\n}\r\n\r\nfunction getReadyCampaign(campaign, identity, Dai) {\r\n\tconst newCampaign = new Campaign(campaign)\r\n\tnewCampaign.creator = identity.address\r\n\tnewCampaign.created = Date.now()\r\n\tnewCampaign.validUntil = getValidUntil(\r\n\t\tnewCampaign.activeFrom,\r\n\t\tnewCampaign.withdrawPeriodStart\r\n\t)\r\n\tnewCampaign.nonce = bigNumberify(randomBytes(32)).toString()\r\n\tnewCampaign.adUnits = newCampaign.adUnits.map(unit => new AdUnit(unit).spec)\r\n\tnewCampaign.depositAmount = parseUnits(\r\n\t\tnewCampaign.depositAmount,\r\n\t\tDAI.decimals\r\n\t).toString()\r\n\r\n\t// NOTE: TEMP in UI its set per 1000 impressions (CPM)\r\n\tnewCampaign.minPerImpression = parseUnits(\r\n\t\tnewCampaign.minPerImpression,\r\n\t\tDAI.decimals\r\n\t)\r\n\t\t.div(bigNumberify(1000))\r\n\t\t.toString()\r\n\tnewCampaign.maxPerImpression = newCampaign.minPerImpression\r\n\r\n\tnewCampaign.depositAsset = newCampaign.depositAsset || Dai.address\r\n\tnewCampaign.eventSubmission = {\r\n\t\tallow: [\r\n\t\t\t{\r\n\t\t\t\tuids: [\r\n\t\t\t\t\tnewCampaign.creator,\r\n\t\t\t\t\tnewCampaign.validators[0].id,\r\n\t\t\t\t\tnewCampaign.validators[1].id,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{ uids: null, rateLimit: { type: 'ip', timeframe } },\r\n\t\t],\r\n\t}\r\n\r\n\tnewCampaign.status = { name: 'Pending', lastChecked: Date.now() }\r\n\r\n\treturn newCampaign\r\n}\r\n\r\nconst getExpiredWithdrawnOutstanding = async ({ channel, AdExCore }) => {\r\n\tconst [withdrawn, state] = await Promise.all([\r\n\t\tAdExCore.functions.withdrawn(channel.id),\r\n\t\tAdExCore.functions.states(channel.id),\r\n\t])\r\n\r\n\tif (state === ChannelState.Active) {\r\n\t\treturn bigNumberify(channel.depositAmount).sub(withdrawn)\r\n\t} else {\r\n\t\treturn bigNumberify('0')\r\n\t}\r\n}\r\n\r\nconst getWithdrawnPerUserOutstanding = async ({\r\n\tAdExCore,\r\n\tchannel,\r\n\tbalance,\r\n\tidentityAddr,\r\n}) => {\r\n\treturn bigNumberify(balance).sub(\r\n\t\tawait AdExCore.functions.withdrawnPerUser(channel.id, identityAddr)\r\n\t)\r\n}\r\n\r\nexport async function getChannelsWithOutstanding({ identityAddr, wallet }) {\r\n\tconst { authType } = wallet\r\n\tconst channels = await getAllCampaigns(true)\r\n\tconst { AdExCore } = await getEthers(authType)\r\n\tconst { feeTokenWhitelist = {} } = relayerConfig()\r\n\tconst channelWithdrawFee = bigNumberify(\r\n\t\tfeeTokenWhitelist.min || feeAmountTransfer\r\n\t)\r\n\r\n\tconst all = await Promise.all(\r\n\t\tchannels\r\n\t\t\t.filter(channel => channel && channel.status)\r\n\t\t\t.map(channel => {\r\n\t\t\t\tconst { lastApprovedSigs, lastApprovedBalances } = channel.status\r\n\t\t\t\tif (lastApprovedBalances) {\r\n\t\t\t\t\tconst allLeafs = Object.entries(lastApprovedBalances).map(([k, v]) =>\r\n\t\t\t\t\t\tChannel.getBalanceLeaf(k, v)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconst mTree = new MerkleTree(allLeafs)\r\n\t\t\t\t\treturn { lastApprovedSigs, lastApprovedBalances, mTree, channel }\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlastApprovedSigs: null,\r\n\t\t\t\t\t\tlastApprovedBalances: null,\r\n\t\t\t\t\t\tmTree: null,\r\n\t\t\t\t\t\tchannel,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.filter(({ channel, lastApprovedBalances }) => {\r\n\t\t\t\tif (!!channel.status && channel.status.name === 'Expired') {\r\n\t\t\t\t\treturn channel.creator === identityAddr\r\n\t\t\t\t}\r\n\t\t\t\treturn lastApprovedBalances && !!lastApprovedBalances[identityAddr]\r\n\t\t\t})\r\n\t\t\t.map(\r\n\t\t\t\tasync ({ channel, lastApprovedBalances, lastApprovedSigs, mTree }) => {\r\n\t\t\t\t\tconst balance = lastApprovedBalances[identityAddr]\r\n\r\n\t\t\t\t\tconst outstanding =\r\n\t\t\t\t\t\tchannel.status.name === 'Expired'\r\n\t\t\t\t\t\t\t? await getExpiredWithdrawnOutstanding({ channel, AdExCore })\r\n\t\t\t\t\t\t\t: await getWithdrawnPerUserOutstanding({\r\n\t\t\t\t\t\t\t\t\tAdExCore,\r\n\t\t\t\t\t\t\t\t\tchannel,\r\n\t\t\t\t\t\t\t\t\tbalance,\r\n\t\t\t\t\t\t\t\t\tidentityAddr,\r\n\t\t\t\t\t\t\t  })\r\n\r\n\t\t\t\t\tconst outstandingAvailable = bigNumberify(outstanding).sub(\r\n\t\t\t\t\t\tchannelWithdrawFee\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tchannel,\r\n\t\t\t\t\t\tbalance,\r\n\t\t\t\t\t\tlastApprovedBalances,\r\n\t\t\t\t\t\tlastApprovedSigs,\r\n\t\t\t\t\t\toutstanding,\r\n\t\t\t\t\t\toutstandingAvailable,\r\n\t\t\t\t\t\tmTree,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t)\r\n\r\n\treturn all\r\n}\r\n\r\nasync function getChannelsToSweepFrom({ amountToSweep, identityAddr, wallet }) {\r\n\tconst allChannels = await getChannelsWithOutstanding({\r\n\t\tidentityAddr,\r\n\t\twallet,\r\n\t})\r\n\r\n\tconst bigZero = bigNumberify(0)\r\n\r\n\tconst { eligible } = allChannels\r\n\t\t.filter(c => {\r\n\t\t\tconst { outstandingAvailable } = c\r\n\t\t\treturn outstandingAvailable.gt(bigZero)\r\n\t\t})\r\n\t\t.sort((c1, c2) => {\r\n\t\t\treturn c2.outstandingAvailable.gt(c1.outstandingAvailable)\r\n\t\t})\r\n\t\t.reduce(\r\n\t\t\t(data, c) => {\r\n\t\t\t\tconst current = { ...data }\r\n\t\t\t\tif (current.sum.lt(amountToSweep)) {\r\n\t\t\t\t\tcurrent.eligible.push(c)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent.sum = current.sum.add(c.outstandingAvailable)\r\n\r\n\t\t\t\treturn current\r\n\t\t\t},\r\n\t\t\t{ sum: bigZero, eligible: [] }\r\n\t\t)\r\n\r\n\treturn eligible\r\n}\r\n\r\nconst getChannelWithdrawData = ({\r\n\tidentityAddr,\r\n\tbalance,\r\n\tmTree,\r\n\tlastApprovedSigs,\r\n\tethChannelTuple,\r\n}) => {\r\n\tconst leaf = Channel.getBalanceLeaf(identityAddr, balance)\r\n\tconst proof = mTree.proof(leaf)\r\n\tconst vsig1 = splitSig(lastApprovedSigs[0])\r\n\tconst vsig2 = splitSig(lastApprovedSigs[1])\r\n\r\n\treturn Core.functions.channelWithdraw.encode([\r\n\t\tethChannelTuple,\r\n\t\tmTree.getRoot(),\r\n\t\t[vsig1, vsig2],\r\n\t\tproof,\r\n\t\tbalance,\r\n\t])\r\n}\r\n\r\nexport async function getSweepChannelsTxns({\r\n\tfeeTokenAddr,\r\n\taccount,\r\n\tamountToSweep,\r\n}) {\r\n\tconst { wallet, identity } = account\r\n\tconst { Dai, AdExCore } = await getEthers(wallet.authType)\r\n\tconst identityAddr = identity.address\r\n\tconst channelsToSweep = await getChannelsToSweepFrom({\r\n\t\tamountToSweep,\r\n\t\tidentityAddr,\r\n\t\twallet,\r\n\t})\r\n\r\n\tconst txns = channelsToSweep.map((c, i) => {\r\n\t\tconst { mTree, channel, lastApprovedSigs, balance } = c\r\n\t\tconst ethChannelTuple = toEthereumChannel(channel).toSolidityTuple()\r\n\r\n\t\tconst data =\r\n\t\t\tchannel.status.name === 'Expired'\r\n\t\t\t\t? Core.functions.channelWithdrawExpired.encode([ethChannelTuple])\r\n\t\t\t\t: getChannelWithdrawData({\r\n\t\t\t\t\t\tidentityAddr,\r\n\t\t\t\t\t\tbalance,\r\n\t\t\t\t\t\tmTree,\r\n\t\t\t\t\t\tlastApprovedSigs,\r\n\t\t\t\t\t\tethChannelTuple,\r\n\t\t\t\t  })\r\n\r\n\t\treturn {\r\n\t\t\tidentityContract: identityAddr,\r\n\t\t\tto: AdExCore.address,\r\n\t\t\tfeeTokenAddr: feeTokenAddr || Dai.address,\r\n\t\t\tfeeAmount: feeAmountTransfer, // Same fee as withdrawFromIdentity\r\n\t\t\tdata,\r\n\t\t}\r\n\t})\r\n\r\n\treturn txns\r\n}\r\n\r\nexport async function getSweepingTxnsIfNeeded({ amountNeeded, account }) {\r\n\tconst needed = bigNumberify(amountNeeded)\r\n\tconst accountBalance = bigNumberify(account.stats.raw.identityBalanceDai)\r\n\tif (needed.gt(accountBalance)) {\r\n\t\treturn await getSweepChannelsTxns({\r\n\t\t\taccount,\r\n\t\t\tamountToSweep: needed.sub(accountBalance),\r\n\t\t})\r\n\t} else {\r\n\t\treturn []\r\n\t}\r\n}\r\n\r\nexport async function openChannel({ campaign, account, getFeesOnly }) {\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, AdExCore, Dai, Identity } = await getEthers(wallet.authType)\r\n\tconst depositAmount = parseUnits(campaign.depositAmount)\r\n\tconst sweepTxns = await getSweepingTxnsIfNeeded({\r\n\t\tamountNeeded: depositAmount,\r\n\t\taccount,\r\n\t})\r\n\tconst sweepFees = sweepTxns.reduce(\r\n\t\t(total, tx) => total.add(bigNumberify(tx.feeAmount)),\r\n\t\tbigNumberify(0)\r\n\t)\r\n\r\n\tconst fees = bigNumberify(feeAmountApprove)\r\n\t\t.add(bigNumberify(feeAmountOpen))\r\n\t\t.add(sweepFees)\r\n\r\n\tif (getFeesOnly) {\r\n\t\treturn {\r\n\t\t\tfees: formatTokenAmount(fees.toString(), 18),\r\n\t\t}\r\n\t}\r\n\r\n\tconst readyCampaign = getReadyCampaign(campaign, identity, Dai)\r\n\tconst openReady = readyCampaign.openReady\r\n\tconst ethChannel = toEthereumChannel(openReady)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst channel = {\r\n\t\t...openReady,\r\n\t\tid: ethChannel.hashHex(AdExCore.address),\r\n\t}\r\n\tconst identityAddr = openReady.creator\r\n\r\n\tconst feeTokenAddr = campaign.temp.feeTokenAddr || Dai.address\r\n\r\n\tconst tx1 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: feeTokenAddr,\r\n\t\tfeeAmount: feeAmountApprove,\r\n\t\tto: Dai.address,\r\n\t\tdata: ERC20.functions.approve.encode([\r\n\t\t\tAdExCore.address,\r\n\t\t\tchannel.depositAmount,\r\n\t\t]),\r\n\t}\r\n\r\n\tconst tx2 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: feeTokenAddr,\r\n\t\tfeeAmount: feeAmountOpen,\r\n\t\tto: AdExCore.address,\r\n\t\tdata: Core.functions.channelOpen.encode([ethChannel.toSolidityTuple()]),\r\n\t}\r\n\tconst txns = [...sweepTxns, tx1, tx2]\r\n\tconst txnsRaw = await getIdentityTnxsWithNonces({\r\n\t\ttxns,\r\n\t\tidentityAddr,\r\n\t\tprovider,\r\n\t\tIdentity,\r\n\t})\r\n\r\n\tconst signatures = await getMultipleTxSignatures({ txns: txnsRaw, signer })\r\n\r\n\tconst data = {\r\n\t\ttxnsRaw,\r\n\t\tsignatures,\r\n\t\tchannel,\r\n\t\tidentityAddr,\r\n\t}\r\n\r\n\tconst result = await sendOpenChannel(data)\r\n\treadyCampaign.id = channel.id\r\n\treturn {\r\n\t\tresult,\r\n\t\treadyCampaign,\r\n\t}\r\n}\r\n\r\nexport async function closeChannel({ account, campaign }) {\r\n\tconst result = await closeCampaign({ account, campaign })\r\n\treturn result\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport { addSig, getSig } from 'services/auth/auth'\r\nimport { getSession, checkSession } from 'services/adex-market/actions'\r\nimport {\r\n\tgetRelayerConfigData,\r\n\tregAccount,\r\n\tgetGrantType,\r\n\tquickWalletSalt,\r\n\tgetQuickWallet,\r\n\tbackupWallet,\r\n} from 'services/adex-relayer/actions'\r\nimport { updateSpinner } from './uiActions'\r\nimport { translate } from 'services/translations/translations'\r\nimport { getAuthSig } from 'services/smart-contracts/actions/ethers'\r\nimport {\r\n\tremoveLegacyKey,\r\n\tgetWalletHash,\r\n\tgenerateSalt,\r\n\tgetRecoveryWalletData,\r\n} from 'services/wallet/wallet'\r\nimport { getValidatorAuthToken } from 'services/adex-validator/actions'\r\nimport {\r\n\tgetAccountStats,\r\n\tgetOutstandingBalance,\r\n} from 'services/smart-contracts/actions/stats'\r\nimport { getChannelsWithOutstanding } from 'services/smart-contracts/actions/core'\r\nimport { addToast, confirmAction } from './uiActions'\r\nimport {\r\n\tgetEthers,\r\n\tgetEthereumProvider,\r\n\tethereumSelectedAddress,\r\n\tethereumNetworkId,\r\n} from 'services/smart-contracts/ethers'\r\nimport { AUTH_TYPES, ETHEREUM_NETWORKS } from 'constants/misc'\r\nimport {\r\n\tselectAccount,\r\n\tselectIdentity,\r\n\tselectAuth,\r\n\tselectWallet,\r\n} from 'selectors'\r\nimport { logOut } from 'services/store-data/auth'\r\nimport { getErrorMsg } from 'helpers/errors'\r\nimport { push } from 'connected-react-router'\r\n\r\nconst UPDATE_SETTINGS_INTERVAL = 24 * 60 * 60 * 1000 // 1 hour\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\n\r\n// MEMORY STORAGE\r\nexport function updateSignin(prop, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_SIGNIN,\r\n\t\t\tprop: prop,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetSignin() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_SIGNIN,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// PERSISTENT STORAGE\r\nexport function createAccount(acc) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.CREATE_ACCOUNT,\r\n\t\t\taccount: acc,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// LOGOUT\r\nexport function resetAccount() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ACCOUNT,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateAccount({ meta, newValues }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ACCOUNT,\r\n\t\t\tmeta: meta,\r\n\t\t\tnewValues: newValues,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateGasData({ gasData }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_GAS_DATA,\r\n\t\t\tgasData: gasData,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateAccountStats() {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { account } = getState().persist\r\n\t\ttry {\r\n\t\t\tconst { identity, wallet } = account\r\n\t\t\tconst { address } = identity\r\n\t\t\tconst withBalance = await getChannelsWithOutstanding({\r\n\t\t\t\tidentityAddr: address,\r\n\t\t\t\twallet,\r\n\t\t\t})\r\n\r\n\t\t\tconst outstandingBalanceDai = await getOutstandingBalance({\r\n\t\t\t\twallet,\r\n\t\t\t\taddress,\r\n\t\t\t\twithBalance,\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.error('ERR_OUTSTANDING_BALANCES', err)\r\n\t\t\t})\r\n\r\n\t\t\tconst { formatted, raw } = await getAccountStats({\r\n\t\t\t\taccount,\r\n\t\t\t\toutstandingBalanceDai,\r\n\t\t\t})\r\n\r\n\t\t\tupdateAccount({\r\n\t\t\t\tnewValues: { stats: { formatted, raw } },\r\n\t\t\t})(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_STATS', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_STATS', { args: [getErrorMsg(err)] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function registerAccount({ owner, identityTxData, email }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('registering-account', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tawait regAccount({\r\n\t\t\t\towner,\r\n\t\t\t\temail,\r\n\t\t\t\t...identityTxData,\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_REGISTERING_ACCOUNT', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_REGISTERING_ACCOUNT', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner('registering-account', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function updateAccountSettings() {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { identity, settings } = getState().persist.account\r\n\t\tconst { grantType, updated } = settings\r\n\t\tconst now = Date.now()\r\n\t\tconst doUpdate =\r\n\t\t\t!grantType || now - (updated || 0) > UPDATE_SETTINGS_INTERVAL\r\n\r\n\t\ttry {\r\n\t\t\tif (doUpdate) {\r\n\t\t\t\tconst newSettings = { ...settings }\r\n\t\t\t\tnewSettings.grantType = (await getGrantType({\r\n\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t})).type\r\n\t\t\t\tnewSettings.updated = now\r\n\t\t\t\tupdateAccount({ newValues: { settings: newSettings } })(dispatch)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_SETTINGS', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_SETTINGS', { args: [getErrorMsg(err)] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function updateValidatorAuthTokens({ newAuth }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { identity } = getState().persist.account\r\n\r\n\t\tconst newIdentity = { ...identity }\r\n\t\tconst newTokens = { ...(newIdentity.validatorAuthTokens || {}), ...newAuth }\r\n\r\n\t\t// We don't want to update account if there is no actual change\r\n\t\tif (\r\n\t\t\tJSON.stringify(newIdentity.validatorAuthTokens) !==\r\n\t\t\tJSON.stringify(newTokens)\r\n\t\t) {\r\n\t\t\tnewIdentity.validatorAuthTokens = newTokens\r\n\t\t\tupdateAccount({ newValues: { identity: newIdentity } })(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function createSession({ wallet, identity, email, deleteLegacyKey }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('creating-session', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst newWallet = { ...wallet }\r\n\t\t\tconst sessionSignature =\r\n\t\t\t\tgetSig({\r\n\t\t\t\t\taddr: newWallet.address,\r\n\t\t\t\t\tmode: newWallet.authType,\r\n\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t}) || null\r\n\r\n\t\t\tconst hasSession =\r\n\t\t\t\t!!sessionSignature &&\r\n\t\t\t\t(await checkSession({\r\n\t\t\t\t\tauthSig: sessionSignature,\r\n\t\t\t\t\tskipErrToast: true,\r\n\t\t\t\t}))\r\n\r\n\t\t\tif (hasSession) {\r\n\t\t\t\tnewWallet.authSig = sessionSignature\r\n\t\t\t} else {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tsignature,\r\n\t\t\t\t\tmode,\r\n\t\t\t\t\tauthToken,\r\n\t\t\t\t\thash,\r\n\t\t\t\t\ttypedData,\r\n\t\t\t\t} = await getAuthSig({ wallet: newWallet })\r\n\r\n\t\t\t\tconst { status, expiryTime } = await getSession({\r\n\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t\tmode: mode,\r\n\t\t\t\t\tsignature: signature,\r\n\t\t\t\t\tauthToken: authToken,\r\n\t\t\t\t\thash,\r\n\t\t\t\t\ttypedData,\r\n\t\t\t\t\tsignerAddress: newWallet.address,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (status === 'OK') {\r\n\t\t\t\t\taddSig({\r\n\t\t\t\t\t\taddr: wallet.address,\r\n\t\t\t\t\t\tsig: signature,\r\n\t\t\t\t\t\tmode: wallet.authType,\r\n\t\t\t\t\t\texpiryTime: expiryTime,\r\n\t\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t\t})\r\n\t\t\t\t\tnewWallet.authSig = signature\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst account = {\r\n\t\t\t\temail: email,\r\n\t\t\t\twallet: newWallet,\r\n\t\t\t\tidentity: { ...identity },\r\n\t\t\t}\r\n\r\n\t\t\tconst leaderValidatorAuth = await getValidatorAuthToken({\r\n\t\t\t\tvalidatorId: VALIDATOR_LEADER_ID,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\taccount.identity.validatorAuthTokens = {\r\n\t\t\t\t[VALIDATOR_LEADER_ID]: leaderValidatorAuth,\r\n\t\t\t}\r\n\r\n\t\t\tupdateAccount({\r\n\t\t\t\tnewValues: { ...account },\r\n\t\t\t})(dispatch)\r\n\r\n\t\t\tif (deleteLegacyKey) {\r\n\t\t\t\tremoveLegacyKey({\r\n\t\t\t\t\temail: wallet.email,\r\n\t\t\t\t\tpassword: wallet.password,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tdispatch(push('/side-select'))\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_SESSION', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_GETTING_SESSION', { args: [getErrorMsg(err)] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner('creating-session', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function getRelayerConfig() {\r\n\treturn async function(dispatch) {\r\n\t\tconst cfg = await getRelayerConfigData()\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_RELAYER_CFG,\r\n\t\t\tcfg,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nasync function getNetworkId() {\r\n\tconst { provider } = await getEthers(AUTH_TYPES.METAMASK.name)\r\n\tconst networkId = (await provider.getNetwork()).chainId\r\n\r\n\treturn networkId\r\n}\r\n\r\nasync function getNetworkData({ id }) {\r\n\tconst networkId = id || (await getNetworkId())\r\n\tconst network = ETHEREUM_NETWORKS[networkId] || {}\r\n\r\n\treturn network\r\n}\r\n\r\nexport function onMetamaskNetworkChange({ id } = {}) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { persist, router } = getState()\r\n\t\tconst { location } = router\r\n\t\tconst { account } = persist\r\n\t\tconst { search } = location\r\n\t\tconst { authType } = account.wallet\r\n\r\n\t\tconst isMetamaskMatters =\r\n\t\t\t(authType === AUTH_TYPES.METAMASK.name ||\r\n\t\t\t\t(!authType && search === '?metamask')) &&\r\n\t\t\t(await getEthereumProvider()) === AUTH_TYPES.METAMASK.name\r\n\r\n\t\tif (\r\n\t\t\tisMetamaskMatters &&\r\n\t\t\tprocess.env.NODE_ENV !== (await getNetworkData({ id })).for\r\n\t\t) {\r\n\t\t\tconfirmAction(\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: translate('WARNING'),\r\n\t\t\t\t\ttext: translate('WATNING_METAMASK_INVALID_NETWORK', {\r\n\t\t\t\t\t\targs: [ETHEREUM_NETWORKS[process.env.NODE_ENV].name],\r\n\t\t\t\t\t}),\r\n\t\t\t\t},\r\n\t\t\t\ttrue\r\n\t\t\t)(dispatch)\r\n\t\t} else {\r\n\t\t\tconfirmAction(null, null, {}, true, false)(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const onMetamaskAccountChange = accountAddress => {\r\n\treturn async function(_, getState) {\r\n\t\tconst state = getState()\r\n\t\tconst hasAuth = selectAuth(state)\r\n\t\tconst account = selectAccount(state)\r\n\t\tconst { authType, address } = account.wallet\r\n\r\n\t\tif (\r\n\t\t\thasAuth &&\r\n\t\t\tauthType === AUTH_TYPES.METAMASK.name &&\r\n\t\t\t(!accountAddress || address !== accountAddress)\r\n\t\t) {\r\n\t\t\tlogOut()\r\n\t\t} else if (!hasAuth) {\r\n\t\t\tconst identity = selectIdentity(state)\r\n\t\t\tconst { identityContractOwner } = identity\r\n\t\t\tlogOut(!identityContractOwner || identityContractOwner === accountAddress)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function metamaskAccountCheck() {\r\n\treturn async function(_, getState) {\r\n\t\tconst address = await ethereumSelectedAddress()\r\n\t\tonMetamaskAccountChange(address)(_, getState)\r\n\t}\r\n}\r\n\r\nexport function metamaskNetworkCheck() {\r\n\treturn async function(_, getState) {\r\n\t\tconst id = await ethereumNetworkId()\r\n\t\tonMetamaskNetworkChange({ id })(_, getState)\r\n\t}\r\n}\r\n\r\nexport function metamaskChecks() {\r\n\treturn async function(_, getState) {\r\n\t\tmetamaskNetworkCheck()(_, getState)\r\n\t\tmetamaskAccountCheck()(_, getState)\r\n\t\tif (window.ethereum) {\r\n\t\t\twindow.ethereum.on('accountsChanged', accounts => {\r\n\t\t\t\tconsole.log('acc changed', accounts[0])\r\n\t\t\t\tonMetamaskAccountChange(accounts[0])(_, getState)\r\n\t\t\t})\r\n\t\t\twindow.ethereum.on('networkChanged', network => {\r\n\t\t\t\tconsole.log('networkChanged', network)\r\n\t\t\t\tonMetamaskNetworkChange({ id: network })(_, getState)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function hasBackup({ email, password }) {\r\n\tconst salt = generateSalt(email)\r\n\tconst hash = getWalletHash({ salt, password })\r\n\tconst { encryptedWallet } = await getQuickWallet({ hash })\r\n\r\n\treturn !!encryptedWallet && encryptedWallet.wallet\r\n}\r\n\r\nasync function makeBackup({ email, password, authType }) {\r\n\tconst walletSalt = generateSalt(email)\r\n\tconst walletHash = getWalletHash({ salt: walletSalt, password })\r\n\tconst encryptedWallet = getRecoveryWalletData({\r\n\t\temail,\r\n\t\tpassword,\r\n\t\tauthType,\r\n\t})\r\n\r\n\tawait backupWallet({\r\n\t\temail,\r\n\t\tsalt: walletSalt,\r\n\t\thash: walletHash,\r\n\t\tencryptedWallet,\r\n\t})\r\n}\r\n\r\nexport function ensureQuickWalletBackup() {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('quick-wallet-backup', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst { email, password, authType } = selectWallet(getState())\r\n\t\t\tconst isLocal = authType === 'quick' || authType === 'grant'\r\n\r\n\t\t\tif (isLocal && !(await hasBackup({ email, password }))) {\r\n\t\t\t\tawait makeBackup({ email, password, authType })\r\n\t\t\t}\r\n\t\t} catch (err) {}\r\n\t\tupdateSpinner('quick-wallet-backup', false)(dispatch)\r\n\t}\r\n}\r\n","const MAX_ASPECT_TOLERANCE = 5\r\n\r\nexport const isVideoMedia = (mime = '') => mime.split('/')[0] === 'video'\r\n\r\nconst getVideoSize = src =>\r\n\tnew Promise(resolve => {\r\n\t\tconst video = document.createElement('video')\r\n\t\tvideo.src = src\r\n\r\n\t\tvideo.onloadedmetadata = ({ target }) => {\r\n\t\t\treturn resolve({\r\n\t\t\t\twidth: target.videoWidth,\r\n\t\t\t\theight: target.videoHeight,\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\nconst getImageSize = src =>\r\n\tnew Promise(resolve => {\r\n\t\tconst image = new Image()\r\n\t\timage.src = src\r\n\t\timage.onload = function() {\r\n\t\t\treturn resolve({\r\n\t\t\t\twidth: this.width,\r\n\t\t\t\theight: this.height,\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\nexport const getMediaSize = ({ mime, src }) =>\r\n\tisVideoMedia(mime) ? getVideoSize(src) : getImageSize(src)\r\n\r\nexport const checkExactishAspect = (\r\n\twidthTarget,\r\n\twidth,\r\n\theightTarget,\r\n\theight,\r\n\tmaxPercentTolerance = MAX_ASPECT_TOLERANCE\r\n) => {\r\n\tif (widthTarget <= 0 || width <= 0 || heightTarget <= 0 || height <= 0) {\r\n\t\treturn false\r\n\t}\r\n\tconst targetAspect = parseFloat(widthTarget / heightTarget)\r\n\tconst aspect = parseFloat(width / height)\r\n\r\n\tconst aspectDiff = Math.abs(((targetAspect - aspect) / targetAspect) * 100)\r\n\r\n\tconst isValid =\r\n\t\twidthTarget <= width &&\r\n\t\theightTarget <= height &&\r\n\t\taspectDiff <= maxPercentTolerance\r\n\r\n\treturn isValid\r\n}\r\n","import { constants } from 'adex-models'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nconst autocompleteLocationsSingleSelect = () => {\r\n\treturn constants.AllCountries.map(country => {\r\n\t\treturn {\r\n\t\t\tlabel: country.name,\r\n\t\t\tvalue: country.value,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst autocompleteGendersSingleSelect = () => {\r\n\treturn constants.Genders.map(gender => {\r\n\t\treturn {\r\n\t\t\tlabel: translate(gender.split('_')[1]),\r\n\t\t\tvalue: gender,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst autocompleteTagsSingleSelect = () => {\r\n\treturn constants.PredefinedTags.map(tag => {\r\n\t\treturn {\r\n\t\t\tlabel: tag._id,\r\n\t\t\tvalue: tag._id,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const AcLocations = autocompleteLocationsSingleSelect()\r\nexport const AcGenders = autocompleteGendersSingleSelect()\r\nexport const AcTags = autocompleteTagsSingleSelect()\r\n\r\nexport const SOURCES = {\r\n\tlocations: { src: AcLocations, collection: 'targeting' },\r\n\tgenders: { src: AcGenders, collection: 'targeting' },\r\n\ttags: { src: AcTags, collection: 'targeting' },\r\n\tcustom: { src: [], collection: 'targeting' },\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport {\r\n\tuploadImage,\r\n\tpostAdUnit,\r\n\tpostAdSlot,\r\n\tupdateAdSlot,\r\n\tupdateAdUnit,\r\n} from 'services/adex-market/actions'\r\nimport { parseUnits, bigNumberify } from 'ethers/utils'\r\nimport { Base, AdSlot, AdUnit, helpers } from 'adex-models'\r\nimport { addToast as AddToastUi, updateSpinner } from './uiActions'\r\nimport { updateValidatorAuthTokens } from './accountActions'\r\nimport { translate } from 'services/translations/translations'\r\nimport { getAllValidatorsAuthForIdentity } from 'services/smart-contracts/actions/stats'\r\nimport {\r\n\tgetAdUnits,\r\n\tgetAdSlots,\r\n\t// getCampaigns,\r\n} from 'services/adex-market/actions'\r\nimport {\r\n\topenChannel,\r\n\tcloseChannel,\r\n} from 'services/smart-contracts/actions/core'\r\nimport { lastApprovedState } from 'services/adex-validator/actions'\r\nimport initialState from 'store/initialState'\r\nimport { getMediaSize } from 'helpers/mediaHelpers'\r\nimport { getErrorMsg } from 'helpers/errors'\r\nimport { contracts } from 'services/smart-contracts/contractsCfg'\r\nimport { SOURCES } from 'constants/targeting'\r\nimport { selectAccount, selectAuthSig } from 'selectors'\r\nconst { DAI } = contracts\r\n\r\nconst addToast = ({ type, toastStr, args, dispatch }) => {\r\n\treturn AddToastUi({\r\n\t\tdispatch: dispatch,\r\n\t\ttype: type,\r\n\t\taction: 'X',\r\n\t\tlabel: translate(toastStr, { args: args }),\r\n\t\ttimeout: 5000,\r\n\t})(dispatch)\r\n}\r\n\r\nconst getImgsIpfsFromBlob = ({ tempUrl, authSig }) => {\r\n\treturn fetch(tempUrl)\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.blob()\r\n\t\t})\r\n\t\t.then(imgBlob => {\r\n\t\t\tURL.revokeObjectURL(tempUrl)\r\n\t\t\treturn uploadImage({\r\n\t\t\t\timageBlob: imgBlob,\r\n\t\t\t\timageName: 'image.jpeg',\r\n\t\t\t\tauthSig: authSig,\r\n\t\t\t})\r\n\t\t})\r\n}\r\n\r\n// const uploadImages = ({ item, authSig }) => {\r\n// \tlet imgIpfsProm = Promise.resolve()\r\n// \tlet fallbackImgIpfsProm = Promise.resolve()\r\n\r\n// \tif (item._meta.img.tempUrl) {\r\n// \t\timgIpfsProm = getImgsIpfsFromBlob({ tempUrl: item._meta.img.tempUrl, authSig: authSig })\r\n// \t}\r\n\r\n// \tif (item._fallbackAdImg && item._fallbackAdImg.tempUrl) {\r\n// \t\tfallbackImgIpfsProm = getImgsIpfsFromBlob({ tempUrl: item._fallbackAdImg.tempUrl, authSig: authSig })\r\n// \t}\r\n\r\n// \treturn Promise.all([imgIpfsProm, fallbackImgIpfsProm])\r\n// \t\t.then(([imgIpf, fallbackImgIpfs]) => {\r\n// \t\t\tif (imgIpf) {\r\n// \t\t\t\titem._meta.img = { ipfs: imgIpf.ipfs }\r\n// \t\t\t}\r\n\r\n// \t\t\tif (fallbackImgIpfs) {\r\n// \t\t\t\titem._fallbackAdImg = { ipfs: fallbackImgIpfs.ipfs }\r\n// \t\t\t}\r\n\r\n// \t\t\treturn item\r\n// \t\t})\r\n// }\r\n\r\nexport function updateNewItem(item, newValues, itemType, objModel) {\r\n\titem = Base.updateObject({ item, newValues, objModel })\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NEW_ITEM,\r\n\t\t\titem,\r\n\t\t\titemType,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetNewItem(item) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_NEW_ITEM,\r\n\t\t\titem: item,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetAllNewItems() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ALL_NEW_ITEMS,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// register item\r\nexport function addUnit(item) {\r\n\tconst newItem = { ...item }\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst state = getState()\r\n\t\t\tconst authSig = selectAuthSig(state)\r\n\t\t\tconst imageIpfs = (await getImgsIpfsFromBlob({\r\n\t\t\t\ttempUrl: newItem.temp.tempUrl,\r\n\t\t\t\tauthSig,\r\n\t\t\t})).ipfs\r\n\r\n\t\t\tnewItem.mediaUrl = `ipfs://${imageIpfs}`\r\n\t\t\tnewItem.mediaMime = newItem.temp.mime\r\n\t\t\tnewItem.created = Date.now()\r\n\r\n\t\t\tconst resItem = await postAdUnit({\r\n\t\t\t\tunit: new AdUnit(newItem).marketAdd,\r\n\t\t\t\tauthSig,\r\n\t\t\t})\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.ADD_ITEM,\r\n\t\t\t\titem: new AdUnit(resItem).plainObj(),\r\n\t\t\t\titemType: 'AdUnit',\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_CREATING_ITEM',\r\n\t\t\t\targs: ['AdUnit', newItem.title],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_CREATING_ITEM', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CREATING_ITEM',\r\n\t\t\t\targs: ['AdUnit', err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function addSlot(item) {\r\n\tconst newItem = { ...item }\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst state = getState()\r\n\t\t\tconst authSig = selectAuthSig(state)\r\n\t\t\tlet fallbackUnit = null\r\n\t\t\tif (newItem.temp.useFallback) {\r\n\t\t\t\tconst imageIpfs = (await getImgsIpfsFromBlob({\r\n\t\t\t\t\ttempUrl: newItem.temp.tempUrl,\r\n\t\t\t\t\tauthSig,\r\n\t\t\t\t})).ipfs\r\n\r\n\t\t\t\tconst unit = new AdUnit({\r\n\t\t\t\t\ttype: newItem.type,\r\n\t\t\t\t\tmediaUrl: `ipfs://${imageIpfs}`,\r\n\t\t\t\t\ttargetUrl: newItem.targetUrl,\r\n\t\t\t\t\tmediaMime: newItem.temp.mime,\r\n\t\t\t\t\tcreated: Date.now(),\r\n\t\t\t\t\ttitle: newItem.title,\r\n\t\t\t\t\tdescription: newItem.description,\r\n\t\t\t\t\ttargeting: [],\r\n\t\t\t\t\ttags: [],\r\n\t\t\t\t\tpassback: true,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst resUnit = await postAdUnit({\r\n\t\t\t\t\tunit: unit.marketAdd,\r\n\t\t\t\t\tauthSig,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tfallbackUnit = resUnit.ipfs\r\n\t\t\t}\r\n\r\n\t\t\tnewItem.fallbackUnit = fallbackUnit\r\n\t\t\tnewItem.created = Date.now()\r\n\r\n\t\t\tif (newItem.temp.minPerImpression) {\r\n\t\t\t\tnewItem.minPerImpression = {\r\n\t\t\t\t\t[DAI.address]: parseUnits(newItem.temp.minPerImpression, DAI.decimals)\r\n\t\t\t\t\t\t.div(bigNumberify(1000))\r\n\t\t\t\t\t\t.toString(),\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst resItem = await postAdSlot({\r\n\t\t\t\tslot: new AdSlot(newItem).marketAdd,\r\n\t\t\t\tauthSig,\r\n\t\t\t})\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.ADD_ITEM,\r\n\t\t\t\titem: new AdSlot(resItem).plainObj(),\r\n\t\t\t\titemType: 'AdSlot',\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_CREATING_ITEM',\r\n\t\t\t\targs: ['AdSlot', newItem.title],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_CREATING_ITEM', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CREATING_ITEM',\r\n\t\t\t\targs: ['AdSlot', err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getAllItems() {\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst { account } = getState().persist\r\n\t\t\t// const { authSig } = account.wallet\r\n\t\t\tconst { address } = account.identity\r\n\t\t\tconst units = getAdUnits({ identity: address })\r\n\t\t\tconst slots = getAdSlots({ identity: address })\r\n\t\t\t// const campaigns = getCampaigns({ authSig })\r\n\r\n\t\t\tconst [\r\n\t\t\t\tresUnits,\r\n\t\t\t\tresSlots,\r\n\t\t\t\t// resCampaigns,\r\n\t\t\t] = await Promise.all([\r\n\t\t\t\tunits,\r\n\t\t\t\tslots,\r\n\t\t\t\t//\tcampaigns\r\n\t\t\t])\r\n\r\n\t\t\t// const campaignsMapped = resCampaigns.map(c => {\r\n\t\t\t// \treturn { ...c, ...c.spec }\r\n\t\t\t// })\r\n\r\n\t\t\tupdateItems({ items: resUnits, itemType: 'AdUnit' })(dispatch)\r\n\t\t\tupdateItems({ items: resSlots, itemType: 'AdSlot' })(dispatch)\r\n\t\t\t// updateItems({ items: campaignsMapped, itemType: 'Campaign' })(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_ITEMS', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_GETTING_ITEMS',\r\n\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function openCampaign({ campaign }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('opening-campaign', true)(dispatch)\r\n\t\tconst account = selectAccount(getState())\r\n\t\ttry {\r\n\t\t\tawait getAllValidatorsAuthForIdentity({\r\n\t\t\t\twithBalance: [{ channel: campaign }],\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\tconst { readyCampaign } = await openChannel({\r\n\t\t\t\tcampaign,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.ADD_ITEM,\r\n\t\t\t\titem: readyCampaign,\r\n\t\t\t\titemType: 'Campaign',\r\n\t\t\t})\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'OPENING_CAMPAIGN_SENT_TO_RELAYER',\r\n\t\t\t\targs: [readyCampaign.id],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_OPENING_CAMPAIGN', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_OPENING_CAMPAIGN',\r\n\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t})\r\n\t\t}\r\n\t\tupdateSpinner('opening-campaign', false)(dispatch)\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nexport function removeItemFromItem({ item, toRemove, authSig } = {}) {\r\n\treturn function(dispatch) {\r\n\t\t// removeItmFromItm({ item: item._id, collection: toRemove._id || toRemove, authSig: authSig })\r\n\t\t// \t.then((res) => {\r\n\t\t// \t\taddToast({ dispatch: dispatch, type: 'accept', toastStr: 'SUCCESS_REMOVE_ITEM_FROM_ITEM', args: [ItemTypesNames[item._type], item._meta.fullName, ItemTypesNames[toRemove._type], toRemove._meta.fullName,] })\r\n\t\t// \t\treturn dispatch({\r\n\t\t// \t\t\ttype: types.REMOVE_ITEM_FROM_ITEM,\r\n\t\t// \t\t\titem: item,\r\n\t\t// \t\t\ttoRemove: toRemove,\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// \t.catch((err) => {\r\n\t\t// \t\treturn addToast({ dispatch: dispatch, type: 'cancel', toastStr: 'ERR_REMOVE_ITEM_FROM_ITEM', args: [ItemTypesNames[item._type], ItemTypesNames[toRemove._type], err] })\r\n\t\t// \t})\r\n\t}\r\n}\r\n\r\nexport function addItemToItem({ item, toAdd, authSig } = {}) {\r\n\treturn function(dispatch) {\r\n\t\t// addItmToItm({ item: item._id, collection: toAdd._id || toAdd, authSig: authSig })\r\n\t\t// \t.then((res) => {\r\n\t\t// \t\t//TODO: use response and UPDATE_ITEM\r\n\t\t// \t\taddToast({ dispatch: dispatch, type: 'accept', toastStr: 'SUCCESS_ADD_ITEM_TO_ITEM', args: [ItemTypesNames[item._type], item._meta.fullName, ItemTypesNames[toAdd._type], toAdd._meta.fullName,] })\r\n\t\t// \t\treturn dispatch({\r\n\t\t// \t\t\ttype: types.ADD_ITEM_TO_ITEM,\r\n\t\t// \t\t\titem: item,\r\n\t\t// \t\t\ttoAdd: toAdd,\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// \t.catch((err) => {\r\n\t\t// \t\treturn addToast({ dispatch: dispatch, type: 'cancel', toastStr: 'ERR_ADD_ITEM_FROM_ITEM', args: [ItemTypesNames[item._type], ItemTypesNames[toAdd._type], err] })\r\n\t\t// \t})\r\n\t}\r\n}\r\n\r\n// Accepts the entire new item and replace so be careful!\r\nexport function updateItem({ item, itemType } = {}) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('update' + item.id, true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst { account } = getState().persist\r\n\t\t\tconst { authSig } = account.wallet\r\n\r\n\t\t\tlet updatedItem = null\r\n\t\t\tlet objModel = null\r\n\r\n\t\t\tconst { id } = item\r\n\r\n\t\t\tswitch (itemType) {\r\n\t\t\t\tcase 'AdSlot':\r\n\t\t\t\t\tif (item.temp.minPerImpression) {\r\n\t\t\t\t\t\titem.minPerImpression = {\r\n\t\t\t\t\t\t\t[DAI.address]: parseUnits(\r\n\t\t\t\t\t\t\t\titem.temp.minPerImpression,\r\n\t\t\t\t\t\t\t\tDAI.decimals\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.div(bigNumberify(1000))\r\n\t\t\t\t\t\t\t\t.toString(),\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst slot = new AdSlot(item).marketUpdate\r\n\t\t\t\t\tupdatedItem = (await updateAdSlot({ slot, id, authSig })).slot\r\n\t\t\t\t\tobjModel = AdSlot\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'AdUnit':\r\n\t\t\t\t\tconst unit = new AdUnit(item).marketUpdate\r\n\t\t\t\t\tupdatedItem = (await updateAdUnit({ unit, id, authSig })).unit\r\n\t\t\t\t\tobjModel = AdUnit\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error(translate('INVALID_ITEM_TYPE'))\r\n\t\t\t}\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.UPDATE_ITEM,\r\n\t\t\t\titem: new objModel(updatedItem).plainObj(),\r\n\t\t\t\titemType,\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_UPDATING_ITEM',\r\n\t\t\t\targs: [itemType, item.title],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_UPDATING_ITEM', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_UPDATING_ITEM',\r\n\t\t\t\targs: [itemType, err],\r\n\t\t\t})\r\n\t\t}\r\n\t\tupdateSpinner('update' + item.id, false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function deleteItem({ item, objModel, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._deleted = true\r\n\r\n\t// return updateItem({ item: item, authSig: authSig, successMsg: 'SUCCESS_DELETING_ITEM', errMsg: 'ERR_DELETING_ITEM' })\r\n}\r\n\r\nexport function restoreItem({ item, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._deleted = false\r\n\r\n\treturn updateItem({\r\n\t\titem: item,\r\n\t\tauthSig: authSig,\r\n\t\tsuccessMsg: 'SUCCESS_RESTORE_ITEM',\r\n\t\terrMsg: 'ERR_RESTORING_ITEM',\r\n\t})\r\n}\r\n\r\nconst findSourceByTag = tag => {\r\n\treturn Object.keys(SOURCES).find(\r\n\t\titem => SOURCES[item].src.filter(data => data.value === tag).length > 0\r\n\t)\r\n}\r\n\r\nexport function cloneItem({ item, itemType, objModel } = {}) {\r\n\treturn async function(dispatch) {\r\n\t\ttry {\r\n\t\t\tconst newItem = Base.updateObject({ item, objModel })\r\n\t\t\tnewItem.id = ''\r\n\t\t\tnewItem.temp = {\r\n\t\t\t\t...initialState.newItem[itemType].temp,\r\n\t\t\t\ttargets: item.targeting.map((t, index) => {\r\n\t\t\t\t\tconst key = findSourceByTag(t.tag) || ''\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tkey: index,\r\n\t\t\t\t\t\tcollection: 'targeting',\r\n\t\t\t\t\t\tsource: key,\r\n\t\t\t\t\t\tlabel: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\t\t\t\tplaceholder: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\t\t\t\ttarget: { ...t },\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\r\n\t\t\tconst tempUrl = helpers.getMediaUrlWithProvider(\r\n\t\t\t\tnewItem.mediaUrl,\r\n\t\t\t\tprocess.env.IPFS_GATEWAY\r\n\t\t\t)\r\n\r\n\t\t\tconst response = await fetch(tempUrl)\r\n\t\t\tconst mediaURL = URL.createObjectURL(await response.blob())\r\n\t\t\tconst mediaSize = await getMediaSize({\r\n\t\t\t\tmime: newItem.mediaMime,\r\n\t\t\t\tsrc: mediaURL,\r\n\t\t\t})\r\n\r\n\t\t\tconst temp = {\r\n\t\t\t\t...newItem.temp,\r\n\t\t\t\tmime: item.mediaMime,\r\n\t\t\t\ttempUrl: mediaURL,\r\n\t\t\t\twidth: mediaSize.width,\r\n\t\t\t\theight: mediaSize.height,\r\n\t\t\t}\r\n\r\n\t\t\tnewItem.temp = temp\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.UPDATE_NEW_ITEM,\r\n\t\t\t\titem: newItem,\r\n\t\t\t\titemType,\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CLONING_ITEM',\r\n\t\t\t\targs: [itemType, err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function archiveItem({ item, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._archived = true\r\n\r\n\treturn updateItem({\r\n\t\titem: item,\r\n\t\tauthSig: authSig,\r\n\t\tsuccessMsg: 'SUCCESS_ARCHIVING_ITEM',\r\n\t\terrMsg: 'ERR_ARCHIVING_ITEM',\r\n\t})\r\n}\r\n\r\nexport function unarchiveItem({ item, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._archived = false\r\n\r\n\treturn updateItem({\r\n\t\titem: item,\r\n\t\tauthSig: authSig,\r\n\t\tsuccessMsg: 'SUCCESS_UNARCHIVING_ITEM',\r\n\t\terrMsg: 'ERR_UNARCHIVING_ITEM',\r\n\t})\r\n}\r\n\r\nexport function setCurrentItem(item) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.SET_CURRENT_ITEM,\r\n\t\t\titem: item,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateCurrentItem(item, newMeta) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_CURRENT_ITEM,\r\n\t\t\titem: item,\r\n\t\t\tmeta: newMeta,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateItems({ items, itemType }) {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ALL_ITEMS,\r\n\t\t\titems: items,\r\n\t\t\titemType: itemType,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const resetAllItems = () => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ALL_ITEMS,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const updateTags = ({ tags }) => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_TAGS,\r\n\t\t\ttags: tags,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const addNewTag = ({ tag }) => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.ADD_NEW_TAG,\r\n\t\t\ttag: tag,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const updateCampaignState = ({ campaign }) => {\r\n\treturn async dispatch => {\r\n\t\ttry {\r\n\t\t\tconst state = await lastApprovedState({ campaign })\r\n\t\t\tconst newCampaign = { ...campaign }\r\n\t\t\tnewCampaign.state = state\r\n\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: types.UPDATE_ITEM,\r\n\t\t\t\titem: newCampaign,\r\n\t\t\t\titemType: 'Campaign',\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_CAMPAIGN_LAST_STATUS', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_GETTING_CAMPAIGN_LAST_STATUS',\r\n\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function closeCampaign({ campaign }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('closing-campaign', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst { account } = getState().persist\r\n\t\t\tconst { results, authTokens } = await closeChannel({ account, campaign })\r\n\r\n\t\t\tupdateValidatorAuthTokens({ newAuth: authTokens })(dispatch, getState)\r\n\t\t\t// TODO: update campaign state\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_CLOSING_CAMPAIGN',\r\n\t\t\t\targs: [campaign.id],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_CLOSING_CAMPAIGN', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CLOSING_CAMPAIGN',\r\n\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t})\r\n\t\t}\r\n\t\tupdateSpinner('closing-campaign', false)(dispatch)\r\n\t}\r\n}\r\n","import { ethers, constants } from 'ethers'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { isEthAddress } from 'helpers/validators'\r\nimport ERC20TokenABI from 'services/smart-contracts/abi/ERC20Token'\r\n\r\nexport const isEthAddressERC20 = async (addr = '', authType) => {\r\n\ttry {\r\n\t\tif (isEthAddress(addr)) {\r\n\t\t\tconst { provider } = await getEthers(authType)\r\n\t\t\tconst contract = new ethers.Contract(addr, ERC20TokenABI, provider)\r\n\t\t\tawait Promise.all([\r\n\t\t\t\tcontract.totalSupply(),\r\n\t\t\t\tcontract.balanceOf(constants.AddressZero),\r\n\t\t\t\tcontract.allowance(constants.AddressZero, constants.AddressZero),\r\n\t\t\t])\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t} catch (error) {\r\n\t\treturn false\r\n\t}\r\n}\r\n\r\nexport const getERC20Balance = async ({\r\n\taddr = '',\r\n\tbalanceFor = '',\r\n\tauthType,\r\n}) => {\r\n\ttry {\r\n\t\tconst { provider } = await getEthers(authType)\r\n\t\tconst contract = new ethers.Contract(addr, ERC20TokenABI, provider)\r\n\t\tconst balance = await contract.balanceOf(balanceFor)\r\n\r\n\t\treturn balance\r\n\t} catch (error) {\r\n\t\tconsole.error('ERR_GETTING_ERC20_BALANCE')\r\n\t\treturn null\r\n\t}\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\n\r\nexport const isConnectionLost = async authType => {\r\n\ttry {\r\n\t\t// When we remove Metamask\r\n\t\t// if in 5 sec doesn't connect will\r\n\t\t// return that connection is lost\r\n\t\tconst eth = await Promise.race([\r\n\t\t\tgetEthers(authType),\r\n\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\treject('Timed out')\r\n\t\t\t\t}, 5000)\r\n\t\t\t}),\r\n\t\t])\r\n\t\tawait eth.provider.getBlockNumber()\r\n\t\treturn false\r\n\t} catch (error) {\r\n\t\treturn true\r\n\t}\r\n}\r\n","import { utils } from 'ethers'\r\nimport { isEthAddressERC20 } from 'services/smart-contracts/actions/erc20'\r\nimport { isConnectionLost } from 'services/smart-contracts/actions/common'\r\n\r\n/*eslint-disable */\r\nconst urlRegex = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/\r\nconst emailRegex = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\r\nconst onlyDigitsRegex = /^([1-9]+\\d*)$/\r\n// Min 8 chars - at least 1 uppercase, 1 lowercase, 1 digit\r\nconst passwordRegex = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/\r\nconst couponRegex = /^[a-fA-F0-9]{8}$/\r\n/*eslint-enable */\r\n\r\nexport const validUrl = url => {\r\n\turl = url || ''\r\n\tconst isValid = urlRegex.test(url)\r\n\treturn isValid\r\n}\r\n\r\nexport const validEmail = email => {\r\n\temail = email || ''\r\n\tconst isValid = emailRegex.test(email)\r\n\treturn isValid\r\n}\r\n\r\nexport const validateNumber = numberStr => {\r\n\tnumberStr = numberStr || ''\r\n\tconst isValid =\r\n\t\t!isNaN(parseFloat(numberStr)) && isFinite(numberStr) && numberStr > 0\r\n\treturn isValid\r\n}\r\n\r\n// > 0\r\nexport const validPositiveInt = intStr => {\r\n\tintStr = intStr || ''\r\n\tconst isValid = onlyDigitsRegex.test(intStr)\r\n\treturn isValid\r\n}\r\n\r\nexport const validName = name => {\r\n\tlet msg = ''\r\n\tconst errMsgArgs = []\r\n\tif (!name) {\r\n\t\tmsg = 'ERR_REQUIRED_FIELD'\r\n\t} else if (name.length < 4) {\r\n\t\tmsg = 'ERR_MIN_LENGTH'\r\n\t\terrMsgArgs.push(4)\r\n\t} else if (name.length > 128) {\r\n\t\tmsg = 'ERR_MAX_LENGTH'\r\n\t\terrMsgArgs.push(128)\r\n\t}\r\n\r\n\treturn {\r\n\t\tmsg,\r\n\t\terrMsgArgs,\r\n\t}\r\n}\r\n\r\nexport const validPassword = password => {\r\n\tpassword = password || ''\r\n\tconst isValid = passwordRegex.test(password)\r\n\treturn isValid\r\n}\r\n\r\nexport const validQuickAccountCoupon = coupon => {\r\n\tcoupon = coupon || ''\r\n\tconst isValid = couponRegex.test(coupon)\r\n\treturn isValid\r\n}\r\n\r\nexport const isEthAddress = (addr = '') => {\r\n\ttry {\r\n\t\tutils.getAddress(addr)\r\n\t} catch (e) {\r\n\t\treturn false\r\n\t}\r\n\treturn true\r\n}\r\n\r\nexport const isEthAddressZero = (addr = '') => {\r\n\treturn isEthAddress(addr)\r\n\t\t? utils.bigNumberify(utils.getAddress(addr)).isZero()\r\n\t\t: false\r\n}\r\n\r\nexport const validEthAddress = async ({\r\n\taddr = '',\r\n\tnonZeroAddr,\r\n\tnonERC20,\r\n\tauthType,\r\n}) => {\r\n\tlet msg = ''\r\n\ttry {\r\n\t\tconst ethAddressZero = isEthAddressZero(addr)\r\n\t\tconst notEthAddress = !isEthAddress(addr)\r\n\t\tif (notEthAddress) {\r\n\t\t\tmsg = 'ERR_INVALID_ETH_ADDRESS'\r\n\t\t} else {\r\n\t\t\tif (nonZeroAddr && ethAddressZero) {\r\n\t\t\t\tmsg = 'ERR_INVALID_ETH_ADDRESS_ZERO'\r\n\t\t\t} else {\r\n\t\t\t\tconst connectionLost = await isConnectionLost(authType)\r\n\t\t\t\tif (connectionLost) {\r\n\t\t\t\t\tmsg = 'ERR_INVALID_CONNECTION_LOST'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst ethAddressERC20 = await isEthAddressERC20(addr)\r\n\t\t\t\t\tif (!ethAddressZero && nonERC20 && ethAddressERC20)\r\n\t\t\t\t\t\tmsg = 'ERR_INVALID_ETH_ADDRESS_TOKEN'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tif (error === 'Non-Ethereum browser detected.')\r\n\t\t\tmsg = 'ERR_INVALID_CONNECTION_LOST'\r\n\t}\r\n\treturn { msg }\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport { updateSpinner } from './uiActions'\r\nimport { validEthAddress } from '../helpers/validators'\r\nimport { translate } from 'services/translations/translations'\r\nimport { addToast } from './uiActions'\r\nimport { getERC20Balance } from 'services/smart-contracts/actions/erc20'\r\nimport { formatUnits, bigNumberify } from 'ethers/utils'\r\nimport {\r\n\tvalidEmail,\r\n\tvalidPassword,\r\n\tvalidQuickAccountCoupon,\r\n} from 'helpers/validators'\r\nimport { t } from 'selectors'\r\nimport { getErrorMsg } from 'helpers/errors'\r\nimport { checkCoupon } from 'services/adex-relayer/actions'\r\n\r\nexport function validateAddress({ addr, dirty, validate, name, setBalance }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { wallet, identity } = getState().persist.account\r\n\t\tconst { authType } = wallet\r\n\t\ttry {\r\n\t\t\tif (validate) validate(name, { isValid: false })\r\n\t\t\tupdateSpinner(name, dirty)(dispatch)\r\n\t\t\tconst { msg } = await validEthAddress({\r\n\t\t\t\taddr,\r\n\t\t\t\tnonZeroAddr: true,\r\n\t\t\t\tnonERC20: !setBalance,\r\n\t\t\t\tauthType,\r\n\t\t\t})\r\n\t\t\tconst isValid = !msg\r\n\r\n\t\t\tif (typeof setBalance === 'function') {\r\n\t\t\t\tconst balance =\r\n\t\t\t\t\t(await getERC20Balance({\r\n\t\t\t\t\t\taddr,\r\n\t\t\t\t\t\tauthType,\r\n\t\t\t\t\t\tbalanceFor: identity.address,\r\n\t\t\t\t\t})) || bigNumberify('0')\r\n\t\t\t\tsetBalance(formatUnits(balance, 18))\r\n\t\t\t}\r\n\t\t\tif (validate)\r\n\t\t\t\tvalidate(name, { isValid: isValid, err: { msg: msg }, dirty: dirty })\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_VALIDATING_ETH_ADDRESS', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_VALIDATING_ETH_ADDRESS', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateSpinner(name, false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function updateValidationErrors(item, newErrors) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ITEM_VALIDATION,\r\n\t\t\titem,\r\n\t\t\terrors: newErrors,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetValidationErrors(item, key) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ITEM_VALIDATION,\r\n\t\t\titem,\r\n\t\t\tkey,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function validate(\r\n\tvalidateId,\r\n\tkey,\r\n\t{ isValid, err = { msg: '', args: [] }, dirty = false, removeAll = false }\r\n) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tif (!isValid) {\r\n\t\t\tlet errors = {}\r\n\t\t\terrors[key] = {\r\n\t\t\t\terrMsg: t(err.msg, { args: err.args }),\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t}\r\n\r\n\t\t\tupdateValidationErrors(validateId, errors)(dispatch)\r\n\t\t} else if (removeAll) {\r\n\t\t\tresetValidationErrors(validateId)(dispatch)\r\n\t\t} else {\r\n\t\t\tresetValidationErrors(validateId, key)(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function validateEmail(validateId, email, dirty) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst isValid = validEmail(email)\r\n\t\tvalidate(validateId, 'email', {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL' },\r\n\t\t\tdirty,\r\n\t\t})(dispatch)\r\n\r\n\t\treturn isValid\r\n\t}\r\n}\r\n\r\nexport function validateEmailCheck(validateId, emailCheck, email, dirty) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst isValid = !!emailCheck && !!email && emailCheck === email\r\n\t\tvalidate(validateId, 'emailCheck', {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL_CHECK' },\r\n\t\t\tdirty,\r\n\t\t})(dispatch)\r\n\r\n\t\treturn isValid\r\n\t}\r\n}\r\n\r\nexport function validatePassword(validateId, password, dirty) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst isValid = validPassword(password)\r\n\t\tvalidate(validateId, 'password', {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'ERR_PASSWORD' },\r\n\t\t\tdirty,\r\n\t\t})(dispatch)\r\n\r\n\t\treturn isValid\r\n\t}\r\n}\r\n\r\nexport function validatePasswordCheck(\r\n\tvalidateId,\r\n\tpasswordCheck,\r\n\tpassword,\r\n\tdirty\r\n) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst isValid = !!passwordCheck && !!password && passwordCheck === password\r\n\t\tvalidate(validateId, 'passwordCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_PASSWORD_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})(dispatch)\r\n\r\n\t\treturn isValid\r\n\t}\r\n}\r\n\r\nexport function validateTOS(validateId, accepted, dirty) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst isValid = !!accepted\r\n\t\tvalidate(validateId, 'tosCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_TOS_CHECK' },\r\n\t\t\tdirty,\r\n\t\t})(dispatch)\r\n\r\n\t\treturn isValid\r\n\t}\r\n}\r\n\r\nexport function validateGrantCode(validateId, hasGrantCode, coupon, dirty) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner(validateId + 'grant-check', true)(dispatch)\r\n\t\tlet isValid = true\r\n\t\tlet msg = ''\r\n\t\ttry {\r\n\t\t\tif (hasGrantCode) {\r\n\t\t\t\tisValid = validQuickAccountCoupon(coupon)\r\n\r\n\t\t\t\tif (isValid) {\r\n\t\t\t\t\tconst cpn = await checkCoupon({ coupon })\r\n\t\t\t\t\tisValid = cpn.exist === true && cpn.used === false\r\n\t\t\t\t\tif (cpn.exist === false) {\r\n\t\t\t\t\t\tmsg = 'ERR_COUPON_NOT_EXIST'\r\n\t\t\t\t\t} else if (cpn.used === true) {\r\n\t\t\t\t\t\tmsg = 'ERR_COUPON_USED'\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmsg = 'ERR_COUPON_FORMAT'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tisValid = false\r\n\t\t\tmsg = err\r\n\t\t\tconsole.error('ERR_CHECKING_GRANT_CODE', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_CHECKING_GRANT_CODE', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tvalidate(validateId, 'grantCode', {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg },\r\n\t\t\tdirty,\r\n\t\t})(dispatch)\r\n\t\tupdateSpinner(validateId + 'grant-check', false)(dispatch)\r\n\t\treturn isValid\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport {\r\n\tgrantAccount,\r\n\tquickWalletSalt,\r\n\tgetQuickWallet,\r\n} from 'services/adex-relayer/actions'\r\nimport { updateSpinner, addToast } from './uiActions'\r\nimport {\r\n\tregisterExpectedIdentity,\r\n\tgetOwnerIdentities,\r\n} from 'services/adex-relayer/actions'\r\nimport { translate } from 'services/translations/translations'\r\nimport {\r\n\tcreateSession,\r\n\tregisterAccount as registerAccountAction,\r\n} from './accountActions'\r\n\r\nimport {\r\n\tgetIdentityDeployData,\r\n\twithdrawFromIdentity,\r\n\tsetIdentityPrivilege,\r\n} from 'services/smart-contracts/actions/identity'\r\nimport {\r\n\taddDataToWallet,\r\n\tgetWalletHash,\r\n\tgetLocalWallet,\r\n\tmigrateLegacyWallet,\r\n\twalletInfo,\r\n\tcreateLocalWallet,\r\n\tgenerateSalt,\r\n} from 'services/wallet/wallet'\r\nimport { saveToLocalStorage } from 'helpers/localStorageHelpers'\r\nimport { selectAccount, selectIdentity } from 'selectors'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { validEmail } from 'helpers/validators'\r\nimport {\r\n\tvalidate,\r\n\tvalidateEmail,\r\n\tvalidateEmailCheck,\r\n\tvalidatePassword,\r\n\tvalidatePasswordCheck,\r\n\tvalidateGrantCode,\r\n\tvalidateTOS,\r\n} from './validationActions'\r\nimport { getErrorMsg } from 'helpers/errors'\r\n\r\n// MEMORY STORAGE\r\nexport function updateIdentity(prop, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_IDENTITY,\r\n\t\t\tprop: prop,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetIdentity() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_IDENTITY,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function initIdentity({ email, authType }) {\r\n\treturn function(dispatch) {\r\n\t\tdispatch({\r\n\t\t\ttype: types.RESET_IDENTITY,\r\n\t\t})\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: types.UPDATE_IDENTITY,\r\n\t\t\tprop: 'email',\r\n\t\t\tvalue: email,\r\n\t\t})\r\n\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_IDENTITY,\r\n\t\t\tprop: 'authType',\r\n\t\t\tvalue: authType,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// MEMORY STORAGE\r\nexport function updateWallet(prop, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_WALLET,\r\n\t\t\tprop: prop,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetWallet() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_WALLET,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function getGrantAccount({\r\n\twalletAddr,\r\n\temail,\r\n\tpassword,\r\n\tgrantCode,\r\n\tauthType,\r\n}) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('getting-grant-identity', true)(dispatch)\r\n\t\tlet identityAddr = null\r\n\t\ttry {\r\n\t\t\tconst identityData = await grantAccount({\r\n\t\t\t\townerAddr: walletAddr,\r\n\t\t\t\tmail: email,\r\n\t\t\t\tcouponCode: grantCode,\r\n\t\t\t})\r\n\t\t\t// TODO: validate identityData\r\n\r\n\t\t\tif (identityData) {\r\n\t\t\t\taddDataToWallet({\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tauthType,\r\n\t\t\t\t\tdataKey: 'identity',\r\n\t\t\t\t\tdataValue: identityData.address,\r\n\t\t\t\t})\r\n\t\t\t\taddDataToWallet({\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tauthType,\r\n\t\t\t\t\tdataKey: 'privileges',\r\n\t\t\t\t\tdataValue: identityData.privileges,\r\n\t\t\t\t})\r\n\t\t\t\tupdateIdentity('identityAddr', identityData.address)(dispatch)\r\n\t\t\t\tupdateIdentity('identityData', identityData)(dispatch)\r\n\t\t\t\tidentityAddr = identityData.address\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_REGISTER_GRANT_IDENTITY', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_REGISTER_GRANT_IDENTITY', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner('getting-grant-identity', false)(dispatch)\r\n\t\treturn identityAddr\r\n\t}\r\n}\r\n\r\nexport function getIdentityTxData({ owner, privLevel }) {\r\n\treturn async function(dispatch) {\r\n\t\ttry {\r\n\t\t\tconst txData = await getIdentityDeployData({ owner, privLevel })\r\n\t\t\tupdateIdentity('identityAddr', txData.identityAddr)(dispatch)\r\n\t\t\tupdateIdentity('identityTxData', txData)(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GET_IDENTITY_TX_DATA', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_GET_IDENTITY_TX_DATA', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getRegisterExpectedIdentity({ owner, mail }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('getting-expected-identity', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst identityData = await registerExpectedIdentity({ owner, mail })\r\n\t\t\tupdateIdentity('identityData', identityData)(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_REGISTERING_EXPECTED_IDENTITY', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_REGISTERING_EXPECTED_IDENTITY', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateSpinner('getting-expected-identity', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function onUploadLocalWallet(event) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('uploading-account-data', true)(dispatch)\r\n\t\tconst file = event.target.files[0]\r\n\t\tconst reader = new FileReader()\r\n\r\n\t\treader.onload = ev => {\r\n\t\t\ttry {\r\n\t\t\t\tconst obj = JSON.parse(ev.target.result)\r\n\t\t\t\tif (\r\n\t\t\t\t\t!obj ||\r\n\t\t\t\t\t!obj.key ||\r\n\t\t\t\t\t!obj.wallet ||\r\n\t\t\t\t\t!obj.wallet.data ||\r\n\t\t\t\t\t!obj.wallet.identity ||\r\n\t\t\t\t\t!obj.wallet.privileges\r\n\t\t\t\t) {\r\n\t\t\t\t\tthrow new Error(translate('INVALID_JSON_DATA'))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsaveToLocalStorage(obj.wallet, obj.key)\r\n\t\t\t\t\tupdateIdentity('uploadedLocalWallet', obj.key)(dispatch)\r\n\t\t\t\t\taddToast({\r\n\t\t\t\t\t\ttype: 'accept',\r\n\t\t\t\t\t\tlabel: translate('SUCCESS_UPLOADING_ACCOUNT_DATA'),\r\n\t\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t\t})(dispatch)\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Error uploading account json data: ', err)\r\n\t\t\t\taddToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\tlabel: translate('ERR_UPLOADING_ACCOUNT_DATA', {\r\n\t\t\t\t\t\targs: [err.message],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})(dispatch)\r\n\t\t\t}\r\n\t\t\tupdateSpinner('uploading-account-data', true)(dispatch)\r\n\t\t}\r\n\r\n\t\tconst onError = err => {\r\n\t\t\tconsole.error('Error uploading account data.', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_UPLOADING_ACCOUNT_DATA', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 5000,\r\n\t\t\t})(dispatch)\r\n\t\t\tupdateSpinner('uploading-account-data', true)(dispatch)\r\n\t\t}\r\n\r\n\t\treader.onerror = ev => {\r\n\t\t\treader.abort()\r\n\t\t\tonError(translate())\r\n\t\t}\r\n\r\n\t\treader.onabort = ev => {\r\n\t\t\tonError(translate('ABORTING_DATA_UPLOAD'))\r\n\t\t}\r\n\r\n\t\treader.readAsText(file)\r\n\t}\r\n}\r\n\r\nexport function identityWithdraw({\r\n\tamountToWithdraw,\r\n\twithdrawTo,\r\n\ttokenAddress,\r\n}) {\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst account = selectAccount(getState())\r\n\t\t\tconst result = await withdrawFromIdentity({\r\n\t\t\t\taccount,\r\n\t\t\t\tamountToWithdraw,\r\n\t\t\t\twithdrawTo,\r\n\t\t\t\ttokenAddress,\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\tlabel: translate('IDENTITY_WITHDRAW_NOTIFICATION', { args: [result] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_IDENTITY_WITHDRAW_NOTIFICATION', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_IDENTITY_WITHDRAW_NOTIFICATION', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function ownerIdentities({ owner }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('getting-owner-identities', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst identityData = await getOwnerIdentities({ owner })\r\n\t\t\tupdateIdentity('ownerIdentities', identityData)(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_OWNER_IDENTITIES', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_GETTING_OWNER_IDENTITIES', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateSpinner('getting-owner-identities', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function addrIdentityPrivilege({ setAddr, privLevel }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst account = selectAccount(getState())\r\n\t\t\tconst result = await setIdentityPrivilege({\r\n\t\t\t\taccount,\r\n\t\t\t\tsetAddr,\r\n\t\t\t\tprivLevel,\r\n\t\t\t})\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\tlabel: translate('IDENTITY_SET_ADDR_PRIV_NOTIFICATION', {\r\n\t\t\t\t\targs: [result],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_IDENTITY_SET_ADDR_PRIV_NOTIFICATION', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_IDENTITY_SET_ADDR_PRIV_NOTIFICATION', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getQuickWalletSalt({ email }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('getting-quick-wallet-salt', true)(dispatch)\r\n\t\tlet salt = null\r\n\t\ttry {\r\n\t\t\tsalt = generateSalt(email)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_WALLET_SALT', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_GETTING_WALLET_SALT', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateIdentity('backupSalt', salt)(dispatch)\r\n\t\tupdateSpinner('getting-quick-wallet-salt', false)(dispatch)\r\n\t\treturn salt\r\n\t}\r\n}\r\n\r\nexport function login() {\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst identity = selectIdentity(getState())\r\n\t\t\tconst {\r\n\t\t\t\twallet,\r\n\t\t\t\temail,\r\n\t\t\t\tidentityData,\r\n\t\t\t\tidentityTxData,\r\n\t\t\t\tdeleteLegacyKey,\r\n\t\t\t\tregisterAccount,\r\n\t\t\t} = identity\r\n\r\n\t\t\tconst newWallet = { ...wallet }\r\n\r\n\t\t\tif (registerAccount) {\r\n\t\t\t\tawait registerAccountAction({\r\n\t\t\t\t\towner: newWallet.address,\r\n\t\t\t\t\tidentityTxData,\r\n\t\t\t\t\temail,\r\n\t\t\t\t})(dispatch)\r\n\t\t\t}\r\n\r\n\t\t\tawait createSession({\r\n\t\t\t\tidentity: identityData,\r\n\t\t\t\twallet: newWallet,\r\n\t\t\t\temail,\r\n\t\t\t\tdeleteLegacyKey,\r\n\t\t\t})(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_LOGIN', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_LOGIN', { args: [getErrorMsg(err)] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function validateQuickLogin({ validateId, dirty }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner(validateId, true)(dispatch)\r\n\t\tconst identity = selectIdentity(getState())\r\n\t\tconst { password, email, authType } = identity\r\n\r\n\t\tlet wallet = {}\r\n\t\tlet error = 'INVALID_EMAIL_OR_PASSWORD'\r\n\t\tlet actualAuthType = authType\r\n\r\n\t\ttry {\r\n\t\t\tif (email && password) {\r\n\t\t\t\tlet walletData = getLocalWallet({\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tauthType: actualAuthType,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (!walletData) {\r\n\t\t\t\t\tconst salt = generateSalt(email)\r\n\t\t\t\t\tconst hash = getWalletHash({ salt, password })\r\n\t\t\t\t\tconst { encryptedWallet } =\r\n\t\t\t\t\t\t(await getQuickWallet({\r\n\t\t\t\t\t\t\thash,\r\n\t\t\t\t\t\t})) || {}\r\n\r\n\t\t\t\t\tconst backupWallet = encryptedWallet || {}\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tbackupWallet.wallet &&\r\n\t\t\t\t\t\tbackupWallet.key &&\r\n\t\t\t\t\t\tbackupWallet.wallet.data &&\r\n\t\t\t\t\t\tbackupWallet.wallet.identity &&\r\n\t\t\t\t\t\tbackupWallet.wallet.privileges\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tconst info = walletInfo(backupWallet.key, 'backup', null)\r\n\t\t\t\t\t\tactualAuthType = info.authType\r\n\t\t\t\t\t\tsaveToLocalStorage(backupWallet.wallet, backupWallet.key)\r\n\r\n\t\t\t\t\t\twalletData = getLocalWallet({\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tpassword,\r\n\t\t\t\t\t\t\tauthType: actualAuthType,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!!walletData && walletData.data && walletData.data.address) {\r\n\t\t\t\t\twallet = { ...walletData.data }\r\n\t\t\t\t\twallet.email = email\r\n\t\t\t\t\twallet.password = password\r\n\t\t\t\t\twallet.authType = actualAuthType || AUTH_TYPES.GRANT.name\r\n\t\t\t\t\twallet.identity = {\r\n\t\t\t\t\t\taddress: walletData.identity,\r\n\t\t\t\t\t\tprivileges: walletData.privileges || walletData.identityPrivileges,\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!authType) {\r\n\t\t\t\t\t\tmigrateLegacyWallet({ email, password })\r\n\t\t\t\t\t\tupdateIdentity('deleteLegacyKey', true)(dispatch)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdateIdentity('identityAddr', walletData ? walletData.identity : null)(\r\n\t\t\t\t\tdispatch\r\n\t\t\t\t)\r\n\t\t\t\tupdateIdentity('wallet', wallet)(dispatch)\r\n\t\t\t\tupdateIdentity('walletAddr', wallet.address)(dispatch)\r\n\t\t\t\tupdateIdentity('identityData', wallet.identity)(dispatch)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_QUICK_WALLET_LOGIN', err)\r\n\t\t\terror = err\r\n\t\t}\r\n\r\n\t\tconst isValid = !!wallet.address\r\n\r\n\t\tvalidate(validateId, 'wallet', {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'ERR_QUICK_WALLET_LOGIN', args: [getErrorMsg(error)] },\r\n\t\t\tdirty: dirty,\r\n\t\t})(dispatch)\r\n\r\n\t\tif (isValid) {\r\n\t\t\tawait login()(dispatch, getState)\r\n\t\t}\r\n\t\tupdateSpinner(validateId, false)(dispatch)\r\n\t}\r\n}\r\n\r\nconst handleAfterValidation = ({ isValid, onValid, onInvalid }) => {\r\n\tif (isValid && typeof onValid === 'function') {\r\n\t\tonValid()\r\n\t}\r\n\tif (!isValid && typeof onInvalid === 'function') {\r\n\t\tonInvalid()\r\n\t}\r\n}\r\n\r\nexport function validateStandardLogin({ validateId, dirty }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner(validateId, true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst identity = selectIdentity(getState())\r\n\t\t\tconst { wallet, identityContractAddress } = identity\r\n\t\t\tconst { address } = wallet\r\n\r\n\t\t\tconst identityDataSplit = (identityContractAddress || '').split('-')\r\n\t\t\tconst identityData = {\r\n\t\t\t\taddress: identityDataSplit[0],\r\n\t\t\t\tprivileges: parseInt(identityDataSplit[1] || 0),\r\n\t\t\t}\r\n\r\n\t\t\tupdateIdentity('wallet', wallet)(dispatch)\r\n\t\t\tupdateIdentity('walletAddr', address)(dispatch)\r\n\t\t\tupdateIdentity('identityData', identityData)(dispatch)\r\n\r\n\t\t\tconst isValid = !!identityData.address\r\n\r\n\t\t\tvalidate(validateId, 'identityContractAddress', {\r\n\t\t\t\tisValid: isValid,\r\n\t\t\t\terr: { msg: 'ERR_EXTERNAL_WALLET_LOGIN' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})(dispatch)\r\n\r\n\t\t\tif (isValid) {\r\n\t\t\t\tawait login()(dispatch, getState)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_VALIDATING_STANDARD_LOGIN', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_VALIDATING_STANDARD_LOGIN', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner(validateId, false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function validateQuickDeploy({ validateId, dirty }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner(validateId, true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst identity = selectIdentity(getState())\r\n\t\t\tconst { identityAddr, email, password, grantCode } = identity\r\n\r\n\t\t\tlet grantIdentity = null\r\n\r\n\t\t\tif (!identityAddr) {\r\n\t\t\t\tconst authType = !!grantCode\r\n\t\t\t\t\t? AUTH_TYPES.GRANT.name\r\n\t\t\t\t\t: AUTH_TYPES.QUICK.name\r\n\r\n\t\t\t\tconst walletData = createLocalWallet({\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tauthType,\r\n\t\t\t\t})\r\n\r\n\t\t\t\twalletData.email = email\r\n\t\t\t\twalletData.password = password\r\n\r\n\t\t\t\tconst walletAddr = walletData.address\r\n\r\n\t\t\t\tif (grantCode) {\r\n\t\t\t\t\tgrantIdentity = await getGrantAccount({\r\n\t\t\t\t\t\twalletAddr,\r\n\t\t\t\t\t\temail,\r\n\t\t\t\t\t\tpassword,\r\n\t\t\t\t\t\tgrantCode,\r\n\t\t\t\t\t\tauthType,\r\n\t\t\t\t\t})(dispatch)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait getIdentityTxData({\r\n\t\t\t\t\t\towner: walletAddr,\r\n\t\t\t\t\t\tprivLevel: 3,\r\n\t\t\t\t\t})(dispatch)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdateIdentity('wallet', walletData)(dispatch)\r\n\t\t\t\tupdateIdentity('walletAddr', walletAddr)(dispatch)\r\n\t\t\t\tupdateIdentity('registerAccount', !grantCode)(dispatch)\r\n\t\t\t}\r\n\r\n\t\t\tconst isValid = !!identityAddr || !!grantIdentity\r\n\r\n\t\t\tvalidate(validateId, 'identityAddr', {\r\n\t\t\t\tisValid,\r\n\t\t\t\terr: { msg: 'ERR_IDENTITY_NOT_GENERATED' },\r\n\t\t\t\tdirty,\r\n\t\t\t})(dispatch)\r\n\r\n\t\t\tif (isValid) {\r\n\t\t\t\tawait login()(dispatch, getState)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_VALIDATING_QUICK_DEPLOY', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_VALIDATING_QUICK_DEPLOY', {\r\n\t\t\t\t\targs: [getErrorMsg(err)],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner(validateId, false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function validateQuickInfo({ validateId, dirty, onValid, onInvalid }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner(validateId, true)(dispatch)\r\n\r\n\t\tconst identity = selectIdentity(getState())\r\n\t\tconst {\r\n\t\t\temail,\r\n\t\t\temailCheck,\r\n\t\t\tpassword,\r\n\t\t\tpasswordCheck,\r\n\t\t\thasGrantCode,\r\n\t\t\tgrantCode,\r\n\t\t\ttosCheck,\r\n\t\t} = identity\r\n\r\n\t\tconst validations = await Promise.all([\r\n\t\t\tvalidateEmail(validateId, email, dirty)(dispatch),\r\n\t\t\tvalidateEmailCheck(validateId, emailCheck, email, dirty)(dispatch),\r\n\t\t\tvalidatePassword(validateId, password, dirty)(dispatch),\r\n\t\t\tvalidatePasswordCheck(validateId, passwordCheck, password, dirty)(\r\n\t\t\t\tdispatch\r\n\t\t\t),\r\n\t\t\tvalidateGrantCode(validateId, hasGrantCode, grantCode, dirty)(dispatch),\r\n\t\t\tvalidateTOS(validateId, tosCheck, dirty)(dispatch),\r\n\t\t])\r\n\r\n\t\tconst isValid = validations.every(v => v === true)\r\n\r\n\t\thandleAfterValidation({ isValid, onValid, onInvalid })\r\n\r\n\t\tupdateSpinner(validateId, false)(dispatch)\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\n\r\n// MEMORY STORAGE\r\nexport function updateNewBid({ bidId, key, value }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NEW_BID,\r\n\t\t\tbidId: bidId,\r\n\t\t\tkey: key,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetNewBid({ bidId }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_NEW_BID,\r\n\t\t\tbidId: bidId,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// PERSIST STORAGE\r\n\r\nexport const updateBids = ({ advBids, pubBids, bidsById }) => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ALL_BIDS,\r\n\t\t\tadvBids: advBids,\r\n\t\t\tpubBids: pubBids,\r\n\t\t\tbidsById: bidsById,\r\n\t\t})\r\n\t}\r\n}\r\nexport const resetAllBids = () => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ALL_BIDS,\r\n\t\t})\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport { addToast, removeToast, confirmAction } from './uiActions'\r\nimport { translate } from 'services/translations/translations'\r\nimport {\r\n\tgetValidatorAuthToken,\r\n\tidentityAnalytics,\r\n} from 'services/adex-validator/actions'\r\nimport { updateValidatorAuthTokens } from './accountActions'\r\nimport {\r\n\tVALIDATOR_ANALYTICS_SIDES,\r\n\tVALIDATOR_ANALYTICS_EVENT_TYPES,\r\n\tVALIDATOR_ANALYTICS_METRICS,\r\n\tVALIDATOR_ANALYTICS_TIMEFRAMES,\r\n} from 'constants/misc'\r\nimport { getErrorMsg } from 'helpers/errors'\r\n\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\n\r\nconst analyticsParams = () => {\r\n\tconst callsParams = []\r\n\r\n\tVALIDATOR_ANALYTICS_SIDES.forEach(side =>\r\n\t\tVALIDATOR_ANALYTICS_EVENT_TYPES.forEach(eventType =>\r\n\t\t\tVALIDATOR_ANALYTICS_METRICS.forEach(metric =>\r\n\t\t\t\tVALIDATOR_ANALYTICS_TIMEFRAMES.forEach(timeframe => {\r\n\t\t\t\t\tcallsParams.push({\r\n\t\t\t\t\t\tmetric,\r\n\t\t\t\t\t\ttimeframe: timeframe.value,\r\n\t\t\t\t\t\tside,\r\n\t\t\t\t\t\teventType,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t)\r\n\t)\r\n\r\n\treturn callsParams\r\n}\r\n\r\n// getIdentityStatistics tooks to long some times\r\n// if the account is change we do not update the account\r\n// TODO: we can use something for abortable tasks\r\nfunction checkAccountChanged(getState, account) {\r\n\tconst accountCheck = getState().persist.account\r\n\tconst accountChanged =\r\n\t\t!accountCheck.wallet.address ||\r\n\t\taccountCheck.wallet.address !== account.wallet.address ||\r\n\t\t!accountCheck.identity.address ||\r\n\t\t!accountCheck.identity.address !== !account.identity.address\r\n\r\n\treturn accountChanged\r\n}\r\n\r\nexport function updateAccountAnalytics() {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { account } = getState().persist\r\n\t\ttry {\r\n\t\t\tconst toastId = addToast({\r\n\t\t\t\ttype: 'warning',\r\n\t\t\t\tlabel: translate('SIGN_VALIDATORS_AUTH'),\r\n\t\t\t\ttimeout: false,\r\n\t\t\t\tunclosable: true,\r\n\t\t\t\ttop: true,\r\n\t\t\t})(dispatch)\r\n\r\n\t\t\tconst leaderAuth = await getValidatorAuthToken({\r\n\t\t\t\tvalidatorId: VALIDATOR_LEADER_ID,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\tremoveToast(toastId)(dispatch)\r\n\r\n\t\t\tupdateValidatorAuthTokens({\r\n\t\t\t\tnewAuth: { [VALIDATOR_LEADER_ID]: leaderAuth },\r\n\t\t\t})(dispatch, getState)\r\n\r\n\t\t\tconst params = analyticsParams()\r\n\t\t\tlet accountChanged = false\r\n\t\t\tconst allAnalytics = params.map(async opts => {\r\n\t\t\t\tidentityAnalytics({\r\n\t\t\t\t\t...opts,\r\n\t\t\t\t\tleaderAuth,\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\taccountChanged =\r\n\t\t\t\t\t\t\taccountChanged || checkAccountChanged(getState, account)\r\n\r\n\t\t\t\t\t\tif (!accountChanged) {\r\n\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\ttype: types.UPDATE_ANALYTICS,\r\n\t\t\t\t\t\t\t\t...opts,\r\n\t\t\t\t\t\t\t\tvalue: { ...res },\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.error('ERR_ANALYTICS_SINGLE', err)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tawait Promise.all(allAnalytics)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_ANALYTICS', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_ANALYTICS', { args: [getErrorMsg(err)] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function resetAnalytics() {\r\n\treturn async function(dispatch, getState) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ANALYTICS,\r\n\t\t})\r\n\t}\r\n}\r\n","import * as common from './common'\r\nimport * as itemActions from './itemActions'\r\nimport * as uiActions from './uiActions'\r\nimport * as accountActions from './accountActions'\r\nimport * as identityActions from './identityActions'\r\nimport * as bidActions from './bidActions'\r\nimport * as transactionActions from './transactionActions'\r\nimport * as validationActions from './validationActions'\r\nimport * as analyticsActions from './analyticsActions'\r\n\r\n// keep it for class components that use connect and actions prop\r\n// without needing to change the code\r\nexport default {\r\n\t...common,\r\n\t...itemActions,\r\n\t...uiActions,\r\n\t...accountActions,\r\n\t...identityActions,\r\n\t...bidActions,\r\n\t...transactionActions,\r\n\t...validationActions,\r\n\t...analyticsActions,\r\n}\r\n\r\n// used for minimal deps in hook components\r\n// import { execute, addTost } from 'actions'\r\n// execute(addTost())\r\nexport * from './common'\r\nexport * from './itemActions'\r\nexport * from './uiActions'\r\nexport * from './accountActions'\r\nexport * from './identityActions'\r\nexport * from './bidActions'\r\nexport * from './transactionActions'\r\nexport * from './validationActions'\r\nexport * from './analyticsActions'\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\r\nimport ErrorIcon from '@material-ui/icons/Error'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nconst variantIcon = {\r\n\taccept: CheckCircleIcon,\r\n\tsuccess: CheckCircleIcon,\r\n\twarning: WarningIcon,\r\n\tcancel: ErrorIcon,\r\n\terror: ErrorIcon,\r\n\tinfo: InfoIcon,\r\n}\r\n\r\nexport class Toast extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tactive: false,\r\n\t\t\ttoast: {},\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tlet toast = this.state.toast\r\n\t\tlet nextToast = nextProps.toasts[0]\r\n\r\n\t\tif (!nextToast) {\r\n\t\t\tthis.setState({ active: false, toast: {} })\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet isNewToast = !!nextToast && toast.id !== nextToast.id\r\n\r\n\t\tif (isNewToast) {\r\n\t\t\tthis.setState({ active: true, toast: nextToast })\r\n\t\t}\r\n\t}\r\n\r\n\tclose = id => {\r\n\t\tthis.setState({ active: false })\r\n\t\tthis.props.actions.removeToast(id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { toast } = this.state\r\n\t\tconst { classes } = this.props\r\n\t\tconst Icon = variantIcon[toast.type]\r\n\r\n\t\tif (!toast || !Icon) return null\r\n\r\n\t\tconst anchorOrigin = toast.anchorOrigin || {\r\n\t\t\tvertical: 'bottom',\r\n\t\t\thorizontal: 'center',\r\n\t\t}\r\n\r\n\t\tif (toast.top) {\r\n\t\t\tanchorOrigin.horizontal = 'center'\r\n\t\t\tanchorOrigin.vertical = 'top'\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Snackbar\r\n\t\t\t\topen={this.state.active}\r\n\t\t\t\tautoHideDuration={toast.timeout || 0}\r\n\t\t\t\tonClose={() => !toast.unclosable && this.close(toast.id)}\r\n\t\t\t\tanchorOrigin={anchorOrigin}\r\n\t\t\t>\r\n\t\t\t\t<SnackbarContent\r\n\t\t\t\t\taria-describedby='client-snackbar'\r\n\t\t\t\t\tmessage={\r\n\t\t\t\t\t\t<span id='client-snackbar' className={classes.message}>\r\n\t\t\t\t\t\t\t<Icon className={classnames(classes.icon, classes.iconVariant)} />\r\n\t\t\t\t\t\t\t{(toast.label || '').toString()}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t}\r\n\t\t\t\t\taction={[\r\n\t\t\t\t\t\t!toast.unclosable && (\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tkey='close'\r\n\t\t\t\t\t\t\t\taria-label='Close'\r\n\t\t\t\t\t\t\t\tcolor='inherit'\r\n\t\t\t\t\t\t\t\tclassName={classes.close}\r\n\t\t\t\t\t\t\t\tonClick={() => !toast.unclosable && this.close(toast.id)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CloseIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tclassName={classnames(classes.snackbar, {\r\n\t\t\t\t\t\t[classes.top]: !!toast.top,\r\n\t\t\t\t\t\t[classes.accept]: toast.type === 'accept',\r\n\t\t\t\t\t\t[classes.cancel]: toast.type === 'cancel',\r\n\t\t\t\t\t\t[classes.warning]: toast.type === 'warning',\r\n\t\t\t\t\t})}\r\n\t\t\t\t/>\r\n\t\t\t</Snackbar>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nToast.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\ttoasts: PropTypes.array.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\t// let persist = state.persist\r\n\tlet memory = state.memory\r\n\treturn {\r\n\t\ttoasts: memory.toasts || [],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withStyles(styles)(Toast))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tsnackbar: {\r\n\t\t\tborder: '3px solid',\r\n\t\t\tborderRadius: 0,\r\n\t\t\tbackgroundColor: '#222',\r\n\t\t\t'&.active': {\r\n\t\t\t\ttransform: 'translateY(-20%)',\r\n\t\t\t},\r\n\t\t\tmargin: spacing,\r\n\t\t},\r\n\t\twarning: {\r\n\t\t\tborderColor: '#FFAB00',\r\n\t\t\tcolor: '#FFAB00',\r\n\t\t},\r\n\t\tcancel: {\r\n\t\t\tborderColor: '#FF5722',\r\n\t\t\tcolor: '#FF5722',\r\n\t\t},\r\n\t\taccept: {\r\n\t\t\tborderColor: '#00E676',\r\n\t\t\tcolor: '#00E676',\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\tfontSize: 20,\r\n\t\t},\r\n\t\ticonVariant: {\r\n\t\t\topacity: 0.9,\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tmessage: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\talignItems: 'center',\r\n\t\t\twordBreak: 'break-all',\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\twidth: '98vw',\r\n\t\t\tmaxWidth: '98vw',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { translate } from 'services/translations/translations'\r\nimport { selectLang } from 'selectors'\r\n\r\nexport default function Translate(Decorated) {\r\n\tfunction Translated(props) {\r\n\t\tconst language = useSelector(selectLang)\r\n\r\n\t\tconst t = (val, { isProp = false, args = [''] } = {}) => {\r\n\t\t\tconst translation = translate(val, { isProp, args }, language)\r\n\r\n\t\t\treturn translation\r\n\t\t}\r\n\r\n\t\treturn <Decorated {...props} t={t} />\r\n\t}\r\n\r\n\treturn Translated\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport Button from '@material-ui/core/Button'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nexport class Confirm extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.cancel = this.cancel.bind(this)\r\n\t\tthis.confirm = this.confirm.bind(this)\r\n\t\tthis.state = {\r\n\t\t\tactive: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tthis.setState({ active: nextProps.visible })\r\n\t}\r\n\r\n\tconfirm() {\r\n\t\tif (typeof this.props.confirm === 'function') {\r\n\t\t\tthis.props.confirm()\r\n\t\t}\r\n\t\tthis.setState({ active: false })\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tif (typeof this.props.cancel === 'function') {\r\n\t\t\tthis.props.cancel()\r\n\t\t}\r\n\r\n\t\tthis.setState({ active: false })\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\ttitle,\r\n\t\t\ttext,\r\n\t\t\tchildren,\r\n\t\t\tcancelLabel,\r\n\t\t\tconfirmLabel,\r\n\t\t\tt,\r\n\t\t\tnoActionBtns,\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<Dialog open={this.state.active}>\r\n\t\t\t\t<DialogTitle id='alert-dialog-title'>{title}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText id='alert-dialog-description'>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t{!noActionBtns && (\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.cancel} color='primary'>\r\n\t\t\t\t\t\t\t{cancelLabel || t('CANCEL')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button onClick={this.confirm} color='primary' autoFocus>\r\n\t\t\t\t\t\t\t{confirmLabel || t('OK')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t)}\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nConfirm.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tcancelLabel: PropTypes.string,\r\n\tconfirmLabel: PropTypes.string,\r\n\ttitle: PropTypes.string.isRequired,\r\n\ttext: PropTypes.string,\r\n\tconfirm: PropTypes.func,\r\n\tcancel: PropTypes.func,\r\n\tvisible: PropTypes.bool,\r\n\tcalledOn: PropTypes.number,\r\n\tnoActionBtns: PropTypes.bool,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tstate = state.memory\r\n\treturn {\r\n\t\tcancelLabel: state.confirm.data.cancelLabel,\r\n\t\tconfirmLabel: state.confirm.data.confirmLabel,\r\n\t\ttitle: state.confirm.data.title || '',\r\n\t\ttext: state.confirm.data.text || '',\r\n\t\tconfirm: state.confirm.onConfirm,\r\n\t\tcancel: state.confirm.onCancel,\r\n\t\tvisible: state.confirm.active || false,\r\n\t\tcalledOn: state.confirm.calledOn,\r\n\t\tnoActionBtns: state.confirm.noActionBtns,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(Confirm))\r\n","import React from 'react'\r\n// import PropTypes from 'prop-types'\r\nimport { withRouter } from 'react-router'\r\n\r\nexport const withReactRouterLink = Component => {\r\n\tclass Decorated extends React.Component {\r\n\t\tresolveToLocation = to => {\r\n\t\t\tconst path = typeof to === 'object' ? to : { pathname: to }\r\n\t\t\tconst href = this.props.history.createHref(path)\r\n\t\t\treturn href\r\n\t\t}\r\n\r\n\t\thandleClick = async event => {\r\n\t\t\tevent.preventDefault()\r\n\t\t\tevent.stopPropagation()\r\n\t\t\tconst { to, onClick } = this.props\r\n\r\n\t\t\tif (onClick && typeof onClick === 'function') {\r\n\t\t\t\tawait onClick()\r\n\t\t\t\tthis.props.history.push(to)\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.history.push(to)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// TODO: check if it works without infinite loops\r\n\t\t// shouldComponentUpdate(nextProps, nextState) {\r\n\t\t//   // const { to } = this.props;\r\n\t\t//   return this.resolveToLocation(this.props.to) !== this.resolveToLocation(nextProps.to)\r\n\t\t// }\r\n\r\n\t\trender() {\r\n\t\t\tconst {\r\n\t\t\t\tto,\r\n\t\t\t\tmatch,\r\n\t\t\t\tlocation,\r\n\t\t\t\thistory,\r\n\t\t\t\tstaticContext,\r\n\t\t\t\tonClick,\r\n\t\t\t\t...rest\r\n\t\t\t} = this.props\r\n\t\t\tconst toLocation = this.resolveToLocation(to)\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Component {...rest} href={toLocation} onClick={this.handleClick} />\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\treturn withRouter(Decorated)\r\n}\r\n","import React from 'react'\r\nimport SvgIcon from '@material-ui/core/SvgIcon'\r\nimport pure from 'recompose/pure'\r\n\r\nexport default (path, displayName, viewBox = '') => {\r\n\tlet Icon = props => (\r\n\t\t<SvgIcon viewBox={viewBox} {...props}>\r\n\t\t\t{path}\r\n\t\t</SvgIcon>\r\n\t)\r\n\r\n\tIcon.displayName = displayName\r\n\tIcon = pure(Icon)\r\n\tIcon.muiName = 'SvgIcon'\r\n\r\n\treturn Icon\r\n}\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path d='M7.23,5.37,1.4,5.3A1.34,1.34,0,0,0,0,6.63L.07,10.3a1.42,1.42,0,0,0,1.08,1.32,1.52,1.52,0,0,0,.37,0H2.2L.88,16.39a.72.72,0,0,0,.47.85h0a1.93,1.93,0,0,0,1.45-.05,1.7,1.7,0,0,0,.93-1L5.2,11.71l2.15,0Z' />\r\n\t\t<path d='M24.33,5.95,24.38,0a.05.05,0,0,0,0,0h0L9.16,4.9l.08,7.33,14.65,4.46a.28.28,0,0,0,.24,0,.25.25,0,0,0,.11-.2l0-4.16h0V10.94a2.14,2.14,0,0,0,1.82-2.4A2.24,2.24,0,0,0,24.33,5.95Z' />\r\n\t</g>,\r\n\r\n\t'Campaign',\r\n\t'0 0 26.12 17.37'\r\n)\r\n","import React from 'react'\r\nimport Link from '@material-ui/core/Link'\r\n\r\nconst getUrl = url => {\r\n\turl = (url || '').replace(/^(https?:)?\\/\\//i, '')\r\n\tif (url) {\r\n\t\turl = '//' + url\r\n\t}\r\n\r\n\treturn url\r\n}\r\n\r\nconst Anchor = ({ href, target, children, label, ...rest }) => {\r\n\tlet url = target && target === '_blank' ? getUrl(href) : href\r\n\treturn (\r\n\t\t<Link\r\n\t\t\tunderline='none'\r\n\t\t\tcolor='inherit'\r\n\t\t\tdraggable='false'\r\n\t\t\trel='noopener noreferrer'\r\n\t\t\t{...rest}\r\n\t\t\ttarget={target}\r\n\t\t\thref={url}\r\n\t\t\tstyle={{ wordBreak: 'break-all' }} // TODO: add it where needed only\r\n\t\t>\r\n\t\t\t{children || label}\r\n\t\t</Link>\r\n\t)\r\n}\r\n\r\nexport default Anchor\r\n","const drawerWidth = 250\r\n\r\nexport const styles = theme => {\r\n\treturn {\r\n\t\troot: {\r\n\t\t\tflexGrow: 1,\r\n\t\t\tzIndex: 1,\r\n\t\t\toverflow: 'hidden',\r\n\t\t\tposition: 'relative',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tminHeight: '100vh',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\tappBar: {\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\twidth: 'auto',\r\n\t\t\tposition: 'fixed',\r\n\t\t\t// marginLeft: drawerWidth,\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\t// width: `calc(100% - ${drawerWidth}px)`,\r\n\t\t\t\tleft: drawerWidth,\r\n\t\t\t},\r\n\t\t\tbackgroundColor: '#eee',\r\n\t\t\tcolor: '#000',\r\n\t\t},\r\n\t\tflex: {\r\n\t\t\tflex: 1,\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\talignItems: 'center',\r\n\t\t},\r\n\r\n\t\tflexRow: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\talignItems: 'center',\r\n\t\t\tflexBasis: '100%',\r\n\t\t\tpaddingTop: theme.spacing(1),\r\n\t\t\tpaddingBottom: theme.spacing(1),\r\n\t\t\t'&:last-child': {\r\n\t\t\t\tpaddingRight: 240,\r\n\t\t\t\tpaddingTop: theme.spacing(1),\r\n\t\t\t\tpaddingBottom: theme.spacing(1),\r\n\t\t\t\tpaddingLeft: theme.spacing(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\ttoolbarControls: {\r\n\t\t\tjustifyContent: 'flex-end',\r\n\t\t},\r\n\t\ttoolbarTitle: {\r\n\t\t\tjustifyContent: 'flex-start',\r\n\t\t},\r\n\t\tnavIconHide: {\r\n\t\t\tmarginRight: 10,\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\tdisplay: 'none',\r\n\t\t\t},\r\n\t\t},\r\n\t\ttoolbar: {\r\n\t\t\tflexFlow: 'wrap',\r\n\t\t\theight: 114,\r\n\t\t\t...theme.mixins.toolbar,\r\n\t\t},\r\n\t\tdrawerPaper: {\r\n\t\t\twidth: drawerWidth,\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\tposition: 'fixed',\r\n\t\t\t},\r\n\t\t\tbackgroundColor: '#fff',\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tflexGrow: 1,\r\n\t\t\tbackgroundColor: theme.palette.background.default,\r\n\t\t\tpadding: theme.spacing(3),\r\n\t\t\tpaddingTop: theme.spacing(5),\r\n\t\t\toverflow: 'auto',\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\tmarginLeft: drawerWidth,\r\n\t\t\t},\r\n\t\t},\r\n\t\tcontentInner: {\r\n\t\t\tmaxWidth: 1600,\r\n\t\t\tmargin: 'auto',\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\theight: 36,\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\n\r\nconst EddieSwitch = withStyles(theme => {\r\n\tconst advColor = theme.palette.accentOne.main\r\n\tconst pubColor = theme.palette.accentTwo.main\r\n\treturn {\r\n\t\tswitchBase: {\r\n\t\t\tcolor: advColor,\r\n\r\n\t\t\t'&$checked': {\r\n\t\t\t\tcolor: pubColor,\r\n\t\t\t},\r\n\t\t\t'&$checked + $track': {\r\n\t\t\t\tbackgroundColor: pubColor,\r\n\t\t\t},\r\n\t\t},\r\n\t\tchecked: {},\r\n\t\ttrack: { backgroundColor: advColor },\r\n\t}\r\n})(Switch)\r\n\r\nconst RRSwitch = withReactRouterLink(props => (\r\n\t<ListItem>\r\n\t\t<ListItemText primary={props.label} />\r\n\t\t<ListItemSecondaryAction>\r\n\t\t\t<EddieSwitch {...props} />\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n))\r\n\r\nconst SideSwitch = ({ side, t }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{/* Keep both if there is no valid side and force react to rerender at the same time */}\r\n\t\t\t{side !== 'advertiser' && (\r\n\t\t\t\t<RRSwitch\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tchecked={true}\r\n\t\t\t\t\tvalue='account'\r\n\t\t\t\t\tto={{ pathname: '/dashboard/advertiser' }}\r\n\t\t\t\t\tlabel={t('PUBLISHER')}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t{side !== 'publisher' && (\r\n\t\t\t\t<RRSwitch\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tchecked={false}\r\n\t\t\t\t\tto={{ pathname: '/dashboard/publisher' }}\r\n\t\t\t\t\tlabel={t('ADVERTISER')}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SideSwitch\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path\r\n\t\t\tfill='rgb(60, 60, 59)'\r\n\t\t\td='M44.995,49.818 L36.605,58.060 L22.494,44.199 L8.383,58.060 L-0.007,49.818 L14.104,35.957 L-0.007,22.095 L8.383,13.853 L22.494,27.715 L36.605,13.853 L44.995,22.095 L30.884,35.957 L44.995,49.818 ZM22.494,13.562 L16.296,19.724 L9.354,12.904 L17.594,4.809 L22.494,-0.004 L27.394,4.809 L35.634,12.904 L28.692,19.724 L22.494,13.562 ZM22.494,58.438 L28.692,52.276 L35.634,59.095 L27.394,67.190 L22.494,72.003 L17.594,67.190 L9.354,59.095 L16.296,52.276 L22.494,58.438 Z'\r\n\t\t/>\r\n\t\t<path\r\n\t\t\tfill='rgb(27, 117, 188)'\r\n\t\t\td='M30.884,35.997 L44.995,22.124 L36.605,13.876 L22.494,27.748 L8.383,13.876 L-0.007,22.124 L14.104,35.997 L-0.007,49.869 L8.383,58.117 L22.494,44.245 L36.605,58.117 L44.995,49.869 L30.884,35.997 Z'\r\n\t\t/>\r\n\t\t<path\r\n\t\t\tfill='rgb(60, 60, 59)'\r\n\t\t\td='M185.004,59.417 L181.713,59.417 L171.925,45.572 L162.080,59.417 L158.961,59.417 L170.237,43.460 L159.391,28.389 L162.653,28.389 L171.925,41.463 L181.112,28.389 L184.231,28.389 L173.556,43.460 L185.004,59.417 ZM130.972,17.685 L153.839,17.685 L153.839,20.369 L133.893,20.369 L133.893,36.154 L152.722,36.154 L152.722,38.837 L133.893,38.837 L133.893,56.733 L153.839,56.733 L153.839,59.417 L130.972,59.417 L130.972,17.685 ZM117.235,54.680 L117.005,54.680 C114.640,58.219 111.243,59.989 106.817,59.989 C102.525,59.989 99.243,58.656 96.972,55.991 C94.700,53.326 93.566,49.444 93.566,44.345 C93.566,38.979 94.693,34.878 96.945,32.043 C99.196,29.208 102.468,27.790 106.760,27.790 C109.011,27.790 110.958,28.199 112.599,29.018 C114.240,29.836 115.708,31.235 117.005,33.214 L117.178,33.214 C117.062,30.816 117.005,28.466 117.005,26.164 L117.005,15.003 L119.810,15.003 L119.810,59.417 L117.949,59.417 L117.235,54.680 ZM117.005,43.859 C117.005,39.064 116.200,35.615 114.588,33.513 C112.975,31.411 110.365,30.360 106.760,30.360 C103.365,30.360 100.812,31.549 99.105,33.927 C97.397,36.306 96.545,39.760 96.545,44.288 C96.545,53.079 99.967,57.475 106.817,57.475 C110.328,57.475 112.903,56.459 114.544,54.420 C116.185,52.385 117.005,49.025 117.005,44.345 L117.005,43.859 ZM81.062,44.688 L64.061,44.688 L58.224,59.417 L54.990,59.417 L71.818,17.514 L73.679,17.514 L90.160,59.417 L86.872,59.417 L81.062,44.688 ZM74.393,27.020 C73.916,25.840 73.342,24.203 72.675,22.111 C72.161,23.937 71.598,25.592 70.988,27.077 L65.121,42.061 L80.089,42.061 L74.393,27.020 Z'\r\n\t\t/>\r\n\t</g>,\r\n\t'AdexIcon',\r\n\t'0 0 185 72'\r\n)\r\n","import React from 'react'\r\nimport { LinearProgress, Box, CircularProgress } from '@material-ui/core'\r\n\r\nexport const InputLoading = ({ className, color = 'primary' }) => (\r\n\t<LinearProgress className={className} color={color} />\r\n)\r\n\r\nexport const LoadingSection = ({ loading, children }) => (\r\n\t<Box display='flex' flex='1' alignItems='center'>\r\n\t\t<Box>{children}</Box>\r\n\t\t<Box ml={2} mr={2}>\r\n\t\t\t{loading && <CircularProgress />}\r\n\t\t</Box>\r\n\t</Box>\r\n)\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListDivider from '@material-ui/core/Divider'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport CampaignIcon from 'components/common/icons/CampaignIcon'\r\nimport classnames from 'classnames'\r\nimport packageJson from './../../../../package.json'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport { styles } from './styles'\r\nimport SideSwitch from './SideSwitch'\r\nimport AdexIconTxt from 'components/common/icons/AdexIconTxt'\r\nimport DashboardIcon from '@material-ui/icons/Dashboard'\r\nimport SwapHorizontalIcon from '@material-ui/icons/SwapHoriz'\r\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline'\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox'\r\nimport ListIcon from '@material-ui/icons/List'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { LoadingSection } from 'components/common/spinners'\r\nimport {\r\n\tt,\r\n\tselectSide,\r\n\tselectLocation,\r\n\tselectAccountIdentityAddr,\r\n\tselectAccountStatsFormatted,\r\n} from 'selectors'\r\n\r\nconst RRListItem = withReactRouterLink(ListItem)\r\nconst { ETH_SCAN_ADDR_HOST } = process.env\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\tconst activeColor = ({ side }) =>\r\n\t\tside === 'advertiser'\r\n\t\t\t? theme.palette.accentOne.contrastText\r\n\t\t\t: theme.palette.accentTwo.contrastText\r\n\r\n\tconst activeBgColor = ({ side }) =>\r\n\t\tside === 'advertiser'\r\n\t\t\t? theme.palette.accentOne.main\r\n\t\t\t: theme.palette.accentTwo.main\r\n\r\n\treturn {\r\n\t\tnavigation: {\r\n\t\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\t},\r\n\t\tsntPadding: {\r\n\t\t\tpaddingTop: 0,\r\n\t\t},\r\n\t\tnavListRoot: {\r\n\t\t\tcolor: theme.palette.text.secondary,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tjustifyContent: 'space-between',\r\n\t\t},\r\n\t\tnavList: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 80,\r\n\t\t\toverflowY: 'auto',\r\n\t\t\toverflowX: 'hidden',\r\n\t\t},\r\n\t\tsideNavToolbar: {},\r\n\t\tversion: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tpadding: 10,\r\n\t\t\tpaddingLeft: 16,\r\n\t\t\tborderTopWidth: 1,\r\n\t\t\tborderTopColor: theme.palette.divider,\r\n\t\t\tborderTopStyle: 'solid',\r\n\t\t},\r\n\t\tactive: {\r\n\t\t\tcolor: activeColor,\r\n\t\t\tbackgroundColor: activeBgColor,\r\n\t\t\t'&:focus': {\r\n\t\t\t\tbackgroundColor: activeBgColor,\r\n\t\t\t},\r\n\t\t},\r\n\t\tadxLink: {\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t\t'&:hover': {\r\n\t\t\t\tcolor: theme.palette.text.secondary,\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n})\r\n\r\nconst useCommonStyles = makeStyles(styles)\r\n\r\nfunction SideNav(props) {\r\n\tconst side = useSelector(selectSide)\r\n\tconst identity = useSelector(selectAccountIdentityAddr)\r\n\tconst classes = useStyles({ side })\r\n\tconst commonClasses = useCommonStyles()\r\n\tconst routerLocation = useSelector(selectLocation)\r\n\r\n\t// TODO: test location\r\n\tconst location = routerLocation.pathname.split('/')[3]\r\n\tconst isAdvertiser = side === 'advertiser'\r\n\tconst items = isAdvertiser ? 'units' : 'slots'\r\n\tconst { availableIdentityBalanceDai } = useSelector(\r\n\t\tselectAccountStatsFormatted\r\n\t)\r\n\r\n\treturn side !== 'advertiser' && side !== 'publisher' ? null : (\r\n\t\t<div className={classes.navigation}>\r\n\t\t\t<List\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\tpadding: classes.sntPadding,\r\n\t\t\t\t\troot: classes.navListRoot,\r\n\t\t\t\t}}\r\n\t\t\t\tclassName={classes.navList}\r\n\t\t\t\tcomponent='nav'\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\tcommonClasses.toolbar,\r\n\t\t\t\t\t\t\tclasses.sideNavToolbar\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<AdexIconTxt className={commonClasses.icon} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<LoadingSection\r\n\t\t\t\t\t\t\t\tloading={\r\n\t\t\t\t\t\t\t\t\t!availableIdentityBalanceDai &&\r\n\t\t\t\t\t\t\t\t\tavailableIdentityBalanceDai !== 0\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemText>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='h6' component='div' color='textPrimary'>\r\n\t\t\t\t\t\t\t\t\t\t<strong>{`${parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\tavailableIdentityBalanceDai || 0\r\n\t\t\t\t\t\t\t\t\t\t).toFixed(2)} SAI`}</strong>\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='button' display='block' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t\t{t('IDENTITY_BALANCE')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t\t\t</LoadingSection>\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t<SideSwitch side={side} t={t} />\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side }}\r\n\t\t\t\t\t\tclassName={classnames({ [classes.active]: !location })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<DashboardIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={t('DASHBOARD')} />\r\n\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t{side === 'advertiser' && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\tto={{ pathname: '/dashboard/advertiser/campaigns' }}\r\n\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t[classes.active]: location === 'campaigns',\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<CampaignIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText primary={t('CAMPAIGNS')} />\r\n\t\t\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side + '/' + items }}\r\n\t\t\t\t\t\tclassName={classnames({ [classes.active]: location === items })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<ListIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={t(items.toUpperCase())} />\r\n\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\thref='https://medium.com/adex-network-tips-and-tricks'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t<HelpOutlineIcon />\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t('HELP')} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t</Anchor>\r\n\r\n\t\t\t\t\t<Anchor target='_blank' href={`${ETH_SCAN_ADDR_HOST + identity}`}>\r\n\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t<SwapHorizontalIcon />\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t('TRANSACTIONS')} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t</Anchor>\r\n\r\n\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side + '/account' }}\r\n\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t[classes.active]: location === 'account',\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<AccountBoxIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={t('ACCOUNT')} />\r\n\t\t\t\t\t</RRListItem>\r\n\t\t\t\t</div>\r\n\t\t\t</List>\r\n\t\t\t<div className={classes.version}>\r\n\t\t\t\t<div className={classes.adxLink}>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t&copy; {new Date().getFullYear()} &nbsp;\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref={process.env.ADEX_SITE_HOST}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tAdEx Network OÜ\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref={process.env.ETH_SCAN_ADDR_HOST + process.env.ADX_TOKEN_ADDR}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tAdEx (ADX) Token\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t\t<small> / </small>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref={process.env.ETH_SCAN_ADDR_HOST + process.env.ADEX_CORE_ADDR}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tAdExCore\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref='https://github.com/AdExBlockchain/adex-dapp/blob/master/CHANGELOG.md'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tv.{packageJson.version}-beta\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SideNav\r\n","import React, { useState } from 'react'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nconst ImgIcon = ({ src }) => {\r\n\treturn (\r\n\t\t<img\r\n\t\t\tsrc={src}\r\n\t\t\theight={36}\r\n\t\t\twidth='auto'\r\n\t\t\talt='logo'\r\n\t\t\tstyle={{ marginRight: 5 }}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nfunction ButtonMenu({ children, btnStyle, label, rightIcon, leftIconSrc, id }) {\r\n\tconst [active, setActive] = useState(false)\r\n\tconst [anchorEl, setAnchorEl] = useState(null)\r\n\tconst open = Boolean(anchorEl)\r\n\r\n\tconst handleButtonClick = () => {\r\n\t\tsetActive(!active)\r\n\t\tsetAnchorEl(null)\r\n\t}\r\n\r\n\tconst handleMenu = event => {\r\n\t\tsetAnchorEl(event.currentTarget)\r\n\t}\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null)\r\n\t}\r\n\r\n\tconst leftIcon = leftIconSrc ? <ImgIcon src={leftIconSrc} /> : null\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\tstyle={btnStyle}\r\n\t\t\t\tonClick={handleMenu}\r\n\t\t\t\taria-owns={id}\r\n\t\t\t\taria-haspopup='true'\r\n\t\t\t>\r\n\t\t\t\t{leftIcon}\r\n\t\t\t\t<span\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmaxWidth: 150,\r\n\t\t\t\t\t\toverflow: 'hidden',\r\n\t\t\t\t\t\ttextOverflow: 'ellipsis',\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</span>\r\n\t\t\t\t{rightIcon}\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tid={id}\r\n\t\t\t\topen={open}\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t// anchorOrigin={{\r\n\t\t\t\t// \tvertical: 'top',\r\n\t\t\t\t// \thorizontal: 'right',\r\n\t\t\t\t// }}\r\n\t\t\t\t// transformOrigin={{\r\n\t\t\t\t// \tvertical: 'top',\r\n\t\t\t\t// \thorizontal: 'right',\r\n\t\t\t\t// }}\r\n\t\t\t\tonClick={handleButtonClick}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ButtonMenu\r\n","import { AUTH_TYPES } from 'constants/misc'\r\nimport metamaskLogo from 'resources/metamask-logo.png'\r\nimport trezorLogo from 'resources/trezor-logo-h.png'\r\nimport ledgerLogo from 'resources/ledger_logo_header.png'\r\nimport demoLogo from 'resources/demo-logo.png'\r\n\r\nexport const getAuthLogo = authType => {\r\n\tswitch (authType) {\r\n\t\tcase AUTH_TYPES.METAMASK.name:\r\n\t\t\treturn metamaskLogo\r\n\t\tcase AUTH_TYPES.TREZOR.name:\r\n\t\t\treturn trezorLogo\r\n\t\tcase AUTH_TYPES.LEDGER.name:\r\n\t\t\treturn ledgerLogo\r\n\t\tcase AUTH_TYPES.DEMO.name:\r\n\t\t\treturn demoLogo\r\n\t\tdefault:\r\n\t\t\treturn ''\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n// import AdexIconTxt from 'components/common/icons/AdexIconTxt'\r\nimport ButtonMenu from 'components/common/button_menu/ButtonMenuMui'\r\nimport Jazzicon, { jsNumberForAddress } from 'react-jazzicon'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\n// import ChangeLang from 'components/translate/ChangeLang'\r\nimport { getAuthLogo } from 'helpers/logosHelpers'\r\nimport { logOut } from 'services/store-data/auth'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport classnames from 'classnames'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport { selectNavTitle, selectAccount } from 'selectors'\r\nimport { styles } from './styles'\r\nimport { formatAddress } from 'helpers/formatters'\r\n\r\nconst RRMenuItem = withReactRouterLink(MenuItem)\r\nconst useStyles = makeStyles(styles)\r\n\r\nfunction TopNav({ handleDrawerToggle, side, t }) {\r\n\tconst classes = useStyles()\r\n\tconst navTitle = useSelector(selectNavTitle)\r\n\tconst account = useSelector(selectAccount)\r\n\tconst imgSrc = getAuthLogo(account.wallet.authType)\r\n\tconst btnMenuLabel =\r\n\t\taccount.wallet.authType === 'demo'\r\n\t\t\t? t('DEMO_MODE')\r\n\t\t\t: account.email ||\r\n\t\t\t  formatAddress(account.wallet.address) ||\r\n\t\t\t  t('NOT_LOGGED')\r\n\r\n\treturn (\r\n\t\t<AppBar className={classes.appBar} position='sticky'>\r\n\t\t\t<Toolbar className={classes.toolbar}>\r\n\t\t\t\t<div className={classes.flexRow}>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='inherit'\r\n\t\t\t\t\t\taria-label='open drawer'\r\n\t\t\t\t\t\tonClick={handleDrawerToggle}\r\n\t\t\t\t\t\tclassName={classnames(classes.navIconHide)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t{/* <AdexIconTxt\r\n              className={classes.icon}\r\n            /> */}\r\n\t\t\t\t\t<div className={classnames(classes.flex, classes.toolbarControls)}>\r\n\t\t\t\t\t\t{/* <Navigation type='horizontal' className={theme.rightNavigation}> */}\r\n\t\t\t\t\t\t{/* At the moment we use translations only for proper items properties display names */}\r\n\t\t\t\t\t\t{/* <ChangeLang /> */}\r\n\t\t\t\t\t\t<Jazzicon\r\n\t\t\t\t\t\t\tdiameter={30}\r\n\t\t\t\t\t\t\tseed={jsNumberForAddress(account.wallet.address)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ButtonMenu\r\n\t\t\t\t\t\t\tid='menu-appbar'\r\n\t\t\t\t\t\t\tleftIconSrc={imgSrc}\r\n\t\t\t\t\t\t\trightIcon={<ExpandMoreIcon />}\r\n\t\t\t\t\t\t\tlabel={btnMenuLabel}\r\n\t\t\t\t\t\t\tactive={true}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<RRMenuItem\r\n\t\t\t\t\t\t\t\tvalue='account'\r\n\t\t\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side + '/account' }}\r\n\t\t\t\t\t\t\t\tcaption={t('ACCOUNT')}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<AccountBoxIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclasses={{ primary: classes.primary }}\r\n\t\t\t\t\t\t\t\t\tprimary={t('ACCOUNT')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</RRMenuItem>\r\n\t\t\t\t\t\t\t{/* <MenuDivider /> */}\r\n\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\tvalue='logout'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tlogOut()\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<ExitToAppIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclasses={{ primary: classes.primary }}\r\n\t\t\t\t\t\t\t\t\tprimary={t('LOGOUT')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t</ButtonMenu>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.flexRow}>\r\n\t\t\t\t\t<div className={classnames(classes.flex, classes.toolbarTitle)}>\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tvariant='subtitle1'\r\n\t\t\t\t\t\t\tcolor='inherit'\r\n\t\t\t\t\t\t\tclassName={classes.flex}\r\n\t\t\t\t\t\t\tnoWrap\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(navTitle)}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n}\r\n\r\nexport default Translate(TopNav)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NO_IMAGE from 'resources/no-image-box-eddie.jpg'\r\nimport VIDEO_IMAGE from 'resources/video-placeholder.jpg'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\n// import IconButton from '@material-ui/core/IconButton'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport Translate from 'components/translate/Translate'\r\nimport { validations, helpers } from 'adex-models'\r\nimport { isVideoMedia } from 'helpers/mediaHelpers.js'\r\n\r\nconst MAX_IMG_LOAD_TIME = 7000\r\nclass Img extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\timgSrc: null,\r\n\t\t\tactive: false,\r\n\t\t\tvideoSrc: null,\r\n\t\t}\r\n\r\n\t\tthis.setDisplayImage = this.setDisplayImage.bind(this)\r\n\t\tthis.setDisplayVideo = this.setDisplayVideo.bind(this)\r\n\t\tthis.loadTimeout = null\r\n\t}\r\n\r\n\tipfsSrc = src => {\r\n\t\tif (!!src && validations.Regexes.ipfsRegex.test(src)) {\r\n\t\t\treturn helpers.getMediaUrlWithProvider(src, process.env.IPFS_GATEWAY)\r\n\t\t}\r\n\r\n\t\treturn src\r\n\t}\r\n\r\n\thandleToggle = () => {\r\n\t\tlet active = this.state.active\r\n\t\tthis.setState({ active: !active })\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { src, fallbackSrc, mediaMime, allowVideo } = this.props\r\n\t\tconst isVideo = !!mediaMime && isVideoMedia(mediaMime)\r\n\r\n\t\tif (isVideo && !allowVideo) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\timgSrc: VIDEO_IMAGE,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (isVideo) {\r\n\t\t\tthis.displayVideo = document.createElement('video')\r\n\t\t\tthis.setDisplayVideo({\r\n\t\t\t\timage: this.ipfsSrc(src),\r\n\t\t\t\tfallback: this.ipfsSrc(fallbackSrc) || NO_IMAGE,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.displayImage = new Image()\r\n\t\t\tthis.setDisplayImage({\r\n\t\t\t\timage: this.ipfsSrc(src),\r\n\t\t\t\tfallback: this.ipfsSrc(fallbackSrc) || NO_IMAGE,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps = nextProps => {\r\n\t\tconst nextSrc = this.ipfsSrc(nextProps.src)\r\n\t\tconst thisSrc = this.ipfsSrc(this.props.src)\r\n\t\tconst nextFallback = this.ipfsSrc(nextProps.fallbackSrc)\r\n\t\tconst { mediaMime } = nextProps\r\n\r\n\t\tif (nextSrc !== thisSrc) {\r\n\t\t\tconst isVideo = !!mediaMime && isVideoMedia(mediaMime)\r\n\r\n\t\t\tif (isVideo) {\r\n\t\t\t\tthis.displayVideo = this.displayVideo || document.createElement('video')\r\n\t\t\t\tthis.setDisplayVideo({\r\n\t\t\t\t\timage: this.ipfsSrc(nextSrc),\r\n\t\t\t\t\tfallback: this.ipfsSrc(nextFallback) || NO_IMAGE,\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.displayImage = this.displayImage || new Image()\r\n\t\t\t\tthis.setDisplayImage({\r\n\t\t\t\t\timage: this.ipfsSrc(nextSrc),\r\n\t\t\t\t\tfallback: this.ipfsSrc(nextFallback) || NO_IMAGE,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.clearLoadTimeout()\r\n\t\tif (this.displayImage) {\r\n\t\t\tthis.displayImage.onerror = null\r\n\t\t\tthis.displayImage.onload = null\r\n\t\t\tthis.displayImage.onabort = null\r\n\t\t\tthis.displayImage = null\r\n\t\t}\r\n\t}\r\n\r\n\tclearLoadTimeout = () => {\r\n\t\tif (this.loadTimeout) {\r\n\t\t\tclearTimeout(this.loadTimeout)\r\n\t\t\tthis.loadTimeout = null\r\n\t\t}\r\n\t}\r\n\r\n\tonFail = fallback => {\r\n\t\tif (this.displayImage) {\r\n\t\t\tthis.displayImage.onerror = null\r\n\t\t\tthis.displayImage.onload = null\r\n\t\t\tthis.displayImage.onabort = null\r\n\r\n\t\t\tthis.clearLoadTimeout()\r\n\t\t\tthis.displayImage.src = fallback\r\n\t\t}\r\n\r\n\t\tthis.clearLoadTimeout()\r\n\r\n\t\tthis.setState({\r\n\t\t\timgSrc: fallback || null,\r\n\t\t})\r\n\t}\r\n\r\n\tsetDisplayImage = ({ image, fallback }) => {\r\n\t\tthis.loadTimeout = setTimeout(() => {\r\n\t\t\tthis.onFail(fallback)\r\n\t\t}, MAX_IMG_LOAD_TIME)\r\n\r\n\t\tthis.displayImage.onerror = this.displayImage.onabort = this.onFail.bind(\r\n\t\t\tthis,\r\n\t\t\tfallback\r\n\t\t)\r\n\r\n\t\tthis.displayImage.onload = () => {\r\n\t\t\tthis.clearLoadTimeout()\r\n\t\t\tthis.setState({\r\n\t\t\t\timgSrc: image,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.displayImage.src = image\r\n\t}\r\n\r\n\tsetDisplayVideo = ({ image, fallback }) => {\r\n\t\tthis.displayVideo.src = image\r\n\r\n\t\tthis.loadTimeout = setTimeout(() => {\r\n\t\t\tthis.onFail(fallback)\r\n\t\t}, MAX_IMG_LOAD_TIME)\r\n\r\n\t\tthis.displayVideo.onloadedmetadata = ({ target }) => {\r\n\t\t\tthis.clearLoadTimeout()\r\n\t\t\tthis.setState({\r\n\t\t\t\tvideoSrc: image,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfullScreenBtn() {\r\n\t\tconst { classes } = this.props\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<Fab\r\n\t\t\t\t\tmini\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tclassName={classnames(classes.fullscreenIcon)}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.handleToggle()\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<FullscreenIcon />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t{this.renderFullscreenDialog()}\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n\r\n\trenderFullscreenDialog() {\r\n\t\tconst { t, alt, classes, type } = this.props\r\n\t\tconst { active, imgSrc, videoSrc } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\topen={active}\r\n\t\t\t\ttype={type || 'normal'}\r\n\t\t\t\tmaxWidth={false}\r\n\t\t\t\tonClose={this.handleToggle}\r\n\t\t\t\tclasses={{ paper: classes.dialog }}\r\n\t\t\t>\r\n\t\t\t\t<DialogContent className={classes.dialogImageParent}>\r\n\t\t\t\t\t{imgSrc ? (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\talt={alt}\r\n\t\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t\t\tdraggable='false'\r\n\t\t\t\t\t\t\tclassName={classnames(classes.dialogImage, classes.imgLoading)}\r\n\t\t\t\t\t\t\tonDragStart={event => event.preventDefault() /*Firefox*/}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<video\r\n\t\t\t\t\t\t\tsrc={videoSrc}\r\n\t\t\t\t\t\t\tautoPlay\r\n\t\t\t\t\t\t\tmuted\r\n\t\t\t\t\t\t\tloop\r\n\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\tclassName={classnames(classes.dialogImage, classes.imgLoading)}\r\n\t\t\t\t\t\t></video>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={this.handleToggle} color='primary'>\r\n\t\t\t\t\t\t{t('CLOSE')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\talt,\r\n\t\t\tallowFullscreen,\r\n\t\t\tclassName,\r\n\t\t\tclasses,\r\n\t\t\tfullScreenOnClick,\r\n\t\t} = this.props\r\n\t\tconst { imgSrc, videoSrc } = this.state\r\n\t\treturn imgSrc || videoSrc ? (\r\n\t\t\t<div\r\n\t\t\t\tclassName={classnames(classes.imgParent, className, classes.wrapper)}\r\n\t\t\t>\r\n\t\t\t\t{!!imgSrc ? (\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\talt={alt}\r\n\t\t\t\t\t\tsrc={this.state.imgSrc}\r\n\t\t\t\t\t\tdraggable='false'\r\n\t\t\t\t\t\tclassName={classnames(classes.imgLoading, className, classes.img)}\r\n\t\t\t\t\t\tonDragStart={event => event.preventDefault() /*Firefox*/}\r\n\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\tfullScreenOnClick &&\r\n\t\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t\tthis.handleToggle()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<video\r\n\t\t\t\t\t\tsrc={videoSrc}\r\n\t\t\t\t\t\tclassName={classnames(classes.imgLoading, className, classes.img)}\r\n\t\t\t\t\t\tautoPlay\r\n\t\t\t\t\t\tmuted\r\n\t\t\t\t\t\tloop\r\n\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\tfullScreenOnClick &&\r\n\t\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t\tthis.handleToggle()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t></video>\r\n\t\t\t\t)}\r\n\t\t\t\t{allowFullscreen && this.fullScreenBtn()}\r\n\t\t\t\t{fullScreenOnClick && this.renderFullscreenDialog()}\r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<span className={classnames(classes.imgLoading, className)}>\r\n\t\t\t\t<span className={classes.circular}>\r\n\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nImg.propTypes = {\r\n\tsrc: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\r\n\tfallbackSrc: PropTypes.string,\r\n\talt: PropTypes.string,\r\n\tallowFullscreen: PropTypes.bool,\r\n\tfullScreenOnClick: PropTypes.bool,\r\n\tmediaMime: PropTypes.string,\r\n}\r\n\r\nexport default Translate(withStyles(styles)(Img))\r\n","export const styles = theme => ({\r\n\timgLoading: {\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\twidth: 'auto',\r\n\t\theight: '100%',\r\n\t\tposition: 'relative',\r\n\t\tdisplay: 'inline-block',\r\n\t},\r\n\timgParent: {\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\twidth: 'auto',\r\n\t\theight: 'max-content',\r\n\t\tposition: 'relative',\r\n\t\tdisplay: 'inline-block',\r\n\t},\r\n\tcircular: {\r\n\t\tposition: 'relative',\r\n\t\ttop: 'calc(50% - 20px)', //UGLY but works best - DEFAULT circular size is 40px\r\n\t\tleft: 'calc(50% - 20px)',\r\n\t\tdisplay: 'inline-block',\r\n\t},\r\n\tfullscreenIcon: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: theme.spacing(1),\r\n\t\tright: theme.spacing(1),\r\n\t\tcursor: 'pointer',\r\n\t\twidth: '30px',\r\n\t\theight: '30px',\r\n\t\tminHeight: '24px',\r\n\t},\r\n\tdialog: {\r\n\t\t'@media(max-width:744px)': {\r\n\t\t\tminWidth: `calc(100vw - ${theme.spacing(2)}px)`,\r\n\t\t},\r\n\t\t'@media(max-height:823px)': {\r\n\t\t\tminHeight: 'auto',\r\n\t\t},\r\n\t},\r\n\tdialogImageParent: {\r\n\t\t'@media(max-width:1080px)': {\r\n\t\t\tmaxWidth: '80vw',\r\n\t\t\tmaxHeight: '100vw',\r\n\t\t\tdisplay: 'block',\r\n\t\t\tmargin: 'auto',\r\n\t\t},\r\n\t\t'@media(max-width:744px)': {\r\n\t\t\tpaddingLeft: 0,\r\n\t\t\tpaddingRight: 0,\r\n\t\t},\r\n\t},\r\n\tdialogImage: {\r\n\t\theight: 'auto',\r\n\t\tmaxWidth: '80vw',\r\n\t},\r\n\timg: {\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t},\r\n\twrapper: {\r\n\t\theight: 'max-content',\r\n\t\twidth: 'max-content',\r\n\t},\r\n})\r\n","/**\r\n * @param {String} objUrl - Image blob url URL.createObjectURL\r\n * @param {Object} pixelCrop - pixelCrop Object provided by react-image-crop\r\n * @param {String} fileName - Name of the returned file in Promise\r\n */\r\nexport const getCroppedImgUrl = ({ objUrl, pixelCrop, fileName, size }) => {\r\n\t// TODO: Validate pixelCrop and size\r\n\tconst cropCanvas = document.createElement('canvas')\r\n\tconst scaleCanvas = document.createElement('canvas')\r\n\r\n\tconst img = new Image()\r\n\timg.crossOrigin = 'Anonymous' // For ipfs URL\r\n\timg.src = objUrl\r\n\r\n\t// As a blob\r\n\treturn new Promise((resolve, reject) => {\r\n\t\timg.onload = () => {\r\n\t\t\tconst width = img.width\r\n\t\t\tconst height = img.height\r\n\r\n\t\t\t// pixelCrop come in %\r\n\t\t\tconst crop = {\r\n\t\t\t\tx: Math.round(width * (pixelCrop.x / 100)),\r\n\t\t\t\ty: Math.round(height * (pixelCrop.y / 100)),\r\n\t\t\t\twidth: Math.round(width * (pixelCrop.width / 100)),\r\n\t\t\t\theight: Math.round(height * (pixelCrop.height / 100)),\r\n\t\t\t}\r\n\r\n\t\t\tcropCanvas.width = crop.width\r\n\t\t\tcropCanvas.height = crop.height\r\n\t\t\tconst cctx = cropCanvas.getContext('2d')\r\n\r\n\t\t\tcctx.drawImage(\r\n\t\t\t\timg,\r\n\t\t\t\tcrop.x,\r\n\t\t\t\tcrop.y,\r\n\t\t\t\tcrop.width,\r\n\t\t\t\tcrop.height,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tcrop.width,\r\n\t\t\t\tcrop.height\r\n\t\t\t)\r\n\r\n\t\t\tscaleCanvas.width = size.width\r\n\t\t\tscaleCanvas.height = size.height\r\n\r\n\t\t\tconst sctx = scaleCanvas.getContext('2d')\r\n\r\n\t\t\tsctx.drawImage(\r\n\t\t\t\tcropCanvas,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tcrop.width,\r\n\t\t\t\tcrop.height,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t)\r\n\r\n\t\t\tscaleCanvas.toBlob(file => {\r\n\t\t\t\tif (!file) {\r\n\t\t\t\t\treject('Error cropping file')\r\n\t\t\t\t}\r\n\t\t\t\tfile.name = fileName\r\n\t\t\t\tresolve(URL.createObjectURL(file))\r\n\t\t\t}, 'image/jpeg')\r\n\t\t}\r\n\t})\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Img from 'components/common/img/Img'\r\n// import debounce from 'debounce'\r\nimport Dropzone from 'react-dropzone'\r\nimport Translate from 'components/translate/Translate'\r\nimport Button from '@material-ui/core/Button'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ReactCrop from 'react-image-crop'\r\nimport { getCroppedImgUrl } from 'services/images/crop'\r\nimport CropIcon from '@material-ui/icons/Crop'\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport FileUploadIcon from '@material-ui/icons/CloudUpload'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { isVideoMedia } from 'helpers/mediaHelpers.js'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nclass ImgForm extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tconst { size, imgSrc, mime } = props\r\n\t\tconst aspect = size ? size.width / size.height : undefined\r\n\r\n\t\tthis.state = {\r\n\t\t\timgSrc: imgSrc || '',\r\n\t\t\tmime: mime || '',\r\n\t\t\timgName: '',\r\n\t\t\tcropMode: false,\r\n\t\t\tcrop: { aspect: aspect },\r\n\t\t}\r\n\t}\r\n\r\n\tonDrop = (acceptedFiles, rejectedFiles) => {\r\n\t\tconst that = this\r\n\t\tconst file = acceptedFiles[0]\r\n\t\tif (!file) return\r\n\t\tconst objectUrl = URL.createObjectURL(file)\r\n\r\n\t\tthat.setState({\r\n\t\t\timgSrc: objectUrl,\r\n\t\t\timgName: file.name,\r\n\t\t\tmime: file.type,\r\n\t\t})\r\n\t\t// TODO: Maybe get width and height here instead on ing validation hoc\r\n\t\tthis.props.onChange({\r\n\t\t\ttempUrl: objectUrl,\r\n\t\t\tmime: file.type,\r\n\t\t})\r\n\t}\r\n\r\n\tonRemove = e => {\r\n\t\tthis.preventBubbling(e)\r\n\r\n\t\tconst { imgSrc } = this.state\r\n\r\n\t\tif (imgSrc) {\r\n\t\t\tURL.revokeObjectURL(imgSrc)\r\n\t\t\tthis.setState({ imgSrc: '', imgName: '' })\r\n\t\t\tthis.props.onChange({ tempUrl: null, mime: null })\r\n\t\t}\r\n\t}\r\n\r\n\tonCropChange = crop => {\r\n\t\tthis.setState({ crop })\r\n\t}\r\n\r\n\tsaveCropped = () => {\r\n\t\tconst { imgSrc, crop, mime, imgName } = this.state\r\n\t\tconst { onChange, size } = this.props\r\n\t\tgetCroppedImgUrl({\r\n\t\t\tobjUrl: imgSrc,\r\n\t\t\tpixelCrop: crop,\r\n\t\t\tfileName: `cropped-${imgName}`,\r\n\t\t\tsize,\r\n\t\t}).then(croppedBlob => {\r\n\t\t\tURL.revokeObjectURL(imgSrc)\r\n\t\t\tthis.setState({ imgSrc: croppedBlob, cropMode: false })\r\n\t\t\tonChange({\r\n\t\t\t\ttempUrl: croppedBlob,\r\n\t\t\t\tmime,\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tpreventBubbling = e => {\r\n\t\tif (e.stopPropagation) {\r\n\t\t\te.stopPropagation()\r\n\t\t}\r\n\t\tif (e.nativeEvent) {\r\n\t\t\te.nativeEvent.stopImmediatePropagation()\r\n\t\t}\r\n\t}\r\n\r\n\tUploadInfo = () => {\r\n\t\tconst { t, classes, size, errMsg } = this.props\r\n\t\tconst { imgSrc, mime } = this.state\r\n\t\treturn (\r\n\t\t\t<div className={classes.uploadInfo}>\r\n\t\t\t\t{imgSrc && !isVideoMedia(mime) ? (\r\n\t\t\t\t\t<div className={classes.uploadActions}>\r\n\t\t\t\t\t\t{/* TEMP: make size required */}\r\n\t\t\t\t\t\t{!!size && (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\tthis.preventBubbling(e)\r\n\t\t\t\t\t\t\t\t\tthis.setState({ cropMode: true })\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CropIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t\t{t('IMG_FORM_CROP')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\tonClick={this.onRemove}\r\n\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ClearIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t{t('IMG_FORM_CLEAR')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<FileUploadIcon />\r\n\t\t\t\t)}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span> {t('DRAG_AND_DROP_TO_UPLOAD')} </span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small> (max 2MB; .jpeg, .jpg) </small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Typography className={classes.errMsg} color='error'>\r\n\t\t\t\t\t\t{errMsg}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\t// TODO: CLEAR IMG BLOB!!!!\r\n\trender() {\r\n\t\tconst { t, classes, label, additionalInfo } = this.props\r\n\t\tconst { crop, cropMode, imgName, imgSrc, mime } = this.state\r\n\r\n\t\tconst videoSrc = isVideoMedia(mime)\r\n\t\treturn (\r\n\t\t\t<div className={classes.imgForm}>\r\n\t\t\t\t<AppBar\r\n\t\t\t\t\tposition='static'\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\troot: classes.header,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t{imgSrc && imgName ? (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{label || 'Image'}: {imgName}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<span> {label || 'Upload image'} </span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{cropMode ? (\r\n\t\t\t\t\t\t<div className={classes.dropzone} onClick={this.preventBubbling}>\r\n\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\t\tspacing={2}\r\n\t\t\t\t\t\t\t\talignContent='center'\r\n\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={8}>\r\n\t\t\t\t\t\t\t\t\t<ReactCrop\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: '100%', maxHeight: 320 }}\r\n\t\t\t\t\t\t\t\t\t\timageStyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: '320px',\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 'auto',\r\n\t\t\t\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.imgDropzonePreview}\r\n\t\t\t\t\t\t\t\t\t\tcrop={crop}\r\n\t\t\t\t\t\t\t\t\t\tsrc={imgSrc || ''}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onCropChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={4}>\r\n\t\t\t\t\t\t\t\t\t<Typography color='primary' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t\t{t('CROP_MODE_MSG')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.saveCropped}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!crop.width || !crop.height}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<SaveIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t\t\t\t{t('IMG_FORM_SAVE_CROP')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.setState({ cropMode: false })}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<ClearIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t\t\t\t{t('IMG_FORM_CANCEL_CROP')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Dropzone\r\n\t\t\t\t\t\t\taccept='.jpeg,.jpg,.png,.mp4'\r\n\t\t\t\t\t\t\tonDrop={this.onDrop}\r\n\t\t\t\t\t\t\tclassName={classes.dropzone}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\t\tspacing={2}\r\n\t\t\t\t\t\t\t\talignContent='center'\r\n\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={8}>\r\n\t\t\t\t\t\t\t\t\t{videoSrc ? (\r\n\t\t\t\t\t\t\t\t\t\t<video controls src={imgSrc} type='video/mp4'></video>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\t\t\talt={'name'}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.imgDropzonePreview}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={4}>\r\n\t\t\t\t\t\t\t\t\t<this.UploadInfo />\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Dropzone>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small> {additionalInfo} </small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nImgForm.propTypes = {\r\n\timgSrc: PropTypes.string,\r\n\tlabel: PropTypes.string,\r\n\tsize: PropTypes.object,\r\n}\r\n\r\nexport default Translate(withStyles(styles)(ImgForm))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\theader: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\tdropzone: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1',\r\n\t\t\theight: 'auto',\r\n\t\t\twidth: 'auto',\r\n\t\t\tborder: `2px dashed ${theme.palette.grey[500]}`,\r\n\t\t\tbackground: theme.palette.background.default,\r\n\t\t\tpadding: 10,\r\n\t\t\tcursor: 'pointer',\r\n\t\t\toverflow: 'hidden',\r\n\t\t},\r\n\t\timgDropzonePreview: {\r\n\t\t\tmaxHeight: 320,\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: 'auto',\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t\tdropzoneBtn: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tleftIcon: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tuploadActions: {\r\n\t\t\tmarginTop: spacing,\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\nimport { getMediaSize, checkExactishAspect } from 'helpers/mediaHelpers'\r\n\r\nexport default function ValidImageHoc(Decorated) {\r\n\tclass ValidImage extends Component {\r\n\t\tvalidate = ({\r\n\t\t\tpropsName,\r\n\t\t\twidthTarget,\r\n\t\t\theightTarget,\r\n\t\t\tmediaWidth,\r\n\t\t\tmediaHeight,\r\n\t\t\tmsg,\r\n\t\t\texact,\r\n\t\t\trequired,\r\n\t\t\tonChange,\r\n\t\t\tmime,\r\n\t\t\ttempUrl,\r\n\t\t}) => {\r\n\t\t\tlet isValid = true\r\n\r\n\t\t\tif (exact) {\r\n\t\t\t\tisValid = checkExactishAspect(\r\n\t\t\t\t\twidthTarget,\r\n\t\t\t\t\tmediaWidth,\r\n\t\t\t\t\theightTarget,\r\n\t\t\t\t\tmediaHeight\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\tif (!exact && (widthTarget < mediaWidth || heightTarget < mediaHeight)) {\r\n\t\t\t\tisValid = false\r\n\t\t\t}\r\n\r\n\t\t\tconst masgArgs = [widthTarget, heightTarget, 'px']\r\n\r\n\t\t\tthis.props.validate(propsName, {\r\n\t\t\t\tisValid: isValid,\r\n\t\t\t\terr: { msg: msg, args: masgArgs },\r\n\t\t\t\tdirty: true,\r\n\t\t\t})\r\n\r\n\t\t\tconst resMedia = {\r\n\t\t\t\twidth: mediaWidth,\r\n\t\t\t\theight: mediaHeight,\r\n\t\t\t\tmime,\r\n\t\t\t\ttempUrl,\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof onChange === 'function') {\r\n\t\t\t\tonChange(propsName, resMedia)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvalidateMedia = async (\r\n\t\t\t{\r\n\t\t\t\tpropsName,\r\n\t\t\t\twidthTarget,\r\n\t\t\t\theightTarget,\r\n\t\t\t\tmsg,\r\n\t\t\t\texact,\r\n\t\t\t\trequired,\r\n\t\t\t\tonChange,\r\n\t\t\t} = {},\r\n\t\t\tmedia\r\n\t\t) => {\r\n\t\t\tif (!required && !media.tempUrl && onChange) {\r\n\t\t\t\tthis.props.validate(propsName, {\r\n\t\t\t\t\tisValid: true,\r\n\t\t\t\t\terr: { msg: msg, args: [] },\r\n\t\t\t\t\tdirty: true,\r\n\t\t\t\t})\r\n\t\t\t\t// TODO: fix this\r\n\t\t\t\tonChange(propsName, media)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (!media.mime || !media.tempUrl) {\r\n\t\t\t\tthis.props.validate(propsName, {\r\n\t\t\t\t\tisValid: false,\r\n\t\t\t\t\tdirty: true,\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst size = await getMediaSize({ mime: media.mime, src: media.tempUrl })\r\n\r\n\t\t\tthis.validate({\r\n\t\t\t\tpropsName,\r\n\t\t\t\twidthTarget,\r\n\t\t\t\theightTarget,\r\n\t\t\t\tmediaWidth: size.width,\r\n\t\t\t\tmediaHeight: size.height,\r\n\t\t\t\tmsg,\r\n\t\t\t\texact,\r\n\t\t\t\trequired,\r\n\t\t\t\tonChange,\r\n\t\t\t\tmime: media.mime,\r\n\t\t\t\ttempUrl: media.tempUrl,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst props = this.props\r\n\t\t\treturn <Decorated {...props} validateMedia={this.validateMedia} />\r\n\t\t}\r\n\t}\r\n\r\n\tValidImage.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tvalidateId: PropTypes.string.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { memory } = state\r\n\t\treturn {\r\n\t\t\tvalidations: memory.validations[props.validateId],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(ValidImage))\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport PropTypes from 'prop-types'\r\nimport { execute, validate } from 'actions'\r\nimport { selectValidationsById } from 'selectors'\r\n\r\nexport default function ValidationHoc(Decorated) {\r\n\tconst ValidItem = props => {\r\n\t\tconst validations =\r\n\t\t\tuseSelector(state => selectValidationsById(state, props.validateId)) || {}\r\n\r\n\t\tconst makeValidation = (\r\n\t\t\tkey,\r\n\t\t\t{ isValid, err = { msg: '', args: [] }, dirty = false, removeAll = false }\r\n\t\t) => {\r\n\t\t\tconst { validateId } = props\r\n\t\t\texecute(validate(key, { isValid, err, dirty, removeAll }, validateId))\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Decorated\r\n\t\t\t\t{...props}\r\n\t\t\t\tvalidate={makeValidation}\r\n\t\t\t\tinvalidFields={validations}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\tValidItem.propTypes = {\r\n\t\tvalidateId: PropTypes.string.isRequired,\r\n\t}\r\n\r\n\treturn ValidItem\r\n}\r\n","export const styles = theme => {\r\n\t// const spacing = theme.spacing(3)\r\n\treturn {}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Button from '@material-ui/core/Button'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ImgForm from 'components/dashboard/forms/ImgForm'\r\nimport ValidImageHoc from 'components/dashboard/forms/ValidImageHoc'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport { AVATAR_MAX_WIDTH, AVATAR_MAX_HEIGHT } from 'constants/misc'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nexport class ImgDialog extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tvalues: {},\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (name, value) => {\r\n\t\tlet newValues = { ...this.state.values }\r\n\t\tnewValues[name] = value\r\n\t\tthis.setState({ values: newValues })\r\n\t}\r\n\r\n\tonOk = () => {\r\n\t\tconst vals = this.state.values\r\n\t\tObject.keys(vals).forEach(key => {\r\n\t\t\tthis.props.onChangeReady(key, vals[key])\r\n\t\t})\r\n\t\tthis.props.handleToggle()\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet t = () => {}\r\n\t\tlet validations = this.props.invalidFields || {}\r\n\t\tlet errImg = validations[this.props.imgPropName]\r\n\t\tlet width = this.props.width || AVATAR_MAX_WIDTH\r\n\t\tlet height = this.props.height || AVATAR_MAX_HEIGHT\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={this.props.active}\r\n\t\t\t\t\t// onEscKeyDown={this.props.handleToggle}\r\n\t\t\t\t\t// onOverlayClick={this.props.handleToggle}\r\n\t\t\t\t\ttitle={this.props.title}\r\n\t\t\t\t\ttype={this.props.type || 'normal'}\r\n\t\t\t\t\t// className={theme[ItemTypesNames[this.props.itemType]]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t\t<IconButton onClick={this.props.handleToggle}>\r\n\t\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t{this.props.t(this.props.title)}\r\n\t\t\t\t\t</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<ImgForm\r\n\t\t\t\t\t\t\tlabel={t(this.props.imgLabel)}\r\n\t\t\t\t\t\t\timgSrc={this.props.imgSrc || ''}\r\n\t\t\t\t\t\t\tonChange={this.props.validateMedia.bind(this, {\r\n\t\t\t\t\t\t\t\tpropsName: this.props.imgPropName,\r\n\t\t\t\t\t\t\t\twidthTarget: width,\r\n\t\t\t\t\t\t\t\theightTarget: height,\r\n\t\t\t\t\t\t\t\tmsg: this.props.errMsg,\r\n\t\t\t\t\t\t\t\texact: this.props.exact,\r\n\t\t\t\t\t\t\t\trequired: this.props.required,\r\n\t\t\t\t\t\t\t\tonChange: this.handleChange,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tadditionalInfo={t(this.props.additionalInfo)}\r\n\t\t\t\t\t\t\terrMsg={errImg ? errImg.errMsg : ''}\r\n\t\t\t\t\t\t\tsize={{ width: width, height: height }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.props.handleToggle} color='primary'>\r\n\t\t\t\t\t\t\t{'Cancel'}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={this.onOk}\r\n\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t!!(this.props.invalidFields || {})[this.props.imgPropName]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{'Ok'}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nImgDialog.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tlet persist = state.persist\r\n\t// let memory = state.memory\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ValidItemHoc(ValidImageHoc(withStyles(styles)(ImgDialog))))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\n// import classnames from 'classnames'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport CheckIcon from '@material-ui/icons/Check'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\n// NOTE: Separate component to track the validations and spinner to avoid rerender of item top level components\r\nclass SaveBtn extends Component {\r\n\trender() {\r\n\t\tlet {\r\n\t\t\tspinner,\r\n\t\t\tclasses,\r\n\t\t\tsuccess,\r\n\t\t\tdirtyProps,\r\n\t\t\tsave,\r\n\t\t\tvalidations,\r\n\t\t\tvalidationId,\r\n\t\t\tdisabled,\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<div className={classes.position}>\r\n\t\t\t\t<div className={classes.wrapper}>\r\n\t\t\t\t\t<Fab\r\n\t\t\t\t\t\tfabButton\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t// className={buttonClassname}\r\n\t\t\t\t\t\tonClick={() => save()}\r\n\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\tdisabled ||\r\n\t\t\t\t\t\t\tspinner ||\r\n\t\t\t\t\t\t\t!dirtyProps.length ||\r\n\t\t\t\t\t\t\t!!Object.keys(validations[validationId] || {}).length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// {...other}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{/*TODO: Success */}\r\n\t\t\t\t\t\t{success ? <CheckIcon /> : <SaveIcon />}\r\n\t\t\t\t\t</Fab>\r\n\t\t\t\t\t{!!spinner && (\r\n\t\t\t\t\t\t<CircularProgress size={68} className={classes.fabProgress} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSaveBtn.propTypes = {\r\n\tspinnerId: PropTypes.string,\r\n\tvalidationId: PropTypes.string,\r\n\titemId: PropTypes.string,\r\n\tvalidations: PropTypes.object,\r\n\tdisabled: PropTypes.bool,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\treturn {\r\n\t\tspinner: memory.spinners[props.spinnerId],\r\n\t\tvalidations: memory.validations,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(SaveBtn)))\r\n","import color from '@material-ui/core/colors/purple'\r\n\r\nexport const styles = theme => ({\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n\twrapper: {\r\n\t\tposition: 'relative',\r\n\t},\r\n\tbuttonSuccess: {\r\n\t\tbackgroundColor: color[500],\r\n\t\t'&:hover': {\r\n\t\t\tbackgroundColor: color[700],\r\n\t\t},\r\n\t},\r\n\tfabProgress: {\r\n\t\tcolor: color[500],\r\n\t\tposition: 'absolute',\r\n\t\ttop: -6,\r\n\t\tleft: -6,\r\n\t\tzIndex: 1,\r\n\t},\r\n\tbuttonProgress: {\r\n\t\tcolor: color[500],\r\n\t\tposition: 'absolute',\r\n\t\ttop: '50%',\r\n\t\tleft: '50%',\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tposition: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 86,\r\n\t\tright: 40,\r\n\t\tzIndex: theme.zIndex.appBar,\r\n\t},\r\n})\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\tconst aspect = '56.25%'\r\n\r\n\treturn {\r\n\t\tmediaRoot: {\r\n\t\t\theight: 0,\r\n\t\t\tpaddingTop: aspect, // 16:9\r\n\t\t\tposition: 'relative',\r\n\t\t\toverflow: 'hidden',\r\n\t\t},\r\n\t\timg: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tmargin: 'auto',\r\n\t\t\t// minWidth: '50%',\r\n\t\t\t// minHeight: '50%',\r\n\t\t\theight: 'auto',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\tbuttonRight: {\r\n\t\t\tmarginLeft: spacing,\r\n\t\t},\r\n\t\tbuttonLeft: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\terror: {\r\n\t\t\tcolor: theme.palette.error.main,\r\n\t\t},\r\n\t\ttextField: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tmaxWidth: '70%',\r\n\t\t},\r\n\t\tchangesLine: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\talignItems: 'center',\r\n\t\t\tcolor: theme.palette.secondary.main,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\tchangeChip: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tmarginLeft: 0,\r\n\t\t},\r\n\t\teditIcon: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tbottom: spacing,\r\n\t\t\tright: spacing,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Button from '@material-ui/core/Button'\r\nimport IMG_404 from 'resources/404.png'\r\nimport Img from 'components/common/img/Img'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Translate from 'components/translate/Translate'\r\nimport { styles } from './styles'\r\n\r\nconst RRButton = withReactRouterLink(Button)\r\n\r\nclass PageNotFound extends React.Component {\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tclasses,\r\n\t\t\ttitle,\r\n\t\t\tsubtitle,\r\n\t\t\tgoToTxt,\r\n\t\t\tgoToPath,\r\n\t\t\tskipGoToButton,\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<div className={classes.wrapper}>\r\n\t\t\t\t<Grid container spacing={2} justify='center' alignItems='center'>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Typography className={classes.text} variant='h3'>\r\n\t\t\t\t\t\t\t{t(title || '404_TEXT')}\r\n\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t{subtitle && (\r\n\t\t\t\t\t\t\t<Typography className={classes.text} variant='subtitle1'>\r\n\t\t\t\t\t\t\t\t{t(subtitle)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\tclassName={classes.text}\r\n\t\t\t\t\t\t\tvariant='h1'\r\n\t\t\t\t\t\t\tstyle={{ textTransform: 'uppercase' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('404')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\tsrc={IMG_404}\r\n\t\t\t\t\t\t\talt={'Downlad metamask'}\r\n\t\t\t\t\t\t\tclassName={classes.img}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t{!skipGoToButton && (\r\n\t\t\t\t\t\t\t<RRButton\r\n\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\tto={goToPath || '/'}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(goToTxt || 'GO_HOME')}\r\n\t\t\t\t\t\t\t</RRButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nPageNotFound.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tsubtitle: PropTypes.string,\r\n\tgoToTxt: PropTypes.string,\r\n\tgoToPath: PropTypes.string,\r\n\tskipGoToButton: PropTypes.bool,\r\n}\r\n\r\nexport default Translate(withStyles(styles)(PageNotFound))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\twrapper: {\r\n\t\t\tmargin: `${spacing * 2}px auto`,\r\n\t\t\tmaxWidth: 1000,\r\n\t\t},\r\n\t\timg: {\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: 'auto',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Button from '@material-ui/core/Button'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport ImgDialog from 'components/dashboard/containers/ImgDialog'\r\nimport { schemas, Joi } from 'adex-models'\r\nimport classnames from 'classnames'\r\nimport { Prompt } from 'react-router'\r\nimport Translate from 'components/translate/Translate'\r\nimport { items as ItemsConstants } from 'adex-constants'\r\nimport Img from 'components/common/img/Img'\r\nimport SaveBtn from 'components/dashboard/containers/SaveBtn'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport InfoOutlineIcon from '@material-ui/icons/Info'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport { styles } from './styles'\r\nimport { validName } from 'helpers/validators'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport PageNotFound from 'components/page_not_found/PageNotFound'\r\n\r\nconst { adSlotPut, adUnitPut } = schemas\r\nconst { AdSizesByValue } = ItemsConstants\r\n\r\nexport default function ItemHoc(Decorated) {\r\n\tclass Item extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\t\t\tthis.save = this.save.bind(this)\r\n\t\t\tthis.state = {\r\n\t\t\t\tactiveFields: {},\r\n\t\t\t\titem: null,\r\n\t\t\t\tinitialItemState: {},\r\n\t\t\t\tdirtyProps: [],\r\n\t\t\t\teditImg: false,\r\n\t\t\t\t_activeInput: null,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateNav = (item = {}) => {\r\n\t\t\tconst { actions, t, itemType } = this.props\r\n\t\t\tactions.updateNav(\r\n\t\t\t\t'navTitle',\r\n\t\t\t\tt(itemType, { isProp: true }) + ' > ' + item.title || ''\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t\tconst { item, matchId, objModel } = this.props\r\n\r\n\t\t\tif (!item) {\r\n\t\t\t\tthis.updateNav({ title: matchId })\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst initialItemState = new objModel(item)\r\n\r\n\t\t\tthis.setState({ item: { ...item }, initialItemState: initialItemState })\r\n\t\t\tthis.updateNav(initialItemState)\r\n\t\t}\r\n\r\n\t\t// shouldComponentUpdate(nextProps, nextState) {\r\n\t\t//     let diffProps = JSON.stringify(this.props) !== JSON.stringify(nextProps)\r\n\t\t//     let diffState = JSON.stringify(this.state) !== JSON.stringify(nextState)\r\n\t\t//     return diffProps || diffState\r\n\t\t// }\r\n\r\n\t\tcomponentWillReceiveProps(nextProps, nextState) {\r\n\t\t\tconst { objModel } = this.props\r\n\t\t\tconst { item } = this.state\r\n\t\t\tlet currentItemInst = new objModel(item || {})\r\n\t\t\t// Assume that the this.props.match.params.itemId can not be changed without remount of the component\r\n\t\t\t// TODO: check the above\r\n\t\t\tlet nextItem = nextProps.item\r\n\t\t\tlet nexItemInst = new objModel(nextItem || {})\r\n\r\n\t\t\tif (currentItemInst.modifiedOn !== nexItemInst.modifiedOn) {\r\n\t\t\t\t// if (\r\n\t\t\t\t// \tJSON.stringify(currentItemInst.plainObj()) !==\r\n\t\t\t\t// \tJSON.stringify(nexItemInst.plainObj())\r\n\t\t\t\t// ) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\titem: nexItemInst.plainObj(),\r\n\t\t\t\t\tinitialItemState: nexItemInst,\r\n\t\t\t\t\tactiveFields: {},\r\n\t\t\t\t\tdirtyProps: [],\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateNav(nexItemInst)\r\n\t\t}\r\n\r\n\t\tcomponentWillUnmount() {\r\n\t\t\tif (this.state.item) {\r\n\t\t\t\tthis.props.actions.updateSpinner('update' + this.state.item.id, false)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (name, value) => {\r\n\t\t\tconst { objModel } = this.props\r\n\t\t\tconst { item, dirtyProps } = this.state\r\n\r\n\t\t\tconst newItem = new objModel(item)\r\n\t\t\tnewItem[name] = value\r\n\r\n\t\t\tconst dp = dirtyProps.slice(0)\r\n\r\n\t\t\tif (dp.indexOf(name) < 0) {\r\n\t\t\t\tdp.push(name)\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({ item: newItem.plainObj(), dirtyProps: dp })\r\n\t\t}\r\n\r\n\t\treturnPropToInitialState = propName => {\r\n\t\t\tconst { objModel, actions } = this.props\r\n\t\t\tconst { dirtyProps, initialItemState, item } = this.state\r\n\t\t\tconst initialItemStateValue = initialItemState[propName]\r\n\t\t\tconst newItem = new objModel(item)\r\n\t\t\tnewItem[propName] = initialItemStateValue\r\n\r\n\t\t\tconst dp = dirtyProps.filter(dp => {\r\n\t\t\t\treturn dp !== propName\r\n\t\t\t})\r\n\r\n\t\t\tthis.setState({ item: newItem.plainObj(), dirtyProps: dp })\r\n\t\t\t// TEMP fix, we assume that the initial values are validated\r\n\t\t\tactions.resetValidationErrors(item.id, propName)\r\n\t\t}\r\n\r\n\t\tsetActiveFields = (field, value) => {\r\n\t\t\tlet newActiveFields = { ...this.state.activeFields }\r\n\t\t\tnewActiveFields[field] = value\r\n\t\t\tthis.setState({ activeFields: newActiveFields })\r\n\t\t}\r\n\r\n\t\t//TODO: Do not save if not dirty!\r\n\t\tsave = () => {\r\n\t\t\tconst { itemType, spinner, actions } = this.props\r\n\t\t\tconst { item, dirtyProps } = this.state\r\n\r\n\t\t\tif (dirtyProps.length && !spinner) {\r\n\t\t\t\tactions.updateItem({\r\n\t\t\t\t\titemType,\r\n\t\t\t\t\titem,\r\n\t\t\t\t})\r\n\t\t\t\tthis.setState({ dirtyProps: [] })\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tisDirtyProp(prop) {\r\n\t\t\treturn this.state.item.dirtyProps.indexOf(prop) > -1\r\n\t\t}\r\n\r\n\t\thandleToggle = () => {\r\n\t\t\tconst isDemo = this.props.account._authType === 'demo'\r\n\r\n\t\t\tif (isDemo) return\r\n\r\n\t\t\tlet active = this.state.editImg\r\n\t\t\tthis.setState({ editImg: !active })\r\n\t\t}\r\n\r\n\t\tisNameValid(name) {\r\n\t\t\tconst { msg } = validName(name)\r\n\t\t\treturn !msg\r\n\t\t}\r\n\r\n\t\tvalidateTitle(name, dirty, errMsg) {\r\n\t\t\tconst { itemType, validate } = this.props\r\n\t\t\tlet schema = null\r\n\r\n\t\t\tswitch (itemType) {\r\n\t\t\t\tcase 'AdSlot':\r\n\t\t\t\t\tschema = adSlotPut.title\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'AdUnit':\r\n\t\t\t\t\tschema = adUnitPut.title\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\tconst result = Joi.validate(name, schema)\r\n\t\t\tvalidate('title', {\r\n\t\t\t\tisValid: !result.error,\r\n\t\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tvalidateDescription(name, dirty, errMsg) {\r\n\t\t\tconst { itemType, validate } = this.props\r\n\t\t\tlet schema = null\r\n\r\n\t\t\tswitch (itemType) {\r\n\t\t\t\tcase 'AdSlot':\r\n\t\t\t\t\tschema = adSlotPut.description\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'AdUnit':\r\n\t\t\t\t\tschema = adUnitPut.description\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tconst result = Joi.validate(name, schema)\r\n\t\t\tvalidate('description', {\r\n\t\t\t\tisValid: !result.error,\r\n\t\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst {\r\n\t\t\t\tvalidations,\r\n\t\t\t\tclasses,\r\n\t\t\t\tt,\r\n\t\t\t\taccount,\r\n\t\t\t\titemType,\r\n\t\t\t\tobjModel,\r\n\t\t\t\tmatchId,\r\n\t\t\t\tside,\r\n\t\t\t\tinvalidFields,\r\n\t\t\t\tvalidateId,\r\n\t\t\t\t...rest\r\n\t\t\t} = this.props\r\n\t\t\tconst propsItem = this.props.item\r\n\r\n\t\t\tif (!propsItem) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<PageNotFound\r\n\t\t\t\t\t\ttitle={t('ITEM_NOT_FOUND_TITLE')}\r\n\t\t\t\t\t\tsubtitle={t('ITEM_NOT_FOUND_SUBTITLE', {\r\n\t\t\t\t\t\t\targs: [itemType, matchId],\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tskipGoToButton\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t * NOTE: using instance of the item, the instance is passes to the Unit, Slot, Channel and Campaign components,\r\n\t\t\t * in this case there is no need to make instance inside them\r\n\t\t\t */\r\n\r\n\t\t\tconst isDemo = account._authType === 'demo'\r\n\t\t\tconst item = new objModel(this.state.item || {})\r\n\t\t\tlet canEdit = itemType === 'AdSlot'\r\n\t\t\tlet imgSrc = item.temp.tempUrl || item.mediaUrl || item.fallbackMediaUrl\r\n\r\n\t\t\tconst titleErr = invalidFields['title']\r\n\t\t\tconst descriptionErr = invalidFields['description']\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Prompt\r\n\t\t\t\t\t\twhen={!!this.state.dirtyProps.length}\r\n\t\t\t\t\t\tmessage={t('UNSAVED_CHANGES_ALERT')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{itemType !== 'Campaign' && (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<ImgDialog\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\timgSrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\thandleToggle={this.handleToggle}\r\n\t\t\t\t\t\t\t\t\tactive={this.state.editImg}\r\n\t\t\t\t\t\t\t\t\tonChangeReady={this.handleChange}\r\n\t\t\t\t\t\t\t\t\tvalidateId={item._id}\r\n\t\t\t\t\t\t\t\t\twidth={\r\n\t\t\t\t\t\t\t\t\t\tthis.props.updateImgWidth ||\r\n\t\t\t\t\t\t\t\t\t\t(AdSizesByValue[item.size] || {}).width\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\theight={\r\n\t\t\t\t\t\t\t\t\t\tthis.props.updateImgHeight ||\r\n\t\t\t\t\t\t\t\t\t\t(AdSizesByValue[item.size] || {}).height\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttitle={t(this.props.updateImgLabel)}\r\n\t\t\t\t\t\t\t\t\tadditionalInfo={t(this.props.updateImgInfoLabel)}\r\n\t\t\t\t\t\t\t\t\texact={this.props.updateImgExact}\r\n\t\t\t\t\t\t\t\t\terrMsg={this.props.updateImgErrMsg}\r\n\t\t\t\t\t\t\t\t\timgPropName='img'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{!!this.state.dirtyProps.length && (\r\n\t\t\t\t\t\t\t\t\t<div className={classes.changesLine}>\r\n\t\t\t\t\t\t\t\t\t\t<InfoOutlineIcon className={classes.buttonLeft} />\r\n\t\t\t\t\t\t\t\t\t\t<span className={classes.buttonLeft}>\r\n\t\t\t\t\t\t\t\t\t\t\t{t('UNSAVED_CHANGES')}:\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.dirtyProps.map(p => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.changeChip}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={p}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t(p, { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonDelete={() => this.returnPropToInitialState(p)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={7}>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\terror={!!titleErr && !!titleErr.errMsg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel>{t('title', { isProp: true })}</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={t('title', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.validateTitle(ev.target.value, true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleChange('title', ev.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength={1024}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('title', false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={() => this.validateTitle(item.title, false)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.activeFields.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position='end'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ev =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('title', true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{titleErr && titleErr.errMsg && titleErr.dirty && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t(titleErr.errMsg, { args: titleErr.errMsgArgs })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\terror={!!descriptionErr && !!descriptionErr.errMsg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel htmlFor='description'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t('description', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname='description'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.description || ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.validateDescription(ev.target.value, true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleChange('description', ev.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength={1024}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('description', false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.validateDescription(item.description, false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.activeFields.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position='end'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ev =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('description', true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{descriptionErr && !!descriptionErr.errMsg ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t(descriptionErr.errMsg, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\targs: descriptionErr.errMsgArgs,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t!item.description && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('NO_DESCRIPTION_YET')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={5}>\r\n\t\t\t\t\t\t\t\t\t\t{this.props.showLogo && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ width: 270 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Paper\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses.mediaRoot,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses.imgContainer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={item.fullName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(classes.img, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[classes.pointer]:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.canEditImg && !isDemo,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfabButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmini\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.editIcon}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={!isDemo ? this.handleToggle : null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<SaveBtn\r\n\t\t\t\t\t\t\t\t\tspinnerId={'update' + item.id}\r\n\t\t\t\t\t\t\t\t\tvalidationId={'update-' + validateId}\r\n\t\t\t\t\t\t\t\t\tdirtyProps={this.state.dirtyProps}\r\n\t\t\t\t\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t!this.state.dirtyProps.length ||\r\n\t\t\t\t\t\t\t\t\t\t!!Object.keys(invalidFields).length\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Decorated\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\taccount={account}\r\n\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\tinEdit={!!this.state.dirtyProps.length}\r\n\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\t\t\ttoggleImgEdit={this.handleToggle.bind(this)}\r\n\t\t\t\t\t\t\tactiveFields={this.state.activeFields}\r\n\t\t\t\t\t\t\tsetActiveFields={this.setActiveFields.bind(this)}\r\n\t\t\t\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\t\t\t\titemType={itemType}\r\n\t\t\t\t\t\t\tisDemo={isDemo}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItem.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\taccount: PropTypes.object.isRequired,\r\n\t\titem: PropTypes.object.isRequired,\r\n\t\tspinner: PropTypes.bool,\r\n\t\titemType: PropTypes.string.isRequired,\r\n\t\tobjModel: PropTypes.func.isRequired,\r\n\t}\r\n\r\n\tconst tryGetItemByIpfs = ({ items, ipfs }) => {\r\n\t\tlet keys = Object.keys(items)\r\n\r\n\t\tfor (let index = 0; index < keys.length; index++) {\r\n\t\t\tconst key = keys[index]\r\n\t\t\tconst item = items[key]\r\n\r\n\t\t\tif (!!item && item._ipfs && !!ipfs && item._ipfs === ipfs) {\r\n\t\t\t\treturn item\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist } = state\r\n\t\t// const memory = state.memory\r\n\t\tconst items = persist.items[props.itemType]\r\n\t\tconst id = props.match.params.itemId\r\n\t\tlet item = items[id]\r\n\r\n\t\tif (!item && props.itemType !== undefined) {\r\n\t\t\titem = tryGetItemByIpfs({ items: items, ipfs: id })\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t\titem: item,\r\n\t\t\tvalidateId: 'update-' + (item.id || item.ipfs),\r\n\t\t\tmatchId: id,\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(withStyles(styles)(ValidItemHoc(Translate(Item))))\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport { InputLoading } from 'components/common/spinners/'\r\nimport classnames from 'classnames'\r\nimport { styles } from './styles'\r\nimport { t } from 'selectors'\r\n\r\nclass Dropdown extends React.Component {\r\n\thandleChange = event => {\r\n\t\tthis.props.onChange(event.target.value)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses,\r\n\t\t\tlabel = '',\r\n\t\t\tvalue,\r\n\t\t\tsource = [],\r\n\t\t\thtmlId = 'some-id',\r\n\t\t\tname = '',\r\n\t\t\tdisabled = false,\r\n\t\t\terror = false,\r\n\t\t\thelperText,\r\n\t\t\t// margin = '',\r\n\t\t\tfullWidth = false,\r\n\t\t\tclassName,\r\n\t\t\trequired,\r\n\t\t\tloading,\r\n\t\t\tnoSrcLabel,\r\n\t\t} = this.props\r\n\r\n\t\t// TODO: add native renderer for mobile devices when supported\r\n\t\treturn (\r\n\t\t\t<FormControl\r\n\t\t\t\tclassName={classnames(className, classes.formControl)}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\terror={error}\r\n\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel htmlFor={htmlId} required={required}>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</InputLabel>\r\n\t\t\t\t{!!source.length && !loading ? (\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tvalue={value.id || value}\r\n\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\tinput={<Input name={name} id={htmlId} />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{[...source].map(src => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\tkey={src.value.key || src.value.id || src.value}\r\n\t\t\t\t\t\t\t\t\tvalue={src.value.id || src.value}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{src.label}\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t) : !loading ? (\r\n\t\t\t\t\t<Input disabled value={noSrcLabel} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Input disabled value={t('LOADING_DATA')} />\r\n\t\t\t\t\t\t<InputLoading />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{helperText && <FormHelperText>{helperText}</FormHelperText>}\r\n\t\t\t</FormControl>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nDropdown.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\tonChange: PropTypes.func.isRequired,\r\n\tvalue: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.bool,\r\n\t]),\r\n\tsource: PropTypes.array.isRequired, //([{label: 'some label', value: 'some value'}])\r\n\tdisabled: PropTypes.bool,\r\n\terror: PropTypes.bool,\r\n\thtmlId: PropTypes.string.isRequired,\r\n\tname: PropTypes.string,\r\n\tdisplayEmpty: PropTypes.bool,\r\n\thelperText: PropTypes.string,\r\n}\r\n\r\nexport default withStyles(styles)(Dropdown)\r\n","export const styles = theme => ({\r\n\tformControl: {\r\n\t\t// margin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n\tselectEmpty: {\r\n\t\tmarginTop: theme.spacing(1),\r\n\t},\r\n})\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\t// const iconButtonSize = 48 - (spacing * 2)\r\n\treturn {\r\n\t\tcontrols: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tflexDirection: 'row',\r\n\t\t},\r\n\t\tflexRow: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t},\r\n\t\tflexItem: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\trowButton: {\r\n\t\t\tmarginTop: spacing * 1.5,\r\n\t\t\t// width: iconButtonSize,\r\n\t\t\t// height: iconButtonSize\r\n\t\t},\r\n\t\trwoButtonRoot: {\r\n\t\t\tmargin: spacing / 2,\r\n\t\t},\r\n\t\trow: {\r\n\t\t\tdisplay: 'block',\r\n\t\t},\r\n\t\tbottomControls: {\r\n\t\t\tjustifyContent: 'flex-start',\r\n\t\t},\r\n\t\tlistRoot: {\r\n\t\t\tpaddingBottom: spacing * 1.5,\r\n\t\t\toverflowX: 'auto',\r\n\t\t},\r\n\t\tcontrolsRoot: {\r\n\t\t\tpadding: spacing * 1.5,\r\n\t\t\tpaddingBottom: spacing * 0.5,\r\n\t\t\t// marginBottom: spacing * 2\r\n\t\t},\r\n\t\tpageSize: {\r\n\t\t\twidth: '100px',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\n// import Slider from '@material-ui/core/Slider'\r\nimport classnames from 'classnames'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft'\r\nimport ChevronRight from '@material-ui/icons/ChevronRight'\r\nimport Dropdown from 'components/common/dropdown'\r\n// import Typography from '@material-ui/core/Typography'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nexport const PAGE_SIZES = [\r\n\t{ value: 5, label: 5 },\r\n\t{ value: 10, label: 10 },\r\n\t{ value: 20, label: 20 },\r\n\t{ value: 46, label: 46 },\r\n]\r\n\r\nconst pagination = props => {\r\n\tconst {\r\n\t\tpage,\r\n\t\tpages,\r\n\t\t// pageSize,\r\n\t\tclasses,\r\n\t\tgoToPrevPage,\r\n\t\tgoToNextPage,\r\n\t\tgoToPage,\r\n\t\t// changePageSize,\r\n\t\t// className,\r\n\t\tt,\r\n\t} = props\r\n\treturn (\r\n\t\t<div className={classes.flexRow}>\r\n\t\t\t{pages > 1 && (\r\n\t\t\t\t<div className={classnames(classes.flexItem, classes.flexRow)}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_PAGE')}\r\n\t\t\t\t\t\t\thelperText={t('LIST_CONTROL_LABEL_PAGE_OF', { args: [pages] })}\r\n\t\t\t\t\t\t\tonChange={goToPage}\r\n\t\t\t\t\t\t\tsource={getAllPagedValues(page, pages)}\r\n\t\t\t\t\t\t\tvalue={page + ''}\r\n\t\t\t\t\t\t\thtmlId='page-size-select'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tdisabled={!(page > 0 && pages > page)}\r\n\t\t\t\t\t\tonClick={goToPrevPage}\r\n\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ChevronLeft />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tdisabled={!(page < pages - 1)}\r\n\t\t\t\t\t\tonClick={goToNextPage}\r\n\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ChevronRight />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{/* <div\r\n\t\t\t\tclassName={classnames(classes.flexItem, classes.pageSize)}\r\n\t\t\t>\r\n\t\t\t\t<Typography noWrap id=\"page-size\">{t('LIST_CONTROL_LABEL_PAGE_SIZE')} <strong>{pageSize}</strong> </Typography>\r\n\t\t\t\t<Slider style={{ padding: '22px 0' }} aria-labelledby=\"page-size\" min={5} max={25} step={5} value={pageSize} onChange={changePageSize} />\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport const Pagination = withStyles(styles)(pagination)\r\n\r\nconst getAllPagedValues = (current, max) => {\r\n\t// let pages = {}\r\n\r\n\t// for (var index = 0; index < max; index++) {\r\n\t//     pages[index + ''] = index + 1 + ''\r\n\t// }\r\n\r\n\tlet pages = []\r\n\r\n\tfor (var index = 0; index < max; index++) {\r\n\t\tpages.push({ value: index + '', label: index + 1 + '' })\r\n\t}\r\n\r\n\treturn pages\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport Input from '@material-ui/core/Input'\r\nimport { Pagination } from './Controls'\r\nimport Translate from 'components/translate/Translate'\r\n// import classnames from 'classnasmes'\r\n// import Radio from '@material-ui/core/Radio'\r\n// import RadioGroup from '@material-ui/core/RadioGroup'\r\n// import FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward'\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport classnames from 'classnames'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport { bigNumberify } from 'ethers/utils'\r\n\r\nconst INT_STRING = /^[0-9]+$/\r\nconst PAGE_SIZE = 50\r\n\r\nconst mapFilterProps = ({ filterProps = {}, t }) => {\r\n\treturn Object.keys(filterProps).map(key => {\r\n\t\tconst prop = filterProps[key]\r\n\t\tconst label = prop.label || key\r\n\t\treturn {\r\n\t\t\tlabel: t(label, {\r\n\t\t\t\tisProp: prop.labelIsProp || !prop.label,\r\n\t\t\t\targs: prop.labelArgs || [],\r\n\t\t\t}),\r\n\t\t\tvalue: key,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst mapSortProperties = ({ sortProps = [], t }) => {\r\n\treturn sortProps.map(prop => {\r\n\t\tconst label = prop.label || prop.value\r\n\t\tconst value = (prop.value !== null && prop.value !== undefined\r\n\t\t\t? prop.value\r\n\t\t\t: ''\r\n\t\t).toString()\r\n\r\n\t\treturn {\r\n\t\t\tvalue,\r\n\t\t\tlabel: t(label, { isProp: !prop.label, args: prop.labelArgs || [] }),\r\n\t\t}\r\n\t})\r\n}\r\n\r\nclass ListWithControls extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tconst uiStateId = props.uiStateId\r\n\r\n\t\tconst sortProperties = mapSortProperties({\r\n\t\t\tsortProps: props.sortProperties || [{}],\r\n\t\t\tt: props.t,\r\n\t\t})\r\n\t\t// TODO: update on ComponentWillReceiveProps\r\n\t\tthis.state = {\r\n\t\t\titems: [],\r\n\t\t\tpage: 0, //\r\n\t\t\tsearch: '', //\r\n\t\t\tsortProperties: sortProperties,\r\n\t\t\tfilterProperties: mapFilterProps({\r\n\t\t\t\tfilterProps: props.filterProperties,\r\n\t\t\t\tt: props.t,\r\n\t\t\t}),\r\n\t\t\tfilteredItems: [],\r\n\t\t\tfilterBy: '', //\r\n\t\t\tfilterByValues: [],\r\n\t\t\tfilterByValueFilter: '', //\r\n\t\t\tuiStateId: uiStateId,\r\n\t\t}\r\n\t}\r\n\r\n\tgoToPage(page) {\r\n\t\tthis.setState({ page: parseInt(page, 10) })\r\n\t}\r\n\r\n\thandleChange = (name, value) => {\r\n\t\tlet newStateValue = { [name]: value }\r\n\t\tif (name === 'search') newStateValue.page = 0\r\n\t\tif (name === 'filterBy') {\r\n\t\t\tnewStateValue.filterByValues = [{ label: 'ALL', value: '' }].concat(\r\n\t\t\t\tthis.props.filterProperties[value].values\r\n\t\t\t)\r\n\t\t\tnewStateValue.filterByValueFilter = ''\r\n\t\t}\r\n\t\tthis.setState(newStateValue)\r\n\t}\r\n\r\n\t// For changing redux state\r\n\thandleChangeRxState = (name, value) => {\r\n\t\tthis.props.actions.updateUi(name, value, this.state.uiStateId)\r\n\t}\r\n\r\n\tchangePageSize = (\r\n\t\tname,\r\n\t\t{ itemsLength, page, pages } = {},\r\n\t\tev,\r\n\t\tnewPageSize\r\n\t) => {\r\n\t\t/*\r\n    \tlet currentPageSize = this.props.pageSize\r\n    \tlet currentFirstIndex = page * currentPageSize // To have at least the first item on current page on the next page\r\n\t\tlet nextPage = Math.floor(currentFirstIndex / newPageSize)\r\n\t\t*/\r\n\t\tthis.props.actions.updateUi('pageSize', newPageSize, this.state.uiStateId)\r\n\t}\r\n\r\n\tsearch = ({ item, search, searchMatch }) => {\r\n\t\tconst regex = new RegExp(search, 'i')\r\n\t\tlet matchString = null\r\n\t\tif (typeof searchMatch === 'function') {\r\n\t\t\tmatchString = searchMatch(item)\r\n\t\t} else if (typeof searchMatch === 'string' && !!searchMatch) {\r\n\t\t\tmatchString = searchMatch\r\n\t\t} else {\r\n\t\t\tmatchString = (item.title || '') + (item.description || '')\r\n\t\t}\r\n\r\n\t\tconst match = regex.exec(matchString)\r\n\t\treturn !!match\r\n\t}\r\n\r\n\tfilterItems = ({\r\n\t\titems,\r\n\t\tsearch,\r\n\t\tsortProperty,\r\n\t\tsortOrder,\r\n\t\tpage,\r\n\t\tpageSize,\r\n\t\tsearchMatch,\r\n\t\tfilterBy,\r\n\t\tfilterArchived,\r\n\t}) => {\r\n\t\t// TODO: optimize filter\r\n\t\t// TODO: maybe filter deleted before this?\r\n\t\tlet filtered = (items || []).filter(i => {\r\n\t\t\tconst isItem = !!i && (i.id || i.ipfs)\r\n\t\t\tif (!isItem) return isItem\r\n\r\n\t\t\tif (\r\n\t\t\t\tfilterArchived !== '' &&\r\n\t\t\t\ti.archived !== undefined &&\r\n\t\t\t\tfilterArchived.toString() !== i.archived.toString()\r\n\t\t\t) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\tif (filterBy && filterBy.key && filterBy.value) {\r\n\t\t\t\tlet itemValue =\r\n\t\t\t\t\tfilterBy.key.split('.').reduce((o, p) => (o ? o[p] : 'noprop'), i) ||\r\n\t\t\t\t\t''\r\n\r\n\t\t\t\tlet passFilter = itemValue.toString() === filterBy.value.toString()\r\n\r\n\t\t\t\tif (!passFilter) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet hasSearch = !!search\r\n\t\t\tif (!hasSearch) return isItem\r\n\r\n\t\t\treturn this.search({ item: i, search, searchMatch })\r\n\t\t})\r\n\r\n\t\tif (sortProperty) {\r\n\t\t\tfiltered = filtered.sort((a, b) => {\r\n\t\t\t\tlet propA = a[sortProperty]\r\n\t\t\t\tlet propB = b[sortProperty]\r\n\r\n\t\t\t\tif (INT_STRING.test(propA) && INT_STRING.test(propB)) {\r\n\t\t\t\t\tpropA = bigNumberify(propA)\r\n\t\t\t\t\tpropB = bigNumberify(propB)\r\n\t\t\t\t\treturn (propA.lt(propB) ? -1 : propA.gt(propB) ? 1 : 0) * sortOrder\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (propA < propB ? -1 : propA > propB ? 1 : 0) * sortOrder\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tlet filteredLength = filtered.length\r\n\r\n\t\tlet maxPages = Math.ceil(filteredLength / pageSize)\r\n\r\n\t\tlet paged = filtered.slice(page * pageSize, page * pageSize + pageSize)\r\n\r\n\t\treturn {\r\n\t\t\titems: paged,\r\n\t\t\tpage: page,\r\n\t\t\tpages: maxPages,\r\n\t\t\titemsLength: filteredLength,\r\n\t\t\tpageSize: pageSize,\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet data = this.filterItems({\r\n\t\t\titems: this.props.items,\r\n\t\t\tsearch: this.state.search,\r\n\t\t\tsortProperty:\r\n\t\t\t\tthis.props.sortProperty || this.state.sortProperties[0].value,\r\n\t\t\tsortOrder: this.props.sortOrder || -1,\r\n\t\t\tpage: this.state.page,\r\n\t\t\tpageSize: PAGE_SIZE, // this.props.pageSize || 10,\r\n\t\t\tsearchMatch: this.props.searchMatch,\r\n\t\t\tfilterBy: {\r\n\t\t\t\tkey: this.state.filterBy,\r\n\t\t\t\tvalue: this.state.filterByValueFilter,\r\n\t\t\t},\r\n\t\t\tfilterArchived: this.props.filterArchived || 'false',\r\n\t\t})\r\n\r\n\t\tlet items = data.items\r\n\t\tlet renderItems\r\n\r\n\t\trenderItems = this.props.renderRows\r\n\r\n\t\tconst { t, classes } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Paper>\r\n\t\t\t\t<div className={classes.controlsRoot}>\r\n\t\t\t\t\t<div className={classes.controls}>\r\n\t\t\t\t\t\t<FormControl className={classnames(classes.flexItem)}>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor='search'>\r\n\t\t\t\t\t\t\t\t{t('LIST_CONTROL_LABEL_SEARCH')}\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tname='search'\r\n\t\t\t\t\t\t\t\tid='search'\r\n\t\t\t\t\t\t\t\tvalue={this.state.search}\r\n\t\t\t\t\t\t\t\tonChange={ev => this.handleChange('search', ev.target.value)}\r\n\t\t\t\t\t\t\t\tstartAdornment={\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position='start'>\r\n\t\t\t\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<div className={classnames(classes.flexRow, classes.flexItem)}>\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_SORT')}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChangeRxState.bind(this, 'sortProperty')}\r\n\t\t\t\t\t\t\t\tsource={this.state.sortProperties}\r\n\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\tthis.props.sortProperty || this.state.sortProperties[0].value\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thtmlId='sort-by-prop'\r\n\t\t\t\t\t\t\t\tname='sortProperty'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tcolor={this.props.sortOrder === 1 ? 'primary' : 'default'}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleChangeRxState.bind(this, 'sortOrder', 1)}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ArrowUpwardIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tcolor={this.props.sortOrder === -1 ? 'primary' : 'default'}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleChangeRxState.bind(this, 'sortOrder', -1)}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ArrowDownwardIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* {this.props.filterProperties &&\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={classnames(classes.flexRow)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.flexItem)}\r\n\t\t\t\t\t\t\t\t\tauto\r\n\t\t\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_FILTER_BY')}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this, 'filterBy')}\r\n\t\t\t\t\t\t\t\t\tsource={this.state.filterProperties}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.filterBy !== null ? this.state.filterBy.toString() : ''}\r\n\t\t\t\t\t\t\t\t\thtmlId='filter-by-prop-dd'\r\n\t\t\t\t\t\t\t\t\tname='filterBy'\r\n\t\t\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.flexItem)}\r\n\t\t\t\t\t\t\t\t\tauto\r\n\t\t\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_FILTER_BY_VALUE')}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this, 'filterByValueFilter')}\r\n\t\t\t\t\t\t\t\t\tsource={mapSortProperties({ sortProps: this.state.filterByValues, t: this.props.t })}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.filterByValueFilter !== null ? this.state.filterByValueFilter.toString() : ''}\r\n\t\t\t\t\t\t\t\t\thtmlId='filter-by-value-dd'\r\n\t\t\t\t\t\t\t\t\tname='filterByValueFilter'\r\n\t\t\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\t\t\tdisabled={!this.state.filterBy}\r\n\t\t\t\t\t\t\t\t\thelperText={t('HELPER_TXT_FILTER_BY_VALUE')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t} */}\r\n\r\n\t\t\t\t\t\t{/* {this.props.archive &&\r\n\t\t\t\t\t\t\t<RadioGroup\r\n\t\t\t\t\t\t\t\tname='archived'\r\n\t\t\t\t\t\t\t\tvalue={typeof this.props.filterArchived === 'string' ? this.props.filterArchived.toString() : 'false'}\r\n\t\t\t\t\t\t\t\tonChange={(ev) => this.handleChangeRxState('filterArchived', ev.target.value)}\r\n\t\t\t\t\t\t\t\tclassName={classnames(classes.flexRow, classes.flexItem)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FormControlLabel value='false' control={<Radio color='primary' />} label={t('LABEL_ACTIVE')} />\r\n\t\t\t\t\t\t\t\t<FormControlLabel value='true' control={<Radio color='primary' />} label={t('LABEL_ARCHIVED')} />\r\n\t\t\t\t\t\t\t\t<FormControlLabel value='' control={<Radio color='primary' />} label={t('LABEL_ALL')} />\r\n\t\t\t\t\t\t\t</RadioGroup>\r\n\t\t\t\t\t\t} */}\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classnames(classes.controls, classes.bottomControls)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\tpage={data.page}\r\n\t\t\t\t\t\t\t\tpages={data.pages}\r\n\t\t\t\t\t\t\t\tpageSize={PAGE_SIZE || this.props.pageSize || 10}\r\n\t\t\t\t\t\t\t\titemsLength={data.itemsLength}\r\n\t\t\t\t\t\t\t\tgoToPage={this.goToPage.bind(this)}\r\n\t\t\t\t\t\t\t\tgoToLastPage={this.goToPage.bind(this, data.pages - 1)}\r\n\t\t\t\t\t\t\t\tgoToNextPage={this.goToPage.bind(this, data.page + 1)}\r\n\t\t\t\t\t\t\t\tgoToFirstPage={this.goToPage.bind(this, 0)}\r\n\t\t\t\t\t\t\t\tgoToPrevPage={this.goToPage.bind(this, data.page - 1)}\r\n\t\t\t\t\t\t\t\tchangePageSize={this.changePageSize.bind(this, 'pageSize', {\r\n\t\t\t\t\t\t\t\t\tpage: data.page,\r\n\t\t\t\t\t\t\t\t\tpages: data.pages,\r\n\t\t\t\t\t\t\t\t\titemsLength: data.itemsLength,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Divider />\r\n\t\t\t\t<div className={classnames(classes.listRoot)}>{renderItems(items)}</div>\r\n\t\t\t</Paper>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nListWithControls.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\trowsView: PropTypes.bool.isRequired,\r\n\titemRenderer: PropTypes.func,\r\n\tside: PropTypes.string.isRequired,\r\n\tobjModel: PropTypes.func,\r\n\tsortProperties: PropTypes.array.isRequired,\r\n\tfilterProperties: PropTypes.object,\r\n\tuiStateId: PropTypes.string.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst persist = state.persist\r\n\tconst memory = state.memory\r\n\r\n\t// TODO: A little hacky, maybe find a better way\r\n\t// Gets the last path in URL. ex: https://localhost:3000/dashboard/publisher/slots -> slots\r\n\tconst uiStateId = props.uiStateId || 'default'\r\n\treturn {\r\n\t\trowsView: !!persist.ui[props.viewModeId],\r\n\t\tpageSize: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['pageSize'] || 10\r\n\t\t\t: 10,\r\n\t\tsortProperty: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['sortProperty']\r\n\t\t\t: null,\r\n\t\tsortOrder: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['sortOrder'] || -1\r\n\t\t\t: -1,\r\n\t\tfilterArchived: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['filterArchived'] || false\r\n\t\t\t: false,\r\n\t\tside: memory.nav.side,\r\n\t\tsortProperties: props.sortProperties || [],\r\n\t\tfilterProperties: props.filterProperties,\r\n\t\tuiStateId: uiStateId,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(ListWithControls)))\r\n","import React, { Component } from 'react'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\n\r\nclass Rows extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tthis.state = {\r\n\t\t\t// TODO: maybe in the store?\r\n\t\t\tselected: [],\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\t// Reset selected\r\n\t\t// TODO: make better check because this will always  return true\r\n\t\tif (nextProps.rows !== this.props.rows) {\r\n\t\t\tthis.setState({ selected: [] })\r\n\t\t}\r\n\t}\r\n\r\n\thandleRowSelect = selected => {\r\n\t\tlet newSelected = selected.map(index => this.props.rows[index].id)\r\n\t\tthis.setState({ selected: newSelected })\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { side, rows, padding, itemType, size } = this.props\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table size={size || 'small'} padding={padding || 'default'}>\r\n\t\t\t\t\t{this.props.tableHeadRenderer({ selected: this.state.selected })}\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.map((u, i) => {\r\n\t\t\t\t\t\t\tlet to = `/dashboard/${side}/${itemType}/${u.id || u.ipfs}`\r\n\t\t\t\t\t\t\tlet selected = this.state.selected.indexOf(u.id) !== -1\r\n\t\t\t\t\t\t\treturn this.props.rowRenderer(u, i, { to, selected, itemType })\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Rows\r\n","import React, { useEffect, useState, useCallback } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { useSelector } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport StepperMUI from '@material-ui/core/Stepper'\r\nimport MobileStepper from '@material-ui/core/MobileStepper'\r\nimport Step from '@material-ui/core/Step'\r\nimport StepLabel from '@material-ui/core/StepLabel'\r\nimport Button from '@material-ui/core/Button'\r\nimport { styles } from './styles'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Box from '@material-ui/core/Box'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport ErrorIcon from '@material-ui/icons/Error'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport { t, selectValidationsById, selectSpinnerById } from 'selectors'\r\n\r\nconst getDirtyValidationErrors = (validations = {}) => {\r\n\tconst errors = Object.keys(validations).reduce((dirtyErrs, key) => {\r\n\t\tconst err = validations[key]\r\n\t\tif (err.dirty) {\r\n\t\t\tdirtyErrs.push({ msg: err.errMsg, field: t(key, { isProp: true }) })\r\n\t\t}\r\n\t\treturn dirtyErrs\r\n\t}, [])\r\n\r\n\treturn errors\r\n}\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\n// const MyStep = ({ page, active, index, children, theme, canAdvance, canFinish, canReverse, setPageIndex, canAdvanceToPage, currentPage, goToPage, ...other }) => {}\r\nconst StepperNav = ({ pages, currentPage, classes, ...other }) => {\r\n\tif (window.innerWidth <= 768) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<StepLabel className={classes.mobileStepLabel}>\r\n\t\t\t\t\t({currentPage + 1}/{pages.length}) {pages[currentPage].title}\r\n\t\t\t\t</StepLabel>\r\n\t\t\t\t<MobileStepper\r\n\t\t\t\t\tactiveStep={currentPage}\r\n\t\t\t\t\tsteps={pages.length}\r\n\t\t\t\t\tposition={'static'}\r\n\t\t\t\t\tvariant='progress'\r\n\t\t\t\t\tclassName={classes.mobileStepper}\r\n\t\t\t\t></MobileStepper>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<StepperMUI alternativeLabel activeStep={currentPage}>\r\n\t\t\t{pages.map((page, i) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Step key={page.title}>\r\n\t\t\t\t\t\t<StepLabel>{page.title}</StepLabel>\r\n\t\t\t\t\t</Step>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</StepperMUI>\r\n\t)\r\n}\r\n\r\nconst MaterialStepper = props => {\r\n\tconst {\r\n\t\tpages = [],\r\n\t\t// ...props\r\n\t} = props\r\n\tconst classes = useStyles()\r\n\r\n\tconst [currentPage, setCurrentPage] = useState(0)\r\n\tconst canReverse = pages.length > currentPage && currentPage > 0\r\n\r\n\tconst page = pages[currentPage] || {}\r\n\tconst pageProps = page.props || {}\r\n\tconst { validateId } = pageProps\r\n\tconst Comp = page.component || null\r\n\tconst pageValidation = page.pageValidation || null\r\n\r\n\tconst validations = useSelector(state =>\r\n\t\tselectValidationsById(state, validateId)\r\n\t)\r\n\r\n\tconst dirtyErrors = getDirtyValidationErrors(validations)\r\n\r\n\tconst spinner = useSelector(state => selectSpinnerById(state, validateId))\r\n\r\n\tconst isValidPage = useCallback(() => {\r\n\t\treturn !Object.keys(validations || {}).length\r\n\t}, [validations])\r\n\r\n\t// const canAdvance = isValidPage() && !page.completeBtn\r\n\r\n\tconst goToPage = useCallback(\r\n\t\tasync nextStep => {\r\n\t\t\tconst canAdvance = nextStep > currentPage\r\n\t\t\tconst canGoBack = nextStep < currentPage\r\n\r\n\t\t\tif (canAdvance || canGoBack) {\r\n\t\t\t\tsetCurrentPage(nextStep)\r\n\t\t\t}\r\n\t\t},\r\n\t\t[currentPage]\r\n\t)\r\n\r\n\tconst goToPreviousPage = useCallback(async () => {\r\n\t\tif (canReverse) {\r\n\t\t\tgoToPage(currentPage - 1)\r\n\t\t}\r\n\t}, [canReverse, currentPage, goToPage])\r\n\r\n\tconst goToNextPage = useCallback(async () => {\r\n\t\tif (pageValidation) {\r\n\t\t\tpageValidation({\r\n\t\t\t\tvalidateId,\r\n\t\t\t\tdirty: true,\r\n\t\t\t\tonValid: () => goToPage(currentPage + 1),\r\n\t\t\t})\r\n\t\t} else if (isValidPage()) {\r\n\t\t\tgoToPage(currentPage + 1)\r\n\t\t}\r\n\t}, [currentPage, goToPage, isValidPage, pageValidation, validateId])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (pageValidation) {\r\n\t\t\tpageValidation({ validateId, dirty: false })\r\n\t\t}\r\n\t}, [currentPage, pageValidation, validateId])\r\n\r\n\tconst onKeyPressed = useCallback(\r\n\t\tasync ev => {\r\n\t\t\tif (ev.key === 'Enter') {\r\n\t\t\t\tev.preventDefault()\r\n\t\t\t\tgoToNextPage()\r\n\t\t\t}\r\n\t\t},\r\n\t\t[goToNextPage]\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div className={classes.stepperWrapper} onKeyPress={onKeyPressed}>\r\n\t\t\t<Paper\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\troot: classes.stepperNav,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<StepperNav\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tpages={pages}\r\n\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\tgoToPage={goToPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t<br />\r\n\r\n\t\t\t<Paper\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\troot: classes.pagePaper,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className={classes.pageContent}>\r\n\t\t\t\t\t{!!Comp && (\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Comp {...pageProps} />{' '}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{!!dirtyErrors && (\r\n\t\t\t\t\t\t<Box color='error.main'>\r\n\t\t\t\t\t\t\t{dirtyErrors.map(err => (\r\n\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\tkey={err.field}\r\n\t\t\t\t\t\t\t\t\tclasses={{ root: classes.errChip }}\r\n\t\t\t\t\t\t\t\t\ticon={<ErrorIcon />}\r\n\t\t\t\t\t\t\t\t\tvariant='outlined'\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\tlabel={`${err.field}: ${err.msg}`}\r\n\t\t\t\t\t\t\t\t\tcolor='default'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={classes.controls}>\r\n\t\t\t\t\t<div className={classes.left}>\r\n\t\t\t\t\t\t{canReverse && !(page.disableBtnsIfValid && isValidPage()) ? (\r\n\t\t\t\t\t\t\t<Button onClick={goToPreviousPage}>{t('BACK')}</Button>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className={classes.right}>\r\n\t\t\t\t\t\t{/* <Button label='Cancel' onClick={this.cancel}/> */}\r\n\t\t\t\t\t\t{page.cancelBtn && !(page.disableBtnsIfValid && isValidPage()) ? (\r\n\t\t\t\t\t\t\t<page.cancelBtn />\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t{typeof page.cancelFunction === 'function' &&\r\n\t\t\t\t\t\t!(page.disableBtnsIfValid && isValidPage()) ? (\r\n\t\t\t\t\t\t\t<Button onClick={page.cancelFunction}>{t('CANCEL')}</Button>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t{/* {ValidationBtn && <ValidationBtn {...page.props} />} */}\r\n\r\n\t\t\t\t\t\t{!page.completeBtn || !!pageValidation ? (\r\n\t\t\t\t\t\t\t<span className={classes.buttonProgressWrapper}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tdisabled={spinner || (!isValidPage() && !pageValidation)}\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\tonClick={goToNextPage}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('CONTINUE')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t{spinner && (\r\n\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t{page.completeBtn && !pageValidation && isValidPage() ? (\r\n\t\t\t\t\t\t\t<page.completeBtn />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nMaterialStepper.propTypes = {\r\n\tpages: PropTypes.array.isRequired,\r\n}\r\n\r\nexport default MaterialStepper\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\tconst errColor = theme.palette.error.main\r\n\treturn {\r\n\t\troot: {\r\n\t\t\tcolor: 'purple',\r\n\t\t\t'&$active': {\r\n\t\t\t\tcolor: 'green',\r\n\t\t\t},\r\n\t\t},\r\n\t\tactive: {\r\n\t\t\tcolor: 'yellow',\r\n\t\t},\r\n\t\tstepperWrapper: {\r\n\t\t\t// display: 'flex',\r\n\t\t\tposition: 'absolute',\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\ttop: 0,\r\n\t\t},\r\n\t\tpagePaper: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\ttop: 115,\r\n\t\t},\r\n\t\tpageContent: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 20,\r\n\t\t\tleft: 20,\r\n\t\t\tright: 20,\r\n\t\t\tbottom: 50,\r\n\t\t\tpadding: 20,\r\n\t\t\toverflowY: 'auto',\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflex: 1,\r\n\t\t\tjustifyContent: 'space-between',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tWebkitOverflowScrolling: 'touch',\r\n\t\t\t'@media(max-width:500px)': {\r\n\t\t\t\tpaddingLeft: 0,\r\n\t\t\t\tpaddingRight: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\tcontrols: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tbottom: 5,\r\n\t\t\tleft: 20,\r\n\t\t\tright: 20,\r\n\t\t},\r\n\t\tright: {\r\n\t\t\ttextAlign: 'right',\r\n\t\t\tdisplay: 'inline-block',\r\n\t\t\twidth: '50%',\r\n\t\t\t'@media(max-width:475px)': {\r\n\t\t\t\twidth: '86%',\r\n\t\t\t},\r\n\t\t},\r\n\t\tleft: {\r\n\t\t\tdisplay: 'inline-block',\r\n\t\t\ttextAlign: 'left',\r\n\t\t\twidth: '50%',\r\n\t\t\t'@media(max-width:475px)': {\r\n\t\t\t\twidth: '14%',\r\n\t\t\t},\r\n\t\t},\r\n\t\tmobileStepper: {\r\n\t\t\twidth: '100%',\r\n\t\t\t'& div': {\r\n\t\t\t\twidth: '100%',\r\n\t\t\t\theight: '10px',\r\n\t\t\t},\r\n\t\t},\r\n\t\tmobileStepLabel: {\r\n\t\t\t'& span': {\r\n\t\t\t\tfontSize: '24px',\r\n\t\t\t\tmargin: '14px auto',\r\n\t\t\t},\r\n\t\t\ttextAlign: 'center',\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t\tbuttonProgressWrapper: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tbuttonProgress: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: '50%',\r\n\t\t\tleft: '50%',\r\n\t\t\tmarginTop: -12,\r\n\t\t\tmarginLeft: -12,\r\n\t\t},\r\n\t\terrChip: {\r\n\t\t\tcolor: errColor,\r\n\t\t\tborderColor: errColor,\r\n\t\t\t'& svg': {\r\n\t\t\t\tcolor: errColor,\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n// import { connect } from 'react-redux'\r\n// import { bindActionCreators } from 'redux'\r\n// import actions from 'actions'\r\nimport MaterialStepper from 'components/common/stepper/MaterialUiStepper'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nclass FormSteps extends Component {\r\n\tshouldComponentUpdate(nextProps) {\r\n\t\treturn JSON.stringify(this.props) !== JSON.stringify(nextProps)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pages = []\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tSaveBtn,\r\n\t\t\tCancelBtn,\r\n\t\t\tonSave,\r\n\t\t\tstepsId,\r\n\t\t\tstepsPages,\r\n\t\t\tstepsPreviewPage,\r\n\t\t\tvalidateIdBase,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\t\tconst cancelButton = () => (\r\n\t\t\t<CancelBtn {...rest} stepsId={stepsId} onSave={onSave} t={t} />\r\n\t\t)\r\n\t\tconst validateId = (validateIdBase || '') + '-' + stepsId\r\n\r\n\t\tstepsPages.forEach((page, index) => {\r\n\t\t\tpages.push({\r\n\t\t\t\ttitle: t(page.title),\r\n\t\t\t\tcancelBtn: cancelButton,\r\n\t\t\t\tcomponent: ValidItemHoc(page.page || page),\r\n\t\t\t\tprops: { ...this.props, stepsId, validateId: validateId + '-' + index },\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tpages.push({\r\n\t\t\ttitle: t(stepsPreviewPage.title || 'PREVIEW'),\r\n\t\t\tcompleteBtn: () => (\r\n\t\t\t\t<SaveBtn {...rest} stepsId={stepsId} onSave={onSave} t={t} />\r\n\t\t\t),\r\n\t\t\tcancelBtn: cancelButton,\r\n\t\t\tcomponent: ValidItemHoc(stepsPreviewPage.page || stepsPreviewPage),\r\n\t\t\tprops: {\r\n\t\t\t\t...this.props,\r\n\t\t\t\tvalidateId: validateId + '-' + stepsPages.length,\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t// <div style={{ textAlign: 'left' }}>\r\n\t\t\t<MaterialStepper pages={pages} />\r\n\t\t\t// </div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nFormSteps.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\titemPages: PropTypes.arrayOf(PropTypes.func),\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsPages: PropTypes.arrayOf(PropTypes.object),\r\n}\r\n\r\nexport default Translate(FormSteps)\r\n","import grey from '@material-ui/core/colors/grey'\r\n\r\nexport const styles = theme => {\r\n\tconst spacing = theme.spacing(3)\r\n\tconst fullHeight = Math.max(window.innerHeight - spacing, 400)\r\n\treturn {\r\n\t\tdialog: {\r\n\t\t\tminHeight: `${fullHeight}px`,\r\n\t\t\tminWidth: 1024,\r\n\t\t\tmaxWidth: 1080,\r\n\t\t\tbackgroundColor: grey[200], // TODO: color,\r\n\t\t\t// maxHeight: `${fullHeight}`,\r\n\t\t\t'@media(max-width:1080px)': {\r\n\t\t\t\tmaxWidth: '100%',\r\n\t\t\t\tminWidth: `calc(100vw - ${theme.spacing(2)}px)`,\r\n\t\t\t},\r\n\t\t\t'@media(max-height:823px)': {\r\n\t\t\t\tminHeight: `calc(${fullHeight} - ${theme.spacing(2)}px)`,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdialogTitle: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'space-between',\r\n\t\t\twordWrap: 'break-word',\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1 auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tpadding: 0,\r\n\t\t\tmargin: `0 ${spacing}px ${spacing}px ${spacing}px`,\r\n\t\t\t'&:first-child': {\r\n\t\t\t\tpaddingTop: spacing,\r\n\t\t\t},\r\n\t\t\toverflow: 'visible',\r\n\t\t\toverflowY: 'auto',\r\n\t\t},\r\n\t\tcontentBox: {\r\n\t\t\t// position: 'absolute',\r\n\t\t\t// top: 0,\r\n\t\t\t// left: 0,\r\n\t\t\t// bottom: 0,\r\n\t\t\t// right: 0,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t},\r\n\t\tpropRow: {\r\n\t\t\tmargin: '10px 0',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\tcontentBody: {\r\n\t\t\tflexGrow: 1,\r\n\t\t},\r\n\t\tcontentTopLoadingCircular: {\r\n\t\t\tflexShrink: 0,\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t\tcontentTopLoading: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tjustifyContent: 'center',\r\n\t\t\talignItems: 'center',\r\n\t\t\t'& > div': {\r\n\t\t\t\tpadding: theme.spacing(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\ttextBtn: {\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t\tbtnIconLeft: {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t\tleftCol: {\r\n\t\t\ttextTransform: 'uppercase',\r\n\t\t\t// color: var(--color-adex-neutral-contrast-lighter);\r\n\t\t\ttextAlign: 'right',\r\n\t\t\t[theme.breakpoints.down('sm')]: {\r\n\t\t\t\ttextAlign: 'left',\r\n\t\t\t},\r\n\t\t},\r\n\t\trightCol: {\r\n\t\t\ttextAlign: 'left',\r\n\t\t},\r\n\t\tprogressCircleCenter: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: 'calc(50% - 30px)',\r\n\t\t\ttop: 'calc(50% - 30px)',\r\n\t\t},\r\n\t\tfloating: {\r\n\t\t\tposition: 'fixed',\r\n\t\t\ttop: 86,\r\n\t\t\tright: 40,\r\n\t\t\tzIndex: theme.zIndex.appBar,\r\n\t\t},\r\n\t\tbreakLong: {\r\n\t\t\twordBreak: 'break-word',\r\n\t\t\toverflowWrap: 'break-word',\r\n\t\t\thyphens: 'auto',\r\n\t\t},\r\n\t\tdemoImg: {\r\n\t\t\ttop: 'auto',\r\n\t\t\tleft: 'auto',\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\twidth: '100px',\r\n\t\t\theight: 'auto',\r\n\t\t\tposition: 'absolute',\r\n\t\t},\r\n\t\tdemoBody: {\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tcontentStickyTop: {\r\n\t\t\tmarginBottom: '2rem',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Fragment, useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Button from '@material-ui/core/Button'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport classnames from 'classnames'\r\nimport Slide from '@material-ui/core/Slide'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { t } from 'selectors'\r\n\r\nconst textBtn = ({ label, className, classes, style, onClick, ...rest }) => {\r\n\treturn (\r\n\t\t<span\r\n\t\t\tclassName={classnames(classes.textBtn, className)}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t{' '}\r\n\t\t\t{label}{' '}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nconst TextBtn = withStyles(styles)(textBtn)\r\n\r\nconst Transition = props => {\r\n\treturn <Slide direction='up' {...props} />\r\n}\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport default function ItemHoc(Decorated) {\r\n\tfunction WithDialog(props) {\r\n\t\tconst {\r\n\t\t\ticonButton,\r\n\t\t\ttextButton,\r\n\t\t\tfabButton,\r\n\t\t\tvariant,\r\n\t\t\tfabVariant,\r\n\t\t\tcolor,\r\n\t\t\tsize,\r\n\t\t\tmini,\r\n\t\t\tbtnLabelArgs,\r\n\t\t\tbtnLabel,\r\n\t\t\tdisabled,\r\n\t\t\tclassName,\r\n\t\t\ticon,\r\n\t\t\ttitle,\r\n\t\t\tdialogActions,\r\n\t\t\tonClick,\r\n\t\t\tfullWidth,\r\n\t\t\t...rest\r\n\t\t} = props\r\n\r\n\t\tconst btnProps = {\r\n\t\t\tcolor,\r\n\t\t\tsize,\r\n\t\t\tmini,\r\n\t\t\tvariant,\r\n\t\t\tfullWidth,\r\n\t\t}\r\n\r\n\t\tconst classes = useStyles()\r\n\t\tconst [open, setOpen] = useState(false)\r\n\r\n\t\tconst handleToggle = async () => {\r\n\t\t\tconst { onBeforeOpen } = props\r\n\t\t\tif (typeof onBeforeOpen === 'function' && !open) {\r\n\t\t\t\tawait onBeforeOpen()\r\n\t\t\t}\r\n\r\n\t\t\tsetOpen(!open)\r\n\t\t}\r\n\r\n\t\tconst closeDialog = () => {\r\n\t\t\tsetOpen(false)\r\n\t\t}\r\n\r\n\t\tlet ButtonComponent = Button\r\n\r\n\t\tif (iconButton) {\r\n\t\t\tButtonComponent = IconButton\r\n\t\t} else if (textButton) {\r\n\t\t\tButtonComponent = TextBtn\r\n\t\t} else if (fabButton) {\r\n\t\t\tButtonComponent = Fab\r\n\t\t}\r\n\r\n\t\tconst btnLabelTranslated = t(btnLabel, { args: btnLabelArgs || [''] })\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<ButtonComponent\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\taria-label={btnLabelTranslated}\r\n\t\t\t\t\tlabel={btnLabelTranslated}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thandleToggle()\r\n\t\t\t\t\t\tif (onClick) onClick()\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t{...btnProps}\r\n\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t{ [classes.floating]: !!fabButton },\r\n\t\t\t\t\t\t{ [classes.first]: color === 'first' },\r\n\t\t\t\t\t\t{ [classes.second]: color === 'second' }\r\n\t\t\t\t\t)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t\t{!iconButton && btnLabelTranslated}\r\n\t\t\t\t</ButtonComponent>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\t// disableBackdropClick\r\n\t\t\t\t\t// disableEscapeKeyDown\r\n\t\t\t\t\t// maxWidth=\"xs\"\r\n\t\t\t\t\t// fullScreen\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tonClose={handleToggle}\r\n\t\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t\t\tclasses={{ paper: classes.dialog }}\r\n\t\t\t\t\t// onEscKeyDown={handleToggle}\r\n\t\t\t\t\t// onOverlayClick={handleToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle disableTypography>\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tvariant='subtitle1'\r\n\t\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\t\troot: classnames(classes.dialogTitle, classes.breakLong),\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(title)}\r\n\t\t\t\t\t\t\t<IconButton onClick={handleToggle}>\r\n\t\t\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</DialogTitle>\r\n\t\t\t\t\t<DialogContent classes={{ root: classes.content }}>\r\n\t\t\t\t\t\t<Decorated {...rest} closeDialog={closeDialog} />\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t{dialogActions && <DialogActions>{dialogActions}</DialogActions>}\r\n\t\t\t\t</Dialog>\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n\r\n\tWithDialog.propTypes = {\r\n\t\tbtnLabel: PropTypes.string.isRequired,\r\n\t\ttitle: PropTypes.string.isRequired,\r\n\t\tfloating: PropTypes.bool,\r\n\t\tonBeforeOpen: PropTypes.func,\r\n\t}\r\n\r\n\treturn WithDialog\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { AdUnit } from 'adex-models'\r\n\r\nexport default function NewAdUnitHoc(Decorated) {\r\n\tclass ItemForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tactive: false,\r\n\t\t\t\tsaved: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value, newValues) => {\r\n\t\t\tthis.props.actions.updateNewItem(\r\n\t\t\t\tthis.props.newItem,\r\n\t\t\t\tnewValues || { [prop]: value },\r\n\t\t\t\t'AdUnit',\r\n\t\t\t\tAdUnit\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tonSave = () => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsave = () => {\r\n\t\t\tconst { actions, newItem } = this.props\r\n\t\t\tactions.addUnit(newItem)\r\n\r\n\t\t\tthis.onSave()\r\n\t\t\tactions.resetNewItem('AdUnit')\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tthis.onSave()\r\n\t\t\tthis.props.actions.resetNewItem('AdUnit')\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { classes, ...rest } = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItemForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tnewItem: PropTypes.object.isRequired,\r\n\t\ttitle: PropTypes.string,\r\n\t\taddTo: PropTypes.object,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { memory } = state\r\n\t\treturn {\r\n\t\t\tnewItem: new AdUnit(memory.newItem['AdUnit']),\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(ItemForm)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { constants, schemas, Joi } from 'adex-models'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport { addUrlUtmTracking } from 'helpers/utmHelpers'\r\n\r\nconst { adUnitPost } = schemas\r\n\r\nconst AdTypes = constants.AdUnitsTypes.map(type => {\r\n\treturn {\r\n\t\tvalue: type,\r\n\t\tlabel: type.split('_')[1],\r\n\t}\r\n})\r\n\r\nclass AdUnitBasic extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tconst { newItem } = props\r\n\t\tthis.validateTitle(newItem.title, false)\r\n\t\tthis.validateDescription(newItem.description, false)\r\n\t\tthis.validateTargetUrl(newItem.targetUrl, false)\r\n\t\tthis.validateAndUpdateType(false, newItem.type)\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (\r\n\t\t\tprevProps.newItem.title !== this.props.newItem.title ||\r\n\t\t\tprevProps.newItem.type !== this.props.newItem.type ||\r\n\t\t\tprevProps.newItem.temp.addUtmLink !== this.props.newItem.temp.addUtmLink\r\n\t\t) {\r\n\t\t\tthis.addUtmParameters()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateTitle(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adUnitPost.title)\r\n\r\n\t\tthis.props.validate('title', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateDescription(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adUnitPost.description)\r\n\r\n\t\tthis.props.validate('description', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateTargetUrl(targetUrl, dirty) {\r\n\t\tconst result = Joi.validate(targetUrl, adUnitPost.targetUrl)\r\n\t\tthis.props.validate('targetUrl', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t\tif (!result.error) this.addUtmParameters(targetUrl)\r\n\t}\r\n\r\n\tvalidateAndUpdateType = (dirty, value) => {\r\n\t\tconst result = Joi.validate(value, adUnitPost.type)\r\n\t\tthis.props.handleChange('type', value)\r\n\t\tthis.props.validate('type', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\taddUtmParameters() {\r\n\t\tconst { handleChange, newItem } = this.props\r\n\t\tconst { targetUrl, title, type, temp } = newItem\r\n\t\tconst { addUtmLink } = temp\r\n\t\tif (!!targetUrl) {\r\n\t\t\tconst newTargetUrl = addUrlUtmTracking({\r\n\t\t\t\ttargetUrl,\r\n\t\t\t\tcampaign: title,\r\n\t\t\t\tcontent: type,\r\n\t\t\t\tremoveFromUrl: !addUtmLink,\r\n\t\t\t})\r\n\t\t\thandleChange('targetUrl', newTargetUrl)\r\n\t\t}\r\n\t}\r\n\r\n\thandleChangeAddUtmLink(ev) {\r\n\t\tconst { temp } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\t\t// Need this to keep the state if user get back\r\n\t\tnewTemp.addUtmLink = ev.target.checked\r\n\t\tthis.props.handleChange('temp', newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, newItem, invalidFields, handleChange } = this.props\r\n\t\tconst { targetUrl, type, title, description, temp } = newItem\r\n\t\tconst { addUtmLink } = temp\r\n\t\tconst errTitle = invalidFields['title']\r\n\t\tconst errDescription = invalidFields['description']\r\n\t\tconst errTargetUrl = invalidFields['targetUrl']\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('title', { isProp: true })}\r\n\t\t\t\t\t\t\tname='name'\r\n\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('title', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateTitle(title, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateTitle(title, false)}\r\n\t\t\t\t\t\t\terror={errTitle && !!errTitle.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTitle && !!errTitle.dirty\r\n\t\t\t\t\t\t\t\t\t? errTitle.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('TITLE_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tlabel={t('description', { isProp: true })}\r\n\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('description', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\t\tthis.validateDescription(description, true)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateDescription(description, false)}\r\n\t\t\t\t\t\t\terror={errDescription && !!errDescription.dirty}\r\n\t\t\t\t\t\t\tmaxLength={300}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrDescription && !!errDescription.dirty\r\n\t\t\t\t\t\t\t\t\t? errDescription.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('DESCRIPTION_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('targetUrl', { isProp: true })}\r\n\t\t\t\t\t\t\tvalue={targetUrl}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('targetUrl', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateTargetUrl(targetUrl, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateTargetUrl(targetUrl, false)}\r\n\t\t\t\t\t\t\terror={errTargetUrl && !!errTargetUrl.dirty}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTargetUrl && !!errTargetUrl.dirty ? errTargetUrl.errMsg : ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tchecked={addUtmLink}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => this.handleChangeAddUtmLink(ev)}\r\n\t\t\t\t\t\t\t\t\tvalue='checkedB'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={t('ADD_UTM_LINK')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={this.validateAndUpdateType.bind(this, true)}\r\n\t\t\t\t\t\t\tsource={AdTypes}\r\n\t\t\t\t\t\t\tvalue={type + ''}\r\n\t\t\t\t\t\t\tlabel={t('adType', { isProp: true })}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitBasic.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdUnitBasic = NewAdUnitHoc(AdUnitBasic)\r\n\r\nexport default Translate(NewAdUnitBasic)\r\n","import url from 'url'\r\nimport { UTM_PARAMS } from 'constants/misc'\r\n\r\nexport const addUrlUtmTracking = ({\r\n\ttargetUrl,\r\n\tcampaign,\r\n\tcontent,\r\n\tremoveFromUrl,\r\n}) => {\r\n\tif (!!targetUrl) {\r\n\t\tconst URL = url.parse(targetUrl, true)\r\n\t\tURL.search = null\r\n\r\n\t\tif (URL.protocol && URL.host) {\r\n\t\t\tconst newQuery = {}\r\n\t\t\tif (removeFromUrl) {\r\n\t\t\t\tfor (let [key, value] of Object.entries(URL.query)) {\r\n\t\t\t\t\tif (UTM_PARAMS[key] !== value) {\r\n\t\t\t\t\t\tnewQuery[key] = value\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tURL.query = newQuery\r\n\t\t\t} else {\r\n\t\t\t\tconst query = { ...UTM_PARAMS, ...URL.query }\r\n\r\n\t\t\t\tif (campaign) {\r\n\t\t\t\t\tquery['utm_campaign'] = campaign\r\n\t\t\t\t}\r\n\t\t\t\tif (content) {\r\n\t\t\t\t\tquery['utm_content'] = content\r\n\t\t\t\t}\r\n\t\t\t\tURL.query = query\r\n\t\t\t}\r\n\t\t\treturn url.format(URL)\r\n\t\t}\r\n\t}\r\n\r\n\treturn targetUrl\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport ImgForm from 'components/dashboard/forms/ImgForm'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ValidImageHoc from 'components/dashboard/forms/ValidImageHoc'\r\n\r\nconst getWidAndHightFromType = type => {\r\n\ttype = type || 'legacy_300x100'\r\n\tif (!type) {\r\n\t\treturn {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t}\r\n\t}\r\n\r\n\tconst sizes = type.split('_')[1].split('x')\r\n\treturn {\r\n\t\twidth: parseInt(sizes[0], 10),\r\n\t\theight: parseInt(sizes[1], 10),\r\n\t}\r\n}\r\n\r\nclass AdUnitMedia extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem, validate } = this.props\r\n\t\tconst { type, temp } = newItem\r\n\t\tconst { tempUrl } = temp\r\n\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\tif (tempUrl) {\r\n\t\t\tconst isValidMediaSize = temp.width === width && temp.height === height\r\n\r\n\t\t\tvalidate('temp', {\r\n\t\t\t\tisValid: isValidMediaSize,\r\n\t\t\t\terr: {\r\n\t\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t\t},\r\n\t\t\t\tdirty: true,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tvalidate('temp', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\thandleImgChange = (prop, img) => {\r\n\t\tconst { newItem, handleChange } = this.props\r\n\t\tconst newTemp = { ...newItem.temp, ...img }\r\n\t\thandleChange(prop, newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { newItem, t, validateMedia } = this.props\r\n\t\tconst { type, temp } = newItem\r\n\t\tconst errImg = this.props.invalidFields['temp']\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<ImgForm\r\n\t\t\t\t\t\t\tlabel={t('UNIT_BANNER_IMG_LABEL')}\r\n\t\t\t\t\t\t\timgSrc={temp.tempUrl || ''}\r\n\t\t\t\t\t\t\tmime={temp.mime || ''}\r\n\t\t\t\t\t\t\tonChange={validateMedia.bind(this, {\r\n\t\t\t\t\t\t\t\tpropsName: 'temp',\r\n\t\t\t\t\t\t\t\twidthTarget: width,\r\n\t\t\t\t\t\t\t\theightTarget: height,\r\n\t\t\t\t\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\t\t\t\t\texact: true,\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tonChange: this.handleImgChange,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tadditionalInfo={t('UNIT_BANNER_IMG_INFO', {\r\n\t\t\t\t\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\terrMsg={errImg ? errImg.errMsg : ''}\r\n\t\t\t\t\t\t\tsize={{\r\n\t\t\t\t\t\t\t\twidth: width,\r\n\t\t\t\t\t\t\t\theight: height,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitMedia.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tnewItem: PropTypes.object.isRequired,\r\n}\r\n\r\nconst NewAdUnitMedia = NewAdUnitHoc(ValidImageHoc(AdUnitMedia))\r\n\r\nexport default Translate(NewAdUnitMedia)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { translate } from 'services/translations/translations'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\nexport const renderInput = inputProps => {\r\n\tconst { InputProps, classes, ref, ...other } = inputProps\r\n\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\tInputProps={{\r\n\t\t\t\tinputRef: ref,\r\n\t\t\t\tclasses: {\r\n\t\t\t\t\troot: classes.inputRoot,\r\n\t\t\t\t},\r\n\t\t\t\t...InputProps,\r\n\t\t\t}}\r\n\t\t\t{...other}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const renderSuggestion = ({\r\n\tsuggestion,\r\n\tindex,\r\n\tstyle,\r\n\titemProps,\r\n\thighlightedIndex,\r\n\tselectedItem,\r\n\tshowSelected,\r\n}) => {\r\n\tconst isHighlighted = highlightedIndex === index\r\n\t// TODO: make it better\r\n\t// Note wo work with obj and array\r\n\tconst isSelected =\r\n\t\t((selectedItem || {}).value || selectedItem || '').indexOf(\r\n\t\t\tsuggestion.value\r\n\t\t) > -1\r\n\r\n\tif (!showSelected && isSelected) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={style}>\r\n\t\t\t<ListItem\r\n\t\t\t\tbutton\r\n\t\t\t\t{...itemProps}\r\n\t\t\t\tkey={suggestion.value || suggestion.label}\r\n\t\t\t\tselected={isHighlighted}\r\n\t\t\t\tcomponent='div'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tfontWeight: isSelected ? 500 : 400,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ListItemText primary={suggestion.label} />\r\n\t\t\t</ListItem>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst newSuggestion = inputValue => {\r\n\treturn {\r\n\t\tlabel: `${translate(\r\n\t\t\t'CREATE_TAG_LABEL'\r\n\t\t)} \"${inputValue.toLowerCase().trim()}\"`,\r\n\t\tvalue: inputValue.toLowerCase().trim(),\r\n\t}\r\n}\r\n\r\nrenderSuggestion.propTypes = {\r\n\thighlightedIndex: PropTypes.number,\r\n\tindex: PropTypes.number,\r\n\titemProps: PropTypes.object,\r\n\tselectedItem: PropTypes.string,\r\n\tsuggestion: PropTypes.shape({ label: PropTypes.string }).isRequired,\r\n}\r\n\r\nexport const getSuggestions = (\r\n\tinputValue = '',\r\n\tsource,\r\n\tallowCreate,\r\n\tvalidateCreation\r\n) => {\r\n\tif (!inputValue) {\r\n\t\treturn source\r\n\t} else {\r\n\t\tinputValue = inputValue.toLowerCase().trim()\r\n\r\n\t\tsource = source.filter(suggestion => {\r\n\t\t\treturn (\r\n\t\t\t\t!inputValue ||\r\n\t\t\t\tsuggestion.label\r\n\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t.trim()\r\n\t\t\t\t\t.indexOf(inputValue) !== -1\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\t// Making sure that an option to create a new item will exist when needed\r\n\t\tconst values = source.map(item => {\r\n\t\t\treturn item.value\r\n\t\t})\r\n\r\n\t\tif (\r\n\t\t\t!values.includes(inputValue) &&\r\n\t\t\tallowCreate &&\r\n\t\t\t(!validateCreation || validateCreation(inputValue))\r\n\t\t) {\r\n\t\t\tsource.push(newSuggestion(inputValue))\r\n\t\t}\r\n\r\n\t\treturn source\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport keycode from 'keycode'\r\nimport Downshift from 'downshift'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport { renderInput, getSuggestions, renderSuggestion } from './common'\r\n\r\nclass DownshiftMultiple extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tinputValue: '',\r\n\t\t\tselectedItem: props.value || [],\r\n\t\t}\r\n\t}\r\n\r\n\thandleKeyDown = event => {\r\n\t\tconst { inputValue, selectedItem } = this.state\r\n\t\tif (\r\n\t\t\tselectedItem.length &&\r\n\t\t\t!inputValue.length &&\r\n\t\t\tkeycode(event) === 'backspace'\r\n\t\t) {\r\n\t\t\tconst newItemValue = selectedItem.slice(0, selectedItem.length - 1)\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedItem: newItemValue,\r\n\t\t\t})\r\n\r\n\t\t\tthis.props.onChange(newItemValue)\r\n\t\t}\r\n\t}\r\n\r\n\thandleInputChange = event => {\r\n\t\tconst value = event.target.value.toLowerCase()\r\n\t\tthis.setState({ inputValue: value })\r\n\t}\r\n\r\n\thandleChange = item => {\r\n\t\tlet { selectedItem } = this.state\r\n\r\n\t\tif (selectedItem.indexOf(item.value) === -1) {\r\n\t\t\tselectedItem = [...selectedItem, item.value]\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tinputValue: '',\r\n\t\t\tselectedItem,\r\n\t\t})\r\n\r\n\t\tthis.props.onChange(selectedItem)\r\n\t}\r\n\r\n\thandleDelete = item => () => {\r\n\t\tconst selectedItem = [...this.state.selectedItem]\r\n\t\tselectedItem.splice(selectedItem.indexOf(item), 1)\r\n\r\n\t\tthis.setState({ selectedItem })\r\n\t\tthis.props.onChange(selectedItem)\r\n\t}\r\n\r\n\t/**\r\n\t * source {'propValue': 'propsLabel'} - skip one mapping to get the label for Chip\r\n\t */\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses,\r\n\t\t\tsource,\r\n\t\t\tlabel,\r\n\t\t\tid,\r\n\t\t\tplaceholder,\r\n\t\t\thelperText,\r\n\t\t\topenOnClick,\r\n\t\t\tallowCreate,\r\n\t\t\tvalidateCreation,\r\n\t\t} = this.props\r\n\t\tconst { inputValue, selectedItem } = this.state\r\n\t\tconst allValues = Object.keys(source).map(key => {\r\n\t\t\treturn { value: key, label: source[key] }\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<Downshift\r\n\t\t\t\tinputValue={inputValue}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tselectedItem={selectedItem}\r\n\t\t\t\t// defaultIsOpen={true}\r\n\t\t\t\titemToString={item => item.label}\r\n\t\t\t>\r\n\t\t\t\t{({\r\n\t\t\t\t\tgetInputProps,\r\n\t\t\t\t\tgetItemProps,\r\n\t\t\t\t\tisOpen,\r\n\t\t\t\t\tinputValue: inputValue2,\r\n\t\t\t\t\tselectedItem: selectedItem2,\r\n\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\ttoggleMenu,\r\n\t\t\t\t}) => (\r\n\t\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t\t{renderInput({\r\n\t\t\t\t\t\t\tfullWidth: true,\r\n\t\t\t\t\t\t\tclasses,\r\n\t\t\t\t\t\t\thelperText,\r\n\t\t\t\t\t\t\tlabel,\r\n\t\t\t\t\t\t\tInputProps: getInputProps({\r\n\t\t\t\t\t\t\t\tstartAdornment: selectedItem.map(item => (\r\n\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\t\t\t\t\t\tlabel={source[item]}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\tonDelete={this.handleDelete(item)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)),\r\n\t\t\t\t\t\t\t\tonChange: this.handleInputChange,\r\n\t\t\t\t\t\t\t\tonKeyDown: this.handleKeyDown,\r\n\t\t\t\t\t\t\t\tplaceholder,\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tonClick: () => openOnClick && toggleMenu(),\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{isOpen ? (\r\n\t\t\t\t\t\t\t<Paper className={classes.paper} square>\r\n\t\t\t\t\t\t\t\t//TODO: use FixedSizeList!\r\n\t\t\t\t\t\t\t\t{getSuggestions(\r\n\t\t\t\t\t\t\t\t\tinputValue2,\r\n\t\t\t\t\t\t\t\t\tallValues,\r\n\t\t\t\t\t\t\t\t\tallowCreate,\r\n\t\t\t\t\t\t\t\t\tvalidateCreation\r\n\t\t\t\t\t\t\t\t).map((suggestion, index) =>\r\n\t\t\t\t\t\t\t\t\trenderSuggestion({\r\n\t\t\t\t\t\t\t\t\t\tsuggestion,\r\n\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\titemProps: getItemProps({ item: suggestion }),\r\n\t\t\t\t\t\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\t\t\t\t\t\tselectedItem: selectedItem2,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Downshift>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nDownshiftMultiple.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default DownshiftMultiple\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Downshift from 'downshift'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { renderInput, getSuggestions, renderSuggestion } from './common'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport { FixedSizeList } from 'react-window'\r\nimport AutoSizer from 'react-virtualized-auto-sizer'\r\nclass DownshiftSingle extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.props.onInit()\r\n\t\tthis.state = {\r\n\t\t\tinputValue: '',\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = item => {\r\n\t\tconst selectedItem = item ? item.value || item.label : item\r\n\t\tthis.props.onChange(selectedItem)\r\n\t}\r\n\r\n\thandleInputChange = inputValue => {\r\n\t\tif (this.state.inputValue !== inputValue) this.setState({ inputValue })\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses,\r\n\t\t\tsource,\r\n\t\t\terror,\r\n\t\t\tlabel,\r\n\t\t\tid,\r\n\t\t\tplaceholder,\r\n\t\t\thelperText,\r\n\t\t\terrorText,\r\n\t\t\tshowSelected,\r\n\t\t\tvalue,\r\n\t\t\topenOnClick,\r\n\t\t\tallowCreate,\r\n\t\t\tvalidateCreation,\r\n\t\t} = this.props\r\n\t\tconst allValues = source //Object.keys(source).map(key => { return { value: key, label: source[key] } })\r\n\t\tconst suggestions = getSuggestions(\r\n\t\t\tthis.state.inputValue,\r\n\t\t\tallValues,\r\n\t\t\tallowCreate,\r\n\t\t\tvalidateCreation\r\n\t\t)\r\n\t\treturn (\r\n\t\t\t<Downshift\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\titemToString={item => (item || {}).label || item || ''}\r\n\t\t\t\tselectedItem={value}\r\n\t\t\t>\r\n\t\t\t\t{({\r\n\t\t\t\t\tgetInputProps,\r\n\t\t\t\t\tgetItemProps,\r\n\t\t\t\t\tisOpen,\r\n\t\t\t\t\tinputValue,\r\n\t\t\t\t\tselectedItem,\r\n\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\tclearSelection,\r\n\t\t\t\t\ttoggleMenu,\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tthis.handleInputChange(inputValue)\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t\t\t{renderInput({\r\n\t\t\t\t\t\t\t\tlabel,\r\n\t\t\t\t\t\t\t\tvalue: inputValue,\r\n\t\t\t\t\t\t\t\tfullWidth: true,\r\n\t\t\t\t\t\t\t\tclasses,\r\n\t\t\t\t\t\t\t\thelperText,\r\n\t\t\t\t\t\t\t\tInputProps: getInputProps({\r\n\t\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\t\tonClick: () => {\r\n\t\t\t\t\t\t\t\t\t\tif (openOnClick) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearSelection()\r\n\t\t\t\t\t\t\t\t\t\t\ttoggleMenu()\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror,\r\n\t\t\t\t\t\t\t\t\tplaceholder,\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{isOpen && suggestions.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<Paper className={classes.paper} square>\r\n\t\t\t\t\t\t\t\t\t<AutoSizer>\r\n\t\t\t\t\t\t\t\t\t\t{({ height, width }) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<FixedSizeList\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.paper}\r\n\t\t\t\t\t\t\t\t\t\t\t\theight={height}\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth={width}\r\n\t\t\t\t\t\t\t\t\t\t\t\titemSize={46}\r\n\t\t\t\t\t\t\t\t\t\t\t\titemCount={suggestions.length}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{({ index, style }) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trenderSuggestion({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestion: suggestions[index],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titemProps: getItemProps({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem: suggestions[index],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedItem,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSelected,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t</FixedSizeList>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</AutoSizer>\r\n\t\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t\t<FormHelperText error id='component-error-text'>\r\n\t\t\t\t\t\t\t\t\t{errorText}\r\n\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t</Downshift>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nDownshiftSingle.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default DownshiftSingle\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport DownshiftMultiple from './DownshiftMultiple'\r\nimport DownshiftSingle from './DownshiftSingle'\r\n\r\nfunction Autocomplete(props) {\r\n\tconst { classes, source, multiple, ...rest } = props\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{multiple ? (\r\n\t\t\t\t<DownshiftMultiple classes={classes} source={source} {...rest} />\r\n\t\t\t) : (\r\n\t\t\t\t<DownshiftSingle classes={classes} source={source} {...rest} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nAutocomplete.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default withStyles(styles)(Autocomplete)\r\n","export const styles = theme => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\theight: 250,\r\n\t},\r\n\tcontainer: {\r\n\t\tflexGrow: 1,\r\n\t\tposition: 'relative',\r\n\t},\r\n\tpaper: {\r\n\t\tposition: 'absolute',\r\n\t\tzIndex: 1,\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tleft: 0,\r\n\t\tright: 0,\r\n\t\toverflow: 'hidden',\r\n\t\theight: 150,\r\n\t\twidth: '100%',\r\n\t},\r\n\tchip: {\r\n\t\tmargin: `${theme.spacing(1) / 2}px ${theme.spacing(1) / 2}px`,\r\n\t},\r\n\tinputRoot: {\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n})\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Slider from '@material-ui/core/Slider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Autocomplete from 'components/common/autocomplete'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { translate } from 'services/translations/translations'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { SOURCES } from 'constants/targeting'\r\n\r\nconst styles = {\r\n\tslider: {\r\n\t\tpadding: '22px 0px',\r\n\t},\r\n\tmarkLabel: {\r\n\t\ttop: '30px',\r\n\t},\r\n}\r\nconst marks = [\r\n\t{\r\n\t\tvalue: 5,\r\n\t\tlabel: 'Low',\r\n\t},\r\n\t{\r\n\t\tvalue: 50,\r\n\t\tlabel: 'Medium',\r\n\t},\r\n\t{\r\n\t\tvalue: 95,\r\n\t\tlabel: 'High',\r\n\t},\r\n]\r\n\r\nconst SourcesSelect = Object.keys(SOURCES).map(key => {\r\n\treturn {\r\n\t\tvalue: {\r\n\t\t\tkey: key, // FOR DROPDOWN\r\n\t\t\tsource: key,\r\n\t\t\tcollection: SOURCES[key].collection,\r\n\t\t\ttarget: { tag: '', score: 1 },\r\n\t\t\tlabel: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\tplaceholder: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t},\r\n\t\tlabel: translate(`ADD_NEW_${key.toUpperCase()}_TARGET`),\r\n\t}\r\n})\r\n\r\nclass AdUnitTargeting extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tconst { targets } = props.newItem.temp || {}\r\n\t\tthis.state = {\r\n\t\t\ttargets: [...(targets || [])],\r\n\t\t}\r\n\t}\r\n\r\n\tupdateNewItemCollections(targets) {\r\n\t\tconst { newItem, handleChange } = this.props\r\n\t\tconst collections = [...targets].reduce(\r\n\t\t\t(all, tg) => {\r\n\t\t\t\tconst newCollection = all[tg.collection] || []\r\n\r\n\t\t\t\t// NOTE: just skip empty tags\r\n\t\t\t\tif (!!tg.target.tag) {\r\n\t\t\t\t\tnewCollection.push(tg.target)\r\n\t\t\t\t}\r\n\t\t\t\tall[tg.collection] = newCollection\r\n\t\t\t\treturn all\r\n\t\t\t},\r\n\t\t\t{ targeting: [], tags: [] }\r\n\t\t)\r\n\r\n\t\tconst { temp } = newItem\r\n\t\tconst newTemp = { ...temp }\r\n\r\n\t\t// Need this to keep the state if user get back\r\n\t\tnewTemp.targets = [...targets]\r\n\t\tcollections.temp = newTemp\r\n\r\n\t\thandleChange(null, null, collections)\r\n\t}\r\n\r\n\thandleTargetChange = (index, prop, newValue) => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...newTargets[index].target }\r\n\t\tnewTarget[prop] = newValue\r\n\t\tnewTargets[index] = { ...newTargets[index], target: newTarget }\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tnewTarget = target => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...target }\r\n\t\tnewTarget.key = newTargets.length\r\n\t\tnewTarget.target = { ...target.target }\r\n\t\tnewTargets.push(newTarget)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tremoveTarget = index => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tnewTargets.splice(index, 1)\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t\tthis.validateAutocomplete({\r\n\t\t\tid: `target-${index}`,\r\n\t\t\tisValid: true,\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAutocomplete = ({ id, isValid, dirty }) => {\r\n\t\tthis.props.validate(id, {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'TARGETING_REQUIRED' },\r\n\t\t\tdirty,\r\n\t\t})\r\n\t}\r\n\r\n\ttargetTag = ({\r\n\t\tsource,\r\n\t\tcollection,\r\n\t\tplaceholder,\r\n\t\tlabel,\r\n\t\tindex,\r\n\t\ttarget,\r\n\t\tt,\r\n\t\tclasses,\r\n\t\tinvalidFields,\r\n\t}) => {\r\n\t\tconst id = `target-${index}`\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\tdirection='auto'\r\n\t\t\t\t\t\topenOnClick\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\terror={invalidFields[id] && invalidFields[id].dirty}\r\n\t\t\t\t\t\terrorText={\r\n\t\t\t\t\t\t\tinvalidFields[id] && !!invalidFields[id].dirty\r\n\t\t\t\t\t\t\t\t? invalidFields[id].errMsg\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={newValue => {\r\n\t\t\t\t\t\t\tthis.handleTargetChange(index, 'tag', newValue, collection)\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: newValue,\r\n\t\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonInit={() =>\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: target.tag,\r\n\t\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// validate={validate}\r\n\t\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\tsource={source}\r\n\t\t\t\t\t\tvalue={target.tag}\r\n\t\t\t\t\t\tsuggestionMatch='anywhere'\r\n\t\t\t\t\t\tshowSuggestionsWhenValueIsSet={true}\r\n\t\t\t\t\t\tallowCreate={!source.length}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={11} md={5}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Typography id={`tbaget-score-${index}`}>\r\n\t\t\t\t\t\t\t{/*TODO: Translate target name*/}\r\n\t\t\t\t\t\t\t{t('TARGET_SCORE_LABEL', {\r\n\t\t\t\t\t\t\t\targs: [target.score],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\tclasses={{ root: classes.slider, markLabel: classes.markLabel }}\r\n\t\t\t\t\t\t\taria-labelledby={`target-score-${index}`}\r\n\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\tvalueLabelDisplay='auto'\r\n\t\t\t\t\t\t\tdisabled={!target.tag}\r\n\t\t\t\t\t\t\tvalue={target.score}\r\n\t\t\t\t\t\t\tmarks={marks}\r\n\t\t\t\t\t\t\tonChange={(ev, newValue) =>\r\n\t\t\t\t\t\t\t\tthis.handleTargetChange(index, 'score', newValue, collection)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item container xs={1} md={1} alignItems='center'>\r\n\t\t\t\t\t<IconButton onClick={() => this.removeTarget(index)}>\r\n\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\t// newItem,\r\n\t\t\tclasses,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\t\t// const { targeting, tags } = newItem\r\n\r\n\t\tconst { targets } = this.state\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t{[...targets].map(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t{ source, collection, label, placeholder, target = {} } = {},\r\n\t\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t\t) => (\r\n\t\t\t\t\t\t\t\t<this.targetTag\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tlabel={t(label)}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t(placeholder)}\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tsource={SOURCES[source].src}\r\n\t\t\t\t\t\t\t\t\tcollection={collection}\r\n\t\t\t\t\t\t\t\t\ttarget={target}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tvariant='filled'\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={target => {\r\n\t\t\t\t\t\t\t\tthis.newTarget({ ...target })\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsource={[...SourcesSelect]}\r\n\t\t\t\t\t\t\tvalue={''}\r\n\t\t\t\t\t\t\tlabel={t('NEW_TARGET')}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitTargeting.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdUnitTargeting = NewAdUnitHoc(withStyles(styles)(AdUnitTargeting))\r\n\r\nexport default Translate(NewAdUnitTargeting)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn'\r\nimport WcIcon from '@material-ui/icons/Wc'\r\nimport ChildCareIcon from '@material-ui/icons/ChildCare'\r\nimport CompareArrows from '@material-ui/icons/CompareArrows'\r\n\r\nconst targetIcon = {\r\n\tlocation: LocationOnIcon,\r\n\tgender: WcIcon,\r\n\tage: ChildCareIcon,\r\n}\r\n\r\nconst getTargetType = tag => {\r\n\tconst type = tag.split('_')[0] || 'tags'\r\n\treturn type\r\n}\r\n\r\nclass UnitTargets extends Component {\r\n\ttargetArrayValues = (target, type, t, index) => {\r\n\t\tconst TargetIcon = targetIcon[type] || CompareArrows\r\n\t\treturn (\r\n\t\t\t<span key={target.tag + target.score + index}>\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<TargetIcon />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\tprimary={t(target.tag, { isTarget: true })}\r\n\t\t\t\t\t\tsecondary={target.score}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ListItemSecondaryAction>{target.score}</ListItemSecondaryAction>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<Divider />\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n\r\n\tTargetsList = ({ targets = [], subHeader, t, ...rest }) => (\r\n\t\t<List\r\n\t\t\tdense\r\n\t\t\tsubheader={subHeader ? <ListSubheader caption={t(subHeader)} /> : null}\r\n\t\t>\r\n\t\t\t{targets.map(target => {\r\n\t\t\t\tconst type = getTargetType(target.tag)\r\n\t\t\t\treturn this.targetArrayValues(target, type, t)\r\n\t\t\t})}\r\n\t\t</List>\r\n\t)\r\n\r\n\trender() {\r\n\t\treturn <this.TargetsList {...this.props} />\r\n\t}\r\n}\r\n\r\nUnitTargets.propTypes = {\r\n\ttargets: PropTypes.array.isRequired,\r\n\tsubHeader: PropTypes.string,\r\n\tt: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default UnitTargets\r\n","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { CircularProgress } from '@material-ui/core'\r\nimport { styles } from './styles.js'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\n\r\n// TODO: fix responsive styles\r\nconst propRow = ({\r\n\tclasses,\r\n\tleft,\r\n\tright,\r\n\tclassName,\r\n\tclassNameLeft,\r\n\tclassNameRight,\r\n\tstyle = {},\r\n}) => (\r\n\t<Grid\r\n\t\titem\r\n\t\tcontainer\r\n\t\tspacing={2}\r\n\t\txs={12}\r\n\t\tclassName={classnames(className)}\r\n\t\tstyle={style}\r\n\t>\r\n\t\t<Grid\r\n\t\t\titem\r\n\t\t\txs={12}\r\n\t\t\tsm={4}\r\n\t\t\tlg={3}\r\n\t\t\tclassName={classnames(classes.leftCol, classes.uppercase, classNameLeft)}\r\n\t\t>\r\n\t\t\t{left}\r\n\t\t</Grid>\r\n\t\t<Grid\r\n\t\t\titem\r\n\t\t\txs={12}\r\n\t\t\tsm={8}\r\n\t\t\tlg={9}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tclasses.rightCol,\r\n\t\t\t\tclasses.breakLong,\r\n\t\t\t\tclassNameRight\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t{right}\r\n\t\t</Grid>\r\n\t</Grid>\r\n)\r\n\r\nconst contentBox = ({ classes, children, className }) => (\r\n\t<div className={classnames(classes.contentBox, className)}>{children}</div>\r\n)\r\n\r\nconst contentBody = ({ classes, children, className }) => (\r\n\t<div className={classnames(classes.contentBody, className)}>{children}</div>\r\n)\r\n\r\nconst contentStickyTop = ({ classes, children, className }) => (\r\n\t<div className={classnames(classes.contentStickyTop)}>{children}</div>\r\n)\r\n\r\nconst topLoading = ({ classes, msg, subMsg, className }) => (\r\n\t<div className={classnames(classes.contentTopLoading)}>\r\n\t\t<CircularProgress className={classes.contentTopLoadingCircular} size={50} />\r\n\t\t<div>\r\n\t\t\t<Typography component='div'> {msg} </Typography>\r\n\t\t\t{subMsg && (\r\n\t\t\t\t<Typography component='div'>\r\n\t\t\t\t\t<strong>{subMsg}</strong>\r\n\t\t\t\t</Typography>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t</div>\r\n)\r\n\r\nconst fullContentSpinner = ({ classes }) => (\r\n\t<CircularProgress\r\n\t\tclassName={classnames(classes.progressCircleCenter)}\r\n\t\tsize={50}\r\n\t/>\r\n)\r\n\r\nexport const PropRow = withStyles(styles)(propRow)\r\nexport const ContentBox = withStyles(styles)(contentBox)\r\nexport const ContentBody = withStyles(styles)(contentBody)\r\nexport const ContentStickyTop = withStyles(styles)(contentStickyTop)\r\nexport const TopLoading = withStyles(styles)(topLoading)\r\nexport const FullContentSpinner = withStyles(styles)(fullContentSpinner)\r\n","export const styles = theme => {\r\n\t// const spacing = theme.spacing(1)\r\n\treturn {\r\n\t\timgPreview: {\r\n\t\t\tmaxHeight: 225,\r\n\t\t\twidth: 'auto',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: 'auto',\r\n\t\t\tboxShadow: theme.shadows[2],\r\n\t\t},\r\n\t\timgPreviewWrapper: {\r\n\t\t\theight: 'max-content',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Img from 'components/common/img/Img'\r\nimport UnitTargets from 'components/dashboard/containers/UnitTargets'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n} from 'components/common/dialog/content'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from '../styles'\r\n\r\nclass AdUnitFormPreview extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.save = props.save\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, account, ...rest } = this.props\r\n\t\tconst { newItem, t } = rest\r\n\t\tconst { type, title, description, temp, targeting } = newItem\r\n\r\n\t\treturn (\r\n\t\t\t<ContentBox>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('owner', { isProp: true })}\r\n\t\t\t\t\t\tright={account.wallet.address}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow left={t('type', { isProp: true })} right={type} />\r\n\t\t\t\t\t<PropRow left={t('title', { isProp: true })} right={title} />\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('description', { isProp: true })}\r\n\t\t\t\t\t\tright={description}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('MEDIA')}\r\n\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\t\t\t\tclassName={classes.imgPreview}\r\n\t\t\t\t\t\t\t\tsrc={temp.tempUrl || ''}\r\n\t\t\t\t\t\t\t\talt={title}\r\n\t\t\t\t\t\t\t\tmediaMime={temp.mime}\r\n\t\t\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{targeting && (\r\n\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\tleft={t('targeting', { isProp: true })}\r\n\t\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\ttargets={targeting}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\t// subHeader={'TARGETING'}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{/* </Grid> */}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitFormPreview.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewAdUnitFormPreview = NewAdUnitHoc(withStyles(styles)(AdUnitFormPreview))\r\nexport default connect(mapStateToProps)(Translate(NewAdUnitFormPreview))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { Campaign } from 'adex-models'\r\n\r\nexport default function NewCampaignHoc(Decorated) {\r\n\tclass ItemForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tactive: false,\r\n\t\t\t\tsaved: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value, newValues) => {\r\n\t\t\tthis.props.actions.updateNewItem(\r\n\t\t\t\tthis.props.newItem,\r\n\t\t\t\tnewValues || { [prop]: value },\r\n\t\t\t\t'Campaign',\r\n\t\t\t\tCampaign\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tonSave = () => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsave = async () => {\r\n\t\t\tconst { actions, newItem } = this.props\r\n\t\t\tconst { temp } = newItem\r\n\t\t\tconst newTemp = { ...temp }\r\n\t\t\tnewTemp.waitingAction = true\r\n\t\t\tthis.handleChange('temp', newTemp)\r\n\t\t\tawait actions.openCampaign({ campaign: newItem })\r\n\r\n\t\t\tnewTemp.waitingAction = false\r\n\t\t\tthis.handleChange('temp', newTemp)\r\n\t\t\tthis.onSave()\r\n\t\t\tactions.resetNewItem('Campaign')\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tthis.onSave()\r\n\t\t\tthis.props.actions.resetNewItem('Campaign')\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { classes, ...rest } = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItemForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tnewItem: PropTypes.object.isRequired,\r\n\t\ttitle: PropTypes.string,\r\n\t\taddTo: PropTypes.object,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist, memory } = state\r\n\r\n\t\tconst adUnits = persist.items['AdUnit'] || {}\r\n\t\tconst adUnitsArray = Array.from(Object.values(adUnits)) || []\r\n\t\treturn {\r\n\t\t\tnewItem: new Campaign(memory.newItem['Campaign']),\r\n\t\t\tadUnits,\r\n\t\t\tadUnitsArray,\r\n\t\t\tspinner: memory.spinners['opening-campaign'],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(ItemForm)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewCampaignHoc from './NewCampaignHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { ContentBody } from 'components/common/dialog/content'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport { AdUnit } from 'adex-models'\r\nimport { NewUnitDialog } from 'components/dashboard/forms/items/NewItems'\r\nimport { SORT_PROPERTIES_ITEMS, FILTER_PROPERTIES_ITEMS } from 'constants/misc'\r\n\r\nclass CampaignUnits extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tselected:\r\n\t\t\t\tprops.newItem.adUnits.reduce((selected, unit) => {\r\n\t\t\t\t\tselected[unit.ipfs] = true\r\n\t\t\t\t\treturn selected\r\n\t\t\t\t}, {}) || {},\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tthis.validateUnits(newItem.adUnits, true)\r\n\t}\r\n\r\n\tvalidateUnits(adUnits, dirty) {\r\n\t\tconst isValid = !!adUnits.length\r\n\t\tthis.props.validate('adUnits', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_ADUNITS_REQIURED' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\thandleSelect = (ipfs, checked) => {\r\n\t\tconst newSelected = { ...this.state.selected }\r\n\t\tconst { adUnits, handleChange } = this.props\r\n\r\n\t\tif (checked) {\r\n\t\t\tnewSelected[ipfs] = true\r\n\t\t} else {\r\n\t\t\tdelete newSelected[ipfs]\r\n\t\t}\r\n\r\n\t\tthis.setState({ selected: newSelected })\r\n\t\tconst units = Object.keys(newSelected).map(key => {\r\n\t\t\treturn adUnits[key]\r\n\t\t})\r\n\r\n\t\thandleChange('adUnits', units)\r\n\t\tthis.validateUnits(units, true)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { adUnitsArray, t } = this.props\r\n\t\tconst hasAdUnits = adUnitsArray && adUnitsArray.length\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tspacing={2}\r\n\t\t\t\t\tdirection={hasAdUnits ? null : 'column'}\r\n\t\t\t\t\talignItems={hasAdUnits ? null : 'center'}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t{hasAdUnits ? (\r\n\t\t\t\t\t\t\t\t<ItemsList\r\n\t\t\t\t\t\t\t\t\tobjModel={AdUnit}\r\n\t\t\t\t\t\t\t\t\tselectMode\r\n\t\t\t\t\t\t\t\t\tselectedItems={this.state.selected}\r\n\t\t\t\t\t\t\t\t\tonSelect={(unit, checked) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.handleSelect(unit, checked)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\titems={adUnitsArray}\r\n\t\t\t\t\t\t\t\t\tlistMode='rows'\r\n\t\t\t\t\t\t\t\t\titemType={'AdUnit'}\r\n\t\t\t\t\t\t\t\t\tviewModeId={'newCampaignAdUnits'}\r\n\t\t\t\t\t\t\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\t\tnoActions\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Grid container direction='column' alignItems='center'>\r\n\t\t\t\t\t\t\t\t\t<p>{t('ERR_CAMPAIGN_REQUIRES_UNITS')}</p>\r\n\t\t\t\t\t\t\t\t\t<NewUnitDialog\r\n\t\t\t\t\t\t\t\t\t\tvariant='extended'\r\n\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\tbtnLabel='NEW_UNIT'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaignUnits.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n\tadUnits: PropTypes.object.isRequired,\r\n\tadUnitsArray: PropTypes.array.isRequired,\r\n}\r\n\r\nconst NewCampaignUnits = NewCampaignHoc(CampaignUnits)\r\n\r\nexport default Translate(NewCampaignUnits)\r\n","import React, { Component } from 'react'\r\nimport { DateTimePicker as MuiDateTimePicker } from 'material-ui-pickers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CalendarIcon from '@material-ui/icons/DateRange'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\n\r\nconst CalendarIconAdor = ({\r\n\ticon = <CalendarIcon />,\r\n\ticonColor,\r\n\tonIconClick,\r\n}) => (\r\n\t<InputAdornment position='end'>\r\n\t\t<IconButton color={iconColor} onClick={onIconClick}>\r\n\t\t\t{icon}\r\n\t\t</IconButton>\r\n\t</InputAdornment>\r\n)\r\n\r\nexport class DateTimePicker extends Component {\r\n\trender() {\r\n\t\tconst { calendarIcon, icon, iconColor, onIconClick, ...rest } = this.props\r\n\t\treturn (\r\n\t\t\t<MuiDateTimePicker\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tdisabled: rest.disabled,\r\n\t\t\t\t\tendAdornment: calendarIcon ? (\r\n\t\t\t\t\t\t<CalendarIconAdor\r\n\t\t\t\t\t\t\ticon={icon}\r\n\t\t\t\t\t\t\ticonColor={iconColor}\r\n\t\t\t\t\t\t\tonIconClick={onIconClick}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : null,\r\n\t\t\t\t}}\r\n\t\t\t\t{...rest}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default DateTimePicker\r\n\r\nconst dateTimePickerStyled = ({ classes, calendarIcon, icon, ...rest }) => {\r\n\treturn (\r\n\t\t<DateTimePicker\r\n\t\t\tInputLabelProps={{\r\n\t\t\t\tclasses: {\r\n\t\t\t\t\troot: classes.datepickerContrastLabel,\r\n\t\t\t\t},\r\n\t\t\t\tFormLabelClasses: {\r\n\t\t\t\t\troot: classes.datepickerContrastLabel,\r\n\t\t\t\t\tfocused: classes.datepickerContrastLabelFocused,\r\n\t\t\t\t},\r\n\t\t\t}}\r\n\t\t\tInputProps={{\r\n\t\t\t\tdisabled: rest.disabled,\r\n\t\t\t\tclasses: {\r\n\t\t\t\t\troot: classes.datepickerContrastInput,\r\n\t\t\t\t\tunderline: classes.datepickerContrastUnderline,\r\n\t\t\t\t},\r\n\t\t\t\tendAdornment: calendarIcon ? <CalendarIconAdor icon={icon} /> : null,\r\n\t\t\t}}\r\n\t\t\t{...rest}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const DateTimePickerContrast = withStyles(styles)(dateTimePickerStyled)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport NewCampaignHoc from './NewCampaignHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport FormGroup from '@material-ui/core/FormGroup'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n// import Dropdown from 'components/common/dropdown'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport DateTimePicker from 'components/common/DateTimePicker'\r\nimport { utils } from 'ethers'\r\nimport { validations } from 'adex-models'\r\nimport MomentUtils from '@date-io/moment'\r\nimport { totalFeesFormatted } from 'services/smart-contracts/actions/core'\r\nconst moment = new MomentUtils()\r\n\r\nconst VALIDATOR_LEADER_URL = process.env.VALIDATOR_LEADER_URL\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\nconst VALIDATOR_LEADER_FEE = '0'\r\nconst VALIDATOR_FOLLOWER_URL = process.env.VALIDATOR_FOLLOWER_URL\r\nconst VALIDATOR_FOLLOWER_ID = process.env.VALIDATOR_FOLLOWER_ID\r\nconst VALIDATOR_FOLLOWER_FEE = '0'\r\n\r\nconst AdvPlatformValidators = {\r\n\t[VALIDATOR_LEADER_ID]: {\r\n\t\tid: VALIDATOR_LEADER_ID,\r\n\t\turl: VALIDATOR_LEADER_URL,\r\n\t\tfee: VALIDATOR_LEADER_FEE,\r\n\t},\r\n}\r\n\r\nconst PubPlatformValidators = {\r\n\t[VALIDATOR_FOLLOWER_ID]: {\r\n\t\tid: VALIDATOR_FOLLOWER_ID,\r\n\t\turl: VALIDATOR_FOLLOWER_URL,\r\n\t\tfee: VALIDATOR_FOLLOWER_FEE,\r\n\t},\r\n}\r\n\r\nconst VALIDATOR_SOURCES = [AdvPlatformValidators, PubPlatformValidators]\r\n\r\n// const AdvValidatorsSrc = Object.keys(AdvPlatformValidators).map(key => {\r\n// \tconst val = AdvPlatformValidators[key]\r\n// \treturn {\r\n// \t\tvalue: key,\r\n// \t\tlabel: `${val.url} - ${val.id}`,\r\n// \t}\r\n// })\r\n\r\n// const PubValidatorsSrc = Object.keys(PubPlatformValidators).map(key => {\r\n// \tconst val = PubPlatformValidators[key]\r\n// \treturn {\r\n// \t\tvalue: key,\r\n// \t\tlabel: `${val.url} - ${val.id}`,\r\n// \t}\r\n// })\r\n\r\nconst getTotalImpressions = ({ depositAmount, minPerImpression, t }) => {\r\n\tconst dep = parseFloat(depositAmount)\r\n\tconst min = parseFloat(minPerImpression)\r\n\tif (!dep) {\r\n\t\treturn t('DEPOSIT_NOT_SET')\r\n\t} else if (!min) {\r\n\t\treturn t('CPM_NOT_SET')\r\n\t} else {\r\n\t\tconst impressions = utils.commify(Math.floor((dep / min) * 1000))\r\n\t\treturn t('TOTAL_IMPRESSIONS', { args: [impressions] })\r\n\t}\r\n}\r\n\r\nconst validateCampaignDates = ({\r\n\tcreated = Date.now(),\r\n\twithdrawPeriodStart,\r\n\tactiveFrom,\r\n}) => {\r\n\tlet error = null\r\n\r\n\tif (withdrawPeriodStart && activeFrom && withdrawPeriodStart <= activeFrom) {\r\n\t\terror = { message: 'ERR_END_BEFORE_START', prop: 'withdrawPeriodStart' }\r\n\t} else if (withdrawPeriodStart && withdrawPeriodStart < created) {\r\n\t\terror = { message: 'ERR_END_BEFORE_NOW', prop: 'withdrawPeriodStart' }\r\n\t} else if (activeFrom && activeFrom < created) {\r\n\t\terror = { message: 'ERR_START_BEFORE_NOW', prop: 'activeFrom' }\r\n\t} else if (activeFrom && !withdrawPeriodStart) {\r\n\t\terror = { message: 'ERR_NO_END', prop: 'withdrawPeriodStart' }\r\n\t} else if (!(withdrawPeriodStart || activeFrom)) {\r\n\t\terror = { message: 'ERR_NO_DATE_SET', prop: 'withdrawPeriodStart' }\r\n\t}\r\n\r\n\treturn { error }\r\n}\r\n\r\nconst validateAmounts = ({\r\n\tmaxDeposit = 0,\r\n\tdepositAmount,\r\n\tminPerImpression,\r\n}) => {\r\n\tconst maxDep = parseFloat(maxDeposit)\r\n\tconst dep = parseFloat(depositAmount)\r\n\tconst min = parseFloat(minPerImpression)\r\n\r\n\tlet error = null\r\n\tif (dep && dep > maxDep) {\r\n\t\terror = {\r\n\t\t\tmessage: 'ERR_INSUFFICIENT_IDENTITY_BALANCE',\r\n\t\t\tprop: 'depositAmount',\r\n\t\t}\r\n\t}\r\n\tif (dep && dep < min) {\r\n\t\terror = { message: 'ERR_CPM_OVER_DEPOSIT', prop: 'minPerImpression' }\r\n\t}\r\n\tif (dep <= 0) {\r\n\t\terror = { message: 'ERR_ZERO_DEPOSIT', prop: 'depositAmount' }\r\n\t}\r\n\tif (min <= 0) {\r\n\t\terror = { message: 'ERR_ZERO_CPM', prop: 'minPerImpression' }\r\n\t}\r\n\r\n\treturn { error }\r\n}\r\n\r\nclass CampaignFinance extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tthis.validateAndUpdateValidator(false, 0, newItem.validators[0])\r\n\t\tthis.validateAndUpdateValidator(false, 1, newItem.validators[1])\r\n\t\tthis.validateAmount(\r\n\t\t\tnewItem.depositAmount,\r\n\t\t\t'depositAmount',\r\n\t\t\tfalse,\r\n\t\t\t'REQUIRED_FIELD'\r\n\t\t)\r\n\t\tthis.validateAmount(\r\n\t\t\tnewItem.minPerImpression,\r\n\t\t\t'minPerImpression',\r\n\t\t\tfalse,\r\n\t\t\t'REQUIRED_FIELD'\r\n\t\t)\r\n\t\tthis.handleDates('activeFrom', newItem.activeFrom, false)\r\n\t\tthis.handleDates('withdrawPeriodStart', newItem.withdrawPeriodStart, false)\r\n\t}\r\n\r\n\tvalidateAndUpdateValidator = (dirty, index, key = {}, update) => {\r\n\t\tconst { handleChange, newItem, validate } = this.props\r\n\t\tconst { validators } = newItem\r\n\t\tconst newValidators = [...validators]\r\n\t\tconst newValue = VALIDATOR_SOURCES[index][key.id || key]\r\n\r\n\t\tnewValidators[index] = newValue\r\n\r\n\t\tconst isValid =\r\n\t\t\t!!newValidators[0] &&\r\n\t\t\t!!newValidators[1] &&\r\n\t\t\t!!newValidators[0].id &&\r\n\t\t\t!!newValidators[0].url &&\r\n\t\t\t!!newValidators[1].id &&\r\n\t\t\t!!newValidators[1].url\r\n\r\n\t\t// TEMP - update like this to avoid changing the flow and other functions\r\n\t\t// <---\r\n\t\tif (!isValid) {\r\n\t\t\tconst tempValidators = [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: VALIDATOR_LEADER_ID,\r\n\t\t\t\t\turl: VALIDATOR_LEADER_URL,\r\n\t\t\t\t\tfee: VALIDATOR_LEADER_FEE,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: VALIDATOR_FOLLOWER_ID,\r\n\t\t\t\t\turl: VALIDATOR_FOLLOWER_URL,\r\n\t\t\t\t\tfee: VALIDATOR_FOLLOWER_FEE,\r\n\t\t\t\t},\r\n\t\t\t]\r\n\r\n\t\t\thandleChange('validators', tempValidators)\r\n\r\n\t\t\tvalidate('validators', {\r\n\t\t\t\tisValid: true,\r\n\t\t\t\terr: { msg: 'ERR_VALIDATORS' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// END TEMP --->\r\n\r\n\t\tif (update) {\r\n\t\t\thandleChange('validators', newValidators)\r\n\t\t}\r\n\r\n\t\tvalidate('validators', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_VALIDATORS' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAmount(value = '', prop, dirty, errMsg) {\r\n\t\tconst isValidNumber = validations.isNumberString(value)\r\n\t\tconst isValid = isValidNumber && utils.parseUnits(value, 18)\r\n\r\n\t\tif (!isValid) {\r\n\t\t\tthis.props.validate(prop, {\r\n\t\t\t\tisValid: isValid,\r\n\t\t\t\terr: { msg: errMsg || 'ERR_INVALID_AMOUNT' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tconst { newItem, account } = this.props\r\n\r\n\t\t\tconst { availableIdentityBalanceDai = 0 } = account.stats.formatted || {}\r\n\r\n\t\t\tconst depositAmount =\r\n\t\t\t\tprop === 'depositAmount' ? value : newItem.depositAmount\r\n\t\t\tconst minPerImpression =\r\n\t\t\t\tprop === 'minPerImpression' ? value : newItem.minPerImpression\r\n\t\t\tconst maxDeposit =\r\n\t\t\t\tparseFloat(availableIdentityBalanceDai) - parseFloat(totalFeesFormatted)\r\n\t\t\tconst result = validateAmounts({\r\n\t\t\t\tmaxDeposit,\r\n\t\t\t\tdepositAmount,\r\n\t\t\t\tminPerImpression,\r\n\t\t\t})\r\n\r\n\t\t\tthis.props.validate(prop, {\r\n\t\t\t\tisValid: !result.error,\r\n\t\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\thandleDates = (prop, value, dirty) => {\r\n\t\tconst { newItem, handleChange, validate } = this.props\r\n\t\tconst withdrawPeriodStart =\r\n\t\t\tprop === 'withdrawPeriodStart' ? value : newItem.withdrawPeriodStart\r\n\t\tconst activeFrom = prop === 'activeFrom' ? value : newItem.activeFrom\r\n\t\tconst result = validateCampaignDates({\r\n\t\t\twithdrawPeriodStart,\r\n\t\t\tactiveFrom,\r\n\t\t\tcreated: newItem.created,\r\n\t\t})\r\n\r\n\t\tvalidate('activeFrom', {\r\n\t\t\tisValid: !(result.error && result.error.prop === 'activeFrom'),\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\r\n\t\tvalidate('withdrawPeriodStart', {\r\n\t\t\tisValid: !(result.error && result.error.prop === 'withdrawPeriodStart'),\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\r\n\t\tif (value) {\r\n\t\t\thandleChange(prop, value)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { handleChange, newItem, t, invalidFields, account } = this.props\r\n\t\tconst {\r\n\t\t\tvalidators,\r\n\t\t\tdepositAmount,\r\n\t\t\tminPerImpression,\r\n\t\t\t// depositAsset,\r\n\t\t\tactiveFrom,\r\n\t\t\twithdrawPeriodStart,\r\n\t\t\tminTargetingScore,\r\n\t\t} = newItem\r\n\r\n\t\tconst { availableIdentityBalanceDai = 0 } = account.stats.formatted || {}\r\n\r\n\t\tconst from = activeFrom || undefined\r\n\t\tconst to = withdrawPeriodStart || undefined\r\n\t\tconst now = moment.date().valueOf()\r\n\r\n\t\tconst errDepAmnt = invalidFields['depositAmount']\r\n\t\tconst errMin = invalidFields['minPerImpression']\r\n\t\tconst errFrom = invalidFields['activeFrom']\r\n\t\tconst errTo = invalidFields['withdrawPeriodStart']\r\n\r\n\t\tconst impressions = !(errDepAmnt || errMin)\r\n\t\t\t? getTotalImpressions({ depositAmount, minPerImpression, t })\r\n\t\t\t: ''\r\n\r\n\t\tconst leader = validators[0] || {}\r\n\t\tconst follower = validators[1] || {}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t{/* <Grid item xs={12}> */}\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t{/* <Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={value =>\r\n\t\t\t\t\t\t\t\tthis.validateAndUpdateValidator(true, 0, value, true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsource={AdvValidatorsSrc}\r\n\t\t\t\t\t\t\tvalue={(validators[0] || {}).id + ''}\r\n\t\t\t\t\t\t\tlabel={t('ADV_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\thtmlId='leader-validator-dd'\r\n\t\t\t\t\t\t\tname='leader-validator'\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<FormControl fullWidth disabled>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor='leader-validator'>\r\n\t\t\t\t\t\t\t\t{t('ADV_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Input id='leader-validator' value={leader.url || ''} />\r\n\t\t\t\t\t\t\t<FormHelperText>{leader.id}</FormHelperText>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{/* <Grid item xs={12}> */}\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t{/* <Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={value =>\r\n\t\t\t\t\t\t\t\tthis.validateAndUpdateValidator(true, 1, value, true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsource={PubValidatorsSrc}\r\n\t\t\t\t\t\t\tvalue={(validators[1] || {}).id + ''}\r\n\t\t\t\t\t\t\tlabel={t('PUB_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\thtmlId='follower-validator-dd'\r\n\t\t\t\t\t\t\tname='follower-validator'\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<FormControl fullWidth disabled>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor='follower-validator'>\r\n\t\t\t\t\t\t\t\t{t('PUB_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Input id='follower-validator' value={follower.url || ''} />\r\n\t\t\t\t\t\t\t<FormHelperText>{follower.id}</FormHelperText>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('DEPOSIT_AMOUNT_LABEL', {\r\n\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\tparseFloat(availableIdentityBalanceDai) -\r\n\t\t\t\t\t\t\t\t\t\tparseFloat(totalFeesFormatted)\r\n\t\t\t\t\t\t\t\t\t).toFixed(2),\r\n\t\t\t\t\t\t\t\t\t'SAI',\r\n\t\t\t\t\t\t\t\t\ttotalFeesFormatted,\r\n\t\t\t\t\t\t\t\t\t'SAI',\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tname='depositAmount'\r\n\t\t\t\t\t\t\tvalue={depositAmount}\r\n\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\tthis.validateAmount(ev.target.value, 'depositAmount', true)\r\n\t\t\t\t\t\t\t\thandleChange('depositAmount', ev.target.value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\terror={errDepAmnt && !!errDepAmnt.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrDepAmnt && !!errDepAmnt.dirty\r\n\t\t\t\t\t\t\t\t\t? errDepAmnt.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('DEPOSIT_AMOUNT_HELPER_TXT', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [totalFeesFormatted, 'SAI'],\r\n\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('CPM_LABEL', { args: [impressions] })}\r\n\t\t\t\t\t\t\tname='minPerImpression'\r\n\t\t\t\t\t\t\tvalue={minPerImpression}\r\n\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\tthis.validateAmount(ev.target.value, 'minPerImpression', true)\r\n\t\t\t\t\t\t\t\thandleChange('minPerImpression', ev.target.value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\terror={errMin && !!errMin.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrMin && !!errMin.dirty ? errMin.errMsg : t('CPM_HELPER_TXT')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<DateTimePicker\r\n\t\t\t\t\t\t\temptyLabel={t('SET_CAMPAIGN_START')}\r\n\t\t\t\t\t\t\tdisablePast\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tcalendarIcon\r\n\t\t\t\t\t\t\tlabel={t('CAMPAIGN_STARTS')}\r\n\t\t\t\t\t\t\tminDate={now}\r\n\t\t\t\t\t\t\tmaxDate={to}\r\n\t\t\t\t\t\t\tonChange={val => {\r\n\t\t\t\t\t\t\t\tthis.handleDates('activeFrom', val.valueOf(), true)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tvalue={from || null}\r\n\t\t\t\t\t\t\terror={errFrom && !!errFrom.dirty}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrFrom && !!errFrom.dirty\r\n\t\t\t\t\t\t\t\t\t? errFrom.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('CAMPAIGN_STARTS_FROM_HELPER_TXT')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<DateTimePicker\r\n\t\t\t\t\t\t\temptyLabel={t('SET_CAMPAIGN_END')}\r\n\t\t\t\t\t\t\tdisablePast\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tcalendarIcon\r\n\t\t\t\t\t\t\tlabel={t('CAMPAIGN_ENDS')}\r\n\t\t\t\t\t\t\tminDate={from || now}\r\n\t\t\t\t\t\t\tonChange={val =>\r\n\t\t\t\t\t\t\t\tthis.handleDates('withdrawPeriodStart', val.valueOf(), true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={to || null}\r\n\t\t\t\t\t\t\terror={errTo && !!errTo.dirty}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTo && !!errTo.dirty\r\n\t\t\t\t\t\t\t\t\t? errTo.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('CAMPAIGN_ENDS_HELPER_TXT')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<FormGroup row>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tchecked={!!minTargetingScore}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\t\t\t\t\thandleChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'minTargetingScore',\r\n\t\t\t\t\t\t\t\t\t\t\t\tev.target.checked ? 1 : null\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvalue='minTargetingScore'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel={t('CAMPAIGN_MIN_TARGETING')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaignFinance.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewCampaignFinance = NewCampaignHoc(CampaignFinance)\r\n\r\nexport default connect(mapStateToProps)(Translate(NewCampaignFinance))\r\n","export const styles = theme => {\r\n\treturn {\r\n\t\tdatepickerContrastInput: {\r\n\t\t\tcolor: theme.palette.common.white,\r\n\t\t},\r\n\t\tdatepickerContrastLabel: {\r\n\t\t\tcolor: theme.palette.common.white,\r\n\t\t\t'&$datepickerContrastLabelFocused': {\r\n\t\t\t\tcolor: theme.palette.common.white,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdatepickerContrastLabelFocused: {},\r\n\t\tdatepickerContrastUnderline: {\r\n\t\t\t'&:after': {\r\n\t\t\t\t// borderBottomColor: theme.palette.common.white,\r\n\t\t\t\tborder: '0 !important',\r\n\t\t\t},\r\n\t\t\t'&:before': {\r\n\t\t\t\tborder: '0 !important',\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { TopLoading } from 'components/common/dialog/content'\r\n\r\nexport const WalletAction = ({ t, authType }) => {\r\n\tlet msg = ''\r\n\tlet subMsg\r\n\tswitch (authType) {\r\n\t\tcase AUTH_TYPES.METAMASK.name:\r\n\t\t\tmsg = 'METAMASK_WAITING_ACTION'\r\n\t\t\tsubMsg = 'METAMASK_WAITING_ACTION_INFO'\r\n\t\t\tbreak\r\n\t\tcase AUTH_TYPES.TREZOR.name:\r\n\t\t\tmsg = 'TREZOR_WAITING_ACTION'\r\n\t\t\tbreak\r\n\t\tcase AUTH_TYPES.LEDGER.name:\r\n\t\t\tmsg = 'LEDGER_WAITING_ACTION'\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tmsg = 'WAITING_FOR_USER_ACTION'\r\n\t\t\tbreak\r\n\t}\r\n\r\n\treturn <TopLoading msg={t(msg)} subMsg={t(subMsg)} />\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport NewCampaignHoc from './NewCampaignHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport { WalletAction } from 'components/dashboard/forms/FormsCommon'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n} from 'components/common/dialog/content'\r\nimport { AdUnit } from 'adex-models'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from '../styles'\r\nimport { formatDateTime } from 'helpers/formatters'\r\n\r\nclass CampaignFormPreview extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.save = props.save\r\n\t}\r\n\r\n\tAdUnitsTable = ({ items }) => {\r\n\t\treturn (\r\n\t\t\t<Grid item sm={12}>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<ItemsList\r\n\t\t\t\t\t\tobjModel={AdUnit}\r\n\t\t\t\t\t\titems={items}\r\n\t\t\t\t\t\tlistMode\r\n\t\t\t\t\t\titemType={'AdUnit'}\r\n\t\t\t\t\t\tnoControls\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tnoActions\r\n\t\t\t\t\t\tsortProperties={[]}\r\n\t\t\t\t\t\tviewModeId={'newCampaignAdUnitsPreview'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { account, newItem, t } = this.props\r\n\t\tconst {\r\n\t\t\t// targeting,\r\n\t\t\tadUnits,\r\n\t\t\tvalidators,\r\n\t\t\tdepositAmount,\r\n\t\t\tminPerImpression,\r\n\t\t\t// maxPerImpression,\r\n\t\t\t// depositAsset,\r\n\t\t\twithdrawPeriodStart,\r\n\t\t\tactiveFrom,\r\n\t\t\tminTargetingScore,\r\n\t\t\t// nonce\r\n\t\t} = newItem\r\n\r\n\t\treturn (\r\n\t\t\t<ContentBox>\r\n\t\t\t\t{newItem.temp.waitingAction ? (\r\n\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t<WalletAction t={t} authType={account.wallet.authType} />\r\n\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('owner', { isProp: true })}\r\n\t\t\t\t\t\tright={account.identity.address}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* <PropRow\r\n\t\t\t\t\t\tleft={t('targeting', { isProp: true })}\r\n\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\ttargets={targeting}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t// subHeader={'TARGETING'}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('adUnits', { isProp: true })}\r\n\t\t\t\t\t\tright={<this.AdUnitsTable items={adUnits} />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('validators', { isProp: true })}\r\n\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{validators.map(val => (\r\n\t\t\t\t\t\t\t\t\t<div key={val.id}>{`${val.url} - ${val.id}`}</div>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('depositAmount', { isProp: true })}\r\n\t\t\t\t\t\tright={depositAmount + ' SAI'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('CPM', { isProp: true })}\r\n\t\t\t\t\t\tright={minPerImpression + ' SAI'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* <PropRow\r\n\t\t\t\t\t\tleft={t('maxPerImpression', { isProp: true })}\r\n\t\t\t\t\t\tright={maxPerImpression}\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('activeFrom', { isProp: true })}\r\n\t\t\t\t\t\tright={formatDateTime(activeFrom)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('withdrawPeriodStart', { isProp: true })}\r\n\t\t\t\t\t\tright={formatDateTime(withdrawPeriodStart)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{minTargetingScore && <PropRow right={t('CAMPAIGN_MIN_TARGETING')} />}\r\n\t\t\t\t\t{/* <PropRow\r\n\t\t\t\t\t\tleft={t('created', { isProp: true })}\r\n\t\t\t\t\t\tright={formatDateTime(created)}\r\n\t\t\t\t\t/> */}\r\n\r\n\t\t\t\t\t{/* </Grid> */}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaignFormPreview.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewCampaignFormPreview = NewCampaignHoc(\r\n\twithStyles(styles)(CampaignFormPreview)\r\n)\r\nexport default connect(mapStateToProps)(Translate(NewCampaignFormPreview))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { AdSlot } from 'adex-models'\r\n\r\nexport default function NewAdUnitHoc(Decorated) {\r\n\tclass ItemForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tactive: false,\r\n\t\t\t\tsaved: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value, newValues) => {\r\n\t\t\tthis.props.actions.updateNewItem(\r\n\t\t\t\tthis.props.newItem,\r\n\t\t\t\tnewValues || { [prop]: value },\r\n\t\t\t\t'AdSlot',\r\n\t\t\t\tAdSlot\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tonSave = () => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsave = () => {\r\n\t\t\tconst { actions, newItem } = this.props\r\n\r\n\t\t\tactions.addSlot(newItem)\r\n\r\n\t\t\tthis.onSave()\r\n\t\t\tactions.resetNewItem('AdSlot')\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tthis.onSave()\r\n\t\t\tthis.props.actions.resetNewItem('AdSlot')\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { classes, ...rest } = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItemForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tnewItem: PropTypes.object.isRequired,\r\n\t\ttitle: PropTypes.string,\r\n\t\taddTo: PropTypes.object,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { memory } = state\r\n\t\treturn {\r\n\t\t\tnewItem: new AdSlot(memory.newItem['AdSlot']),\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(ItemForm)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { utils } from 'ethers'\r\nimport { validations, constants, schemas, Joi } from 'adex-models'\r\n\r\nconst { adSlotPost } = schemas\r\n\r\nconst AdTypes = constants.AdUnitsTypes.map(type => {\r\n\treturn {\r\n\t\tvalue: type,\r\n\t\tlabel: type.split('_')[1],\r\n\t}\r\n})\r\n\r\nclass AdSlotBasic extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tthis.validateTitle(newItem.title, false)\r\n\t\tthis.validateDescription(newItem.description, false)\r\n\t\tthis.validateAndUpdateType(false, newItem.type)\r\n\t}\r\n\r\n\tvalidateTitle(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adSlotPost.title)\r\n\r\n\t\tthis.props.validate('title', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateDescription(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adSlotPost.description)\r\n\r\n\t\tthis.props.validate('description', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAndUpdateType = (dirty, value) => {\r\n\t\tconst result = Joi.validate(value, adSlotPost.type)\r\n\r\n\t\tthis.props.handleChange('type', value)\r\n\t\tthis.props.validate('type', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAmount(value = '', prop, dirty, errMsg) {\r\n\t\tconst isValidNumber = validations.isNumberString(value)\r\n\t\tconst isValid = isValidNumber && utils.parseUnits(value, 18)\r\n\r\n\t\tthis.props.validate(prop, {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: errMsg || 'ERR_INVALID_AMOUNT' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tupdateMinPerImpression(value = '') {\r\n\t\tconst { temp } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\t\tnewTemp.minPerImpression = value\r\n\r\n\t\tthis.props.handleChange('temp', newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tnewItem,\r\n\t\t\tinvalidFields,\r\n\t\t\thandleChange,\r\n\t\t\t// nameHelperTxt,\r\n\t\t\t// descriptionHelperTxt\r\n\t\t} = this.props\r\n\t\tconst { type, title, description, temp } = newItem\r\n\t\tconst { minPerImpression } = temp\r\n\t\tconst errTitle = invalidFields['title']\r\n\t\tconst errDescription = invalidFields['description']\r\n\t\tconst errMin = invalidFields['minPerImpression']\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={'Ad Slot ' + t('title', { isProp: true })}\r\n\t\t\t\t\t\t\tname='name'\r\n\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('title', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateTitle(title, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateTitle(title, false)}\r\n\t\t\t\t\t\t\terror={errTitle && !!errTitle.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTitle && !!errTitle.dirty\r\n\t\t\t\t\t\t\t\t\t? errTitle.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('TITLE_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tlabel={t('description', { isProp: true })}\r\n\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('description', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateDescription(description, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateDescription(description, false)}\r\n\t\t\t\t\t\t\terror={errDescription && !!errDescription.dirty}\r\n\t\t\t\t\t\t\tmaxLength={300}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrDescription && !!errDescription.dirty\r\n\t\t\t\t\t\t\t\t\t? errDescription.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('DESCRIPTION_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={this.validateAndUpdateType.bind(this, true)}\r\n\t\t\t\t\t\t\tsource={AdTypes}\r\n\t\t\t\t\t\t\tvalue={type + ''}\r\n\t\t\t\t\t\t\tlabel={t('adType', { isProp: true })}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('MIN_CPM_SLOT_LABEL', { args: ['SAI'] })}\r\n\t\t\t\t\t\t\tname='minPerImpression'\r\n\t\t\t\t\t\t\tvalue={minPerImpression}\r\n\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\tthis.validateAmount(ev.target.value, 'minPerImpression', true)\r\n\t\t\t\t\t\t\t\tthis.updateMinPerImpression(ev.target.value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\terror={errMin && !!errMin.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrMin && !!errMin.dirty\r\n\t\t\t\t\t\t\t\t\t? errMin.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('SLOT_MIN_CPM_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotBasic.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdSlotBasic = NewAdSlotHoc(AdSlotBasic)\r\n\r\nexport default Translate(NewAdSlotBasic)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport ImgForm from 'components/dashboard/forms/ImgForm'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport ValidImageHoc from 'components/dashboard/forms/ValidImageHoc'\r\nimport Collapse from '@material-ui/core/Collapse'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport { schemas, Joi } from 'adex-models'\r\n\r\nconst { adUnitPost } = schemas\r\n\r\nconst getWidAndHightFromType = type => {\r\n\ttype = type || 'legacy_300x250'\r\n\tif (!type) {\r\n\t\treturn {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t}\r\n\t}\r\n\r\n\tconst sizes = type.split('_')[1].split('x')\r\n\treturn {\r\n\t\twidth: parseInt(sizes[0], 10),\r\n\t\theight: parseInt(sizes[1], 10),\r\n\t}\r\n}\r\n\r\nclass AdSlotMedia extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tconst { temp, targetUrl } = newItem\r\n\t\tconst { useFallback } = temp\r\n\r\n\t\tif (useFallback) {\r\n\t\t\tthis.validateImage(useFallback)\r\n\t\t\tthis.validateFallbackUrl(targetUrl, true, useFallback)\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateImage = useFallback => {\r\n\t\tconst { newItem, validate } = this.props\r\n\t\tconst { type, temp } = newItem\r\n\t\tconst { tempUrl } = temp\r\n\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\tconst isValidMediaSize =\r\n\t\t\t!useFallback ||\r\n\t\t\t(tempUrl &&\r\n\t\t\t\t// TODO: validate ration not exact\r\n\t\t\t\ttemp.width === width &&\r\n\t\t\t\ttemp.height === height)\r\n\r\n\t\tvalidate('temp', {\r\n\t\t\tisValid: isValidMediaSize,\r\n\t\t\terr: {\r\n\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t},\r\n\t\t\tdirty: true,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateFallbackUrl = (targetUrl, dirty, useFallback) => {\r\n\t\tconst result = Joi.validate(targetUrl, adUnitPost.targetUrl)\r\n\t\tthis.props.validate('targetUrl', {\r\n\t\t\tisValid: !useFallback || !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\thandleFallbackChange = useFallback => {\r\n\t\tconst { temp, targetUrl } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\t\tnewTemp.useFallback = useFallback\r\n\r\n\t\tthis.props.handleChange('temp', newTemp)\r\n\t\tthis.validateFallbackUrl(targetUrl, null, useFallback)\r\n\t\tthis.validateImage(useFallback)\r\n\t}\r\n\r\n\thandleImgChange = (prop, img) => {\r\n\t\tconst { newItem, handleChange } = this.props\r\n\t\tconst newTemp = { ...newItem.temp, ...img }\r\n\t\thandleChange(prop, newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tnewItem,\r\n\t\t\tt,\r\n\t\t\tvalidateMedia,\r\n\t\t\tinvalidFields,\r\n\t\t\thandleChange,\r\n\t\t} = this.props\r\n\t\tconst { targetUrl, type, temp } = newItem\r\n\t\tconst useFallback = temp.useFallback || false\r\n\t\tconst errImg = this.props.invalidFields['temp']\r\n\t\tconst errFallbackUrl = invalidFields['targetUrl']\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\t\tchecked={useFallback}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => this.handleFallbackChange(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={t('USE_FALLBACK_DATA')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormHelperText>{t('USE_FALLBACK_DATA_INFO')}</FormHelperText>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Collapse in={useFallback}>\r\n\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\tlabel={t('targetUrl', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\tvalue={targetUrl}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => handleChange('targetUrl', ev.target.value)}\r\n\t\t\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\t\t\tthis.validateFallbackUrl(targetUrl, true, useFallback)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\t\t\tthis.validateFallbackUrl(targetUrl, false, useFallback)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\terror={errFallbackUrl && !!errFallbackUrl.dirty}\r\n\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\terrFallbackUrl && !!errFallbackUrl.dirty\r\n\t\t\t\t\t\t\t\t\t\t\t? errFallbackUrl.errMsg\r\n\t\t\t\t\t\t\t\t\t\t\t: t('FALLBACKTARGETURL_HELPER')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t\t\t<ImgForm\r\n\t\t\t\t\t\t\t\t\tlabel={t('SLOT_FALLBACK_MEDIA_LABEL')}\r\n\t\t\t\t\t\t\t\t\timgSrc={temp.tempUrl || ''}\r\n\t\t\t\t\t\t\t\t\tonChange={validateMedia.bind(this, {\r\n\t\t\t\t\t\t\t\t\t\tpropsName: 'temp',\r\n\t\t\t\t\t\t\t\t\t\twidthTarget: width,\r\n\t\t\t\t\t\t\t\t\t\theightTarget: height,\r\n\t\t\t\t\t\t\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\t\t\t\t\t\t\texact: true,\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tonChange: this.handleImgChange,\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tadditionalInfo={t('SLOT_FALLBACK_MEDIA_INFO', {\r\n\t\t\t\t\t\t\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\terrMsg={errImg ? errImg.errMsg : ''}\r\n\t\t\t\t\t\t\t\t\tsize={{\r\n\t\t\t\t\t\t\t\t\t\twidth: width,\r\n\t\t\t\t\t\t\t\t\t\theight: height,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Collapse>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotMedia.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tnewItem: PropTypes.object.isRequired,\r\n}\r\n\r\nconst NewAdSlotMedia = NewAdSlotHoc(ValidImageHoc(AdSlotMedia))\r\n\r\nexport default Translate(NewAdSlotMedia)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Slider from '@material-ui/core/Slider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Autocomplete from 'components/common/autocomplete'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { constants } from 'adex-models'\r\nimport { translate } from 'services/translations/translations'\r\nimport { withStyles } from '@material-ui/core/styles'\r\n\r\nconst autocompleteTagsSingleSelect = () => {\r\n\treturn constants.PredefinedTags.map(tag => {\r\n\t\treturn {\r\n\t\t\tlabel: tag._id,\r\n\t\t\tvalue: tag._id,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst AcTags = autocompleteTagsSingleSelect()\r\n\r\nconst SOURCES = {\r\n\ttags: { src: AcTags, collection: 'tags' },\r\n\tcustom: { src: [], collection: 'tags' },\r\n}\r\n\r\nconst styles = {\r\n\tslider: {\r\n\t\tpadding: '22px 0px',\r\n\t},\r\n\tmarkLabel: {\r\n\t\ttop: '30px',\r\n\t},\r\n}\r\nconst marks = [\r\n\t{\r\n\t\tvalue: 5,\r\n\t\tlabel: 'Low',\r\n\t},\r\n\t{\r\n\t\tvalue: 50,\r\n\t\tlabel: 'Medium',\r\n\t},\r\n\t{\r\n\t\tvalue: 95,\r\n\t\tlabel: 'High',\r\n\t},\r\n]\r\n\r\nconst SourcesSelect = Object.keys(SOURCES).map(key => {\r\n\treturn {\r\n\t\tvalue: {\r\n\t\t\tkey: key, // FOR DROPDOWN\r\n\t\t\tsource: key,\r\n\t\t\tcollection: SOURCES[key].collection,\r\n\t\t\ttarget: { tag: '', score: 1 },\r\n\t\t\tlabel: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\tplaceholder: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t},\r\n\t\tlabel: translate(`ADD_NEW_${key.toUpperCase()}_TARGET`),\r\n\t}\r\n})\r\n\r\nclass AdSlotTargeting extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tconst { targets } = props.newItem.temp || {}\r\n\t\tthis.state = {\r\n\t\t\ttargets: targets || [],\r\n\t\t}\r\n\t}\r\n\r\n\tupdateNewItemCollections(targets) {\r\n\t\tconst collections = [...targets].reduce(\r\n\t\t\t(all, tg) => {\r\n\t\t\t\tconst newCollection = all[tg.collection] || []\r\n\t\t\t\t// NOTE: just skip empty tags\r\n\t\t\t\tif (!!tg.target.tag) {\r\n\t\t\t\t\tnewCollection.push(tg.target)\r\n\t\t\t\t}\r\n\t\t\t\tall[tg.collection] = newCollection\r\n\t\t\t\treturn all\r\n\t\t\t},\r\n\t\t\t{ targeting: [], tags: [] }\r\n\t\t)\r\n\r\n\t\tconst { temp } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\r\n\t\t// Need this to keep the state if user get back\r\n\t\tnewTemp.targets = [...targets]\r\n\t\tcollections.temp = newTemp\r\n\r\n\t\tthis.props.handleChange(null, null, collections)\r\n\t}\r\n\r\n\thandleTargetChange = (index, prop, newValue) => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...newTargets[index].target }\r\n\t\tnewTarget[prop] = newValue\r\n\t\tnewTargets[index] = { ...newTargets[index], target: newTarget }\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tnewTarget = target => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...target }\r\n\t\tnewTarget.key = newTargets.length\r\n\t\tnewTarget.target = { ...target.target }\r\n\t\tnewTargets.push(newTarget)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tremoveTarget = index => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tnewTargets.splice(index, 1)\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t\tthis.validateAutocomplete({\r\n\t\t\tid: `target-${index}`,\r\n\t\t\tisValid: true,\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAutocomplete = ({ id, isValid, dirty }) => {\r\n\t\tthis.props.validate(id, {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'TARGETING_REQUIRED' },\r\n\t\t\tdirty,\r\n\t\t})\r\n\t}\r\n\r\n\ttargetTag = ({\r\n\t\tsource,\r\n\t\tcollection,\r\n\t\tplaceholder,\r\n\t\tlabel,\r\n\t\tindex,\r\n\t\ttarget,\r\n\t\tt,\r\n\t\tclasses,\r\n\t\tinvalidFields,\r\n\t}) => {\r\n\t\tconst id = `target-${index}`\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\tdirection='auto'\r\n\t\t\t\t\t\topenOnClick\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\terror={invalidFields[id] && invalidFields[id].dirty}\r\n\t\t\t\t\t\terrorText={\r\n\t\t\t\t\t\t\tinvalidFields[id] && !!invalidFields[id].dirty\r\n\t\t\t\t\t\t\t\t? invalidFields[id].errMsg\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={newValue => {\r\n\t\t\t\t\t\t\tthis.handleTargetChange(index, 'tag', newValue, collection)\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: newValue,\r\n\t\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonInit={() =>\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: target.tag,\r\n\t\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// validate={validate}\r\n\t\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\tsource={source}\r\n\t\t\t\t\t\tvalue={target.tag}\r\n\t\t\t\t\t\tsuggestionMatch='anywhere'\r\n\t\t\t\t\t\tshowSuggestionsWhenValueIsSet={true}\r\n\t\t\t\t\t\tallowCreate={!source.length}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={11} md={5}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Typography id={`target-score-${index}`}>\r\n\t\t\t\t\t\t\t{/*TODO: Translate target name*/}\r\n\t\t\t\t\t\t\t{t('TARGET_SCORE_LABEL', {\r\n\t\t\t\t\t\t\t\targs: [target.score],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\tclasses={{ root: classes.slider, markLabel: classes.markLabel }}\r\n\t\t\t\t\t\t\taria-labelledby={`target-score-${index}`}\r\n\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\tvalueLabelDisplay='auto'\r\n\t\t\t\t\t\t\tdisabled={!target.tag}\r\n\t\t\t\t\t\t\tvalue={target.score}\r\n\t\t\t\t\t\t\tmarks={marks}\r\n\t\t\t\t\t\t\tonChange={(ev, newValue) =>\r\n\t\t\t\t\t\t\t\tthis.handleTargetChange(index, 'score', newValue, collection)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item container xs={1} md={1} alignItems='center'>\r\n\t\t\t\t\t<IconButton onClick={() => this.removeTarget(index)}>\r\n\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\t// newItem,\r\n\t\t\tclasses,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\t\t// const { targeting, tags } = newItem\r\n\r\n\t\tconst { targets } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t{[...targets].map(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t{ source, collection, label, placeholder, target = {} } = {},\r\n\t\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t\t) => (\r\n\t\t\t\t\t\t\t\t<this.targetTag\r\n\t\t\t\t\t\t\t\t\tkey={index} // TODO\r\n\t\t\t\t\t\t\t\t\tlabel={t(label)}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t(placeholder)}\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tsource={SOURCES[source].src}\r\n\t\t\t\t\t\t\t\t\tcollection={collection}\r\n\t\t\t\t\t\t\t\t\ttarget={target}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tvariant='filled'\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={target => {\r\n\t\t\t\t\t\t\t\tthis.newTarget({ ...target })\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsource={[...SourcesSelect]}\r\n\t\t\t\t\t\t\tvalue={''}\r\n\t\t\t\t\t\t\tlabel={t('NEW_TARGET')}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotTargeting.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdSlotTargeting = NewAdSlotHoc(withStyles(styles)(AdSlotTargeting))\r\n\r\nexport default Translate(NewAdSlotTargeting)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Img from 'components/common/img/Img'\r\nimport UnitTargets from 'components/dashboard/containers/UnitTargets'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n} from 'components/common/dialog/content'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from '../styles'\r\n\r\nconst SlotFallback = ({ img, targetUrl, t, classes }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<PropRow\r\n\t\t\t\tleft={t('SLOT_FALLBACK_IMG_LABEL')}\r\n\t\t\t\tright={\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\timg: classes.imgPreview,\r\n\t\t\t\t\t\t\twrapper: classes.imgPreviewWrapper,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsrc={img.tempUrl || ''}\r\n\t\t\t\t\t\talt={targetUrl}\r\n\t\t\t\t\t\tmediaMime={img.mime}\r\n\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<PropRow\r\n\t\t\t\tleft={t('fallbackAdUrl', { isProp: true })}\r\n\t\t\t\tright={\r\n\t\t\t\t\t<Anchor href={targetUrl} target='_blank'>\r\n\t\t\t\t\t\t{targetUrl}\r\n\t\t\t\t\t</Anchor>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nclass AdSlotPreview extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.save = props.save\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, account, ...rest } = this.props\r\n\t\tconst { newItem, t } = rest\r\n\t\tconst { type, title, description, temp, tags, targetUrl } = newItem\r\n\t\tconst { minPerImpression } = temp\r\n\r\n\t\treturn (\r\n\t\t\t<ContentBox>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('owner', { isProp: true })}\r\n\t\t\t\t\t\tright={account.wallet.address}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow left={t('type', { isProp: true })} right={type} />\r\n\t\t\t\t\t<PropRow left={t('title', { isProp: true })} right={title} />\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('description', { isProp: true })}\r\n\t\t\t\t\t\tright={description}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('MIN_CPM_SLOT_LABEL')}\r\n\t\t\t\t\t\tright={minPerImpression + ' SAI'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{temp.useFallback && (\r\n\t\t\t\t\t\t<SlotFallback\r\n\t\t\t\t\t\t\timg={temp}\r\n\t\t\t\t\t\t\ttargetUrl={targetUrl}\r\n\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{/* </Grid> */}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t{tags && (\r\n\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\tleft={t('tags', { isProp: true })}\r\n\t\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\ttargets={tags}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\t// subHeader={'TARGETING'}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotPreview.propTypes = {\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewAdSlotPreview = NewAdSlotHoc(withStyles(styles)(AdSlotPreview))\r\nexport default connect(mapStateToProps)(Translate(NewAdSlotPreview))\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport FormSteps from 'components/dashboard/forms/FormSteps'\r\nimport WithDialog from 'components/common/dialog/WithDialog'\r\nimport { AdUnit, AdSlot, Campaign } from 'adex-models'\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport NewAdUnitHoc from './AdUnit/NewAdUnitHoc'\r\nimport AdUnitBasic from './AdUnit/AdUnitBasic'\r\nimport AdUnitMedia from './AdUnit/AdUnitMedia'\r\nimport AdUnitTargeting from './AdUnit/AdUnitTargeting'\r\nimport AdUnitFormPreview from './AdUnit/AdUnitFormPreview'\r\nimport NewCampaignHoc from './Campaign/NewCampaignHoc'\r\nimport CampaignUnits from './Campaign/CampaignUnits'\r\n// import CampaignTargeting from './Campaign/CampaignTargeting'\r\nimport CampaignFinance from './Campaign/CampaignFinance'\r\nimport CampaignFormPreview from './Campaign/CampaignFormPreview'\r\nimport NewAdSlotHoc from './AdSlot/NewAdSlotHoc'\r\nimport AdSlotBasic from './AdSlot/AdSlotBasic'\r\nimport AdSlotMedia from './AdSlot/AdSlotMedia'\r\nimport AdSlotTargeting from './AdSlot/AdSlotTargeting'\r\nimport AdSlotPreview from './AdSlot/AdSlotPreview'\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty'\r\n\r\nconst SaveBtn = ({ newItem, t, save, ...rest }) => {\r\n\treturn (\r\n\t\t<Button color='primary' onClick={save}>\r\n\t\t\t{/*TODO: withStyles */}\r\n\t\t\t<SaveIcon style={{ marginRight: 8 }} />\r\n\t\t\t{t('SAVE')}\r\n\t\t</Button>\r\n\t)\r\n}\r\n\r\nconst SendBtn = ({ saveBtnLabel, saveBtnIcon, newItem, t, save, ...rest }) => {\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tcolor='primary'\r\n\t\t\tonClick={save}\r\n\t\t\tdisabled={newItem.temp.waitingAction}\r\n\t\t>\r\n\t\t\t{newItem.temp.waitingAction ? (\r\n\t\t\t\t<HourglassEmptyIcon />\r\n\t\t\t) : (\r\n\t\t\t\tsaveBtnIcon || <SaveIcon style={{ marginRight: 8 }} />\r\n\t\t\t)}\r\n\t\t\t{t(saveBtnLabel || 'OPEN_CAMPAIGN')}\r\n\t\t</Button>\r\n\t)\r\n}\r\n\r\nconst SaveBtnWithAdUnit = NewAdUnitHoc(SaveBtn)\r\nconst SaveBtnWithCampaign = NewCampaignHoc(SendBtn)\r\nconst SaveBtnWithAdSlot = NewAdSlotHoc(SaveBtn)\r\n\r\nconst CancelBtn = ({ ...props }) => {\r\n\treturn <Button onClick={props.cancel}>{props.t('CANCEL')}</Button>\r\n}\r\n\r\nconst CancelBtnWithItem = NewAdUnitHoc(CancelBtn)\r\nconst CancelBtnWithCampaign = NewCampaignHoc(CancelBtn)\r\nconst CancelBtnWithAdSlot = NewAdSlotHoc(CancelBtn)\r\n\r\nconst dialogCommon = {\r\n\tdarkerBackground: true,\r\n\ticon: <AddIcon />,\r\n}\r\n\r\n// Ad unit\r\nexport const NewUnitSteps = props => (\r\n\t<FormSteps\r\n\t\t{...props}\r\n\t\tSaveBtn={SaveBtnWithAdUnit}\r\n\t\tCancelBtn={CancelBtnWithItem}\r\n\t\tvalidateIdBase={'new-AdUnit-'}\r\n\t\titemType={'AdUnit'}\r\n\t\tstepsId={'new-adunit-'}\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'UNIT_BASIC_STEP', page: AdUnitBasic },\r\n\t\t\t{ title: 'UNIT_MEDIA_STEP', page: AdUnitMedia },\r\n\t\t\t{ title: 'UNIT_TARGETS_STEP', page: AdUnitTargeting },\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_SAVE_ITEM',\r\n\t\t\tpage: AdUnitFormPreview,\r\n\t\t}}\r\n\t\timgLabel='UNIT_BANNER_IMG_LABEL'\r\n\t\tnoDefaultImg\r\n\t\titemModel={AdUnit}\r\n\t/>\r\n)\r\n\r\nconst NewUnitStepsWithDialog = WithDialog(NewUnitSteps)\r\n\r\nexport const NewUnitDialog = props => (\r\n\t<NewUnitStepsWithDialog\r\n\t\t{...props}\r\n\t\t{...dialogCommon}\r\n\t\tbtnLabel='NEW_UNIT'\r\n\t\ttitle='CREATE_NEW_UNIT'\r\n\t/>\r\n)\r\n\r\nconst copyProps = {\r\n\tdarkerBackground: true,\r\n\ticon: <FileCopyIcon />,\r\n}\r\n\r\nexport const NewCloneUnitDialog = props => (\r\n\t<NewUnitStepsWithDialog {...props} {...copyProps} title='CLONE_AD_UNIT' />\r\n)\r\n\r\n// Campaign\r\nexport const NewCampaignSteps = props => (\r\n\t<FormSteps\r\n\t\t{...props}\r\n\t\tSaveBtn={SaveBtnWithCampaign}\r\n\t\tCancelBtn={CancelBtnWithCampaign}\r\n\t\tvalidateIdBase={'new-Campaign-'}\r\n\t\titemType={'Campaign'}\r\n\t\tstepsId={'new-campaign-'}\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'CAMPAIGN_UNITS_STEP', page: CampaignUnits },\r\n\t\t\t// NOTE: Only at ad units at the moment\r\n\t\t\t// { title: 'CAMPAIGN_TARGETING_STEP', page: CampaignTargeting },\r\n\t\t\t{ title: 'CAMPAIGN_FINANCE_STEP', page: CampaignFinance },\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_SAVE_ITEM',\r\n\t\t\tpage: CampaignFormPreview,\r\n\t\t}}\r\n\t\titemModel={Campaign}\r\n\t\timgAdditionalInfo='CAMPAIGN_IMG_ADDITIONAL_INFO'\r\n\t/>\r\n)\r\n\r\nconst NewCampaignStepsWithDialog = WithDialog(NewCampaignSteps)\r\n\r\nexport const NewCampaignDialog = props => (\r\n\t<NewCampaignStepsWithDialog\r\n\t\t{...props}\r\n\t\t{...dialogCommon}\r\n\t\tbtnLabel='NEW_CAMPAIGN'\r\n\t\ttitle='CREATE_NEW_CAMPAIGN'\r\n\t/>\r\n)\r\n\r\n// Ad slot\r\nexport const NewSlotSteps = props => (\r\n\t<FormSteps\r\n\t\t{...props}\r\n\t\tSaveBtn={SaveBtnWithAdSlot}\r\n\t\tCancelBtn={CancelBtnWithAdSlot}\r\n\t\tvalidateIdBase={'new-AdUnit-'}\r\n\t\titemType={'AdSlot'}\r\n\t\tstepsId={'new-slot-'}\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'SLOT_BASIC_STEP', page: AdSlotBasic },\r\n\t\t\t{ title: 'SLOT_PASSBACK_STEP', page: AdSlotMedia },\r\n\t\t\t{ title: 'SLOT_TAGS_STEP', page: AdSlotTargeting },\r\n\t\t]}\r\n\t\tstepsPreviewPage={{ title: 'PREVIEW_AND_SAVE_ITEM', page: AdSlotPreview }}\r\n\t\timgLabel='SLOT_AVATAR_IMG_LABEL'\r\n\t\timgAdditionalInfo='SLOT_AVATAR_IMG_INFO'\r\n\t\tdescriptionHelperTxt='SLOT_DESCRIPTION_HELPER'\r\n\t\titemModel={AdSlot}\r\n\t/>\r\n)\r\n\r\nconst NewSlotStepsWithDialog = WithDialog(NewSlotSteps)\r\n\r\nexport const NewSlotDialog = props => (\r\n\t<NewSlotStepsWithDialog\r\n\t\t{...props}\r\n\t\t{...dialogCommon}\r\n\t\tbtnLabel='NEW_SLOT'\r\n\t\ttitle='CREATE_NEW_SLOT'\r\n\t/>\r\n)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ListWithControls from 'components/dashboard/containers/Lists/ListWithControls'\r\nimport classnames from 'classnames'\r\nimport TableCellMui from '@material-ui/core/TableCell'\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Button from '@material-ui/core/Button'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n// import IconButton from '@material-ui/core/IconButton'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport Img from 'components/common/img/Img'\r\nimport Rows from 'components/dashboard/collection/Rows'\r\nimport Translate from 'components/translate/Translate'\r\n// import DeleteIcon from '@material-ui/icons/Delete'\r\n// import { FileCopy } from '@material-ui/icons'\r\n// import ArchiveIcon from '@material-ui/icons/Archive'\r\n// import UnarchiveIcon from '@material-ui/icons/Unarchive'\r\n// import RemoveCircleOutlineIcon from '@material-ui/icons/RemoveCircleOutline'\r\n// import AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { formatDateTime, formatTokenAmount } from 'helpers/formatters'\r\nimport { bigNumberify } from 'ethers/utils'\r\n// import { NewUnitDialog } from 'components/dashboard/forms/items/NewItems'\r\nimport { NewCloneUnitDialog } from '../../forms/items/NewItems'\r\nimport { AdUnit } from 'adex-models'\r\n\r\nconst TableCell = ({ children, ...rest }) => (\r\n\t<TableCellMui {...rest}>{!!children && children}</TableCellMui>\r\n)\r\n\r\nconst RRTableCell = withReactRouterLink(TableCell)\r\nconst RRButton = withReactRouterLink(Button)\r\n\r\nclass ItemsList extends Component {\r\n\trenderTableHead = ({ selected }) => {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tselectedItems,\r\n\t\t\tselectMode,\r\n\t\t\tnoActions,\r\n\t\t\t// itemType\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<TableHead>\r\n\t\t\t\t<TableRow>\r\n\t\t\t\t\t{selectMode && (\r\n\t\t\t\t\t\t<TableCell>{Object.keys(selectedItems).length || ''}</TableCell>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<TableCell> {t('PROP_MEDIA')}</TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_TITLE')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_TYPE')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_CREATED')} </TableCell>\r\n\r\n\t\t\t\t\t{!noActions && <TableCell> {t('ACTIONS')} </TableCell>}\r\n\t\t\t\t</TableRow>\r\n\t\t\t</TableHead>\r\n\t\t)\r\n\t}\r\n\r\n\trenderCampaignTableHead = ({ selected }) => {\r\n\t\tconst { t, selectedItems, selectMode, noActions } = this.props\r\n\t\treturn (\r\n\t\t\t<TableHead>\r\n\t\t\t\t<TableRow>\r\n\t\t\t\t\t{selectMode && (\r\n\t\t\t\t\t\t<TableCell>{Object.keys(selectedItems).length || ''}</TableCell>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<TableCell> {t('PROP_MEDIA')}</TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_STATUS')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_DEPOSIT')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_DISTRIBUTED', { args: ['%'] })} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_CPM')} </TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{/* {t('PROP_CREATED')}/ <br /> */}\r\n\t\t\t\t\t\t{t('PROP_STARTS')}/ <br />\r\n\t\t\t\t\t\t{t('PROP_ENDS')}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t{!noActions && <TableCell> {t('ACTIONS')} </TableCell>}\r\n\t\t\t\t</TableRow>\r\n\t\t\t</TableHead>\r\n\t\t)\r\n\t}\r\n\r\n\trenderTableRow = (item, index, { to, selected }) => {\r\n\t\tconst {\r\n\t\t\t// t,\r\n\t\t\tclasses,\r\n\t\t\tselectMode,\r\n\t\t\tselectedItems,\r\n\t\t\tonSelect,\r\n\t\t\tnoActions,\r\n\t\t} = this.props\r\n\t\t// const ImagCell = noActions ? TableCell : RRTableCell\r\n\r\n\t\treturn (\r\n\t\t\t<TableRow key={item.ipfs || index} selected={selectedItems[item.ipfs]}>\r\n\t\t\t\t{selectMode && (\r\n\t\t\t\t\t<TableCell padding='checkbox'>\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t// indeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\t\tchecked={!!selectedItems[item.ipfs]}\r\n\t\t\t\t\t\t\tonChange={event => {\r\n\t\t\t\t\t\t\t\tonSelect(item.ipfs, event.target.checked)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tfullScreenOnClick={true}\r\n\t\t\t\t\t\tclassName={classnames(classes.cellImg)}\r\n\t\t\t\t\t\tsrc={item.mediaUrl || item.fallbackMediaiUrl || ''}\r\n\t\t\t\t\t\talt={item.title}\r\n\t\t\t\t\t\tmediaMime={item.mediaMime}\r\n\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<RRTableCell\r\n\t\t\t\t\t// className={tableTheme.link}\r\n\t\t\t\t\tto={to}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item.title}\r\n\t\t\t\t</RRTableCell>\r\n\t\t\t\t<TableCell> {item.type} </TableCell>\r\n\t\t\t\t<TableCell> {formatDateTime(item.created)} </TableCell>\r\n\t\t\t\t{!noActions && this.renderActions({ item, to })}\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\trenderCampaignTableRow = (item, index, { to, selected }) => {\r\n\t\tconst {\r\n\t\t\tselectMode,\r\n\t\t\tselectedItems,\r\n\t\t\tonSelect,\r\n\t\t\tnoActions,\r\n\t\t\tclasses,\r\n\t\t} = this.props\r\n\r\n\t\tconst status = item.status || {}\r\n\t\tconst firstUnit = item.adUnits[0] || {}\r\n\t\tconst mediaUrl = firstUnit.mediaUrl || ''\r\n\t\tconst mediaMime = firstUnit.mediaMime || ''\r\n\r\n\t\treturn (\r\n\t\t\t<TableRow key={item.ipfs || index} selected={selectedItems[item.ipfs]}>\r\n\t\t\t\t{selectMode && (\r\n\t\t\t\t\t<TableCell padding='checkbox'>\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t// indeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\t\tchecked={!!selectedItems[item.ipfs]}\r\n\t\t\t\t\t\t\tonChange={event => {\r\n\t\t\t\t\t\t\t\tonSelect(item.ipfs, event.target.checked)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tfullScreenOnClick={true}\r\n\t\t\t\t\t\tclassName={classnames(classes.cellImg)}\r\n\t\t\t\t\t\tsrc={mediaUrl}\r\n\t\t\t\t\t\talt={item.title}\r\n\t\t\t\t\t\tmediaMime={mediaMime}\r\n\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell> {status.name} </TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{formatTokenAmount(item.depositAmount, 18, true)} SAI{' '}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{((status.fundsDistributedRatio || 0) / 10).toFixed(2)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{formatTokenAmount(\r\n\t\t\t\t\t\tbigNumberify(item.minPerImpression).mul(1000),\r\n\t\t\t\t\t\t18,\r\n\t\t\t\t\t\ttrue\r\n\t\t\t\t\t)}{' '}\r\n\t\t\t\t\tSAI\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{/* {formatDateTime(item.created)} <br /> */}\r\n\t\t\t\t\t{formatDateTime(item.activeFrom)} <br />\r\n\t\t\t\t\t{formatDateTime(item.withdrawPeriodStart)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{!noActions && this.renderActions({ item, to })}\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\trenderActions = ({ item, to }) => {\r\n\t\tconst { t, actions, itemType } = this.props\r\n\t\t// const itemName = item.title\r\n\t\t// const itemTypeName = t(itemType, { isProp: true })\r\n\r\n\t\treturn (\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\ttitle={t('LABEL_VIEW')}\r\n\t\t\t\t\t// placement='top'\r\n\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t>\r\n\t\t\t\t\t<RRButton to={to} variant='contained' color='primary'>\r\n\t\t\t\t\t\t{t('LABEL_VIEW')}\r\n\t\t\t\t\t</RRButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t{itemType === 'AdUnit' ? (\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\ttitle={t('TOOLTIP_CLONE')}\r\n\t\t\t\t\t\t// placement='top'\r\n\t\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<NewCloneUnitDialog\r\n\t\t\t\t\t\t\t\tonBeforeOpen={() =>\r\n\t\t\t\t\t\t\t\t\tactions.cloneItem({ item, itemType, objModel: AdUnit })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ticonButton\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{/* {!item.archived &&\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\ttitle={t('TOOLTIP_ARCHIVE')}\r\n\t\t\t\t\t\t// placement='top'\r\n\t\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t// label={t('ARCHIVE')}\r\n\t\t\t\t\t\t\t// className={RTButtonTheme.danger}\r\n\t\t\t\t\t\t\tonClick={actions.confirmAction.bind(this,\r\n\t\t\t\t\t\t\t\tactions.archiveItem.bind(this, { item: item, authSig: account.wallet.authSig }),\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tconfirmLabel: t('CONFIRM_YES'),\r\n\t\t\t\t\t\t\t\t\tcancelLabel: t('CONFIRM_NO'),\r\n\t\t\t\t\t\t\t\t\ttext: t('ARCHIVE_ITEM', { args: [itemTypeName, itemName] }),\r\n\t\t\t\t\t\t\t\t\ttitle: t('CONFIRM_SURE')\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ArchiveIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t}\r\n\t\t\t\t{item.archived &&\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\ttitle={t('TOOLTIP_UNARCHIVE')}\r\n\t\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t\t// placement='top'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t// label={t('UNARCHIVE')}\r\n\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\tonClick={actions.confirmAction.bind(this,\r\n\t\t\t\t\t\t\t\tactions.unarchiveItem.bind(this, { item: item, authSig: account.wallet.authSig }),\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tconfirmLabel: t('CONFIRM_YES'),\r\n\t\t\t\t\t\t\t\t\tcancelLabel: t('CONFIRM_NO'),\r\n\t\t\t\t\t\t\t\t\ttext: t('UNARCHIVE_ITEM', { args: [itemType, itemName] }),\r\n\t\t\t\t\t\t\t\t\ttitle: t('CONFIRM_SURE')\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<UnarchiveIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t} */}\r\n\t\t\t</TableCell>\r\n\t\t)\r\n\t}\r\n\r\n\trenderRows = items => {\r\n\t\tconst { itemType, side, padding } = this.props\r\n\t\treturn (\r\n\t\t\t<Rows\r\n\t\t\t\tpadding={padding}\r\n\t\t\t\tside={side}\r\n\t\t\t\trows={items}\r\n\t\t\t\titemType={itemType}\r\n\t\t\t\trowRenderer={\r\n\t\t\t\t\titemType === 'Campaign'\r\n\t\t\t\t\t\t? this.renderCampaignTableRow\r\n\t\t\t\t\t\t: this.renderTableRow\r\n\t\t\t\t}\r\n\t\t\t\ttableHeadRenderer={\r\n\t\t\t\t\titemType === 'Campaign'\r\n\t\t\t\t\t\t? this.renderCampaignTableHead\r\n\t\t\t\t\t\t: this.renderTableHead\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { items, viewModeId, side, noControls, classes, ...rest } = this.props\r\n\r\n\t\tif (noControls) {\r\n\t\t\treturn this.renderRows(items)\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<ListWithControls\r\n\t\t\t\t{...rest}\r\n\t\t\t\titems={items}\r\n\t\t\t\tviewModeId={viewModeId}\r\n\t\t\t\tarchive\r\n\t\t\t\trenderRows={this.renderRows}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nItemsList.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\tviewModeId: PropTypes.string.isRequired,\r\n\theader: PropTypes.string,\r\n\tobjModel: PropTypes.func.isRequired,\r\n\titemType: PropTypes.string.isRequired,\r\n\tsortProperties: PropTypes.array.isRequired,\r\n\tselectedItems: PropTypes.object,\r\n\tselectMode: PropTypes.bool,\r\n\tonSelect: PropTypes.func,\r\n\tnoControls: PropTypes.bool,\r\n\tnoActions: PropTypes.bool,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst memory = state.memory\r\n\treturn {\r\n\t\tside: memory.nav.side,\r\n\t\tselectedItems: props.selectedItems || {},\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(ItemsList)))\r\n","export const styles = () => {\r\n\treturn {\r\n\t\tcellImg: {\r\n\t\t\twidth: 'auto',\r\n\t\t\theight: 'auto',\r\n\t\t\tmaxHeight: 70,\r\n\t\t\tmaxWidth: 180,\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t}\r\n}\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\tconst aspect = '56.25%'\r\n\r\n\treturn {\r\n\t\tcard: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\twidth: 320,\r\n\t\t\tdisplay: 'block',\r\n\t\t\tposition: 'relative',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\t'@media(max-width:380px)': {\r\n\t\t\t\tmargin: 0,\r\n\t\t\t\tmarginBottom: spacing,\r\n\t\t\t},\r\n\t\t},\r\n\t\tmediaRoot: {\r\n\t\t\theight: 0,\r\n\t\t\tpaddingTop: aspect, // 16:9\r\n\t\t\tposition: 'relative',\r\n\t\t\toverflow: 'hidden',\r\n\t\t},\r\n\t\timg: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tmargin: 'auto',\r\n\t\t\t// minWidth: '50%',\r\n\t\t\t// minHeight: '50%',\r\n\t\t\theight: 'auto',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\twidth: 'auto',\r\n\t\t\tmaxHeight: '100%',\r\n\t\t},\r\n\t\tbasicInfo: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'start',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t},\r\n\t\tbuttonRight: {\r\n\t\t\tmarginLeft: spacing,\r\n\t\t},\r\n\t\terror: {\r\n\t\t\tcolor: theme.palette.error.main,\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t},\r\n\t\teditIcon: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tmarginTop: `calc(56.25% - ${40 + spacing}px)`,\r\n\t\t\ttop: 0,\r\n\t\t\tright: spacing,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport CardMedia from '@material-ui/core/CardMedia'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Button from '@material-ui/core/Button'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport Img from 'components/common/img/Img'\r\nimport { validUrl } from 'helpers/validators'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n// import { utils } from 'ethers'\r\nimport { formatDateTime, formatTokenAmount } from 'helpers/formatters'\r\nimport { bigNumberify } from 'ethers/utils'\r\nimport { contracts } from 'services/smart-contracts/contractsCfg'\r\nimport { validations } from 'adex-models'\r\nimport { utils } from 'ethers'\r\n\r\nconst { DAI } = contracts\r\n\r\nconst FallbackAdData = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\tisDemo,\r\n\tactiveFields,\r\n\tsetActiveFields,\r\n\tvalidate,\r\n\tinvalidFields,\r\n\ttoggleFallbackImgEdit,\r\n\thandleChange,\r\n\t...rest\r\n}) => {\r\n\tconst errFallbackAdUrl = invalidFields['fallbackAdUrl']\r\n\r\n\treturn (\r\n\t\t<Card className={classes.card} raised={false}>\r\n\t\t\t<CardMedia classes={{ root: classes.mediaRoot }} src=''>\r\n\t\t\t\t<Img\r\n\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\tclassName={classes.img}\r\n\t\t\t\t\tsrc={item.fallbackMediaUrl}\r\n\t\t\t\t\talt={item.fallbackTargetUrl}\r\n\t\t\t\t\tstyle={{ cursor: 'pointer' }}\r\n\t\t\t\t/>\r\n\t\t\t</CardMedia>\r\n\t\t\t{/* <Fab\r\n\t\t\t\tmini\r\n\t\t\t\tcolor='secondary'\r\n\t\t\t\tonClick={toggleFallbackImgEdit}\r\n\t\t\t\tclassName={classes.editIcon}\r\n\t\t\t\tdisabled={isDemo}\r\n\t\t\t>\r\n\t\t\t\t<EditIcon />\r\n\t\t\t</Fab> */}\r\n\t\t\t<CardContent>\r\n\t\t\t\t{activeFields.fallbackTargetUrl ? (\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t// required\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tlabel={t('fallbackTargetUrl', { isProp: true })}\r\n\t\t\t\t\t\tvalue={item.fallbackTargetUrl || ''}\r\n\t\t\t\t\t\tonChange={ev => handleChange('fallbackTargetUrl', ev.target.value)}\r\n\t\t\t\t\t\t// maxLength={1024}\r\n\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\tsetActiveFields('fallbackTargetUrl', false)\r\n\t\t\t\t\t\t\tvalidate('fallbackTargetUrl', {\r\n\t\t\t\t\t\t\t\tisValid:\r\n\t\t\t\t\t\t\t\t\t!item.fallbackTargetUrl || validUrl(item.fallbackTargetUrl),\r\n\t\t\t\t\t\t\t\terr: { msg: 'ERR_INVALID_URL' },\r\n\t\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\trest.validate('fallbackTargetUrl', {\r\n\t\t\t\t\t\t\t\tisValid:\r\n\t\t\t\t\t\t\t\t\t!item.fallbackTargetUrl || validUrl(item.fallbackTargetUrl),\r\n\t\t\t\t\t\t\t\terr: { msg: 'ERR_INVALID_URL' },\r\n\t\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\terrFallbackAdUrl && !!errFallbackAdUrl.dirty ? (\r\n\t\t\t\t\t\t\t\t<span> {errFallbackAdUrl.errMsg} </span>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t!errFallbackAdUrl || !errFallbackAdUrl.dirty ? (\r\n\t\t\t\t\t\t\t\t<div>{t('SLOT_FALLBACK_AD_URL_DESCRIPTION')}</div>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{item.fallbackTargetUrl ? (\r\n\t\t\t\t\t\t\t\t<Anchor href={item.fallbackTargetUrl} target='_blank'>\r\n\t\t\t\t\t\t\t\t\t{item.fallbackTargetUrl}\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<span style={{ opacity: 0.3 }}>\r\n\t\t\t\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t\t\t\t{t('NO_FALLBACK_URL_YET')}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{/* <span>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t// disabled={!canEditImg}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\trest.setActiveFields('fallbackTargetUrl', true)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</span> */}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{errFallbackAdUrl && !!errFallbackAdUrl.dirty ? (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<span className={classes.error}>\r\n\t\t\t\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t\t\t\t{errFallbackAdUrl.errMsg}{' '}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</CardContent>\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nconst ValidatedFallbackAdData = ValidItemHoc(FallbackAdData)\r\n\r\nconst updateItemTemp = ({ prop = '', value = '', item = {} } = {}) => {\r\n\tconst { temp } = item\r\n\tconst newTemp = { ...temp }\r\n\tnewTemp[prop] = value\r\n\r\n\treturn newTemp\r\n}\r\n\r\nconst validateAmount = (value = '', prop, dirty, errMsg, validate) => {\r\n\tconst isValidNumber = validations.isNumberString(value)\r\n\tconst isValid = isValidNumber && utils.parseUnits(value, 18)\r\n\r\n\tvalidate(prop, {\r\n\t\tisValid: isValid,\r\n\t\terr: { msg: errMsg || 'ERR_INVALID_AMOUNT' },\r\n\t\tdirty: dirty,\r\n\t})\r\n}\r\n\r\nconst SlotMinCPM = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\tisDemo,\r\n\tactiveFields,\r\n\tsetActiveFields,\r\n\tvalidate,\r\n\tinvalidFields,\r\n\ttoggleFallbackImgEdit,\r\n\thandleChange,\r\n\t...rest\r\n}) => {\r\n\tconst errMin = invalidFields['minPerImpression']\r\n\tconst minCPM = formatTokenAmount(\r\n\t\tbigNumberify((item.minPerImpression || {})[DAI.address] || '0').mul(1000),\r\n\t\t18,\r\n\t\ttrue\r\n\t)\r\n\r\n\tconst minPerImpression =\r\n\t\titem.temp.minPerImpression !== undefined\r\n\t\t\t? item.temp.minPerImpression\r\n\t\t\t: minCPM\r\n\r\n\treturn (\r\n\t\t<FormControl\r\n\t\t\tfullWidth\r\n\t\t\tclassName={classes.textField}\r\n\t\t\tmargin='dense'\r\n\t\t\terror={!!errMin}\r\n\t\t>\r\n\t\t\t<InputLabel>{t('MIN_CPM_SLOT_LABEL', { args: ['SAI'] })}</InputLabel>\r\n\t\t\t<Input\r\n\t\t\t\tfullWidth\r\n\t\t\t\tautoFocus\r\n\t\t\t\ttype='text'\r\n\t\t\t\tname={'minPerImpression'}\r\n\t\t\t\tvalue={minPerImpression || ''}\r\n\t\t\t\tonChange={ev => {\r\n\t\t\t\t\tvalidateAmount(\r\n\t\t\t\t\t\tev.target.value,\r\n\t\t\t\t\t\t'minPerImpression',\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t'',\r\n\t\t\t\t\t\tvalidate\r\n\t\t\t\t\t)\r\n\t\t\t\t\thandleChange(\r\n\t\t\t\t\t\t'temp',\r\n\t\t\t\t\t\tupdateItemTemp({\r\n\t\t\t\t\t\t\tprop: 'minPerImpression',\r\n\t\t\t\t\t\t\tvalue: ev.target.value,\r\n\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tmaxLength={1024}\r\n\t\t\t\tonBlur={ev => {\r\n\t\t\t\t\tsetActiveFields('minPerImpression', false)\r\n\t\t\t\t}}\r\n\t\t\t\tdisabled={!activeFields.minPerImpression}\r\n\t\t\t\tendAdornment={\r\n\t\t\t\t\t<InputAdornment position='end'>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\tdisabled={activeFields['minPerImpression'] || isDemo}\r\n\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\tonClick={ev => setActiveFields('minPerImpression', true)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\r\n\t\t\t<FormHelperText>\r\n\t\t\t\t{errMin && !!errMin.errMsg\r\n\t\t\t\t\t? t(errMin.errMsg, { args: errMin.errMsgArgs })\r\n\t\t\t\t\t: t('SLOT_MIN_CPM_HELPER')}\r\n\t\t\t</FormHelperText>\r\n\t\t</FormControl>\r\n\t)\r\n}\r\n\r\nconst ValidatedSlotMinCPM = ValidItemHoc(SlotMinCPM)\r\n\r\nconst MediaCard = ({\r\n\tclasses,\r\n\tmediaUrl,\r\n\tmediaMime,\r\n\ttitle,\r\n\tcanEditImg,\r\n\ttoggleImgEdit,\r\n\turl,\r\n}) => (\r\n\t<Card className={classes.card} raised={false}>\r\n\t\t<CardMedia classes={{ root: classes.mediaRoot }}>\r\n\t\t\t<Img\r\n\t\t\t\tallowFullscreen={true}\r\n\t\t\t\tsrc={mediaUrl}\r\n\t\t\t\talt={title}\r\n\t\t\t\tclassName={classes.img}\r\n\t\t\t\tmediaMime={mediaMime}\r\n\t\t\t\tallowVideo\r\n\t\t\t/>\r\n\t\t</CardMedia>\r\n\t\t{canEditImg && (\r\n\t\t\t<Button\r\n\t\t\t\tvariant='fab'\r\n\t\t\t\tmini\r\n\t\t\t\tcolor='secondary'\r\n\t\t\t\tonClick={toggleImgEdit}\r\n\t\t\t\tclassName={classes.editIcon}\r\n\t\t\t>\r\n\t\t\t\t<EditIcon />\r\n\t\t\t</Button>\r\n\t\t)}\r\n\r\n\t\t{url && (\r\n\t\t\t<CardContent>\r\n\t\t\t\t<Anchor href={url} target='_blank'>\r\n\t\t\t\t\t{url}\r\n\t\t\t\t</Anchor>\r\n\t\t\t</CardContent>\r\n\t\t)}\r\n\t</Card>\r\n)\r\n\r\nconst basicProps = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\titemType,\r\n\tactiveFields,\r\n\t...rest\r\n}) => {\r\n\tconst mediaUrl = item.mediaUrl\r\n\tconst mediaMime = item.mediaMime\r\n\r\n\treturn (\r\n\t\t<Grid container spacing={2}>\r\n\t\t\t<Grid item xs={12} sm={12} md={12} lg={7}>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12} sm={5} md={5} lg={5}>\r\n\t\t\t\t\t\t{itemType === 'AdSlot' ? (\r\n\t\t\t\t\t\t\t<ValidatedFallbackAdData\r\n\t\t\t\t\t\t\t\tvalidateId={item._id}\r\n\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\tactiveFields={activeFields}\r\n\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<MediaCard\r\n\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\tmediaUrl={mediaUrl}\r\n\t\t\t\t\t\t\t\tmediaMime={mediaMime}\r\n\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\ttoggleImgEdit={rest.toggleImgEdit}\r\n\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} sm={7} md={7} lg={7}>\r\n\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t{itemType === 'AdSlot' && (\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<ValidatedSlotMinCPM\r\n\t\t\t\t\t\t\t\t\t\tvalidateId={item._id}\r\n\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\t\t\tactiveFields={activeFields}\r\n\t\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\tvalue={item.type}\r\n\t\t\t\t\t\t\t\t\tlabel={t('type', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t{Array.isArray(item.tags) && (\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\tvalue={item.tags\r\n\t\t\t\t\t\t\t\t\t\t\t.map(tag => `\"${tag.tag}(${tag.score})\"`)\r\n\t\t\t\t\t\t\t\t\t\t\t.join(',\\n')}\r\n\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\tt('tags', { isProp: true }) + ` (${item.tags.length})`\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\trows={7}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={12} sm={12} md={12} lg={5}>\r\n\t\t\t\t{rightComponent}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport const BasicProps = withStyles(styles)(basicProps)\r\n\r\nconst campaignProps = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\titemType,\r\n\t...rest\r\n}) => {\r\n\tconst mediaUrl = item.mediaUrl\r\n\tconst status = item.status || {}\r\n\t// console.log('item', item)\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={8}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className={classes.basicInfo}>\r\n\t\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12} sm={5} md={5} lg={5}>\r\n\t\t\t\t\t\t\t\t\t<MediaCard\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tmediaUrl={mediaUrl}\r\n\t\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\t\t\ttoggleImgEdit={rest.toggleImgEdit}\r\n\t\t\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12} sm={7} md={7} lg={7}>\r\n\t\t\t\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={6}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('id', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={formatDateTime(item.created)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('created', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={formatDateTime(item.activeFrom)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('activeFrom', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={formatDateTime(item.withdrawPeriodStart)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('withdrawPeriodStart', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={6}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={status.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('status', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(status.fundsDistributedRatio || 0) / 10\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('PROP_DISTRIBUTED', { args: ['%'] })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatTokenAmount(item.depositAmount, 18) + ' SAI'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('depositAmount', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatTokenAmount(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbigNumberify(item.minPerImpression).mul(1000),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t18,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + ' SAI'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('CPM', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={4}>\r\n\t\t\t\t\t{rightComponent}\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n// ((status.fundsDistributedRatio || 0) / 10).toFixed(2)\r\nexport const CampaignProps = withStyles(styles)(campaignProps)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ItemHoc from 'components/dashboard/containers/ItemHoc'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport Translate from 'components/translate/Translate'\r\nimport Button from '@material-ui/core/Button'\r\nimport { AdUnit as AdUnitModel, Campaign as CampaignModel } from 'adex-models'\r\nimport { SORT_PROPERTIES_ITEMS, FILTER_PROPERTIES_ITEMS } from 'constants/misc'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { CampaignProps } from 'components/dashboard/containers/ItemCommon'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\n// import UnitTargets from 'components/dashboard/containers/UnitTargets'\r\n\r\nconst VIEW_MODE = 'campaignRowsView'\r\n\r\nexport class Campaign extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tthis.state = {\r\n\t\t\ttabIndex: 0,\r\n\t\t\tstatistics: {},\r\n\t\t}\r\n\t}\r\n\r\n\t// componentDidMount = () => {\r\n\t// \tthis.props.actions.updateCampaignState({ campaign: this.props.item })\r\n\t// \t// this.props.actions.updateCampaignStatistics({ campaign: this.props.item })\r\n\t// }\r\n\r\n\thandleTabChange = (event, index) => {\r\n\t\tthis.setState({ tabIndex: index })\r\n\t}\r\n\r\n\tCampaignActions = ({ campaign, actions, t }) => {\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\tonClick={() => actions.closeCampaign({ campaign })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('BTN_CLOSE_CAMPAIGN')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\t// classes,\r\n\t\t\titem,\r\n\t\t\t// setActiveFields,\r\n\t\t\t// handleChange,\r\n\t\t\t// activeFields,\r\n\t\t\t// isDemo,\r\n\t\t\tactions,\r\n\t\t\t// ...rest\r\n\t\t} = this.props\r\n\t\tconst { tabIndex } = this.state\r\n\r\n\t\tconst units = item.spec.adUnits\r\n\t\tconst campaign = new CampaignModel(item)\r\n\r\n\t\tconst balances =\r\n\t\t\tcampaign.status && campaign.status.lastApprovedBalances\r\n\t\t\t\t? campaign.status.lastApprovedBalances\r\n\t\t\t\t: {}\r\n\r\n\t\tconst status = (campaign.status || {}).name\r\n\t\tconst leader = campaign.spec.validators[0]\r\n\t\tconst follower = campaign.spec.validators[1]\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<CampaignProps\r\n\t\t\t\t\titem={campaign}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t\trightComponent={\r\n\t\t\t\t\t\t// <UnitTargets\r\n\t\t\t\t\t\t// \t{...rest}\r\n\t\t\t\t\t\t// \ttargets={campaign.targeting}\r\n\t\t\t\t\t\t// \tt={t}\r\n\t\t\t\t\t\t// \tsubHeader={t('CAMPAIGN_TARGETING')}\r\n\t\t\t\t\t\t// />\r\n\t\t\t\t\t\t(status === 'Ready' ||\r\n\t\t\t\t\t\t\tstatus === 'Active' ||\r\n\t\t\t\t\t\t\tstatus === 'Withdraw' ||\r\n\t\t\t\t\t\t\tstatus === 'Unhealthy') && (\r\n\t\t\t\t\t\t\t<this.CampaignActions\r\n\t\t\t\t\t\t\t\tcampaign={campaign}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\tactions={actions}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<AppBar position='static' color='default'>\r\n\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\tvalue={tabIndex}\r\n\t\t\t\t\t\t\tonChange={this.handleTabChange}\r\n\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\tscrollButtons='off'\r\n\t\t\t\t\t\t\tindicatorColor='primary'\r\n\t\t\t\t\t\t\ttextColor='primary'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Tab label={t('STATE')} />\r\n\t\t\t\t\t\t\t<Tab label={t('CAMPAIGN_UNITS')} />\r\n\t\t\t\t\t\t\t<Tab label={t('VALIDATORS')} />\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<div style={{ marginTop: 10 }}>\r\n\t\t\t\t\t\t{tabIndex === 0 && (\r\n\t\t\t\t\t\t\t<List\r\n\t\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\t\t<ListSubheader component='div'>{t('BALANCES')}</ListSubheader>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{Object.keys(balances).map(key => (\r\n\t\t\t\t\t\t\t\t\t<ListItem key={key}>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\t\t\tprimary={formatTokenAmount(balances[key]) + ' SAI'}\r\n\t\t\t\t\t\t\t\t\t\t\tsecondary={key}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{tabIndex === 1 && (\r\n\t\t\t\t\t\t\t<ItemsList\r\n\t\t\t\t\t\t\t\tremoveFromItem\r\n\t\t\t\t\t\t\t\titems={units}\r\n\t\t\t\t\t\t\t\tviewModeId={VIEW_MODE}\r\n\t\t\t\t\t\t\t\titemType='AdUnit'\r\n\t\t\t\t\t\t\t\tobjModel={AdUnitModel}\r\n\t\t\t\t\t\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\tuiStateId='campaign-units'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{tabIndex === 2 && (\r\n\t\t\t\t\t\t\t<List>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${leader.url}/channel/${campaign.id}/status`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('LEADER_STATUS')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${leader.url}/channel/${campaign.id}/last-approved?withHeartbeat=true`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('LEADER_LAST_APPROVED')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${follower.url}/channel/${campaign.id}/status`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('FOLLOWER_STATUS')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${follower.url}/channel/${campaign.id}/last-approved?withHeartbeat=true`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('FOLLOWER_LAST_APPROVED')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaign.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tunits: PropTypes.object.isRequired,\r\n\trowsView: PropTypes.bool.isRequired,\r\n\titem: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\t// let memory = state.memory\r\n\treturn {\r\n\t\tunits: persist.items['AdUnit'],\r\n\t\trowsView: !!persist.ui[VIEW_MODE],\r\n\t\tobjModel: CampaignModel,\r\n\t\titemType: 'Campaign',\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst CampaignItem = ItemHoc(withStyles(styles)(Campaign))\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(CampaignItem))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tflex: {\r\n\t\t\tflex: 1,\r\n\t\t},\r\n\t\tappBar: {\r\n\t\t\tmarginTop: spacing * 2,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\tdatepicker: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tmarginLeft: 0,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path d='M86.891,94.026 C86.593,95.583 84.640,96.840 83.475,97.808 C81.232,99.674 79.396,104.487 76.012,102.152 C71.905,99.319 69.555,102.487 66.477,103.167 C65.253,103.437 64.708,104.537 64.674,105.797 C64.598,108.535 62.881,109.216 60.527,109.179 C58.468,109.146 56.408,109.135 54.350,109.186 C51.427,109.259 48.991,108.824 49.175,105.026 C49.228,103.939 48.418,103.481 47.510,103.115 C45.715,102.391 43.911,101.676 42.179,100.820 C41.019,100.246 40.260,100.626 39.450,101.415 C37.489,103.324 35.656,102.985 33.877,101.081 C32.562,99.672 31.247,98.242 29.781,97.000 C28.673,96.060 27.835,95.091 27.494,94.069 C22.614,94.095 8.911,94.275 6.707,93.925 C3.748,93.456 1.658,91.566 1.080,88.468 C0.825,87.103 0.798,85.681 0.797,84.285 C0.781,59.822 0.775,35.358 0.792,10.895 C0.798,2.714 2.728,0.818 10.992,0.815 C41.709,0.804 72.426,0.803 103.143,0.810 C111.421,0.811 113.281,2.678 113.282,10.917 C113.286,35.508 113.296,60.100 113.278,84.691 C114.298,96.459 103.016,94.247 86.891,94.026 ZM32.262,90.401 C32.137,90.710 31.934,91.031 31.678,91.234 C31.113,91.681 30.794,92.097 30.633,92.495 C30.633,92.530 30.645,92.550 30.644,92.586 C30.634,92.838 30.591,93.042 30.529,93.219 C30.611,93.939 31.215,94.614 32.059,95.310 C33.105,96.173 33.981,97.243 34.919,98.234 C36.052,99.431 37.092,100.165 38.566,98.516 C39.445,97.532 40.766,97.446 42.072,97.985 C44.590,99.022 47.138,99.984 49.658,101.015 C51.169,101.634 52.013,102.737 52.003,104.443 C51.996,105.569 52.310,106.492 53.719,106.485 C55.893,106.474 58.068,106.460 60.241,106.503 C61.258,106.523 61.545,106.009 61.798,105.108 C62.667,102.013 70.839,97.030 73.935,97.791 C75.078,98.073 76.074,98.952 77.889,99.986 C78.633,99.034 79.392,97.750 80.443,96.785 C82.384,95.001 84.959,93.598 82.071,90.514 C81.378,89.775 81.775,88.502 82.125,87.530 C82.778,85.719 83.468,83.916 84.250,82.157 C85.214,79.987 85.955,77.503 89.141,77.752 C89.588,77.787 90.209,77.693 90.229,77.167 C90.328,74.547 90.472,71.917 90.337,69.304 C90.239,67.417 88.403,68.135 87.335,67.811 C85.508,67.257 85.101,65.621 84.399,64.248 C83.727,62.936 83.324,61.488 82.754,60.121 C81.854,57.962 80.961,55.844 83.149,53.862 C83.657,53.402 84.043,52.699 83.400,52.055 C81.627,50.278 79.951,48.358 77.967,46.848 C76.304,45.583 75.545,47.974 74.218,48.329 C73.894,48.416 73.443,48.642 73.250,48.511 C69.388,45.887 62.832,47.162 61.695,40.563 C61.629,40.182 61.207,39.572 60.933,39.563 C58.421,39.475 55.889,39.322 53.394,39.543 C51.417,39.719 52.313,41.752 51.753,42.873 C51.500,43.379 51.229,44.209 50.861,44.272 C46.430,45.025 42.940,50.944 37.592,46.743 C37.363,46.563 36.871,46.484 36.619,46.605 C34.194,47.762 32.733,50.027 30.922,51.851 C29.518,53.265 31.386,54.163 32.114,55.221 C32.740,56.129 32.572,57.207 32.159,58.186 C31.232,60.386 30.206,62.545 29.330,64.764 C28.613,66.579 27.641,67.955 25.475,67.997 C23.775,68.031 23.442,69.165 23.451,70.566 C23.461,72.167 23.468,73.769 23.458,75.371 C23.449,76.778 23.790,77.605 25.506,77.863 C28.500,78.312 33.382,87.639 32.262,90.401 ZM102.610,3.886 C73.555,3.885 44.500,3.884 15.445,3.887 C3.678,3.889 3.796,3.894 3.780,15.603 C3.775,19.207 4.855,20.474 8.576,20.435 C24.758,20.263 40.944,20.361 57.128,20.360 C71.910,20.360 86.693,20.364 101.475,20.359 C110.248,20.357 110.248,20.351 110.245,11.460 C110.243,4.471 109.656,3.887 102.610,3.886 ZM106.486,23.180 C90.044,23.224 73.602,23.204 57.160,23.203 C40.718,23.202 24.275,23.279 7.834,23.133 C4.785,23.106 3.799,24.074 3.811,27.029 C3.887,46.396 3.819,65.764 3.880,85.131 C3.895,89.813 5.146,90.889 9.871,90.953 C11.237,90.971 24.236,90.982 28.073,90.998 C28.283,90.705 28.536,90.407 28.845,90.103 C30.255,88.717 28.918,87.726 28.517,86.769 C27.370,84.030 26.982,81.288 22.883,80.103 C18.463,78.826 21.133,73.722 20.582,70.327 C20.253,68.306 20.746,65.689 22.839,65.567 C28.461,65.239 27.481,60.268 29.330,57.322 C29.655,56.805 29.205,56.231 28.797,55.809 C26.149,53.076 27.478,50.959 29.784,48.899 C31.138,47.691 32.339,46.314 33.636,45.041 C35.392,43.317 37.165,42.030 39.403,44.474 C40.126,45.264 41.188,45.438 42.243,44.887 C45.091,43.399 49.479,43.919 49.506,38.777 C49.512,37.582 51.195,36.509 52.964,36.583 C55.476,36.689 57.999,36.687 60.511,36.579 C63.013,36.472 64.248,37.537 64.706,40.013 C65.351,43.495 72.159,46.174 75.053,44.089 C76.439,43.091 77.650,42.578 78.992,43.856 C81.387,46.136 83.744,48.457 86.046,50.830 C86.485,51.282 86.593,52.056 86.859,52.693 C86.711,53.170 86.705,53.728 86.423,54.014 C82.817,57.673 86.542,60.632 87.375,63.837 C87.651,64.899 88.583,65.405 89.788,65.315 C92.411,65.117 93.136,66.788 93.193,68.975 C93.248,71.032 93.162,73.093 93.229,75.149 C93.325,78.106 93.222,80.812 89.122,80.679 C88.080,80.645 87.434,81.586 87.205,82.413 C86.426,85.236 83.898,87.698 85.659,91.003 C88.793,90.966 103.593,91.006 105.406,90.947 C108.603,90.843 110.270,89.341 110.263,85.955 C110.216,66.078 110.183,46.200 110.300,26.324 C110.318,23.239 108.749,23.174 106.486,23.180 ZM29.773,14.357 C28.417,14.194 27.457,13.770 27.473,12.270 C27.489,10.806 28.094,9.665 29.606,9.652 C30.990,9.641 31.944,10.550 32.068,12.041 C32.212,13.773 30.960,14.098 29.773,14.357 ZM21.115,14.302 C19.829,14.330 18.512,14.014 18.482,12.266 C18.455,10.747 19.375,9.812 20.720,9.656 C22.272,9.476 22.930,10.608 23.072,12.024 C23.198,13.465 22.410,14.273 21.115,14.302 ZM11.778,14.322 C10.595,14.199 9.463,13.513 9.544,12.215 C9.635,10.753 10.657,9.652 12.192,9.641 C13.747,9.631 14.083,10.981 14.344,12.066 C14.151,13.747 13.213,14.472 11.778,14.322 ZM57.002,55.432 C66.449,55.272 74.393,63.383 74.417,72.914 C74.440,82.540 66.723,90.298 57.086,90.336 C47.279,90.375 39.942,82.875 39.751,72.950 C39.551,62.532 48.194,55.580 57.002,55.432 ZM70.496,77.650 C70.905,76.512 71.827,74.963 69.847,74.639 C68.184,74.366 65.588,73.529 65.376,76.458 C65.160,79.436 63.743,81.984 62.811,85.765 C67.105,83.891 69.230,81.173 70.496,77.650 ZM65.489,70.106 C65.829,72.353 68.212,71.155 69.696,71.309 C70.870,71.432 71.276,70.540 70.953,69.544 C69.658,65.542 67.641,62.122 62.778,60.190 C63.680,63.912 65.003,66.892 65.489,70.106 ZM52.759,80.331 C52.801,80.450 52.853,80.567 52.914,80.677 C54.194,82.970 53.818,87.226 57.140,87.029 C59.949,86.862 60.313,83.038 61.170,80.458 C63.097,74.652 62.986,74.457 57.053,74.457 C50.997,74.457 50.792,74.738 52.759,80.331 ZM53.717,71.375 C54.731,71.349 55.745,71.370 56.759,71.365 C57.900,71.365 59.042,71.328 60.181,71.374 C61.939,71.444 62.485,70.510 62.081,68.986 C61.308,66.068 60.760,63.074 59.191,60.412 C57.594,57.703 55.999,58.304 54.769,60.553 C53.314,63.213 52.433,66.134 51.727,69.092 C51.321,70.798 52.118,71.415 53.717,71.375 ZM51.300,85.233 C50.576,83.414 49.943,82.161 49.588,80.834 C49.229,79.493 49.165,78.075 48.934,76.697 C48.515,74.184 46.605,74.421 44.804,74.516 C43.579,74.580 43.031,75.146 43.140,76.485 C43.406,79.737 47.159,84.094 51.300,85.233 ZM45.348,71.399 C46.892,71.311 48.150,71.611 48.574,70.059 C49.305,67.379 49.504,64.589 50.595,61.962 C51.056,60.852 50.092,60.538 49.000,61.222 C46.305,62.910 44.662,65.390 43.490,68.245 C42.562,70.509 43.157,71.698 45.348,71.399 Z' />\r\n\t</g>,\r\n\r\n\t'AdexPublisher',\r\n\t'0 0 114 110'\r\n)\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path d='M106.734,40.051 C105.039,40.089 103.342,40.061 101.646,40.059 C100.192,40.057 98.737,40.038 97.284,40.063 C96.153,40.083 95.774,39.347 95.784,38.444 C95.793,37.622 96.397,37.178 97.235,37.176 C100.386,37.167 103.536,37.161 106.686,37.175 C107.497,37.179 108.234,37.651 108.275,38.380 C108.325,39.250 107.777,40.028 106.734,40.051 ZM98.119,19.072 C97.536,19.630 96.934,20.404 95.998,19.549 C95.197,18.818 95.313,17.971 95.943,17.303 C98.242,14.867 100.591,12.477 102.976,10.124 C103.238,9.865 103.999,9.751 104.266,9.941 C104.704,10.251 104.927,10.865 105.237,11.345 C104.895,11.981 104.713,12.613 104.307,13.024 C102.279,15.074 100.204,17.078 98.119,19.072 ZM96.759,57.341 C97.886,57.190 105.012,64.344 105.054,65.796 C104.895,67.197 103.734,67.365 102.820,66.551 C100.393,64.390 98.088,62.076 95.898,59.674 C95.075,58.772 95.138,57.558 96.759,57.341 ZM81.020,51.185 C78.929,52.359 78.158,53.675 78.228,56.059 C78.404,62.022 78.286,67.993 78.298,73.962 C78.300,75.076 78.366,76.240 77.208,76.852 C75.795,77.600 75.267,76.151 74.584,75.512 C64.533,66.099 52.013,61.626 39.210,57.699 C39.094,57.664 38.971,57.645 38.850,57.636 C36.403,57.463 33.106,54.526 31.961,56.530 C30.593,58.923 31.832,62.735 33.116,65.558 C35.268,70.290 37.873,74.821 40.410,79.370 C42.114,82.427 43.106,85.589 42.671,89.105 C42.307,92.055 40.717,93.796 37.645,93.819 C32.649,93.855 27.649,93.930 22.659,93.751 C19.758,93.647 17.751,92.155 16.850,89.142 C13.795,78.918 10.606,68.735 7.471,58.535 C6.825,56.434 6.097,54.544 4.003,53.222 C1.691,51.761 1.044,49.161 1.029,46.506 C0.998,41.147 0.907,35.784 1.058,30.430 C1.215,24.841 4.155,22.064 9.829,21.939 C13.726,21.853 17.631,22.040 21.525,21.895 C41.631,21.143 59.881,15.561 74.760,1.279 C75.417,0.649 76.137,-0.190 77.296,0.369 C78.412,0.907 78.284,1.916 78.283,2.885 C78.281,6.173 78.282,9.462 78.285,12.750 C78.288,13.968 78.338,15.189 78.279,16.404 C78.061,20.885 78.389,24.327 83.056,27.522 C91.119,33.043 89.569,46.383 81.020,51.185 ZM36.700,78.405 C36.637,78.413 36.582,78.442 36.517,78.442 L16.485,78.442 C16.853,79.579 17.208,80.719 17.591,81.850 C17.663,82.063 17.718,82.242 17.785,82.445 L36.406,82.445 C37.599,81.377 37.779,79.511 36.700,78.405 ZM29.907,90.826 C32.339,90.826 34.771,90.792 37.202,90.837 C39.171,90.873 39.652,89.628 39.763,88.032 C39.878,86.383 39.063,85.869 37.986,85.629 L18.775,85.629 C20.507,91.531 20.105,90.813 29.907,90.826 ZM28.025,26.177 C27.523,24.656 26.356,24.809 25.057,24.810 C20.065,24.813 15.072,24.771 10.080,24.822 C5.857,24.865 3.908,26.853 3.866,31.145 C3.818,36.134 3.812,41.125 3.867,46.115 C3.907,49.829 5.920,52.140 9.596,52.266 C14.948,52.449 20.310,52.314 25.667,52.335 C27.330,52.342 28.088,51.626 28.039,49.903 C27.964,47.228 27.984,29.451 28.043,26.775 C28.047,26.589 28.036,26.384 28.025,26.177 ZM29.430,63.402 C29.022,61.630 28.552,59.841 28.439,58.038 C28.302,55.837 27.332,55.211 25.212,55.301 C21.450,55.460 17.676,55.342 13.906,55.349 C9.696,55.358 9.513,55.567 10.746,59.650 C11.337,61.607 11.920,63.566 12.503,65.525 L28.885,65.525 C29.615,65.125 29.658,64.389 29.430,63.402 ZM13.456,68.709 C14.110,70.895 14.772,73.080 15.452,75.258 L34.556,75.258 C34.656,75.148 33.101,72.367 32.952,72.040 C32.307,70.624 31.712,69.166 30.314,68.709 L13.456,68.709 ZM75.279,9.722 C75.278,8.668 75.583,7.527 74.563,6.282 C70.844,8.844 67.328,11.749 63.288,13.846 C54.399,18.459 44.999,21.574 35.229,23.680 C33.563,24.040 31.705,24.121 30.873,26.034 C30.869,26.335 30.855,26.635 30.861,26.906 C30.921,29.582 30.938,47.359 30.871,50.034 C30.827,51.783 31.574,52.948 33.257,53.136 C36.441,53.492 39.376,54.704 42.379,55.626 C52.818,58.831 62.909,62.857 71.900,69.223 C72.773,69.841 73.559,71.214 74.582,70.744 C75.847,70.163 75.268,68.563 75.270,67.414 C75.303,48.183 75.300,28.953 75.279,9.722 ZM80.617,29.153 C80.049,28.784 79.506,27.986 78.728,28.480 C78.023,28.928 78.311,29.798 78.303,30.488 C78.274,33.151 78.292,35.814 78.294,38.478 C78.294,41.383 78.301,44.289 78.291,47.194 C78.286,48.605 78.612,49.326 80.173,48.403 C86.657,44.571 86.938,33.261 80.617,29.153 Z' />\r\n\t</g>,\r\n\t'AdexAdvertiser',\r\n\t'0 0 109 94'\r\n)\r\n","import React, { Component } from 'react'\r\nimport PublisherLogo from 'components/common/icons/AdexPublisher'\r\nimport AdvertiserLogo from 'components/common/icons/AdexAdvertiser'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport Translate from 'components/translate/Translate'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nconst SideBox = ({\r\n\tsalePoints = [],\r\n\tlinkTitle,\r\n\ticon,\r\n\ttitle,\r\n\tdisabled,\r\n\tclasses,\r\n\t...other\r\n}) => (\r\n\t<div\r\n\t\t{...other}\r\n\t\tclassName={classnames(classes.sideBox, { [classes.disabled]: disabled })}\r\n\t>\r\n\t\t<div className={classes.icon}>{icon}</div>\r\n\t\t<h2>{title}</h2>\r\n\t\t<ul className={classes.salePoints}>\r\n\t\t\t{salePoints.map(function(point, key) {\r\n\t\t\t\treturn <li key={key}> {point} </li>\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t</div>\r\n)\r\n\r\nconst RRSideBox = withReactRouterLink(SideBox)\r\n\r\nclass SideSelect extends Component {\r\n\trender() {\r\n\t\tlet { t, classes } = this.props\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\topen={true}\r\n\t\t\t\tclasses={{ paper: classes.dialogPaper }}\r\n\t\t\t\tBackdropProps={{\r\n\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\troot: classes.backdrop,\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t\tfullWidth\r\n\t\t\t\tmaxWidth='sm'\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle>{t('CHOOSE_SIDE')}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<RRSideBox\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\ttitle={t('ADVERTISER')}\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<AdvertiserLogo\r\n\t\t\t\t\t\t\t\tstyle={{ width: 110, height: 110 }}\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsalePoints={[\r\n\t\t\t\t\t\t\tt('SALE_POINT_ADV_1'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_ADV_2'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_ADV_3'),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tto='/dashboard/advertiser'\r\n\t\t\t\t\t\tlinkTitle={t('GO_ADVERTISER')}\r\n\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<RRSideBox\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\ttitle={t('PUBLISHER')}\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<PublisherLogo\r\n\t\t\t\t\t\t\t\tstyle={{ width: 110, height: 110 }}\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsalePoints={[\r\n\t\t\t\t\t\t\tt('SALE_POINT_PUB_1'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_PUB_2'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_PUB_3'),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tto='/dashboard/publisher'\r\n\t\t\t\t\t\tlinkTitle={t('GO_PUBLISHER')}\r\n\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Translate(withStyles(styles)(SideSelect))\r\n","export const styles = () => {\r\n\treturn {\r\n\t\tbackdrop: {\r\n\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n\t\t},\r\n\t\tsideBox: {\r\n\t\t\tdisplay: 'inline-block',\r\n\t\t\twidth: '50%',\r\n\t\t\theight: 'auto',\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tverticalAlign: 'top',\r\n\t\t\topacity: 0.7,\r\n\t\t\t'&:hover:not(.disabled)': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t\topacity: 1,\r\n\t\t\t},\r\n\t\t\t'&.disabled': {\r\n\t\t\t\topacity: 0.3,\r\n\t\t\t},\r\n\t\t\t'@media(max-width:425px)': {\r\n\t\t\t\twidth: '100%',\r\n\t\t\t},\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\twidth: 110,\r\n\t\t\theight: 110,\r\n\t\t\tmargin: 'auto',\r\n\t\t},\r\n\t\tsalePoints: {\r\n\t\t\tpadding: 0,\r\n\t\t\t'& li': {\r\n\t\t\t\tdisplay: 'block',\r\n\t\t\t\tlistStyle: 'none',\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nfunction arrowGenerator(color) {\r\n\treturn {\r\n\t\t'&[x-placement*=\"bottom\"] $arrow': {\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tmarginTop: '-0.95em',\r\n\t\t\twidth: '2em',\r\n\t\t\theight: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '0 1em 1em 1em',\r\n\t\t\t\tborderColor: `transparent transparent ${color} transparent`,\r\n\t\t\t},\r\n\t\t},\r\n\t\t'&[x-placement*=\"top\"] $arrow': {\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tmarginBottom: '-0.95em',\r\n\t\t\twidth: '2em',\r\n\t\t\theight: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '1em 1em 0 1em',\r\n\t\t\t\tborderColor: `${color} transparent transparent transparent`,\r\n\t\t\t},\r\n\t\t},\r\n\t\t'&[x-placement*=\"right\"] $arrow': {\r\n\t\t\tleft: 0,\r\n\t\t\tmarginLeft: '-0.95em',\r\n\t\t\theight: '2em',\r\n\t\t\twidth: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '1em 1em 1em 0',\r\n\t\t\t\tborderColor: `transparent ${color} transparent transparent`,\r\n\t\t\t},\r\n\t\t},\r\n\t\t'&[x-placement*=\"left\"] $arrow': {\r\n\t\t\tright: 0,\r\n\t\t\tmarginRight: '-0.95em',\r\n\t\t\theight: '2em',\r\n\t\t\twidth: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '1em 0 1em 1em',\r\n\t\t\t\tborderColor: `transparent transparent transparent ${color}`,\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport const LightTooltip = withStyles(theme => ({\r\n\ttooltip: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\t\tboxShadow: theme.shadows[1],\r\n\t\tfontSize: 11,\r\n\t},\r\n}))(Tooltip)\r\n\r\nconst useStylesArrow = makeStyles(theme => ({\r\n\ttooltip: {\r\n\t\tposition: 'relative',\r\n\t\tbackgroundColor: theme.palette.common.black,\r\n\t},\r\n\tpopper: arrowGenerator(theme.palette.common.black),\r\n\tarrow: {\r\n\t\tposition: 'absolute',\r\n\t\tfontSize: 6,\r\n\t\t'&::before': {\r\n\t\t\tcontent: '\"\"',\r\n\t\t\tmargin: 'auto',\r\n\t\t\tdisplay: 'block',\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\tborderStyle: 'solid',\r\n\t\t},\r\n\t},\r\n}))\r\n\r\nexport function ArrowTooltip(props) {\r\n\tconst { arrow, ...classes } = useStylesArrow()\r\n\tconst [arrowRef, setArrowRef] = React.useState(null)\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\tclasses={classes}\r\n\t\t\tPopperProps={{\r\n\t\t\t\tpopperOptions: {\r\n\t\t\t\t\tmodifiers: {\r\n\t\t\t\t\t\tarrow: {\r\n\t\t\t\t\t\t\tenabled: Boolean(arrowRef),\r\n\t\t\t\t\t\t\telement: arrowRef,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t}}\r\n\t\t\t{...props}\r\n\t\t\ttitle={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t{props.title}\r\n\t\t\t\t\t<span className={arrow} ref={setArrowRef} />\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nArrowTooltip.propTypes = {\r\n\ttitle: PropTypes.node,\r\n}\r\n\r\nexport const HtmlTooltip = withStyles(theme => ({\r\n\ttooltip: {\r\n\t\tbackgroundColor: '#f5f5f9',\r\n\t\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\t\tmaxWidth: 220,\r\n\t\tfontSize: theme.typography.pxToRem(12),\r\n\t\tborder: '1px solid #dadde9',\r\n\t},\r\n}))(Tooltip)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport classnames from 'classnames'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\nimport { ArrowTooltip } from 'components/common/tooltips'\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\troot: {\r\n\t\t\tposition: 'relative',\r\n\t\t\tbackgroundColor: ({ bgColor = '' }) =>\r\n\t\t\t\t(theme.palette[bgColor] || {}).main || theme.palette.background.default,\r\n\t\t\tcolor: ({ bgColor = '' }) =>\r\n\t\t\t\t(theme.palette[bgColor] || {}).contrastText ||\r\n\t\t\t\ttheme.palette.text.primary,\r\n\t\t},\r\n\t\tinfoCard: {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tflexGrow: 1,\r\n\t\t},\r\n\t\tlinkCard: {\r\n\t\t\t'&:hover, &:focus': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t},\r\n\t\t},\r\n\t\tprogress: {\r\n\t\t\tbottom: 0,\r\n\t\t\tposition: 'absolute',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t}\r\n})\r\n\r\nconst StatsCard = props => {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tsubtitle,\r\n\t\tlinkCard,\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t\tbgColor,\r\n\t\tloading,\r\n\t\texplain,\r\n\t} = props\r\n\r\n\tconst classes = useStyles({ bgColor })\r\n\r\n\treturn (\r\n\t\t<Card\r\n\t\t\t// raised\r\n\t\t\tclassName={classnames(classes.root, classes.infoCard, {\r\n\t\t\t\t[classes.linkCard]: !!linkCard,\r\n\t\t\t})}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t<CardContent>\r\n\t\t\t\t{title && (\r\n\t\t\t\t\t<Typography variant='h5' noWrap>\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t)}\r\n\t\t\t\t{subtitle && (\r\n\t\t\t\t\t<Typography component='p' noWrap>\r\n\t\t\t\t\t\t{subtitle}{' '}\r\n\t\t\t\t\t\t{explain && (\r\n\t\t\t\t\t\t\t<ArrowTooltip\r\n\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\t<Typography component='p' variant='caption'>\r\n\t\t\t\t\t\t\t\t\t\t{explain}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<InfoIcon style={{ fontSize: 12 }}></InfoIcon>\r\n\t\t\t\t\t\t\t</ArrowTooltip>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t)}\r\n\t\t\t\t{children}\r\n\t\t\t</CardContent>\r\n\t\t\t{loading && <LinearProgress className={classes.progress} />}\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nStatsCard.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tsubtitle: PropTypes.string,\r\n\tlinkCard: PropTypes.bool,\r\n}\r\n\r\nexport default StatsCard\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\r\n\treturn {\r\n\t\tinfoStatsContainer: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tjustifyContent: 'stretch',\r\n\t\t\theight: '100%',\r\n\t\t},\r\n\t\tinfoCard: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tflexGrow: 1,\r\n\t\t},\r\n\t\tlinkCard: {\r\n\t\t\t'&:hover, &:focus': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t},\r\n\t\t},\r\n\t\tdashboardCardBody: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tpadding: spacing,\r\n\t\t\twidth: `calc(100% - ${spacing * 2}px)`,\r\n\t\t},\r\n\t}\r\n}\r\n","import Helper from 'helpers/miscHelpers'\r\nimport { defaults } from 'react-chartjs-2'\r\nimport merge from 'lodash.merge'\r\n\r\n// export const CHARTS_COLORS = ['#0277BD', '#03A9F4', '#00E676', '#FFAB00', '#FF5722', '#616161']\r\n// Eddie colors\r\nexport const CHARTS_COLORS = [\r\n\t'#00BAFF',\r\n\t'#7EDBFF',\r\n\t'#FF9FA8',\r\n\t'#14DC9C',\r\n\t'#61FFB2',\r\n\t'#ABFFE5',\r\n]\r\n\r\nexport let CHARTS_COMMON_OPTIONS = {\r\n\tresponsive: true,\r\n\ttooltips: {\r\n\t\tmode: 'label',\r\n\t\tcornerRadius: 2,\r\n\t\tbackgroundColor: Helper.hexToRgbaColorString('#616161', 0.9),\r\n\t},\r\n}\r\n\r\nexport const hexColorsToRgbaArray = (colors, alpha) => {\r\n\treturn colors.map(color => {\r\n\t\treturn Helper.hexToRgbaColorString(color, alpha)\r\n\t})\r\n}\r\n\r\nmerge(defaults, { global: CHARTS_COMMON_OPTIONS })\r\n","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Line, Chart } from 'react-chartjs-2'\r\nimport { CHARTS_COLORS } from 'components/dashboard/charts/options'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { selectStatsChartData } from 'selectors'\r\n\r\nconst commonDsProps = {\r\n\tfill: false,\r\n\tlineTension: 0.3,\r\n\tborderWidth: 0,\r\n\tpointRadius: 3,\r\n\tpointHitRadius: 10,\r\n}\r\n\r\nexport const SimpleStatistics = ({\r\n\tside,\r\n\ttimeframe = '',\r\n\teventType,\r\n\toptions = {},\r\n\tt,\r\n\txLabel = 'TIMEFRAME',\r\n\ty1Label = 'DATA1',\r\n\ty2Label = 'DATA2',\r\n\ty1Color = CHARTS_COLORS[1],\r\n\ty2Color = CHARTS_COLORS[2],\r\n}) => {\r\n\tconst payouts = useSelector(state =>\r\n\t\tselectStatsChartData(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType,\r\n\t\t\tmetric: 'eventPayouts',\r\n\t\t\tnoLastOne: true,\r\n\t\t})\r\n\t)\r\n\r\n\tconst counts = useSelector(state =>\r\n\t\tselectStatsChartData(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType,\r\n\t\t\tmetric: 'eventCounts',\r\n\t\t\tnoLastOne: true,\r\n\t\t})\r\n\t)\r\n\r\n\t// Vertical line / crosshair\r\n\tuseEffect(() => {\r\n\t\tChart.pluginService.register({\r\n\t\t\tafterDraw: function(chart) {\r\n\t\t\t\tif (chart.tooltip._active && chart.tooltip._active.length) {\r\n\t\t\t\t\tconst activePoint = chart.controller.tooltip._active[0]\r\n\t\t\t\t\tconst ctx = chart.ctx\r\n\t\t\t\t\tconst x = activePoint.tooltipPosition().x\r\n\t\t\t\t\tconst topY = chart.scales['y-axis-1'].top\r\n\t\t\t\t\tconst bottomY = chart.scales['y-axis-1'].bottom\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(x, topY)\r\n\t\t\t\t\tctx.lineTo(x, bottomY)\r\n\t\t\t\t\tctx.lineWidth = 1 // line width\r\n\t\t\t\t\tctx.setLineDash([1, 5])\r\n\t\t\t\t\tctx.strokeStyle = '#C0C0C0' // color of the vertical line\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t})\r\n\t})\r\n\r\n\tconst chartData = {\r\n\t\tlabels: payouts.labels,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\t\t...commonDsProps,\r\n\t\t\t\tbackgroundColor: Helper.hexToRgbaColorString(y1Color, 0.5),\r\n\t\t\t\tborderColor: Helper.hexToRgbaColorString(y1Color, 1),\r\n\t\t\t\tlabel: y1Label,\r\n\t\t\t\tdata: payouts.datasets,\r\n\t\t\t\tyAxisID: 'y-axis-1',\r\n\t\t\t\tpointBackgroundColor: 'transparent',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t...commonDsProps,\r\n\t\t\t\tbackgroundColor: Helper.hexToRgbaColorString(y2Color, 0.5),\r\n\t\t\t\tborderColor: Helper.hexToRgbaColorString(y2Color, 1),\r\n\t\t\t\tlabel: y2Label,\r\n\t\t\t\tdata: counts.datasets,\r\n\t\t\t\tyAxisID: 'y-axis-2',\r\n\t\t\t},\r\n\t\t],\r\n\t}\r\n\r\n\tconst linesOptions = {\r\n\t\tresponsive: true,\r\n\t\t// This and fixed height are used for proper mobile display of the chart\r\n\t\tmaintainAspectRatio: false,\r\n\t\ttitle: {\r\n\t\t\tdisplay: true,\r\n\t\t\ttext: options.title,\r\n\t\t},\r\n\t\ttooltips: {\r\n\t\t\tbackgroundColor: 'black',\r\n\t\t\tmode: 'index',\r\n\t\t\tintersect: false,\r\n\t\t\tcallbacks: {\r\n\t\t\t\tlabel: function(t, d) {\r\n\t\t\t\t\t// This adds currency DAI to y1Label in the tooltips\r\n\t\t\t\t\tvar xLabel = d.datasets[t.datasetIndex].label\r\n\t\t\t\t\tvar yLabel = xLabel === y1Label ? `${t.yLabel} SAI` : t.yLabel\r\n\t\t\t\t\treturn `${xLabel}: ${yLabel}`\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thover: {\r\n\t\t\tmode: 'index',\r\n\t\t\tintersect: false,\r\n\t\t},\r\n\t\tscales: {\r\n\t\t\txAxes: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tlabelString: t(xLabel || 'TIMEFRAME'),\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tyAxes: [\r\n\t\t\t\t{\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tlabelString: y1Label,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: 'y-axis-1',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance\r\n\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\tposition: 'right',\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tlabelString: y2Label,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: 'y-axis-2',\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t\tprecision: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// grid line settings\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdrawOnChartArea: false, // only want the grid lines for one axis to show up\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t}\r\n\r\n\treturn <Line height={500} data={chartData} options={linesOptions} />\r\n}\r\n","import { createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles'\r\nimport lime from '@material-ui/core/colors/lime'\r\nimport deepOrange from '@material-ui/core/colors/deepOrange'\r\nimport amber from '@material-ui/core/colors/amber'\r\nimport grey from '@material-ui/core/colors/grey'\r\n\r\nconst WHITE = '#fff'\r\nexport const PRIMARY = '#1B75BC'\r\nexport const SECONDARY = '#FFAC00'\r\nexport const ALEX_GREY = '#3f3e3e'\r\nexport const ACCENT_ONE = '#57467B'\r\nexport const ACCENT_TWO = '#7CB4B8'\r\n\r\nconst palette = {\r\n\tprimary: { main: PRIMARY, contrastText: WHITE },\r\n\tsecondary: { main: SECONDARY, contrastText: WHITE },\r\n\taccentOne: { main: ACCENT_ONE, contrastText: WHITE },\r\n\taccentTwo: { main: ACCENT_TWO, contrastText: WHITE },\r\n\tgrey: { main: ALEX_GREY, contrastText: WHITE },\r\n\terror: deepOrange,\r\n\twarning: amber,\r\n\tfirst: lime,\r\n\tcontrastThreshold: 3,\r\n\ttonalOffset: 0.2,\r\n\ttext: grey,\r\n}\r\n\r\nconst theme = createMuiTheme({\r\n\ttypography: {\r\n\t\tfontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n\t\tfontSize: 13,\r\n\t},\r\n\tpalette: { ...palette },\r\n\toverrides: {\r\n\t\tMuiButton: {\r\n\t\t\troot: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t},\r\n\t\t\toutlined: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiTableCell: {\r\n\t\t\thead: {\r\n\t\t\t\twhiteSpace: 'nowrap',\r\n\t\t\t},\r\n\t\t\troot: {\r\n\t\t\t\twhiteSpace: 'nowrap',\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiPaper: {\r\n\t\t\trounded: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiTooltip: {\r\n\t\t\ttooltip: { borderRadius: 0 },\r\n\t\t},\r\n\t\t// MuiStepIcon: {\r\n\t\t//     root: {\r\n\t\t//         color: 'yellow',\r\n\t\t//         '&$active': {\r\n\t\t//             color: 'orange'\r\n\t\t//         }\r\n\t\t//     },\r\n\t\t//     active: {\r\n\t\t//         color: 'yellow'\r\n\t\t//     }\r\n\t\t// }\r\n\t},\r\n})\r\n\r\nexport const themeMUI = responsiveFontSizes(theme, {\r\n\toptions: ['xs', 'sm', 'md', 'lg', 'xl'],\r\n\tfactor: 3,\r\n})\r\n","import React, { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { SimpleStatistics } from 'components/dashboard/charts/simplified'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { translate } from 'services/translations/translations'\r\nimport { VALIDATOR_ANALYTICS_TIMEFRAMES } from 'constants/misc'\r\nimport StatsCard from './StatsCard'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { PRIMARY, ACCENT_ONE, ACCENT_TWO } from 'components/App/themeMUi'\r\nimport { styles } from './styles'\r\nimport { formatNumberWithCommas } from 'helpers/formatters'\r\nimport {\r\n\tt,\r\n\tselectTotalImpressions,\r\n\tselectTotalMoney,\r\n\tselectAverageCPM,\r\n} from 'selectors'\r\n\r\nconst timeFrames = VALIDATOR_ANALYTICS_TIMEFRAMES.map(tf => {\r\n\tconst translated = { ...tf }\r\n\ttranslated.label = translate(tf.label)\r\n\treturn translated\r\n})\r\n\r\nconst metrics = {\r\n\tpublisher: [\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_REVENUE'),\r\n\t\t\tvalue: 'eventPayouts',\r\n\t\t\tcolor: ACCENT_TWO,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_IMPRESSIONS'),\r\n\t\t\tvalue: 'eventCounts',\r\n\t\t\tcolor: PRIMARY,\r\n\t\t},\r\n\t],\r\n\tadvertiser: [\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_SPEND'),\r\n\t\t\tvalue: 'eventPayouts',\r\n\t\t\tcolor: ACCENT_ONE,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_IMPRESSIONS'),\r\n\t\t\tvalue: 'eventCounts',\r\n\t\t\tcolor: PRIMARY,\r\n\t\t},\r\n\t],\r\n}\r\n\r\nconst timeHints = {\r\n\thour: 'SHOWING_LAST_HOUR',\r\n\tday: 'SHOWING_LAST_24_HOURS',\r\n\tweek: 'SHOWING_LAST_7_DAYS',\r\n}\r\n\r\nexport function BasicStats({ side }) {\r\n\tconst [timeframe, setTimeframe] = useState(timeFrames[1].value)\r\n\tconst useStyles = makeStyles(styles)\r\n\tconst classes = useStyles()\r\n\r\n\tconst totalImpressions = useSelector(state =>\r\n\t\tselectTotalImpressions(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t})\r\n\t)\r\n\r\n\tconst totalMoney = useSelector(state =>\r\n\t\tselectTotalMoney(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t})\r\n\t)\r\n\r\n\tconst averageCPM = useSelector(state =>\r\n\t\tselectAverageCPM(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t})\r\n\t)\r\n\r\n\tconst loadingImpressions = totalImpressions === null\r\n\tconst loadingMoney = totalMoney === null\r\n\tconst loadingCPM = averageCPM === null\r\n\r\n\treturn (\r\n\t\t<Grid container spacing={2}>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<div className={classes.infoStatsContainer}>\r\n\t\t\t\t\t<StatsCard>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tlabel={t('SELECT_TIMEFRAME')}\r\n\t\t\t\t\t\t\thelperText={t(timeHints[timeframe])}\r\n\t\t\t\t\t\t\tonChange={val => setTimeframe(val)}\r\n\t\t\t\t\t\t\tsource={timeFrames}\r\n\t\t\t\t\t\t\tvalue={timeframe}\r\n\t\t\t\t\t\t\thtmlId='timeframe-select'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</StatsCard>\r\n\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\tbgColor='primary'\r\n\t\t\t\t\t\tsubtitle={t('LABEL_TOTAL_IMPRESSIONS')}\r\n\t\t\t\t\t\tloading={loadingImpressions}\r\n\t\t\t\t\t\ttitle={`${formatNumberWithCommas(totalImpressions || 0)}`}\r\n\t\t\t\t\t\texplain={t('EXPLAIN_TOTAL_IMPRESSIONS')}\r\n\t\t\t\t\t></StatsCard>\r\n\t\t\t\t\t{side === 'advertiser' && (\r\n\t\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\t\tbgColor='accentOne'\r\n\t\t\t\t\t\t\tsubtitle={t('LABEL_TOTAL_SPENT')}\r\n\t\t\t\t\t\t\texplain={t('EXPLAIN_TOTAL_SPENT')}\r\n\t\t\t\t\t\t\ttitle={`~ ${formatNumberWithCommas(\r\n\t\t\t\t\t\t\t\tparseFloat(totalMoney || 0).toFixed(2)\r\n\t\t\t\t\t\t\t)} SAI`}\r\n\t\t\t\t\t\t\tloading={loadingMoney}\r\n\t\t\t\t\t\t></StatsCard>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{side === 'publisher' && (\r\n\t\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\t\tbgColor='accentTwo'\r\n\t\t\t\t\t\t\tsubtitle={t('LABEL_TOTAL_REVENUE')}\r\n\t\t\t\t\t\t\texplain={t('EXPLAIN_TOTAL_REVENUE')}\r\n\t\t\t\t\t\t\ttitle={`~ ${formatNumberWithCommas(\r\n\t\t\t\t\t\t\t\tparseFloat(totalMoney || 0).toFixed(2)\r\n\t\t\t\t\t\t\t)} SAI`}\r\n\t\t\t\t\t\t\tloading={loadingMoney}\r\n\t\t\t\t\t\t></StatsCard>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\tbgColor='grey'\r\n\t\t\t\t\t\tsubtitle={t('LABEL_AVG_CPM')}\r\n\t\t\t\t\t\texplain={t('EXPLAIN_AVG_CPM')}\r\n\t\t\t\t\t\tloading={loadingCPM}\r\n\t\t\t\t\t\ttitle={`~ ${formatNumberWithCommas(\r\n\t\t\t\t\t\t\tparseFloat(averageCPM || 0).toFixed(2)\r\n\t\t\t\t\t\t)} SAI / CPM`}\r\n\t\t\t\t\t></StatsCard>\r\n\t\t\t\t</div>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<SimpleStatistics\r\n\t\t\t\t\tside={side}\r\n\t\t\t\t\ttimeframe={timeframe}\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\ttitle: t(timeFrames.find(a => a.value === timeframe).label),\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ty1Label={metrics[side][0].label}\r\n\t\t\t\t\ty1Color={metrics[side][0].color}\r\n\t\t\t\t\ty2Label={metrics[side][1].label}\r\n\t\t\t\t\ty2Color={metrics[side][1].color}\r\n\t\t\t\t\teventType={'IMPRESSION'}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { execute, updateNav } from 'actions'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport classnames from 'classnames'\r\nimport SideSelect from 'components/signin/side-select/SideSelect'\r\nimport StatsCard from './StatsCard'\r\nimport { styles } from './styles'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { BasicStats } from './BasicStats'\r\nimport { push } from 'connected-react-router'\r\nimport { t, selectSide, selectAccount } from 'selectors'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport function DashboardStats(props) {\r\n\tconst side = useSelector(selectSide)\r\n\tconst account = useSelector(selectAccount)\r\n\tconst classes = useStyles()\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('navTitle', t('DASHBOARD')))\r\n\t}, [])\r\n\r\n\tconst goToAccount = () => {\r\n\t\texecute(push('/dashboard/' + side + '/account'))\r\n\t}\r\n\r\n\tconst InfoStats = () => {\r\n\t\tconst formatted = account.stats.formatted || {}\r\n\t\tconst { outstandingBalanceDai, availableIdentityBalanceDai } = formatted\r\n\t\treturn (\r\n\t\t\t<div className={classes.infoStatsContainer}>\r\n\t\t\t\t<StatsCard\r\n\t\t\t\t\tlinkCard\r\n\t\t\t\t\tonClick={goToAccount}\r\n\t\t\t\t\tsubtitle={t('IDENTITY_DAI_BALANCE_AVAILABLE_INFO', {\r\n\t\t\t\t\t\targs: [outstandingBalanceDai || 0],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tloading={\r\n\t\t\t\t\t\t(!outstandingBalanceDai && outstandingBalanceDai !== 0) ||\r\n\t\t\t\t\t\t(!availableIdentityBalanceDai && availableIdentityBalanceDai !== 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttitle={`${availableIdentityBalanceDai || 0} SAI`}\r\n\t\t\t\t></StatsCard>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn side !== 'advertiser' && side !== 'publisher' ? (\r\n\t\t<SideSelect active={true} />\r\n\t) : (\r\n\t\t<div>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={12} lg={12} xs={12}>\r\n\t\t\t\t\t<Card className={classnames(classes.dashboardCardBody)}>\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<BasicStats side={side} />\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={12} lg={6}>\r\n\t\t\t\t\t<InfoStats />\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DashboardStats\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ItemHoc from 'components/dashboard/containers/ItemHoc'\r\nimport { AdUnit } from 'adex-models'\r\nimport UnitTargets from 'components/dashboard/containers/UnitTargets'\r\nimport Translate from 'components/translate/Translate'\r\nimport { BasicProps } from 'components/dashboard/containers/ItemCommon'\r\n\r\nexport class Unit extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tcloseDialog: false,\r\n\t\t}\r\n\t}\r\n\t// shouldComponentUpdate(nextProps, nextState) {\r\n\t//     let diffProps = JSON.stringify(this.props) !== JSON.stringify(nextProps)\r\n\t//     let diffState = JSON.stringify(this.state) !== JSON.stringify(nextState)\r\n\t//     return diffProps || diffState\r\n\t// }\r\n\trender() {\r\n\t\tconst { item, t, ...rest } = this.props\r\n\r\n\t\tif (!item) return <h1>Unit '404'</h1>\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<BasicProps\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t\turl={item.adUrl}\r\n\t\t\t\t\trightComponent={\r\n\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\ttargets={item.targeting}\r\n\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\tsubHeader={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nUnit.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titem: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\treturn {\r\n\t\tobjModel: AdUnit,\r\n\t\titemType: 'AdUnit',\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst UnitItem = ItemHoc(Unit)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(UnitItem))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { AdSlot } from 'adex-models'\r\nimport copy from 'copy-to-clipboard'\r\nimport ItemHoc from 'components/dashboard/containers/ItemHoc'\r\nimport { BasicProps } from 'components/dashboard/containers/ItemCommon'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CopyIcon from '@material-ui/icons/FileCopy'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { contracts } from 'services/smart-contracts/contractsCfg'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport url from 'url'\r\n\r\nconst ADVIEW_URL = process.env.ADVIEW_URL\r\nconst adviewUrl = url.parse(ADVIEW_URL)\r\nconst origin = `${adviewUrl.protocol}//${adviewUrl.host}`\r\n\r\nconst AUTO_HIDE_STRING = `window.addEventListener('message', function(ev) { \r\n\t\tif (ev.data.hasOwnProperty('adexHeight') && ('${origin}' === ev.origin)) {\r\n\t\t\tfor (let f of document.getElementsByTagName('iframe')) {\t\r\n\t\t\t\tif (f.contentWindow === ev.source) {\r\n\t\t\t\t\tf.height = ev.data.adexHeight;\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t}\r\n\t}, false)`\r\n\r\nconst { DAI } = contracts\r\n\r\n// const ADEX_MARKET_HOST = process.env.ADEX_MARKET_HOST\r\n\r\nconst IntegrationCode = ({ t, account, slot = {}, classes, onCopy }) => {\r\n\tconst { id, type, tags, fallbackUnit } = slot\r\n\tconst identityAddr = account.identity.address\r\n\r\n\tlet sizes = type.split('_')[1].split('x')\r\n\tsizes = {\r\n\t\twidth: sizes[0],\r\n\t\theight: sizes[1],\r\n\t}\r\n\r\n\tconst options = {\r\n\t\tpublisherAddr: identityAddr,\r\n\t\twhitelistedToken: DAI.address,\r\n\t\twhitelistedType: type,\r\n\t\trandomize: true,\r\n\t\ttargeting: tags || [],\r\n\t\t// marketURL: ADEX_MARKET_HOST,\r\n\t\twidth: sizes.width,\r\n\t\theight: sizes.height,\r\n\t\tminPerImpression: '0',\r\n\t\tminTargetingScore: '0',\r\n\t\tfallbackUnit,\r\n\t\tmarketSlot: id,\r\n\t}\r\n\r\n\tlet query = encodeURIComponent(JSON.stringify({ options }))\r\n\r\n\tlet src = ADVIEW_URL + query\r\n\r\n\tlet iframeStr =\r\n\t\t`<iframe\\n` +\r\n\t\t`\tsrc=\"${src}\"\\n` +\r\n\t\t`\twidth=\"${sizes.width}\"\\n` +\r\n\t\t`\theight=\"${sizes.height}\"\\n` +\r\n\t\t`\tscrolling=\"no\"\\n` +\r\n\t\t`\tframeborder=\"0\"\\n` +\r\n\t\t`\tstyle=\"border: 0;\"\\n` +\r\n\t\t`\tonload=\"${AUTO_HIDE_STRING}\"\\n` +\r\n\t\t`></iframe>`\r\n\r\n\t// TODO: Add copy to clipboard and tooltip or description how to use it\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className={classes.integrationLabel}>\r\n\t\t\t\t{t('INTEGRATION_CODE')}\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tcopy(iframeStr)\r\n\t\t\t\t\t\tonCopy && onCopy()\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<CopyIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</div>\r\n\t\t\t<Paper>\r\n\t\t\t\t<pre className={classes.integrationCode}>{iframeStr}</pre>\r\n\t\t\t</Paper>\r\n\t\t\t{process.env.NODE_ENV !== 'production' && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div className={classes.integrationLabel}> {t('AD_PREVIEW')}</div>\r\n\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: iframeStr }} />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport class Slot extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\teditFallbackImg: false,\r\n\t\t\ttabIndex: 0,\r\n\t\t}\r\n\t\tthis.tabsFocus = React.createRef()\r\n\t}\r\n\r\n\thandleFallbackImgUpdateToggle = () => {\r\n\t\tconst active = this.state.editFallbackImg\r\n\t\tthis.setState({ editFallbackImg: !active })\r\n\t}\r\n\r\n\thandleTabChange = (event, index) => {\r\n\t\tthis.setState({ tabIndex: index }, () => {\r\n\t\t\tif (this.tabsFocus.current) {\r\n\t\t\t\tthis.tabsFocus.current.scrollIntoView({\r\n\t\t\t\t\tbehavior: 'smooth',\r\n\t\t\t\t\tblock: 'start',\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, classes, isDemo, item, account, itemType, ...rest } = this.props\r\n\t\tconst { tabIndex } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<BasicProps\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\titemType={itemType}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t\turl={item.adUrl}\r\n\t\t\t\t\tcanEditImg={!isDemo}\r\n\t\t\t\t\trightComponent={null}\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<AppBar position='static' color='default'>\r\n\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\tvalue={tabIndex}\r\n\t\t\t\t\t\t\tonChange={this.handleTabChange.bind(this)}\r\n\t\t\t\t\t\t\tref={this.tabsFocus}\r\n\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\tscrollButtons='off'\r\n\t\t\t\t\t\t\tindicatorColor='primary'\r\n\t\t\t\t\t\t\ttextColor='primary'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Tab label={t('STATISTICS')} />\r\n\t\t\t\t\t\t\t<Tab label={t('INTEGRATION')} />\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<div style={{ marginTop: 10 }}>\r\n\t\t\t\t\t\t{tabIndex === 0 && null}\r\n\t\t\t\t\t\t{tabIndex === 1 && (\r\n\t\t\t\t\t\t\t<IntegrationCode\r\n\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\taccount={account}\r\n\t\t\t\t\t\t\t\tslot={item}\r\n\t\t\t\t\t\t\t\tonCopy={() =>\r\n\t\t\t\t\t\t\t\t\tthis.props.actions.addToast({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'accept',\r\n\t\t\t\t\t\t\t\t\t\taction: 'X',\r\n\t\t\t\t\t\t\t\t\t\tlabel: t('COPIED_TO_CLIPBOARD'),\r\n\t\t\t\t\t\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSlot.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\titem: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\t// let memory = state.memory\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t\tobjModel: AdSlot,\r\n\t\titemType: 'AdSlot',\r\n\t\t// NOTE: maybe not the best way but pass props to the HOC here\r\n\t\tupdateImgInfoLabel: 'SLOT_AVATAR_IMG_INFO',\r\n\t\tupdateImgLabel: 'SLOT_AVATAR_IMG_LABEL',\r\n\t\tupdateImgErrMsg: 'ERR_IMG_SIZE_MAX',\r\n\t\tupdateImgExact: true,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst SlotItem = ItemHoc(withStyles(styles)(Slot))\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(SlotItem)\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tintegrationLabel: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'space-between',\r\n\t\t},\r\n\t\tintegrationCode: {\r\n\t\t\twhiteSpace: 'pre-wrap',\r\n\t\t\twordBreak: 'break-word',\r\n\t\t\tpadding: spacing,\r\n\t\t\tmargin: 0,\r\n\t\t\talignSelf: 'flex-start',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nclass Items extends Component {\r\n\tcomponentWillMount() {\r\n\t\tthis.props.actions.updateNav('navTitle', this.props.header)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, itemType, ...rest } = this.props\r\n\t\tconst items = Array.from(Object.values(this.props.items || {})) || []\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{!!this.props.newItemBtn && <this.props.newItemBtn />}\r\n\r\n\t\t\t\t<ItemsList\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\titemType={itemType}\r\n\t\t\t\t\titems={items}\r\n\t\t\t\t\tviewModeId={this.props.viewModeId}\r\n\t\t\t\t\tarchive\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nItems.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titems: PropTypes.object.isRequired,\r\n\tviewModeId: PropTypes.string.isRequired,\r\n\theader: PropTypes.string.isRequired,\r\n\tobjModel: PropTypes.func.isRequired,\r\n\titemType: PropTypes.string.isRequired,\r\n\tsortProperties: PropTypes.array.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst { persist, memory } = state\r\n\treturn {\r\n\t\titems: persist.items[props.itemType] || [],\r\n\t\tside: memory.nav.side,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(Items))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\nimport Helper from 'helpers/miscHelpers'\r\n// import { exchange as ExchangeConstants } from 'adex-constants'\r\n\r\n// const { TX_STATUS } = ExchangeConstants\r\n\r\nexport default function NewTransactionHoc(Decorated) {\r\n\t// TODO: make it common for bids and items\r\n\tclass TransactionHoc extends Component {\r\n\t\tcomponentWillMount() {\r\n\t\t\t// console.log('TransactionHoc')\r\n\t\t}\r\n\r\n\t\thandleChange = (name, value) => {\r\n\t\t\tconst { actions, txId } = this.props\r\n\t\t\tactions.updateNewTransaction({ tx: txId, key: name, value: value })\r\n\t\t}\r\n\r\n\t\t// addTx = (tx) => {\r\n\t\t//     let txData = { ...tx }\r\n\t\t//     txData.status = TX_STATUS.Pending.id\r\n\t\t//     txData.sendingTime = Date.now()\r\n\t\t//     this.props.actions.addWeb3Transaction({ trans: txData, addr: this.props.account._addr })\r\n\t\t// }\r\n\r\n\t\tonSave = (err, tx, manyTxs) => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\r\n\t\t\tthis.resetTransaction()\r\n\t\t}\r\n\r\n\t\tresetTransaction = () => {\r\n\t\t\tconst { actions, txId } = this.props\r\n\t\t\tactions.resetNewTransaction({ tx: txId })\r\n\t\t}\r\n\r\n\t\thandleSaveRes = ({ err, res }) => {\r\n\t\t\tconst { t, actions } = this.props\r\n\t\t\t// const areManyTxs = Array.isArray(res)\r\n\r\n\t\t\tif (err) {\r\n\t\t\t\tactions.addToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: t('ERR_TRANSACTION', { args: [Helper.getErrMsg(err)] }),\r\n\t\t\t\t\ttimeout: 50000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.onSave(err, res, Array.isArray(res))\r\n\t\t}\r\n\r\n\t\tsave = () => {\r\n\t\t\tthis.handleChange('waitingForWalletAction', true)\r\n\t\t\tthis.props\r\n\t\t\t\t.saveFn({\r\n\t\t\t\t\tacc: this.props.account,\r\n\t\t\t\t\ttransaction: this.props.transaction,\r\n\t\t\t\t})\r\n\t\t\t\t.then((res = {}) => {\r\n\t\t\t\t\tconsole.log('res on save', res)\r\n\r\n\t\t\t\t\tconst txs = res.txResults || res\r\n\t\t\t\t\tconst err = res.err || null\r\n\r\n\t\t\t\t\tthis.handleSaveRes({ err: err, res: txs })\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error = {}) => {\r\n\t\t\t\t\tconsole.log('err on save', error)\r\n\t\t\t\t\tconst res = error.txResults || null\r\n\t\t\t\t\tconst err = error.err || error\r\n\r\n\t\t\t\t\tthis.handleSaveRes({ err: err, res: res })\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\t// TODO: take a look at onSave if change something\r\n\t\t\tthis.onSave(null, null)\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tlet transaction = this.props.transaction || {}\r\n\t\t\tlet props = this.props\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\ttransaction={transaction}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tresetTransaction={this.resetTransaction}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tTransactionHoc.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tlabel: PropTypes.string,\r\n\t\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\r\n\t\t\t.isRequired,\r\n\t\ttransaction: PropTypes.object.isRequired,\r\n\t\taccount: PropTypes.object.isRequired,\r\n\t\tsaveFn: PropTypes.func,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist, memory } = state\r\n\t\tconst txId = props.stepsId\r\n\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t\ttransaction: memory.newTransactions[txId] || {},\r\n\t\t\ttxId: txId,\r\n\t\t\tspinner: memory.spinners[txId],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(TransactionHoc))\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\n// import Translate from 'components/translate/Translate'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport { validateNumber } from 'helpers/validators'\r\nimport { InputLoading } from 'components/common/spinners/'\r\n\r\nclass WithdrawFromIdentity extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { validate, transaction } = this.props\r\n\t\t// If nothing entered will validate\r\n\t\tif (!transaction.withdrawAmount) {\r\n\t\t\tvalidate('withdrawAmount', {\r\n\t\t\t\tisValid: true,\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (!transaction.withdrawTo) {\r\n\t\t\tvalidate('withdrawTo', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateAmount = (numStr, dirty) => {\r\n\t\tlet isValid = validateNumber(numStr)\r\n\t\tlet msg = 'ERR_INVALID_AMOUNT_VALUE'\r\n\t\tlet errMsgArgs = []\r\n\t\tlet amount = parseFloat(numStr)\r\n\t\tif (isValid && amount > parseFloat(this.props.identityAvailable)) {\r\n\t\t\tisValid = false\r\n\t\t\tmsg = 'ERR_MAX_AMOUNT_TO_WITHDRAW'\r\n\t\t\terrMsgArgs = [this.props.identityAvailable, 'SAI']\r\n\t\t}\r\n\r\n\t\tthis.props.validate('withdrawAmount', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: msg, args: errMsgArgs },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tvalidate,\r\n\t\t\ttransaction,\r\n\t\t\tt,\r\n\t\t\tinvalidFields,\r\n\t\t\tidentityAvailable,\r\n\t\t\thandleChange,\r\n\t\t\twithdrawToSpinner,\r\n\t\t} = this.props\r\n\t\tconst { withdrawTo, withdrawAmount } = transaction || {}\r\n\t\tconst errAmount = invalidFields['withdrawAmount']\r\n\t\tconst errAddr = invalidFields['withdrawTo']\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{t('EXCHANGE_CURRENT_DAI_BALANCE_AVAILABLE_ON_IDENTITY')}{' '}\r\n\t\t\t\t\t{identityAvailable}{' '}\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tdisabled={withdrawToSpinner}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('WITHDRAW_TO')}\r\n\t\t\t\t\tname='withdrawTo'\r\n\t\t\t\t\tvalue={withdrawTo || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawTo', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errAddr && !!errAddr.dirty}\r\n\t\t\t\t\thelperText={errAddr && !!errAddr.dirty ? errAddr.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{withdrawToSpinner ? <InputLoading /> : null}\r\n\t\t\t\t<TextField\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel={t('TOKENS_TO_WITHDRAW')}\r\n\t\t\t\t\tname='withdrawAmount'\r\n\t\t\t\t\tvalue={withdrawAmount || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawAmount', ev.target.value)}\r\n\t\t\t\t\tonBlur={() => this.validateAmount(withdrawAmount, true)}\r\n\t\t\t\t\tonFocus={() => this.validateAmount(withdrawAmount, false)}\r\n\t\t\t\t\terror={errAmount && !!errAmount.dirty}\r\n\t\t\t\t\thelperText={\r\n\t\t\t\t\t\terrAmount && !!errAmount.dirty\r\n\t\t\t\t\t\t\t? errAmount.errMsg\r\n\t\t\t\t\t\t\t: t('MAX_AMOUNT_TO_WITHDRAW', {\r\n\t\t\t\t\t\t\t\t\targs: [identityAvailable, 'SAI'],\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nWithdrawFromIdentity.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttxId: txId,\r\n\t\twithdrawToSpinner: memory.spinners['withdrawTo'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst WithdrawFromIdentityForm = NewTransactionHoc(WithdrawFromIdentity)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(WithdrawFromIdentityForm)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\n// import Translate from 'components/translate/Translate'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport { validateNumber } from 'helpers/validators'\r\nimport { InputLoading } from 'components/common/spinners/'\r\n\r\nclass WithdrawAnyTokenFromIdentity extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { validate, transaction } = this.props\r\n\t\t// If nothing entered will validate\r\n\t\tif (!transaction.withdrawAmount) {\r\n\t\t\tvalidate('withdrawAmount', {\r\n\t\t\t\tisValid: true,\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (!transaction.withdrawTo) {\r\n\t\t\tvalidate('withdrawTo', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateAmount = (numStr, dirty) => {\r\n\t\tlet isValid = validateNumber(numStr)\r\n\t\tlet msg = 'ERR_INVALID_AMOUNT_VALUE'\r\n\t\tlet errMsgArgs = []\r\n\t\tlet amount = parseFloat(numStr)\r\n\t\tif (isValid && amount > parseFloat(this.props.identityAvailable)) {\r\n\t\t\tisValid = false\r\n\t\t\tmsg = 'ERR_MAX_AMOUNT_TO_WITHDRAW'\r\n\t\t\terrMsgArgs = [this.props.identityAvailable, 'SAI']\r\n\t\t}\r\n\r\n\t\tthis.props.validate('withdrawAmount', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: msg, args: errMsgArgs },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tvalidate,\r\n\t\t\ttransaction,\r\n\t\t\tt,\r\n\t\t\tinvalidFields,\r\n\t\t\thandleChange,\r\n\t\t\twithdrawToSpinner,\r\n\t\t\tbalanceAnySpinner,\r\n\t\t} = this.props\r\n\t\tconst { withdrawTo, withdrawAmount, tokenAddress, tokenBalance } =\r\n\t\t\ttransaction || {}\r\n\t\tconst errAmount = invalidFields['withdrawAmount']\r\n\t\tconst errAddr = invalidFields['withdrawTo']\r\n\t\tconst errToken = invalidFields['tokenAddress']\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{t('TOKENS_BALANCE_AVAILABLE_ON_IDENTITY')} {tokenBalance}{' '}\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tdisabled={balanceAnySpinner}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('WITHDRAW_TOKEN_ADDRESS')}\r\n\t\t\t\t\tname='tokenAddress'\r\n\t\t\t\t\tvalue={tokenAddress || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('tokenAddress', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: tokenAddress,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'tokenAddress',\r\n\t\t\t\t\t\t\tsetBalance: bal => handleChange('tokenBalance', bal),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: tokenAddress,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'tokenAddress',\r\n\t\t\t\t\t\t\tsetBalance: bal => handleChange('tokenBalance', bal),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errToken && !!errToken.dirty}\r\n\t\t\t\t\thelperText={errToken && !!errToken.dirty ? errToken.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{balanceAnySpinner ? <InputLoading /> : null}\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tdisabled={withdrawToSpinner}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('WITHDRAW_TO')}\r\n\t\t\t\t\tname='withdrawTo'\r\n\t\t\t\t\tvalue={withdrawTo || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawTo', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errAddr && !!errAddr.dirty}\r\n\t\t\t\t\thelperText={errAddr && !!errAddr.dirty ? errAddr.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{withdrawToSpinner ? <InputLoading /> : null}\r\n\t\t\t\t<TextField\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel={t('TOKENS_TO_WITHDRAW')}\r\n\t\t\t\t\tname='withdrawAmount'\r\n\t\t\t\t\tvalue={withdrawAmount || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawAmount', ev.target.value)}\r\n\t\t\t\t\tonBlur={() => this.validateAmount(withdrawAmount, true)}\r\n\t\t\t\t\tonFocus={() => this.validateAmount(withdrawAmount, false)}\r\n\t\t\t\t\terror={errAmount && !!errAmount.dirty}\r\n\t\t\t\t\thelperText={\r\n\t\t\t\t\t\terrAmount && !!errAmount.dirty\r\n\t\t\t\t\t\t\t? errAmount.errMsg\r\n\t\t\t\t\t\t\t: t('MAX_AMOUNT_TO_WITHDRAW', {\r\n\t\t\t\t\t\t\t\t\targs: [tokenBalance],\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nWithdrawAnyTokenFromIdentity.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttxId: txId,\r\n\t\twithdrawToSpinner: memory.spinners['withdrawTo'],\r\n\t\tbalanceAnySpinner: memory.spinners['tokenAddress'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst WithdrawAnyTokenFromIdentityForm = NewTransactionHoc(\r\n\tWithdrawAnyTokenFromIdentity\r\n)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(WithdrawAnyTokenFromIdentityForm)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\n// import Translate from 'components/translate/Translate'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { constants } from 'adex-models'\r\nimport { InputLoading } from 'components/common/spinners/'\r\n\r\nconst { IdentityPrivilegeLevel } = constants\r\n\r\nconst PRIV_LEVELS_SRC = Object.keys(IdentityPrivilegeLevel).map(key => {\r\n\treturn {\r\n\t\tvalue: IdentityPrivilegeLevel[key],\r\n\t\tlabel: key,\r\n\t}\r\n})\r\n\r\nclass SeAddressPrivilege extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { transaction, validate } = this.props\r\n\t\tif (!transaction.withdrawAmount) {\r\n\t\t\tvalidate('setAddr', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\ttransaction,\r\n\t\t\tt,\r\n\t\t\tinvalidFields,\r\n\t\t\tidentityAvailable,\r\n\t\t\thandleChange,\r\n\t\t\tsetAddrSpinner,\r\n\t\t\tvalidate,\r\n\t\t} = this.props\r\n\t\tconst { setAddr, privLevel } = transaction || {}\r\n\t\t// const errAmount = invalidFields['withdrawAmount']\r\n\t\tconst errAddr = invalidFields['setAddr']\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{t('SET_IDENTITY_PRIVILEGE_MAIN_INFO')} {identityAvailable}{' '}\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('ADDR_TO_SET_PRIV_LEVEL')}\r\n\t\t\t\t\tname='setAddr'\r\n\t\t\t\t\tvalue={setAddr || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('setAddr', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: setAddr,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'setAddr',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: setAddr,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'setAddr',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errAddr && !!errAddr.dirty}\r\n\t\t\t\t\thelperText={errAddr && !!errAddr.dirty ? errAddr.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{setAddrSpinner ? <InputLoading /> : null}\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel={t('SELECT_PRIV_LEVEL')}\r\n\t\t\t\t\thelperText={t('SELECT_PRIV_LEVEL_HELPER_TXT')}\r\n\t\t\t\t\tonChange={val => handleChange('privLevel', val)}\r\n\t\t\t\t\tsource={PRIV_LEVELS_SRC}\r\n\t\t\t\t\tvalue={typeof privLevel === 'number' ? privLevel : ''}\r\n\t\t\t\t\thtmlId='label-privLevel'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSeAddressPrivilege.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttxId: txId,\r\n\t\tsetAddrSpinner: memory.spinners['setAddr'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst SeAddressPrivilegeForm = NewTransactionHoc(SeAddressPrivilege)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(SeAddressPrivilegeForm)\r\n","import React from 'react'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport { PropRow } from 'components/common/dialog/content'\r\nimport { constants } from 'adex-models'\r\n\r\nconst privilegesNames = constants.valueToKey(constants.IdentityPrivilegeLevel)\r\n\r\nexport const IdentityWithdrawPreview = ({\r\n\tt,\r\n\twithdrawTo,\r\n\tclasses,\r\n\tfees,\r\n\twithdrawAmount,\r\n}) => (\r\n\t<div>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawTo'\r\n\t\t\tleft={t('withdrawTo', { isProp: true })}\r\n\t\t\tright={(withdrawTo || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawAmount'\r\n\t\t\tleft={t('withdrawAmount', { isProp: true })}\r\n\t\t\tright={\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\tsecondary={t('AMOUNT_WITHDRAW_INFO', {\r\n\t\t\t\t\t\targs: [fees.fees, 'SAI', fees.toGet, 'SAI'],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tprimary={withdrawAmount + ' SAI'}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t/>\r\n\t</div>\r\n)\r\n\r\nexport const SetPrivilegePreview = ({\r\n\tt,\r\n\tsetAddr,\r\n\tclasses,\r\n\tfees,\r\n\tprivLevel,\r\n}) => (\r\n\t<div>\r\n\t\t<PropRow\r\n\t\t\tkey='setAddr'\r\n\t\t\tleft={t('setAddr', { isProp: true })}\r\n\t\t\tright={(setAddr || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='privLevel'\r\n\t\t\tleft={t('privLevel', { isProp: true })}\r\n\t\t\tright={\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\tsecondary={t('PRIV_LEVEL_INFO_AND_FEES', {\r\n\t\t\t\t\t\targs: [fees.fees, 'SAI'],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tprimary={privilegesNames[privLevel]}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t/>\r\n\t</div>\r\n)\r\n\r\nexport const IdentityWithdrawAnyPreview = ({\r\n\tt,\r\n\twithdrawTo,\r\n\ttokenAddress,\r\n\tclasses,\r\n\tfees,\r\n\twithdrawAmount,\r\n}) => (\r\n\t<div>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawTo'\r\n\t\t\tleft={t('withdrawTo', { isProp: true })}\r\n\t\t\tright={(withdrawTo || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='tokenAddress'\r\n\t\t\tleft={t('tokenAddress', { isProp: true })}\r\n\t\t\tright={(tokenAddress || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawAmount'\r\n\t\t\tleft={t('withdrawAmount', { isProp: true })}\r\n\t\t\tright={\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\tsecondary={t('AMOUNT_WITHDRAW_INFO', {\r\n\t\t\t\t\t\targs: [fees.fees, '', fees.toGet, ''],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tprimary={withdrawAmount + ' '}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t/>\r\n\t</div>\r\n)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport ErrorIcon from '@material-ui/icons/Error'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\n// import { DEFAULT_GAS_PRICE } from 'services/smart-contracts/constants'\r\nimport { WalletAction } from 'components/dashboard/forms/FormsCommon'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tFullContentSpinner,\r\n} from 'components/common/dialog/content'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport {\r\n\tIdentityWithdrawPreview,\r\n\tSetPrivilegePreview,\r\n\tIdentityWithdrawAnyPreview,\r\n} from './previews'\r\n\r\nclass TransactionPreview extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tthis.state = {\r\n\t\t\tgas: null,\r\n\t\t\tfees: null,\r\n\t\t\terrors: [],\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {\r\n\t\t\tgetFeesFn,\r\n\t\t\tactions,\r\n\t\t\thandleChange,\r\n\t\t\tidentityAvailable,\r\n\t\t\ttransaction,\r\n\t\t\ttxId,\r\n\t\t\tt,\r\n\t\t\taccount,\r\n\t\t} = this.props\r\n\t\tif (getFeesFn && Object.keys(transaction).length) {\r\n\t\t\tactions.updateSpinner(txId, true)\r\n\t\t\tgetFeesFn({ account, transaction })\r\n\t\t\t\t.then(fees => {\r\n\t\t\t\t\thandleChange('fees', fees)\r\n\t\t\t\t\tthis.setState({ fees: fees })\r\n\t\t\t\t\tactions.updateSpinner(txId, false)\r\n\r\n\t\t\t\t\tif (parseFloat(fees.fees || 0) > parseFloat(identityAvailable)) {\r\n\t\t\t\t\t\thandleChange('errors', [\r\n\t\t\t\t\t\t\tt('INSUFFICIENT_BALANCE_FOR_FEES', {\r\n\t\t\t\t\t\t\t\targs: [identityAvailable, 'SAI', fees.fees, 'SAI'],\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\tactions.updateSpinner(txId, false)\r\n\t\t\t\t\thandleChange('errors', [Helper.getErrMsg(err)])\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\ttransaction = {},\r\n\t\t\tt,\r\n\t\t\tclasses,\r\n\t\t\taccount,\r\n\t\t\tpreviewWarnMsgs,\r\n\t\t\tspinner,\r\n\t\t\tstepsId,\r\n\t\t} = this.props\r\n\t\tconst errors = transaction.errors || []\r\n\t\tconst {\r\n\t\t\twithdrawTo,\r\n\t\t\twithdrawAmount,\r\n\t\t\tsetAddr,\r\n\t\t\tprivLevel,\r\n\t\t\ttokenAddress,\r\n\t\t\tfees = {},\r\n\t\t} = transaction\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{spinner ? (\r\n\t\t\t\t\t<FullContentSpinner />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ContentBox>\r\n\t\t\t\t\t\t{transaction.waitingForWalletAction ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<WalletAction t={t} authType={account.wallet.authType} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t{errors.length\r\n\t\t\t\t\t\t\t\t? errors.map((err, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameLeft={classes.error}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameRight={classes.error}\r\n\t\t\t\t\t\t\t\t\t\t\tleft={<ErrorIcon />}\r\n\t\t\t\t\t\t\t\t\t\t\tright={err}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t{previewWarnMsgs\r\n\t\t\t\t\t\t\t\t? previewWarnMsgs.map((msg, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameLeft={classes.warning}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameRight={classes.warning}\r\n\t\t\t\t\t\t\t\t\t\t\tleft={<WarningIcon />}\r\n\t\t\t\t\t\t\t\t\t\t\tright={t(msg.msg, { args: msg.args })}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t{stepsId === 'withdrawFromIdentity' && (\r\n\t\t\t\t\t\t\t\t<IdentityWithdrawPreview\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\twithdrawTo={withdrawTo}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\tfees={fees}\r\n\t\t\t\t\t\t\t\t\twithdrawAmount={withdrawAmount}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{stepsId === 'setIdentityPrivilege' && (\r\n\t\t\t\t\t\t\t\t<SetPrivilegePreview\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\tsetAddr={setAddr}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\tfees={fees}\r\n\t\t\t\t\t\t\t\t\tprivLevel={privLevel}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{stepsId === 'withdrawAnyFromIdentity' && (\r\n\t\t\t\t\t\t\t\t<IdentityWithdrawAnyPreview\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\twithdrawTo={withdrawTo}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\tfees={fees}\r\n\t\t\t\t\t\t\t\t\twithdrawAmount={withdrawAmount}\r\n\t\t\t\t\t\t\t\t\ttokenAddress={tokenAddress}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</ContentBox>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nTransactionPreview.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tpreviewMsgs: PropTypes.array,\r\n\testimateGasFn: PropTypes.func,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttransaction: memory.newTransactions[txId] || {},\r\n\t\ttxId: txId,\r\n\t\tspinner: memory.spinners[txId],\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst TransactionPreviewForm = NewTransactionHoc(TransactionPreview)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withStyles(styles)(TransactionPreviewForm))\r\n","export const styles = theme => {\r\n\t// const spacing = theme.spacing(1)\r\n\treturn {\r\n\t\terror: {\r\n\t\t\tcolor: theme.palette.error.main,\r\n\t\t},\r\n\t\twarning: {\r\n\t\t\tcolor: theme.palette.warning.A700,\r\n\t\t},\r\n\t\tcentralSpinner: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: 'calc(50% - 20px)',\r\n\t\t\ttop: ' calc(50% - 20px)',\r\n\t\t},\r\n\t\timgPreview: {\r\n\t\t\theight: 120,\r\n\t\t\twidth: 'auto',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\tboxShadow: theme.shadows[2],\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport WithdrawFromExchangePage from './WithdrawFromIdentity'\r\nimport WithdrawAnyTokenFromIdentityPage from './WithdrawAnyTokenFromIdentity'\r\nimport SeAddressPrivilege from './SeAddressPrivilege'\r\nimport TransactionPreview from './TransactionPreview'\r\nimport Button from '@material-ui/core/Button'\r\nimport TransactionHoc from './TransactionHoc'\r\nimport FormSteps from 'components/dashboard/forms/FormSteps'\r\nimport WithDialog from 'components/common/dialog/WithDialog'\r\n// import SaveIcon from '@material-ui/icons/Save'\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty'\r\nimport {\r\n\twithdrawFromIdentity,\r\n\tsetIdentityPrivilege,\r\n} from 'services/smart-contracts/actions/identity'\r\nimport { addrIdentityPrivilege, identityWithdraw, execute } from 'actions'\r\n\r\nconst FormStepsWithDialog = WithDialog(FormSteps)\r\n\r\nconst SaveBtn = ({\r\n\tsave,\r\n\tsaveBtnLabel,\r\n\tsaveBtnIcon,\r\n\tt,\r\n\ttransaction,\r\n\twaitingForWalletAction,\r\n\tspinner,\r\n\t...other\r\n}) => {\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tcolor='primary'\r\n\t\t\tonClick={save}\r\n\t\t\tdisabled={\r\n\t\t\t\t(!!transaction.errors && !!transaction.errors.length) ||\r\n\t\t\t\t!!transaction.waitingForWalletAction ||\r\n\t\t\t\t!!spinner\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{transaction.waitingForWalletAction ? (\r\n\t\t\t\t<HourglassEmptyIcon />\r\n\t\t\t) : (\r\n\t\t\t\tsaveBtnIcon || ''\r\n\t\t\t)}\r\n\t\t\t{t(saveBtnLabel || 'DO_IT')}\r\n\t\t</Button>\r\n\t)\r\n}\r\n\r\nconst CancelBtn = ({ cancel, cancelBtnLabel, t, ...other }) => {\r\n\treturn <Button onClick={cancel}>{t(cancelBtnLabel || 'CANCEL')}</Button>\r\n}\r\n\r\nconst SaveBtnWithTransaction = TransactionHoc(SaveBtn)\r\nconst CancelBtnWithTransaction = TransactionHoc(CancelBtn)\r\n\r\nconst txCommon = {\r\n\tSaveBtn: SaveBtnWithTransaction,\r\n\tCancelBtn: CancelBtnWithTransaction,\r\n\tvalidateIdBase: 'tx-',\r\n\tdarkerBackground: true,\r\n}\r\n\r\nexport const WithdrawTokenFromIdentity = props => (\r\n\t<FormStepsWithDialog\r\n\t\t{...props}\r\n\t\tbtnLabel='ACCOUNT_WITHDRAW_FROM_IDENTITY_BTN'\r\n\t\tsaveBtnLabel='ACCOUNT_WITHDRAW_FROM_IDENTITY_SAVE_BTN'\r\n\t\ttitle='ACCOUNT_WITHDRAW_FROM_IDENTITY_TITLE'\r\n\t\tstepsId='withdrawFromIdentity'\r\n\t\t{...txCommon}\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'ACCOUNT_WITHDRAW_FROM_IDENTITY_STEP',\r\n\t\t\t\tpage: WithdrawFromExchangePage,\r\n\t\t\t},\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_MAKE_TR',\r\n\t\t\tpage: TransactionPreview,\r\n\t\t}}\r\n\t\tsaveFn={({ transaction } = {}) => {\r\n\t\t\treturn execute(\r\n\t\t\t\tidentityWithdraw({\r\n\t\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\t\twithdrawTo: transaction.withdrawTo,\r\n\t\t\t\t\ttokenAddr: transaction.tokenAddress,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}}\r\n\t\tgetFeesFn={({ transaction, account } = {}) => {\r\n\t\t\treturn withdrawFromIdentity({\r\n\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\tgetFeesOnly: true,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\t\t}}\r\n\t/>\r\n)\r\n\r\nexport const SetIdentityPrivilege = props => (\r\n\t<FormStepsWithDialog\r\n\t\t{...props}\r\n\t\tbtnLabel='ACCOUNT_SET_IDENTITY_PRIVILEGE_BTN'\r\n\t\tsaveBtnLabel='ACCOUNT_SET_IDENTITY_PRIVILEGE_SAVE_BTN'\r\n\t\ttitle='ACCOUNT_SET_IDENTITY_PRIVILEGE_TITLE'\r\n\t\tstepsId='setIdentityPrivilege'\r\n\t\t{...txCommon}\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'ACCOUNT_SET_IDENTITY_PRIVILEGE_STEP',\r\n\t\t\t\tpage: SeAddressPrivilege,\r\n\t\t\t},\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_MAKE_TR',\r\n\t\t\tpage: TransactionPreview,\r\n\t\t}}\r\n\t\tsaveFn={({ transaction } = {}) => {\r\n\t\t\treturn execute(\r\n\t\t\t\taddrIdentityPrivilege({\r\n\t\t\t\t\tprivLevel: transaction.privLevel,\r\n\t\t\t\t\tsetAddr: transaction.setAddr,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}}\r\n\t\tgetFeesFn={({ transaction } = {}) => {\r\n\t\t\treturn setIdentityPrivilege({\r\n\t\t\t\tprivLevel: transaction.privLevel,\r\n\t\t\t\tsetAddr: transaction.setAddr,\r\n\t\t\t\tgetFeesOnly: true,\r\n\t\t\t})\r\n\t\t}}\r\n\t/>\r\n)\r\n\r\nexport const WithdrawAnyTokenFromIdentity = props => (\r\n\t<FormStepsWithDialog\r\n\t\t{...props}\r\n\t\tbtnLabel='ACCOUNT_WITHDRAW_ANY_FROM_IDENTITY_BTN'\r\n\t\tsaveBtnLabel='ACCOUNT_WITHDRAW_FROM_IDENTITY_SAVE_BTN'\r\n\t\ttitle='ACCOUNT_WITHDRAW_FROM_IDENTITY_TITLE'\r\n\t\tstepsId='withdrawAnyFromIdentity'\r\n\t\t{...txCommon}\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'ACCOUNT_WITHDRAW_FROM_IDENTITY_STEP',\r\n\t\t\t\tpage: WithdrawAnyTokenFromIdentityPage,\r\n\t\t\t},\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_MAKE_TR',\r\n\t\t\tpage: TransactionPreview,\r\n\t\t}}\r\n\t\tsaveFn={({ transaction } = {}) => {\r\n\t\t\treturn execute(\r\n\t\t\t\tidentityWithdraw({\r\n\t\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\t\twithdrawTo: transaction.withdrawTo,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}}\r\n\t\tgetFeesFn={({ transaction, account } = {}) => {\r\n\t\t\treturn withdrawFromIdentity({\r\n\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\tgetFeesOnly: true,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\t\t}}\r\n\t/>\r\n)\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tactionBtn: {\r\n\t\t\tmargin: spacing,\r\n\t\t},\r\n\t\taddress: {\r\n\t\t\twordWrap: 'break-word',\r\n\t\t\twordBreak: 'break-all',\r\n\t\t},\r\n\t\tadvancedList: {\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\ticonBtnLeft: {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { useSelector } from 'react-redux'\r\nimport { updateNav, addToast, execute } from 'actions'\r\nimport copy from 'copy-to-clipboard'\r\nimport Translate from 'components/translate/Translate'\r\nimport {\r\n\tWithdrawTokenFromIdentity,\r\n\tWithdrawAnyTokenFromIdentity,\r\n\tSetIdentityPrivilege,\r\n} from 'components/dashboard/forms/web3/transactions'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListDivider from '@material-ui/core/Divider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Button from '@material-ui/core/Button'\r\nimport Box from '@material-ui/core/Box'\r\nimport CopyIcon from '@material-ui/icons/FileCopy'\r\nimport DownloadIcon from '@material-ui/icons/SaveAlt'\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport { styles } from './styles.js'\r\nimport { getRecoveryWalletData } from 'services/wallet/wallet'\r\nimport { LoadingSection } from 'components/common/spinners'\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard'\r\nimport { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\r\nimport { selectAccount } from 'selectors'\r\nimport { formatAddress } from 'helpers/formatters'\r\n\r\n// const RRButton = withReactRouterLink(Button)\r\n\r\nconst VALIDATOR_LEADER_URL = process.env.VALIDATOR_LEADER_URL\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\nconst VALIDATOR_FOLLOWER_URL = process.env.VALIDATOR_FOLLOWER_URL\r\nconst VALIDATOR_FOLLOWER_ID = process.env.VALIDATOR_FOLLOWER_ID\r\n\r\nfunction AccountInfo({ t }) {\r\n\tconst account = useSelector(selectAccount)\r\n\r\n\tconst localWalletDownloadHref = () => {\r\n\t\tconst { email, password, authType } = account.wallet\r\n\t\tconst obj = getRecoveryWalletData({ email, password, authType })\r\n\t\tif (!obj || !obj.wallet) {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\tconst data =\r\n\t\t\t'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj))\r\n\t\treturn data\r\n\t}\r\n\r\n\tconst walletJsonData = localWalletDownloadHref()\r\n\tconst [expanded, setExpanded] = useState(false)\r\n\tconst useStyles = makeStyles(styles)\r\n\tconst classes = useStyles()\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('navTitle', t('ACCOUNT')))\r\n\t}, [t])\r\n\r\n\tconst displayRampWidget = () => {\r\n\t\tconst widget = new RampInstantSDK({\r\n\t\t\thostAppName: 'AdExNetwork',\r\n\t\t\thostLogoUrl: 'https://www.adex.network/img/Adex-logo@2x.png',\r\n\t\t\tvariant: 'auto',\r\n\t\t\tswapAsset: 'SAI',\r\n\t\t\tuserAddress: account.identity.address,\r\n\t\t})\r\n\t\twidget.domNodes.overlay.style.zIndex = 1000\r\n\t\twidget.show()\r\n\t}\r\n\r\n\tconst handleExpandChange = () => {\r\n\t\tsetExpanded(!expanded)\r\n\t}\r\n\r\n\tconst { grantType } = account.settings\r\n\tconst formatted = account.stats.formatted || {}\r\n\tconst {\r\n\t\twalletAddress,\r\n\t\twalletAuthType = '',\r\n\t\twalletPrivileges = '',\r\n\t\tidentityAddress,\r\n\t\tidentityBalanceDai,\r\n\t\tavailableIdentityBalanceDai,\r\n\t\toutstandingBalanceDai,\r\n\t} = formatted\r\n\tconst { authType, email } = account.wallet\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List>\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tflexGrow='3'\r\n\t\t\t\t\t\t\tmr={1}\r\n\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\tjustifyContent='start'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\tprimary={identityAddress}\r\n\t\t\t\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t\t\t\taccount._authType === 'demo'\r\n\t\t\t\t\t\t\t\t\t\t? t('DEMO_ACCOUNT_IDENTITY_ADDRESS')\r\n\t\t\t\t\t\t\t\t\t\t: t('IDENTITY_ETH_ADDR')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tcopy(identityAddress)\r\n\t\t\t\t\t\t\t\t\texecute(\r\n\t\t\t\t\t\t\t\t\t\taddToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'accept',\r\n\t\t\t\t\t\t\t\t\t\t\taction: 'X',\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: t('COPIED_TO_CLIPBOARD'),\r\n\t\t\t\t\t\t\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CopyIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListDivider />\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tflexGrow='3'\r\n\t\t\t\t\t\t\tmr={1}\r\n\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\tjustifyContent='start'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\tprimary={formatAddress(walletAddress)}\r\n\t\t\t\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t\t\t\taccount.authType === 'demo'\r\n\t\t\t\t\t\t\t\t\t\t? t('DEMO_ACCOUNT_WALLET_ADDRESS', {\r\n\t\t\t\t\t\t\t\t\t\t\t\targs: [walletAuthType, walletPrivileges],\r\n\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t: t('WALLET_INFO_LABEL', {\r\n\t\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twalletAuthType.replace(/^\\w/, chr => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn chr.toUpperCase()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twalletPrivileges || ' - ',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tauthType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{walletJsonData && (\r\n\t\t\t\t\t\t\t\t<Box py={1} flexGrow='1'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='download-wallet-json'>\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\tid='download-wallet-json'\r\n\t\t\t\t\t\t\t\t\t\t\thref={localWalletDownloadHref()}\r\n\t\t\t\t\t\t\t\t\t\t\tdownload={`adex-account-data-${email}.json`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button size='small' variant='contained' fullWidth>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DownloadIcon className={classes.iconBtnLeft} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{t('BACKUP_LOCAL_WALLET')}\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListDivider />\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box pr={1} flexGrow='8'>\r\n\t\t\t\t\t\t\t<LoadingSection\r\n\t\t\t\t\t\t\t\tloading={!identityBalanceDai && identityBalanceDai !== 0}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tprimary={`${availableIdentityBalanceDai || 0} SAI`}\r\n\t\t\t\t\t\t\t\t\tsecondary={t('IDENTITY_DAI_BALANCE_AVAILABLE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\targs: [outstandingBalanceDai || 0],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingSection>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box flexGrow='1'>\r\n\t\t\t\t\t\t\t<Box py={1}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\taria-label='delete'\r\n\t\t\t\t\t\t\t\t\tonClick={() => displayRampWidget()}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<CreditCardIcon className={classes.iconBtnLeft} />\r\n\t\t\t\t\t\t\t\t\t{t('TOP_UP_IDENTITY_GBP')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t{grantType !== 'advertiser' && (\r\n\t\t\t\t\t\t\t\t<Box py={1}>\r\n\t\t\t\t\t\t\t\t\t<WithdrawTokenFromIdentity\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\tidentityAvailable={availableIdentityBalanceDai}\r\n\t\t\t\t\t\t\t\t\t\tidentityAvailableRaw={availableIdentityBalanceDai}\r\n\t\t\t\t\t\t\t\t\t\ttoken='SAI'\r\n\t\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListDivider />\r\n\t\t\t\t<ExpansionPanel expanded={expanded} onChange={handleExpandChange}>\r\n\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\r\n\t\t\t\t\t\taria-controls='panel1bh-content'\r\n\t\t\t\t\t\tid='panel1bh-header'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography className={classes.heading}>\r\n\t\t\t\t\t\t\t{t('ACCOUNT_ADVANCED_INFO_AND_ACTIONS')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t<List classes={{ root: classes.advancedList }}>\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Box pr={1} flexGrow='8'>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\t\t\t\tsecondary={''}\r\n\t\t\t\t\t\t\t\t\t\t\tprimary={t('MANAGE_IDENTITY')}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t<Box py={1} flexGrow='1'>\r\n\t\t\t\t\t\t\t\t\t\t<SetIdentityPrivilege\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\t\t\tidentityAvailable={availableIdentityBalanceDai}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\t\tprimary={t('VALIDATOR_LEADER_ID', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_LEADER_ID],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tsecondary={t('VALIDATOR_LEADER_URL', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_LEADER_URL],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\t\tprimary={t('VALIDATOR_FOLLOWER_ID', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_FOLLOWER_ID],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tsecondary={t('VALIDATOR_FOLLOWER_URL', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_FOLLOWER_URL],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Box flexGrow='1'>\r\n\t\t\t\t\t\t\t\t\t\t<Box py={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t<WithdrawAnyTokenFromIdentity\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t</List>\r\n\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t</ExpansionPanel>\r\n\t\t\t</List>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nAccountInfo.propTypes = {\r\n\tt: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Translate(AccountInfo)\r\n","import React, { useState, useEffect } from 'react'\r\nimport SideNav from './SideNav'\r\nimport TopBar from './TopBar'\r\nimport { Route, Switch } from 'react-router'\r\nimport Campaign from 'components/dashboard/containers/Campaign'\r\nimport DashboardStats from 'components/dashboard/containers/DashboardStats'\r\nimport Unit from 'components/dashboard/containers/Unit'\r\nimport Slot from 'components/dashboard/containers/Slot'\r\nimport Items from 'components/dashboard/containers/Items'\r\n// import Transactions from 'components/dashboard/containers/Transactions'\r\nimport {\r\n\tAdUnit as AdUnitModel,\r\n\tAdSlot as AdSlotModel,\r\n\tCampaign as CampaignModel,\r\n} from 'adex-models'\r\nimport Account from 'components/dashboard/account/AccountInfo'\r\nimport {\r\n\tNewUnitDialog,\r\n\tNewCampaignDialog,\r\n\tNewSlotDialog,\r\n} from 'components/dashboard/forms/items/NewItems'\r\nimport campaignsLoop from 'services/store-data/campaigns'\r\nimport statsLoop from 'services/store-data/account'\r\nimport analyticsLoop from 'services/store-data/analytics'\r\nimport {\r\n\tSORT_PROPERTIES_ITEMS,\r\n\tFILTER_PROPERTIES_ITEMS,\r\n\tFILTER_PROPERTIES_CAMPAIGN,\r\n\tSORT_PROPERTIES_CAMPAIGN,\r\n} from 'constants/misc'\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport PageNotFound from 'components/page_not_found/PageNotFound'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport {\r\n\tupdateNav,\r\n\tgetAllItems,\r\n\tupdateAccountSettings,\r\n\tupdateAccountAnalytics,\r\n\texecute,\r\n} from 'actions'\r\nimport { t } from 'selectors'\r\n\r\nconst Campaigns = () => (\r\n\t<>\r\n\t\t<NewCampaignDialog\r\n\t\t\tfabButton\r\n\t\t\tvariant='extended'\r\n\t\t\taccent\r\n\t\t\tcolor='secondary'\r\n\t\t\tbtnLabel='NEW_CAMPAIGN'\r\n\t\t/>\r\n\t\t<Items\r\n\t\t\theader={t('ALL_CAMPAIGNS')}\r\n\t\t\tviewModeId='rowsViewCampaigns'\r\n\t\t\titemType={'Campaign'}\r\n\t\t\tobjModel={CampaignModel}\r\n\t\t\tsortProperties={SORT_PROPERTIES_CAMPAIGN}\r\n\t\t\tuiStateId='campaigns'\r\n\t\t\tfilterProperties={FILTER_PROPERTIES_CAMPAIGN}\r\n\t\t/>\r\n\t</>\r\n)\r\n\r\nconst AdUnits = () => (\r\n\t<>\r\n\t\t<NewUnitDialog\r\n\t\t\tfabButton\r\n\t\t\tvariant='extended'\r\n\t\t\tcolor='secondary'\r\n\t\t\tbtnLabel='NEW_UNIT'\r\n\t\t/>\r\n\t\t<Items\r\n\t\t\theader={t('ALL_UNITS')}\r\n\t\t\tviewModeId='rowsViewUnits'\r\n\t\t\titemType={'AdUnit'}\r\n\t\t\tobjModel={AdUnitModel}\r\n\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\tuiStateId='units'\r\n\t\t/>\r\n\t</>\r\n)\r\n\r\nconst AdSlots = () => (\r\n\t<>\r\n\t\t<NewSlotDialog\r\n\t\t\tfabButton\r\n\t\t\tvariant='extended'\r\n\t\t\taccent\r\n\t\t\tcolor='secondary'\r\n\t\t\tbtnLabel='NEW_SLOT'\r\n\t\t/>\r\n\t\t<Items\r\n\t\t\theader={t('ALL_SLOTS')}\r\n\t\t\tviewModeId='rowsViewSlots'\r\n\t\t\titemType={'AdSlot'}\r\n\t\t\tobjModel={AdSlotModel}\r\n\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\tuiStateId='slots'\r\n\t\t/>\r\n\t</>\r\n)\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nfunction Dashboard(props) {\r\n\tconst [mobileOpen, setMobileOpen] = useState(false)\r\n\r\n\tconst { match } = props\r\n\tconst { side } = match.params\r\n\tconst classes = useStyles()\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('side', side))\r\n\t\texecute(getAllItems())\r\n\t\texecute(updateAccountSettings())\r\n\t\texecute(updateAccountAnalytics())\r\n\t\tanalyticsLoop.start()\r\n\t\tcampaignsLoop.start()\r\n\t\tstatsLoop.start()\r\n\r\n\t\treturn () => {\r\n\t\t\tcampaignsLoop.stop()\r\n\t\t\tstatsLoop.stop()\r\n\t\t}\r\n\t}, [side])\r\n\r\n\tuseEffect(() => {}, [match, mobileOpen])\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('side', side))\r\n\t}, [side])\r\n\r\n\tconst handleDrawerToggle = () => {\r\n\t\tsetMobileOpen(!mobileOpen)\r\n\t}\r\n\r\n\tconst drawer = <SideNav side={side} />\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<TopBar\r\n\t\t\t\tside={side}\r\n\t\t\t\topen={mobileOpen}\r\n\t\t\t\thandleDrawerToggle={handleDrawerToggle}\r\n\t\t\t/>\r\n\t\t\t<Hidden mdUp>\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tvariant='temporary'\r\n\t\t\t\t\tanchor='left'\r\n\t\t\t\t\topen={mobileOpen}\r\n\t\t\t\t\tonClose={handleDrawerToggle}\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tModalProps={{\r\n\t\t\t\t\t\tkeepMounted: true, // Better open performance on mobile.\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{drawer}\r\n\t\t\t\t</Drawer>\r\n\t\t\t</Hidden>\r\n\t\t\t<Hidden smDown implementation='css'>\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tvariant='permanent'\r\n\t\t\t\t\topen\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{drawer}\r\n\t\t\t\t</Drawer>\r\n\t\t\t</Hidden>\r\n\r\n\t\t\t<main className={classes.content}>\r\n\t\t\t\t<div className={classes.contentInner}>\r\n\t\t\t\t\t<div className={classes.toolbar} />\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/campaigns'\r\n\t\t\t\t\t\t\tcomponent={Campaigns}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/units'\r\n\t\t\t\t\t\t\tcomponent={AdUnits}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/Campaign/:itemId'\r\n\t\t\t\t\t\t\tcomponent={props => <Campaign {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/AdUnit/:itemId'\r\n\t\t\t\t\t\t\tcomponent={props => <Unit {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/publisher/slots'\r\n\t\t\t\t\t\t\tcomponent={AdSlots}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/publisher/AdSlot/:itemId'\r\n\t\t\t\t\t\t\tcomponent={props => <Slot {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath={'/dashboard/:side/account'}\r\n\t\t\t\t\t\t\tcomponent={props => <Account {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{/* <Route\r\n\t\t\t\t\t\t\t\tauth={this.props.auth}\r\n\t\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\t\tpath={'/dashboard/:side/transactions'}\r\n\t\t\t\t\t\t\t\tcomponent={props => <Transactions {...props} />}\r\n\t\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/:side'\r\n\t\t\t\t\t\t\tcomponent={props => <DashboardStats {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route component={props => <PageNotFound {...props} />} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dashboard\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\troot: {\r\n\t\t\t// flexGrow: 1,\r\n\t\t\theight: '100vh',\r\n\t\t},\r\n\t\tsigninContainer: {\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tminHeight: '100vh',\r\n\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\tbackgroundSize: 'cover',\r\n\t\t\tbackgroundPosition: 'center',\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tcontainer: {\r\n\t\t\theight: '100vh',\r\n\t\t\tflexGrow: '1',\r\n\t\t},\r\n\t\tactions: {\r\n\t\t\tbackgroundImage: `url(${require('resources/home-wallpaper.jpg')})`,\r\n\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\tbackgroundSize: 'cover',\r\n\t\t\tbackgroundPosition: 'center',\r\n\t\t},\r\n\t\tbuttons: {\r\n\t\t\tbackgroundColor: theme.palette.grey[200],\r\n\t\t},\r\n\t\tadxVersion: {\r\n\t\t\t// position: 'absolute',\r\n\t\t\t// left: spacing,\r\n\t\t\t// bottom: spacing\r\n\t\t},\r\n\t\tadexLogoTop: {\r\n\t\t\ttextAlign: 'center',\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\t// marginTop: '1.5vh',\r\n\t\t\t// width: '17.92vh',\r\n\t\t\t// height: '6vh',\r\n\t\t\theight: '2rem',\r\n\t\t},\r\n\t\tdialogPaper: {\r\n\t\t\theight: '80vh',\r\n\t\t\tmargin: spacing * 2,\r\n\t\t},\r\n\t\tnoBg: {\r\n\t\t\tbackground: 0,\r\n\t\t\tboxShadow: 'none',\r\n\t\t\toverflow: 'visible',\r\n\t\t},\r\n\t\tbackdrop: {\r\n\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1 auto',\r\n\t\t\t// position: 'relative',\r\n\t\t\tjustifyContent: 'center',\r\n\t\t\tpadding: 24,\r\n\t\t\t// margin: `${spacing}px ${spacing}px ${spacing}px ${spacing}px`,\r\n\t\t\t// '&:first-child': {\r\n\t\t\t// \tpaddingTop: spacing,\r\n\t\t\t// },\r\n\t\t\t// overflow: 'visible',\r\n\t\t\t// maxHeight: '100vh'\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport Button from '@material-ui/core/Button'\r\nimport Box from '@material-ui/core/Box'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport { Typography } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getAuthLogo } from 'helpers/logosHelpers'\r\nimport Img from 'components/common/img/Img'\r\nimport classnames from 'classnames'\r\nimport { getAllWallets } from 'services/wallet/wallet'\r\nimport { execute, initIdentity, confirmAction } from 'actions'\r\nimport { selectAuth, selectAccount } from 'selectors'\r\nimport { logOut } from 'services/store-data/auth'\r\nimport { formatAddress } from 'helpers/formatters'\r\nimport { push } from 'connected-react-router'\r\nimport { t } from 'selectors'\r\n\r\nconst RRButton = withReactRouterLink(Button)\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst AuthSelect = () => {\r\n\tconst classes = useStyles()\r\n\tconst [wallets, setWallets] = useState([])\r\n\r\n\tconst auth = useSelector(selectAuth)\r\n\tconst account = useSelector(selectAccount)\r\n\tconst { wallet } = account || {}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst allWallets = getAllWallets()\r\n\t\tconst wallets = allWallets.filter(\r\n\t\t\tw => w.authType !== 'legacy' && w.name !== wallet.email\r\n\t\t)\r\n\t\tsetWallets(wallets)\r\n\t}, [wallet])\r\n\r\n\tconst goTo = (to, confirmLogout, onConfirm) => {\r\n\t\tconst toExecute = () => {\r\n\t\t\tlogOut()\r\n\t\t\texecute(push(to))\r\n\t\t\tif (onConfirm && typeof onConfirm === 'function') {\r\n\t\t\t\tonConfirm()\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (auth && confirmLogout) {\r\n\t\t\texecute(\r\n\t\t\t\tconfirmAction(toExecute, null, {\r\n\t\t\t\t\tconfirmLabel: t('CONTINUE_NEW_AUTH'),\r\n\t\t\t\t\tcancelLabel: t('KEEP_MY_SESSION'),\r\n\t\t\t\t\ttitle: t('CONFIRM_DIALOG_NEW_AUTH_TITLE'),\r\n\t\t\t\t\ttext: t('CONFIRM_DIALOG_NEW_AUTH_TITLE', {\r\n\t\t\t\t\t\targs: [wallet.authType, wallet.address],\r\n\t\t\t\t\t}),\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\ttoExecute()\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tdisplay='flex'\r\n\t\t\tflexDirection='column'\r\n\t\t\talignItems='stretch'\r\n\t\t\tjustifyContent='space-between'\r\n\t\t>\r\n\t\t\t<Box p={2} alignItems='center'>\r\n\t\t\t\t<Typography align='center' variant='subtitle1' display='block'>\r\n\t\t\t\t\t{t('SIGN_UP_IN_SELECT')}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\t\t\t{auth && (\r\n\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t<RRButton\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tto='/side-select'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tcolor='default'\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('CONTINUE_AS', {\r\n\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\twallet.email || formatAddress(wallet.address),\r\n\t\t\t\t\t\t\t\twallet.authType,\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</RRButton>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t\t{wallets.map(w => (\r\n\t\t\t\t<Box key={w.name} m={1}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tgoTo('/login/quick', true, () =>\r\n\t\t\t\t\t\t\t\texecute(initIdentity({ email: w.name, authType: w.authType }))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('SIGN_IN_TO', { args: [w.name] })}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t))}\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classnames(classes.metamaskBtn, classes.limitedWidthBtn)}\r\n\t\t\t\t\tonClick={() => goTo('/login/full?metamask', true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tsrc={getAuthLogo('metamask')}\r\n\t\t\t\t\t\talt={t('AUTH_WITH_METAMASK')}\r\n\t\t\t\t\t\tclassName={classes.btnLogo}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{t('METAMASK')}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classes.trezorBtn}\r\n\t\t\t\t\tonClick={() => goTo('/login/full?trezor', true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tsrc={getAuthLogo('trezor')}\r\n\t\t\t\t\t\talt={t('AUTH_WITH_TREZOR')}\r\n\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\tclasses.btnLogo,\r\n\t\t\t\t\t\t\tclasses.btnLogoNoTxt,\r\n\t\t\t\t\t\t\tclasses.limitedWidthBtn\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* {t('TREZOR')} */}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\tonClick={() => goTo('/login/quick', true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t('LOGIN_QUICK_ACCOUNT')}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tgoTo('/signup/quick', true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t('CREATE_QUICK_ACCOUNT')}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default AuthSelect\r\n","export const styles = theme => {\r\n\treturn {\r\n\t\tactions: {\r\n\t\t\tjustifyContent: 'center',\r\n\t\t},\r\n\t\tlimitedWidthBtn: {\r\n\t\t\twordBreak: 'break-word',\r\n\t\t\ttextAlign: 'center',\r\n\t\t},\r\n\t\tbtnLogo: {\r\n\t\t\theight: '2rem',\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t\tbtnLogoNoTxt: {\r\n\t\t\tmarginRight: 0,\r\n\t\t},\r\n\t\tmetamaskBtn: {\r\n\t\t\tbackgroundColor: theme.palette.grey[800],\r\n\t\t\tcolor: theme.palette.common.white,\r\n\t\t},\r\n\t\ttrezorBtn: {\r\n\t\t\tbackgroundColor: theme.palette.common.white,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Box from '@material-ui/core/Box'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport packageJson from './../../../package.json'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport AuthSelect from 'components/signin/auth-select/AuthSelect'\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown'\r\nimport { t } from 'selectors'\r\nimport { Typography } from '@material-ui/core'\r\n\r\nexport default function ConnectHoc(Decorated) {\r\n\tfunction Connect({ classes, ...rest }) {\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tclassName={classes.container}\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\talignItems='stretch'\r\n\t\t\t\t\t// spacing={2}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid className={classes.actions} item xs={12} md={7} lg={8} xl={9}>\r\n\t\t\t\t\t\t<Box width={1} height={1} p={4}>\r\n\t\t\t\t\t\t\t<Box width={1} height={1} position='relative'>\r\n\t\t\t\t\t\t\t\t<Decorated t={t} {...rest} />\r\n\t\t\t\t\t\t\t\t<Hidden mdUp>\r\n\t\t\t\t\t\t\t\t\t<Box display='flex' justifyContent='center'>\r\n\t\t\t\t\t\t\t\t\t\t<ArrowDropDownIcon color='primary' fontSize='large' />\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Hidden>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} md={5} lg={4} xl={3}>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\tflexDirection='column'\r\n\t\t\t\t\t\t\talignItems='stretch'\r\n\t\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\t\tstyle={{ height: '100%' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Box p={4} alignItems='center'>\r\n\t\t\t\t\t\t\t\t<Typography align='center' variant='h3'>\r\n\t\t\t\t\t\t\t\t\t{t('SIGN_UP_IN')}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t\t\t\t<AuthSelect {...rest} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\tp={2}\r\n\t\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\t\tflexDirection='column'\r\n\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t\tflexWrap='wrap'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref='https://medium.com/adex-network-tips-and-tricks'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('HELP')}\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<small className={classes.adxVersion}>\r\n\t\t\t\t\t\t\t\t\t{`v.${packageJson.version}-beta`}\r\n\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn withStyles(styles)(Connect)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions, { execute, login } from 'actions'\r\nimport { push } from 'connected-react-router'\r\n\r\nexport default function IdentityHoc(Decorated) {\r\n\tclass IdentityForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tready: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value) => {\r\n\t\t\tthis.props.actions.updateIdentity(prop, value)\r\n\t\t}\r\n\r\n\t\t// componentDidUpdate = () => {\r\n\t\t// \tconst { account } = this.props\r\n\t\t// \tif (account.wallet.authSig) {\r\n\t\t// \t\texecute(push('/side-select'))\r\n\t\t// \t}\r\n\t\t// }\r\n\r\n\t\tsave = async () => {\r\n\t\t\texecute(login())\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tconst { resetIdentity } = this.props.actions\r\n\t\t\tresetIdentity()\r\n\t\t\texecute(push('/'))\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { identity, spinner, waitingExpected, ...rest } = this.props\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tidentity={identity}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t\twaiting={spinner}\r\n\t\t\t\t\twaitingExpected={waitingExpected}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tIdentityForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\taccount: PropTypes.object.isRequired,\r\n\t\tidentity: PropTypes.object.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist, memory } = state\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t\tidentity: memory.identity,\r\n\t\t\tspinner: memory.spinners['creating-session'],\r\n\t\t\twaitingExpected: memory.spinners['getting-expected-identity'],\r\n\t\t\twaitingUpload: memory.spinners['uploading-account-data'],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(IdentityForm)\r\n}\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tsigninContainer: {\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tminHeight: '100vh',\r\n\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\tbackgroundSize: 'cover',\r\n\t\t\tbackgroundPosition: 'center',\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tcontainer: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t},\r\n\t\tadxVersion: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: spacing,\r\n\t\t\tbottom: spacing,\r\n\t\t},\r\n\t\tadexLogoTop: {\r\n\t\t\ttextAlign: 'center',\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\tmarginTop: '1.5vh',\r\n\t\t\twidth: '17.92vh',\r\n\t\t\theight: '6vh',\r\n\t\t},\r\n\t\tformControl: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t},\r\n\t\tbuttonProgressWrapper: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tbuttonProgress: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: '50%',\r\n\t\t\tleft: '50%',\r\n\t\t\tmarginTop: -12,\r\n\t\t\tmarginLeft: -12,\r\n\t\t},\r\n\t\tinfoPaper: {\r\n\t\t\t...theme.mixins.gutters(),\r\n\t\t\tpaddingTop: spacing * 2,\r\n\t\t\tpaddingBottom: spacing * 2,\r\n\t\t},\r\n\t\tinput: {\r\n\t\t\tdisplay: 'none',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport { validEmail, validQuickAccountCoupon } from 'helpers/validators'\r\nimport { checkAccessCode } from 'services/adex-relayer/actions'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nconst ACCESS_CODE_CHECK = process.env.ACCESS_CODE_CHECK === 'true'\r\n\r\nclass IdentityContractAddressEthDeploy extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { email, emailCheck, code } = this.props.identity\r\n\r\n\t\tthis.validateIdentity()\r\n\t\tthis.validateEmail(email, false)\r\n\t\tthis.validateEmailCheck(emailCheck, false)\r\n\t\tACCESS_CODE_CHECK && this.validateCode(code, false)\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst currIdentity = this.props.identity.identityData\r\n\t\tif (\r\n\t\t\t!!currIdentity &&\r\n\t\t\tcurrIdentity.address !== (prevProps.identity.identityData || {}).address\r\n\t\t) {\r\n\t\t\tthis.validateIdentity()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateIdentity = () => {\r\n\t\tconst { validate, identity } = this.props\r\n\t\tconst { identityData } = identity\r\n\r\n\t\tvalidate('identityData', {\r\n\t\t\tisValid: !!identityData,\r\n\t\t\terr: { msg: 'ERR_IDENTITY_NOT_GENERATED' },\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateEmail(email, dirty) {\r\n\t\tconst isValid = validEmail(email)\r\n\t\tthis.props.validate('email', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateEmailCheck(emailCheck, email, dirty) {\r\n\t\tconst isValid = !!emailCheck && !!email && emailCheck === email\r\n\t\tthis.props.validate('emailCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateCode(code, dirty) {\r\n\t\tconst isValidFormat = validQuickAccountCoupon(code)\r\n\r\n\t\tif (!isValidFormat) {\r\n\t\t\tthis.props.validate('code', {\r\n\t\t\t\tisValid: isValidFormat,\r\n\t\t\t\terr: { msg: 'ERR_ACCESS_CODE_FORMAT' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.setState({ waitingCheck: true }, () => {\r\n\t\t\t\tcheckAccessCode({ code })\r\n\t\t\t\t\t.then((cpn = {}) => {\r\n\t\t\t\t\t\tconst isValid = cpn.exist === true && cpn.used === false\r\n\t\t\t\t\t\tlet msg = ''\r\n\t\t\t\t\t\tif (cpn.exist === false) {\r\n\t\t\t\t\t\t\tmsg = 'ERR_ACCESS_CODE_NOT_EXIST'\r\n\t\t\t\t\t\t} else if (cpn.used === true) {\r\n\t\t\t\t\t\t\tmsg = 'ERR_ACCESS_CODE_USED'\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.props.validate('code', {\r\n\t\t\t\t\t\t\tisValid: isValid,\r\n\t\t\t\t\t\t\terr: { msg: msg },\r\n\t\t\t\t\t\t\tdirty: dirty,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.props.validate('code', {\r\n\t\t\t\t\t\t\tisValid: false,\r\n\t\t\t\t\t\t\terr: { msg: 'ERR_ACCESS_CODE_NETWORK' },\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tgetIdentityContractData = async () => {\r\n\t\tconst { actions, identity } = this.props\r\n\t\tconst { wallet, email } = identity\r\n\t\tactions.getRegisterExpectedIdentity({\r\n\t\t\towner: wallet.address,\r\n\t\t\tmail: email,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tidentity,\r\n\t\t\thandleChange,\r\n\t\t\tinvalidFields,\r\n\t\t\twaitingExpected,\r\n\t\t\tclasses,\r\n\t\t} = this.props\r\n\t\tconst { identityData } = identity\r\n\t\t// Errors\r\n\t\tconst { email, emailCheck, code } = invalidFields\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t{ACCESS_CODE_CHECK && (\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography paragraph variant='body1'>\r\n\t\t\t\t\t\t\t\t{t('ACCESS_CODE_INFO')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{ACCESS_CODE_CHECK && (\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tlabel={t('code', { isProp: true })}\r\n\t\t\t\t\t\t\t\tname='code'\r\n\t\t\t\t\t\t\t\tvalue={identity.code || ''}\r\n\t\t\t\t\t\t\t\tonChange={ev => handleChange('code', ev.target.value)}\r\n\t\t\t\t\t\t\t\tonBlur={() => this.validateCode(identity.code, true)}\r\n\t\t\t\t\t\t\t\tonFocus={() => this.validateCode(identity.code, false)}\r\n\t\t\t\t\t\t\t\terror={code && !!code.dirty}\r\n\t\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\tcode && !!code.dirty ? code.errMsg : t('ENTER_VALID_CODE')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Typography paragraph variant='body1'>\r\n\t\t\t\t\t\t\t{t('GENERATE_FULL_IDENTITY_INFO_EMAIL')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('email', { isProp: true })}\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tvalue={identity.email || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('email', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateEmail(identity.email, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateEmail(identity.email, false)}\r\n\t\t\t\t\t\t\terror={email && !!email.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temail && !!email.dirty ? email.errMsg : t('ENTER_VALID_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('emailCheck', { isProp: true })}\r\n\t\t\t\t\t\t\tname='emailCheck'\r\n\t\t\t\t\t\t\tvalue={identity.emailCheck || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('emailCheck', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={emailCheck && !!emailCheck.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temailCheck && !!emailCheck.dirty\r\n\t\t\t\t\t\t\t\t\t? emailCheck.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('ENTER_SAME_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Typography paragraph variant='body1'>\r\n\t\t\t\t\t\t\t{t('GENERATE_FULL_IDENTITY_INFO_ADDRESS')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t{!(identityData || {}).address ? (\r\n\t\t\t\t\t\t\t<span className={classes.buttonProgressWrapper}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\tonClick={this.getIdentityContractData}\r\n\t\t\t\t\t\t\t\t\tdisabled={waitingExpected}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('GENERATE_IDENTITY_ADDRESS')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t{waitingExpected && (\r\n\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Typography paragraph variant='subtitle2' color='primary'>\r\n\t\t\t\t\t\t\t\t\t{t('IDENTITY_CONTRACT_IS', { args: [identityData.address] })}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nIdentityContractAddressEthDeploy.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tidentity: PropTypes.object.isRequired,\r\n\thandleChange: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tinvalidFields: PropTypes.object.isRequired,\r\n\tvalidate: PropTypes.func.isRequired,\r\n}\r\n\r\nconst IdentityContractAddressStep = IdentityHoc(\r\n\tIdentityContractAddressEthDeploy\r\n)\r\nexport default Translate(withStyles(styles)(IdentityContractAddressStep))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nexport default function NewItemHoc(Decorated) {\r\n\tclass ValidItemHoc extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tinvalidFields: {},\r\n\t\t\t}\r\n\r\n\t\t\tthis.validate = this.validate.bind(this)\r\n\t\t}\r\n\r\n\t\tcomponentWillReceiveProps(nextProps) {\r\n\t\t\tthis.setState({ invalidFields: nextProps.validations || {} })\r\n\t\t}\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t\tthis.setState({ invalidFields: this.props.validations || {} })\r\n\t\t}\r\n\r\n\t\tvalidate = (\r\n\t\t\tkey,\r\n\t\t\t{ isValid, err = { msg: '', args: [] }, dirty = false, removeAll = false }\r\n\t\t) => {\r\n\t\t\tif (!isValid) {\r\n\t\t\t\tlet errors = {}\r\n\t\t\t\terrors[key] = {\r\n\t\t\t\t\terrMsg: this.props.t(err.msg, { args: err.args }),\r\n\t\t\t\t\tdirty: dirty,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.props.actions.updateValidationErrors(this.props.validateId, errors)\r\n\t\t\t} else if (removeAll) {\r\n\t\t\t\tthis.props.actions.resetValidationErrors(this.props.validateId)\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.actions.resetValidationErrors(this.props.validateId, key)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst props = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tvalidate={this.validate}\r\n\t\t\t\t\tinvalidFields={this.state.invalidFields}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tValidItemHoc.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tvalidateId: PropTypes.string.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\t// let persist = state.persist\r\n\t\tlet memory = state.memory\r\n\t\treturn {\r\n\t\t\tvalidations: memory.validations[props.validateId],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(ValidItemHoc))\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\nimport IdentityHoc from '../IdentityHoc'\r\nimport ValidItemHoc from 'components/common/stepper/ValidItemHoc'\r\n\r\nexport default function AuthHoc(Decorated) {\r\n\tclass Auth extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\t\t\tthis.state = {\r\n\t\t\t\tmethod: '',\r\n\t\t\t\tsideSelect: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateWallet = ({\r\n\t\t\taddress,\r\n\t\t\tauthType,\r\n\t\t\thdWalletAddrPath,\r\n\t\t\thdWalletAddrIdx,\r\n\t\t\tpath,\r\n\t\t\tchainId,\r\n\t\t\tsignType,\r\n\t\t\tbalanceEth,\r\n\t\t\tbalanceDai,\r\n\t\t}) => {\r\n\t\t\tconst wallet = {\r\n\t\t\t\taddress,\r\n\t\t\t\tauthType,\r\n\t\t\t\thdWalletAddrPath,\r\n\t\t\t\thdWalletAddrIdx,\r\n\t\t\t\tpath,\r\n\t\t\t\tchainId,\r\n\t\t\t\tsignType,\r\n\t\t\t\tbalanceEth,\r\n\t\t\t\tbalanceDai,\r\n\t\t\t}\r\n\r\n\t\t\tthis.props.handleChange('identityContractOwner', address)\r\n\t\t\tthis.props.handleChange('wallet', wallet)\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t// updateAcc={this.updateAcc}\r\n\t\t\t\t\tupdateWallet={this.updateWallet}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tAuth.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state) {\r\n\t\tlet persist = state.persist\r\n\t\t// let memory = state.memory\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(ValidItemHoc(IdentityHoc(Auth))))\r\n}\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\taddrListItem: {\r\n\t\t\t'&:hover': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t},\r\n\t\t},\r\n\t\taddrInfo: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tflexGrow: 1,\r\n\t\t\tpaddingTop: spacing,\r\n\t\t\twhiteSpace: 'normal',\r\n\t\t\t'& strong': {\r\n\t\t\t\tmarginRight: spacing * 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\taddrInfoLabel: {\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t\tfontWeight: 'bold',\r\n\t\t},\r\n\t\tdialogPaper: {\r\n\t\t\theight: '80vh',\r\n\t\t\tmargin: spacing * 2,\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1 auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tpadding: 0,\r\n\t\t\tmargin: `0 ${spacing}px ${spacing}px ${spacing}px`,\r\n\t\t\t'&:first-child': {\r\n\t\t\t\tpaddingTop: spacing,\r\n\t\t\t},\r\n\t\t\toverflow: 'visible',\r\n\t\t},\r\n\t\ttabsContainer: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexGrow: 1,\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tmargin: spacing,\r\n\t\t\t// marginTop: spacing * 2,\r\n\t\t\t// position: 'absolute',\r\n\t\t\t// top: 70,\r\n\t\t\t// left: 0,\r\n\t\t\t// right: 0,\r\n\t\t\t// bottom: 0\r\n\t\t},\r\n\t\tbackdrop: {\r\n\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n\t\t},\r\n\t\ttabLogo: {\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: spacing * 4,\r\n\t\t\tmaxHeight: '100%',\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t\ttabLabel: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'center',\r\n\t\t},\r\n\t\tdlBtnImg: {\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\tmaxHeight: spacing * 9,\r\n\t\t\twidth: 'auto',\r\n\t\t\theight: 'auto',\r\n\t\t},\r\n\t\tleftBtnIcon: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tadexLogoTop: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: '-6vh',\r\n\t\t\tleft: 0,\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\twidth: '12.8vh',\r\n\t\t\theight: '5vh',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { utils } from 'ethers'\r\n\r\nexport const addrItem = ({ stats, t, classes }) => {\r\n\tconst { balanceEth, balanceDai, address } = stats\r\n\r\n\treturn (\r\n\t\t<ListItemText\r\n\t\t\tprimary={address}\r\n\t\t\tsecondary={\r\n\t\t\t\t<span className={classes.addrInfo}>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<span> ETH </span>\r\n\t\t\t\t\t\t<strong> {utils.formatEther(balanceEth)} </strong>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<span> SAI </span>\r\n\t\t\t\t\t\t<strong> {utils.formatEther(balanceDai)} </strong>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const AddrItem = withStyles(styles)(addrItem)\r\n","import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Translate from 'components/translate/Translate'\r\nimport METAMASK_DL_IMG from 'resources/download-metamask.png'\r\nimport METAMASK_IMG from 'resources/metamask.png'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport Img from 'components/common/img/Img'\r\nimport AuthHoc from './AuthHoc'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { AddrItem } from './AuthCommon'\r\nimport { addToast, execute } from 'actions'\r\nimport {\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tTopLoading,\r\n} from 'components/common/dialog/content'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getEthers, getEthereumProvider } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\nimport { getAddressBalances } from 'services/smart-contracts/actions/stats'\r\nimport Box from '@material-ui/core/Box'\r\n\r\nfunction AuthMetamask(props) {\r\n\tconst [installingMetamask, setInstallingMetamask] = useState(false)\r\n\tconst [address, setAddress] = useState(null)\r\n\tconst [stats, setStats] = useState(null)\r\n\tconst [waitingMetamaskAction, setWaitingMetamaskAction] = useState(false)\r\n\tconst [waitingAddrsData, setWaitingAddrsData] = useState(false)\r\n\tconst { t, classes } = props\r\n\tconst isOpera =\r\n\t\t!!window.opr || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0\r\n\tconst [isMetamaskEthereumProvider, setIsMetamaskEthereumProvider] = useState(\r\n\t\tfalse\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst setEth = async () => {\r\n\t\t\tconst ethereumProvider = await getEthereumProvider()\r\n\t\t\tsetIsMetamaskEthereumProvider(\r\n\t\t\t\tethereumProvider === AUTH_TYPES.METAMASK.name\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tsetEth()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (installingMetamask) {\r\n\t\t\t// Refreshes page after user comes back\r\n\t\t\t// from installing Metamask\r\n\t\t\twindow.onfocus = () => {\r\n\t\t\t\twindow.location.reload()\r\n\t\t\t\tsetInstallingMetamask(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [installingMetamask])\r\n\r\n\tconst checkMetamask = async () => {\r\n\t\tsetWaitingAddrsData(true)\r\n\t\ttry {\r\n\t\t\tconst authType = AUTH_TYPES.METAMASK.name\r\n\t\t\tconst { provider } = await getEthers(authType)\r\n\t\t\tconst wallet = {\r\n\t\t\t\tauthType: authType,\r\n\t\t\t}\r\n\r\n\t\t\tconst metamaskSigner = await getSigner({ wallet, provider })\r\n\t\t\tconst address = await metamaskSigner.getAddress()\r\n\t\t\tconst stats = await getAddressBalances({\r\n\t\t\t\taddress: { address },\r\n\t\t\t\tauthType,\r\n\t\t\t})\r\n\t\t\tsetAddress(address)\r\n\t\t\tsetStats(stats)\r\n\t\t\tsetWaitingAddrsData(false)\r\n\r\n\t\t\tprops.updateWallet({\r\n\t\t\t\taddress,\r\n\t\t\t\tauthType: AUTH_TYPES.METAMASK.name,\r\n\t\t\t\tbalanceEth: stats.balanceEth,\r\n\t\t\t\tbalanceDai: stats.balanceDai,\r\n\t\t\t\tsignType: AUTH_TYPES.METAMASK.signType,\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Error: catch', err)\r\n\t\t\tsetWaitingMetamaskAction(false)\r\n\t\t\tsetWaitingAddrsData(false)\r\n\t\t\texecute(\r\n\t\t\t\taddToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: t('ERR_AUTH_METAMASK', {\r\n\t\t\t\t\t\targs: [Helper.getErrMsg(err)],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t{waitingMetamaskAction ? (\r\n\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t<TopLoading msg={t('METAMASK_WAITING_ACTION')} />\r\n\t\t\t\t</ContentStickyTop>\r\n\t\t\t) : waitingAddrsData ? (\r\n\t\t\t\t<TopLoading msg={t('METAMASK_WAITING_ADDR_INFO')} />\r\n\t\t\t) : null}\r\n\t\t\t<ContentBody>\r\n\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t{t('METAMASK_INFO')}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\tflexDirection='column'\r\n\t\t\t\t\talignItems='center'\r\n\t\t\t\t\tjustifyContent='center'\r\n\t\t\t\t\twidth={1}\r\n\t\t\t\t>\r\n\t\t\t\t\t{!isMetamaskEthereumProvider ? (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t__html: t('METAMASK_BASIC_USAGE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisOpera\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'https://chrome.google.com/webstore/detail/nkbihfbeogaeaoehlefnkodbefgpgknn'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://metamask.io/'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thttps://metamask.io/\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\thref={\r\n\t\t\t\t\t\t\t\t\t\tisOpera\r\n\t\t\t\t\t\t\t\t\t\t\t? 'https://chrome.google.com/webstore/detail/nkbihfbeogaeaoehlefnkodbefgpgknn'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'https://metamask.io/'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\tonClick={() => setInstallingMetamask(true)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\tsrc={METAMASK_DL_IMG}\r\n\t\t\t\t\t\t\t\t\t\talt={'Downlad metamask'}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\tsrc={METAMASK_IMG}\r\n\t\t\t\t\t\t\t\talt={'Downlad metamask'}\r\n\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{address ? (\r\n\t\t\t\t\t\t<div className={classes.metamaskLAbel}>\r\n\t\t\t\t\t\t\t{stats ? (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Typography paragraph variant='subheading' color='primary'>\r\n\t\t\t\t\t\t\t\t\t\t{t('METAMASK_CONTINUE_TO_NEXT_STEP')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<AddrItem stats={stats} t={t} addr={address} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tt('AUTH_WITH_METAMASK_LABEL', { args: [address] })\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : isMetamaskEthereumProvider ? (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={checkMetamask}\r\n\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\tdisabled={waitingAddrsData}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('AUTH_CONNECT_WITH_METAMASK')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Box>\r\n\t\t\t</ContentBody>\r\n\t\t</ContentBox>\r\n\t)\r\n}\r\n\r\nAuthMetamask.propTypes = {\r\n\tupdateWallet: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Translate(AuthHoc(withStyles(styles)(AuthMetamask)))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Translate from 'components/translate/Translate'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport Img from 'components/common/img/Img'\r\nimport Button from '@material-ui/core/Button'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport AuthHoc from './AuthHoc'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { AddrItem } from './AuthCommon'\r\nimport {\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tTopLoading,\r\n} from 'components/common/dialog/content'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport TREZOR_DL_IMG from 'resources/trezor-logo-h.png'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\nimport { getAddressBalances } from 'services/smart-contracts/actions/stats'\r\n\r\nclass AuthTrezor extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tmethod: '',\r\n\t\t\tsideSelect: false,\r\n\t\t\taddresses: [],\r\n\t\t\twaitingTrezorAction: false,\r\n\t\t\twaitingAddrsData: false,\r\n\t\t\tselectedAddress: null,\r\n\t\t\thdPath: '',\r\n\t\t}\r\n\t}\r\n\r\n\tconnectTrezor = async () => {\r\n\t\tthis.setState({ waitingTrezorAction: true }, async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { provider } = await getEthers(AUTH_TYPES.TREZOR.name)\r\n\r\n\t\t\t\tconst wallet = {\r\n\t\t\t\t\tauthType: AUTH_TYPES.TREZOR.name,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst trezorSigner = await getSigner({ provider, wallet })\r\n\r\n\t\t\t\tconst addresses = await trezorSigner.getAddresses({ from: 0, to: 19 })\r\n\r\n\t\t\t\tconst allAddressesData = addresses.payload.map(address =>\r\n\t\t\t\t\tgetAddressBalances({ address, authType: AUTH_TYPES.TREZOR.name })\r\n\t\t\t\t)\r\n\r\n\t\t\t\tthis.setState({ waitingAddrsData: true }, async () => {\r\n\t\t\t\t\tconst results = await Promise.all(allAddressesData)\r\n\r\n\t\t\t\t\tconsole.log('result', results)\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\thdPath: trezorSigner.path,\r\n\t\t\t\t\t\taddresses: results,\r\n\t\t\t\t\t\twaitingAddrsData: false,\r\n\t\t\t\t\t\twaitingTrezorAction: false,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Error: catch', err)\r\n\t\t\t\tthis.setState({ waitingTrezorAction: false, waitingAddrsData: false })\r\n\t\t\t\tthis.props.actions.addToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: this.props.t('ERR_AUTH_TREZOR', {\r\n\t\t\t\t\t\targs: [Helper.getErrMsg(err)],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tAddressSelect = ({ addresses, waitingTrezorAction, t, classes, ...rest }) => {\r\n\t\treturn (\r\n\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t{waitingTrezorAction ? (\r\n\t\t\t\t\t\t<TopLoading msg={t('TREZOR_WAITING_ACTION')} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tt('SELECT_ADDR_TREZOR')\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{addresses.map((res, index) => (\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tclasses={{ root: classes.addrListItem }}\r\n\t\t\t\t\t\t\t\tkey={res.address}\r\n\t\t\t\t\t\t\t\tonClick={() => this.onAddrSelect(res, index)}\r\n\t\t\t\t\t\t\t\tselected={this.state.selectedAddress === res.address}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<AddrItem stats={res} t={t} address={res.address} />\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n\r\n\tonAddrSelect = (addrData, hdWalletAddrIdx) => {\r\n\t\tconst { address, path, balanceEth, balanceDai } = addrData\r\n\t\tthis.props.updateWallet({\r\n\t\t\taddress,\r\n\t\t\tauthType: AUTH_TYPES.TREZOR.name,\r\n\t\t\tpath,\r\n\t\t\tbalanceEth,\r\n\t\t\tbalanceDai,\r\n\t\t\thdWalletAddrPath: this.state.hdPath,\r\n\t\t\thdWalletAddrIdx,\r\n\t\t\tsignType: AUTH_TYPES.TREZOR.signType,\r\n\t\t})\r\n\r\n\t\tthis.setState({ selectedAddress: address })\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { t, classes } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.state.addresses.length ? (\r\n\t\t\t\t\t<this.AddressSelect\r\n\t\t\t\t\t\twaitingTrezorAction={this.state.waitingTrezorAction}\r\n\t\t\t\t\t\taddresses={this.state.addresses}\r\n\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t\t\t{this.state.waitingAddrsData ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('TREZOR_WAITING_ADDRS_INFO')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : this.state.waitingTrezorAction ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('TREZOR_WAITING_ACTION')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t\t{t('TREZOR_INFO')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t__html: t('TREZOR_BASIC_USAGE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor href='https://trezor.io/' target='_blank'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTREZOR Wallet\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref='https://wallet.trezor.io/#/bridge'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTREZOR Bridge\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<Anchor href='https://trezor.io' target='_blank'>\r\n\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\tsrc={TREZOR_DL_IMG}\r\n\t\t\t\t\t\t\t\t\t\talt={'https://trezor.io'}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t{!this.state.waitingAddrsData && !this.state.waitingTrezorAction && (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={this.connectTrezor}\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('CONNECT_WITH_TREZOR')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</ContentBox>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAuthTrezor.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tupdateWallet: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Translate(AuthHoc(withStyles(styles)(AuthTrezor)))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Button from '@material-ui/core/Button'\r\nimport Translate from 'components/translate/Translate'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport Img from 'components/common/img/Img'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { getAddressBalances } from 'services/smart-contracts/actions/stats'\r\nimport AuthHoc from './AuthHoc'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { AddrItem } from './AuthCommon'\r\nimport {\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tTopLoading,\r\n} from 'components/common/dialog/content'\r\nimport LEDGER_DL_IMG from 'resources/ledger_logo_header.png'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\n\r\nclass AuthLedger extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tmethod: '',\r\n\t\t\tsideSelect: false,\r\n\t\t\taddresses: [],\r\n\t\t\twaitingLedgerAction: false,\r\n\t\t\twaitingAddrsData: false,\r\n\t\t\tselectedAddress: null,\r\n\t\t\thdPath: '',\r\n\t\t}\r\n\t}\r\n\r\n\tconnectLedger = async () => {\r\n\t\tthis.setState({ waitingLedgerAction: true }, async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { provider } = await getEthers(AUTH_TYPES.LEDGER.name)\r\n\r\n\t\t\t\tconst wallet = {\r\n\t\t\t\t\tauthType: AUTH_TYPES.LEDGER.name,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst ledgerSigner = await getSigner({ wallet, provider })\r\n\t\t\t\tconst addresses = await ledgerSigner.getAddresses({ from: 0, to: 19 })\r\n\r\n\t\t\t\tconst allAddressesData = addresses.map(address =>\r\n\t\t\t\t\tgetAddressBalances({ address, authType: AUTH_TYPES.LEDGER.name })\r\n\t\t\t\t)\r\n\r\n\t\t\t\tthis.setState({ waitingAddrsData: true }, async () => {\r\n\t\t\t\t\tconst results = await Promise.all(allAddressesData)\r\n\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\thdPath: ledgerSigner.path,\r\n\t\t\t\t\t\taddresses: results,\r\n\t\t\t\t\t\twaitingAddrsData: false,\r\n\t\t\t\t\t\twaitingLedgerAction: false,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Error: catch', err)\r\n\t\t\t\tthis.setState({ waitingLedgerAction: false, waitingAddrsData: false })\r\n\t\t\t\tthis.props.actions.addToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: this.props.t('ERR_AUTH_LEDGER', {\r\n\t\t\t\t\t\targs: [Helper.getErrMsg(err)],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tAddressSelect = ({ addresses, waitingLedgerAction, t, classes, ...rest }) => {\r\n\t\treturn (\r\n\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t{waitingLedgerAction ? (\r\n\t\t\t\t\t\t<TopLoading msg={t('LEDGER_WAITING_ACTION')} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tt('SELECT_ADDR_LEDGER')\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{addresses.map((res, index) => (\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tclasses={{ root: classes.addrListItem }}\r\n\t\t\t\t\t\t\t\tkey={res.address}\r\n\t\t\t\t\t\t\t\tonClick={() => this.onAddrSelect(res, index)}\r\n\t\t\t\t\t\t\t\tselected={this.state.selectedAddress === res.address}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<AddrItem stats={res} t={t} />\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n\r\n\tonAddrSelect = (addrData, hdWalletAddrIdx) => {\r\n\t\tconst { address, path, balanceEth, balanceDai } = addrData\r\n\r\n\t\tthis.props.updateWallet({\r\n\t\t\taddress,\r\n\t\t\tauthType: AUTH_TYPES.LEDGER.name,\r\n\t\t\tpath,\r\n\t\t\tbalanceEth,\r\n\t\t\tbalanceDai,\r\n\t\t\thdWalletAddrPath: this.state.hdPath,\r\n\t\t\thdWalletAddrIdx,\r\n\t\t\tsignType: AUTH_TYPES.LEDGER.signType,\r\n\t\t})\r\n\r\n\t\tthis.setState({ selectedAddress: address })\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { t, classes } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.state.addresses.length ? (\r\n\t\t\t\t\t<this.AddressSelect\r\n\t\t\t\t\t\twaitingLedgerAction={this.state.waitingLedgerAction}\r\n\t\t\t\t\t\taddresses={this.state.addresses}\r\n\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t\t\t{this.state.waitingAddrsData ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('LEDGER_WAITING_ADDRS_INFO')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : this.state.waitingLedgerAction ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('LEDGER_WAITING_ACTION')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t\t{t('LEDGER_INFO')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t__html: t('LEDGER_BASIC_USAGE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref='https://www.ledgerwallet.com/'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLEDGER\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<Anchor href='https://www.ledgerwallet.com/' target='_blank'>\r\n\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\tsrc={LEDGER_DL_IMG}\r\n\t\t\t\t\t\t\t\t\t\talt={'https://www.ledgerwallet.com/'}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t{!this.state.waitingAddrsData && !this.state.waitingLedgerAction && (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={this.connectLedger}\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('CONNECT_WITH_LEDGER')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</ContentBox>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAuthLedger.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tupdateWallet: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Translate(AuthHoc(withStyles(styles)(AuthLedger)))\r\n","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { useSelector } from 'react-redux'\r\nimport { selectLocation } from 'selectors'\r\nimport AuthMetamask from './AuthMetamask'\r\nimport AuthTrezor from './AuthTrezor'\r\nimport AuthLedger from './AuthLedger'\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\r\n\treturn {\r\n\t\ttabsContainer: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexGrow: 1,\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tmargin: spacing,\r\n\t\t},\r\n\t}\r\n})\r\n\r\nfunction AuthMethod() {\r\n\tconst classes = useStyles()\r\n\tconst location = useSelector(selectLocation) || {}\r\n\tconst { search } = location\r\n\r\n\treturn (\r\n\t\t<Grid container spacing={2} direction='row' alignContent='flex-start'>\r\n\t\t\t<Grid item xs={12} className={classes.tabsContainer}>\r\n\t\t\t\t{search === '?metamask' && <AuthMetamask />}\r\n\t\t\t\t{search === '?trezor' && <AuthTrezor />}\r\n\t\t\t\t{search === '?ledger' && <AuthLedger />}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default AuthMethod\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport AuthMethod from 'components/signin/identity/ownerAuth/AuthMethod'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nclass IdentityContractOwner extends Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.validateContractOwner()\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst currOwner = this.props.identity.identityContractOwner\r\n\t\tif (!!currOwner && currOwner !== prevProps.identity.identityContractOwner) {\r\n\t\t\tthis.validateContractOwner()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateContractOwner = () => {\r\n\t\tconst { validate, identity } = this.props\r\n\t\tconst { identityContractOwner } = identity\r\n\r\n\t\tvalidate('identityContractOwner', {\r\n\t\t\tisValid: !!identityContractOwner,\r\n\t\t\terr: { msg: 'ERR_NO_IDENTITY_CONTRACT_OWNER' },\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <AuthMethod {...this.props} />\r\n\t}\r\n}\r\n\r\nIdentityContractOwner.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst IdentityContractOwnerStep = IdentityHoc(IdentityContractOwner)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(IdentityContractOwnerStep))\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Collapse from '@material-ui/core/Collapse'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport { t, selectIdentity, selectValidationsById } from 'selectors'\r\nimport {\r\n\texecute,\r\n\tvalidateEmail,\r\n\tvalidateEmailCheck,\r\n\tvalidatePassword,\r\n\tvalidatePasswordCheck,\r\n\tvalidateTOS,\r\n\tvalidateGrantCode,\r\n\tupdateIdentity,\r\n} from 'actions'\r\n\r\nconst QuickInfo = props => {\r\n\tconst checkTos = checked => {\r\n\t\texecute(updateIdentity('tosCheck', checked))\r\n\t\texecute(validateTOS(validateId, checked, true))\r\n\t}\r\n\r\n\tconst { validateId } = props\r\n\tconst identity = useSelector(selectIdentity)\r\n\tconst validations = useSelector(\r\n\t\tstate => selectValidationsById(state, validateId) || {}\r\n\t)\r\n\r\n\t// Errors\r\n\tconst {\r\n\t\temail,\r\n\t\temailCheck,\r\n\t\tpassword,\r\n\t\tpasswordCheck,\r\n\t\ttosCheck,\r\n\t\tgrantCode,\r\n\t} = validations\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tlabel={t('email', { isProp: true })}\r\n\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\tvalue={identity.email || ''}\r\n\t\t\t\t\t\tonChange={ev => execute(updateIdentity('email', ev.target.value))}\r\n\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\texecute(validateEmail(validateId, identity.email, true))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\texecute(validateEmail(validateId, identity.email, false))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\terror={email && !!email.dirty}\r\n\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\temail && !!email.dirty ? email.errMsg : t('ENTER_VALID_EMAIL')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tlabel={t('emailCheck', { isProp: true })}\r\n\t\t\t\t\t\tname='emailCheck'\r\n\t\t\t\t\t\tvalue={identity.emailCheck || ''}\r\n\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\texecute(updateIdentity('emailCheck', ev.target.value))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\texecute(\r\n\t\t\t\t\t\t\t\tvalidateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tvalidateId,\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\texecute(\r\n\t\t\t\t\t\t\t\tvalidateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tvalidateId,\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\terror={emailCheck && !!emailCheck.dirty}\r\n\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\temailCheck && !!emailCheck.dirty\r\n\t\t\t\t\t\t\t\t? emailCheck.errMsg\r\n\t\t\t\t\t\t\t\t: t('ENTER_SAME_EMAIL')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tlabel={t('password', { isProp: true })}\r\n\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\tvalue={identity.password || ''}\r\n\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\texecute(updateIdentity('password', ev.target.value))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\texecute(validatePassword(validateId, identity.password, true))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\texecute(validatePassword(validateId, identity.password, false))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\terror={password && !!password.dirty}\r\n\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\tpassword && !!password.dirty\r\n\t\t\t\t\t\t\t\t? password.errMsg\r\n\t\t\t\t\t\t\t\t: t('PASSWORD_RULES')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tlabel={t('passwordCheck', { isProp: true })}\r\n\t\t\t\t\t\tname='passwordCheck'\r\n\t\t\t\t\t\tvalue={identity.passwordCheck || ''}\r\n\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\texecute(updateIdentity('passwordCheck', ev.target.value))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\texecute(\r\n\t\t\t\t\t\t\t\tvalidatePasswordCheck(\r\n\t\t\t\t\t\t\t\t\tvalidateId,\r\n\t\t\t\t\t\t\t\t\tidentity.passwordCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.password,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\texecute(\r\n\t\t\t\t\t\t\t\tvalidatePasswordCheck(\r\n\t\t\t\t\t\t\t\t\tvalidateId,\r\n\t\t\t\t\t\t\t\t\tidentity.passwordCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.password,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\terror={passwordCheck && !!passwordCheck.dirty}\r\n\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\tpasswordCheck && !!passwordCheck.dirty\r\n\t\t\t\t\t\t\t\t? passwordCheck.errMsg\r\n\t\t\t\t\t\t\t\t: t('PASSWORD_CHECK_RULES')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\tchecked={!!identity.hasGrantCode}\r\n\t\t\t\t\t\t\t\tonChange={() =>\r\n\t\t\t\t\t\t\t\t\texecute(\r\n\t\t\t\t\t\t\t\t\t\tupdateIdentity('hasGrantCode', !identity.hasGrantCode)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlabel={t('HAVE_GRANT_CODE')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Collapse in={identity.hasGrantCode}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('grantCode', { isProp: true })}\r\n\t\t\t\t\t\t\tname='grantCode'\r\n\t\t\t\t\t\t\tvalue={identity.grantCode || ''}\r\n\t\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\t\texecute(updateIdentity('grantCode', ev.target.value))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\tvalidateGrantCode(\r\n\t\t\t\t\t\t\t\t\tvalidateId,\r\n\t\t\t\t\t\t\t\t\tidentity.hasGrantCode,\r\n\t\t\t\t\t\t\t\t\tidentity.grantCode,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\tvalidateGrantCode(\r\n\t\t\t\t\t\t\t\t\tvalidateId,\r\n\t\t\t\t\t\t\t\t\tidentity.hasGrantCode,\r\n\t\t\t\t\t\t\t\t\tidentity.grantCode,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={grantCode && !!grantCode.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\tgrantCode && !!grantCode.dirty\r\n\t\t\t\t\t\t\t\t\t? grantCode.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('ENTER_VALID_COUPON')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Collapse>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\terror={tosCheck && tosCheck.dirty}\r\n\t\t\t\t\t\tcomponent='fieldset'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tchecked={!!identity.tosCheck}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => checkTos(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t\tvalue='tosCheck'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={t('TOS_CHECK')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{tosCheck && !!tosCheck.dirty && (\r\n\t\t\t\t\t\t\t<FormHelperText>{tosCheck.errMsg}</FormHelperText>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</FormControl>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default QuickInfo\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n// import { makeStyles } from '@material-ui/core/styles'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { LoadingSection } from 'components/common/spinners'\r\n// import { styles } from './styles'\r\nimport { t, selectIdentity, selectSpinnerById } from 'selectors'\r\n\r\n// const useStyles = makeStyles(styles)\r\n\r\nconst QuickDeploy = ({ validateId }) => {\r\n\t// const classes = useStyles()\r\n\tconst spinner = useSelector(state => selectSpinnerById(state, validateId))\r\n\tconst identity = useSelector(selectIdentity)\r\n\tconst { walletAddr, identityAddr } = identity\r\n\r\n\treturn !!spinner ? (\r\n\t\t<LoadingSection>{t('LOADING')}</LoadingSection>\r\n\t) : (\r\n\t\t<Grid container spacing={2}>\r\n\t\t\t<Grid item sm={12}>\r\n\t\t\t\t<Typography paragraph variant='subtitle1'>\r\n\t\t\t\t\t{t('QUICK_WALLET_ADDRESS')}\r\n\t\t\t\t\t{' ' + walletAddr}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography paragraph variant='body2'>\r\n\t\t\t\t\t{t('QUICK_WALLET_ADDRESS_INFO')}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography paragraph variant='subtitle1'>\r\n\t\t\t\t\t{t('IDENTITY_ADDRESS_INFO', {\r\n\t\t\t\t\t\targs: [identityAddr],\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default QuickDeploy\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { execute, updateIdentity } from 'actions'\r\nimport { t, selectIdentity, selectValidationsById } from 'selectors'\r\n\r\nconst QuickLogin = props => {\r\n\tconst { validateId } = props\r\n\r\n\tconst identity = useSelector(selectIdentity)\r\n\tconst validations = useSelector(\r\n\t\tstate => selectValidationsById(state, validateId) || {}\r\n\t)\r\n\r\n\tconst { wallet } = validations\r\n\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tcontainer\r\n\t\t\tspacing={2}\r\n\t\t\t// direction='row'\r\n\t\t\talignContent='space-between'\r\n\t\t\talignItems='center'\r\n\t\t>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Typography variant='body2' color='primary' gutterBottom>\r\n\t\t\t\t\t\t\t{t('QUICK_LOGIN_INFO', { args: [identity.email] })}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tdisabled={!!identity.authType}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('email', { isProp: true })}\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tvalue={identity.email || ''}\r\n\t\t\t\t\t\t\tonChange={ev => execute(updateIdentity('email', ev.target.value))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('password', { isProp: true })}\r\n\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\tvalue={identity.password || ''}\r\n\t\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\t\texecute(updateIdentity('password', ev.target.value))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{wallet && !!wallet.dirty && (\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant='body2' color='error' gutterBottom>\r\n\t\t\t\t\t\t\t\t{wallet.errMsg}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t{!!identity.walletAddr && (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Typography variant='body1'>\r\n\t\t\t\t\t\t\t\t\t{t('QUICK_WALLET_ADDRESS', { args: [identity.walletAddr] })}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{t('QUICK_IDENTITY_ADDRESS', {\r\n\t\t\t\t\t\t\t\t\t\targs: [identity.identityAddr],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default QuickLogin\r\n","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { bigNumberify } from 'ethers/utils'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\nimport {\r\n\texecute,\r\n\tupdateIdentity,\r\n\townerIdentities as updateOwnerIdentities,\r\n} from 'actions'\r\nimport { selectSpinnerById, selectIdentity, t } from 'selectors'\r\nimport Dropdown from 'components/common/dropdown'\r\n\r\nconst getIdentitiesForDropdown = (ownerIdentities = [], t) =>\r\n\townerIdentities.map(id => {\r\n\t\treturn {\r\n\t\t\tvalue: id.identity + '-' + id.privLevel,\r\n\t\t\tlabel: t('IDENTITY_OPTION_DATA', {\r\n\t\t\t\targs: [\r\n\t\t\t\t\tid.identity,\r\n\t\t\t\t\tid.privLevel,\r\n\t\t\t\t\tformatTokenAmount(bigNumberify(id.balanceDAI).toString(), 18, true),\r\n\t\t\t\t\t'SAI',\r\n\t\t\t\t],\r\n\t\t\t}),\r\n\t\t}\r\n\t})\r\n\r\nfunction FullLogin(props) {\r\n\tconst identity = useSelector(selectIdentity)\r\n\tconst { wallet, ownerIdentities, identityContractAddress } = identity\r\n\tconst { address } = wallet\r\n\tconst spinner = useSelector(state =>\r\n\t\tselectSpinnerById(state, 'getting-owner-identities')\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateOwnerIdentities({ owner: address }))\r\n\t\t// We need it just once on mount\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tcontainer\r\n\t\t\tspacing={2}\r\n\t\t\t// direction='row'\r\n\t\t\talignContent='space-between'\r\n\t\t\talignItems='center'\r\n\t\t>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Typography variant='body2' color='primary' gutterBottom>\r\n\t\t\t\t\t\t\t{t('FULL_LOGIN_INFO')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tlabel={t('SELECT_IDENTITY')}\r\n\t\t\t\t\t\t\thelperText={t('SELECT_IDENTITY_INFO')}\r\n\t\t\t\t\t\t\tonChange={val =>\r\n\t\t\t\t\t\t\t\texecute(updateIdentity('identityContractAddress', val))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsource={getIdentitiesForDropdown(ownerIdentities, t)}\r\n\t\t\t\t\t\t\tvalue={identityContractAddress || ''}\r\n\t\t\t\t\t\t\thtmlId='label-identityContractAddress'\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tloading={!!spinner}\r\n\t\t\t\t\t\t\tnoSrcLabel={t('NO_IDENTITIES_FOR_ADDR', { args: [address] })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default FullLogin\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Box from '@material-ui/core/Box'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport FullLogin from './FullLogin'\r\nimport IdentityContractAddressEthDeploy from './IdentityContractAddressEthDeploy'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbutton: {\r\n\t\theight: '50%',\r\n\t\tminHeight: theme.spacing(4),\r\n\t},\r\n\tcontainer: {},\r\n}))\r\n\r\nexport function ExternalConnect({ t, ...rest }) {\r\n\tconst classes = useStyles()\r\n\tconst [connectType, setConnectType] = useState('')\r\n\r\n\treturn (\r\n\t\t<Grid container alignItems='stretch' className={classes.buttons}>\r\n\t\t\t<Grid\r\n\t\t\t\titem\r\n\t\t\t\tcontainer\r\n\t\t\t\tdirection='column'\r\n\t\t\t\talignItems='stretch'\r\n\t\t\t\tjustify='space-evenly'\r\n\t\t\t>\r\n\t\t\t\t{connectType !== 'create' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Typography variant='h5' gutterBottom>\r\n\t\t\t\t\t\t\t\t{t('SELECT_EXISTING_IDENTITY')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<FullLogin {...rest} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\t// alignItems='stretch'\r\n\t\t\t\t\t\t\tclassName={classes.buttons}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<Button onClick={() => setConnectType('create')}>\r\n\t\t\t\t\t\t\t\t\t{t('CREATE_NEW_IDENTITY_LINK')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{connectType === 'create' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Typography variant='h5' gutterBottom>\r\n\t\t\t\t\t\t\t{t('CREATE_NEW_IDENTITY')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<IdentityContractAddressEthDeploy {...rest} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ValidItemHoc from 'components/common/stepper/ValidItemHoc'\r\nimport MaterialStepper from 'components/common/stepper/MaterialUiStepper'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nclass IdentitySteps extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tpages: this.mapPages(),\r\n\t\t}\r\n\r\n\t\t// TODO: Check if it is possible to need state update\r\n\t}\r\n\r\n\tmapPages = () => {\r\n\t\tconst {\r\n\t\t\tGoBtn,\r\n\t\t\tcancelFunction,\r\n\t\t\tt,\r\n\t\t\tonSave,\r\n\t\t\tstepsId,\r\n\t\t\tstepsPages = [],\r\n\t\t\tstepsPreviewPage,\r\n\t\t\tvalidateIdBase,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\r\n\t\tconst validateId = (validateIdBase || '') + '-' + stepsId\r\n\r\n\t\tconst pages = stepsPages.map((page, index) => {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: t(page.title),\r\n\t\t\t\tcancelFunction,\r\n\t\t\t\tcomponent: ValidItemHoc(page.page),\r\n\t\t\t\tdisableBtnsIfValid: page.disableBtnsIfValid,\r\n\t\t\t\tprops: { ...this.props, validateId: validateId + '-' + index },\r\n\t\t\t\tpageValidation: page.pageValidation,\r\n\t\t\t\tgoToNextPageIfValid: page.goToNextPageIfValid,\r\n\t\t\t\tcompleteBtn: page.final\r\n\t\t\t\t\t? () => <GoBtn {...rest} stepsId={stepsId} onSave={onSave} t={t} />\r\n\t\t\t\t\t: undefined,\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn pages\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <MaterialStepper pages={this.state.pages} />\r\n\t}\r\n}\r\n\r\nIdentitySteps.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps() {\r\n\t// const persist = state.persist\r\n\t// const memory = state.memory\r\n\treturn {\r\n\t\t// account: persist.account\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(IdentitySteps)))\r\n","import React from 'react'\r\nimport IdentityContractAddressEthDeploy from './IdentityContractAddressEthDeploy'\r\nimport IdentityContractOwner from './IdentityContractOwner'\r\nimport QuickInfo from './QuickInfo'\r\nimport QuickDeploy from './QuickDeploy'\r\nimport QuickLogin from './QuickLogin'\r\nimport { ExternalConnect } from './ExternalWalletConnect'\r\nimport IdentitySteps from './IdentitySteps'\r\nimport { push } from 'connected-react-router'\r\n\r\nimport {\r\n\texecute,\r\n\tvalidateQuickLogin,\r\n\tvalidateStandardLogin,\r\n\tvalidateQuickInfo,\r\n\tvalidateQuickDeploy,\r\n\tresetIdentity,\r\n} from 'actions'\r\n\r\nconst cancelFunction = () => {\r\n\texecute(resetIdentity())\r\n\texecute(push('/'))\r\n}\r\n\r\nconst finalValidationQuick = ({ validateId, dirty, onValid, onInvalid }) =>\r\n\texecute(validateQuickLogin({ validateId, dirty }))\r\n\r\nconst finalValidationStandard = ({ validateId, dirty, onValid, onInvalid }) =>\r\n\texecute(validateStandardLogin({ validateId, dirty }))\r\n\r\nconst common = {\r\n\tcancelFunction,\r\n\tvalidateIdBase: 'identity-',\r\n}\r\n\r\nexport const CreteFullIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='full-identity-create'\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'SET_IDENTITY_OWNER_ADDRESS', page: IdentityContractOwner },\r\n\t\t\t{\r\n\t\t\t\ttitle: 'GENERATE_IDENTITY_CONTRACT_ADDRESS',\r\n\t\t\t\tpage: IdentityContractAddressEthDeploy,\r\n\t\t\t\tpageValidation: finalValidationStandard,\r\n\t\t\t\tfinal: true,\r\n\t\t\t},\r\n\t\t\t// { title: 'DEPLOY_IDENTITY_CONTRACT_ADDRESS', page: IdentityContractAddressEthTransaction, final: true }\r\n\t\t]}\r\n\t/>\r\n)\r\n\r\nexport const LoginStandardIdentity = props => {\r\n\treturn (\r\n\t\t<IdentitySteps\r\n\t\t\t{...props}\r\n\t\t\t{...common}\r\n\t\t\tstepsId='full-identity-login'\r\n\t\t\tstepsPages={[\r\n\t\t\t\t{ title: 'SET_IDENTITY_OWNER_ADDRESS', page: IdentityContractOwner },\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'CONNECT_STANDARD_IDENTITY',\r\n\t\t\t\t\tpage: ExternalConnect,\r\n\t\t\t\t\tpageValidation: finalValidationStandard,\r\n\t\t\t\t\tfinal: true,\r\n\t\t\t\t},\r\n\t\t\t]}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const CreateQuickIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='quick-identity-create'\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'QUICK_INFO',\r\n\t\t\t\tpage: QuickInfo,\r\n\t\t\t\tpageValidation: ({ validateId, dirty, onValid, onInvalid }) =>\r\n\t\t\t\t\texecute(validateQuickInfo({ validateId, dirty, onValid, onInvalid })),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'QUICK_DEPLOY',\r\n\t\t\t\tpage: QuickDeploy,\r\n\t\t\t\tpageValidation: ({ validateId, dirty, onValid, onInvalid }) =>\r\n\t\t\t\t\texecute(\r\n\t\t\t\t\t\tvalidateQuickDeploy({ validateId, dirty, onValid, onInvalid })\r\n\t\t\t\t\t),\r\n\t\t\t\tfinal: true,\r\n\t\t\t},\r\n\t\t]}\r\n\t/>\r\n)\r\n\r\nexport const LoginQuickIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='quick-identity-login'\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'QUICK_LOGIN',\r\n\t\t\t\tpage: QuickLogin,\r\n\t\t\t\tpageValidation: finalValidationQuick,\r\n\t\t\t\tfinal: true,\r\n\t\t\t},\r\n\t\t]}\r\n\t/>\r\n)\r\n\r\nexport const DemoIdentity = props => (\r\n\t<IdentitySteps {...props} {...common} stepsPages={[]} />\r\n)\r\n","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Box from '@material-ui/core/Box'\r\nimport Logo from 'components/common/icons/AdexIconTxt'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport SNT_VITALIK_BUTERIN_RIDES_EDDIE_WHILE_PUMPING_IT_UP from 'resources/eddie/eddie-14.png'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\ttextAlign: 'center',\r\n\t},\r\n\tvitalik: {\r\n\t\tbackgroundImage: `url(${SNT_VITALIK_BUTERIN_RIDES_EDDIE_WHILE_PUMPING_IT_UP})`,\r\n\t\tbackgroundPosition: 'center',\r\n\t\tbackgroundRepeat: 'no-repeat',\r\n\t\tbackgroundSize: 'contain',\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxWidth: theme.breakpoints.values.md,\r\n\t\tmargin: 'auto',\r\n\t},\r\n\tlogo: {\r\n\t\theight: '5rem',\r\n\t\twidth: '100%',\r\n\t},\r\n}))\r\n\r\nexport default function Home({ t, ...rest }) {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\twidth={1}\r\n\t\t\theight={1}\r\n\t\t\tclassName={classes.root}\r\n\t\t\tdisplay='flex'\r\n\t\t\tflexDirection='column'\r\n\t\t\talignItems='center'\r\n\t\t\tjustifyContent='center'\r\n\t\t>\r\n\t\t\t<Box\r\n\t\t\t\tclassName={classes.container}\r\n\t\t\t\tdisplay='flex'\r\n\t\t\t\tflexDirection='row'\r\n\t\t\t\talignItems='center'\r\n\t\t\t\tjustifyContent='space-evenly'\r\n\t\t\t\tflexWrap='wrap'\r\n\t\t\t>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\thref='https://www.adex.network/publishers'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('LINK_BENEFITS_FOR_PUBLISHERS')}\r\n\t\t\t\t\t</Anchor>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\thref='https://www.adex.network'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('LINK_ADEX_HOME')}\r\n\t\t\t\t\t</Anchor>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\thref='https://www.adex.network/for-advertisers'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('LINK_BENEFITS_FOR_PUBLISHERS')}\r\n\t\t\t\t\t</Anchor>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Box\r\n\t\t\t\tflexGrow={1}\r\n\t\t\t\tdisplay='flex'\r\n\t\t\t\tflexDirection='column'\r\n\t\t\t\talignItems='center'\r\n\t\t\t\tjustifyContent='center'\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\tclassName={classes.container}\r\n\t\t\t>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Logo className={classes.logo} />\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t{/* <Box p={2}>\r\n\t\t\t\t\t<Typography variant='h2' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS_INFO_1')}\r\n\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS_INFO_2')}\r\n\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS_INFO_3')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box> */}\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Typography variant='h2' gutterBottom>\r\n\t\t\t\t\t\t<Box fontWeight='fontWeightNormal' m={1}>\r\n\t\t\t\t\t\t\t{t('HOME_TITLE')}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Typography variant='h3' gutterBottom>\r\n\t\t\t\t\t\t<Box fontWeight='fontWeightLight' m={1}>\r\n\t\t\t\t\t\t\t{t('HOME_SUBTITLE')}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t{/* <Box p={1}>\r\n\t\t\t\t\t<Typography variant='h6' component='h6' gutterBottom>\r\n\t\t\t\t\t\t{t('GET_IN_TOUCH')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box> */}\r\n\t\t\t\t<Box\r\n\t\t\t\t\theight='30%'\r\n\t\t\t\t\tposition='relative'\r\n\t\t\t\t\tclassName={classes.vitalik}\r\n\t\t\t\t\talignSelf='stretch'\r\n\t\t\t\t></Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tdialog: {\r\n\t\theight: '100vh',\r\n\t\twidth: theme.maxWidth || 1200,\r\n\t\tmaxWidth: '100%',\r\n\t},\r\n}))\r\n\r\nexport default function DialogHoc(Decorated) {\r\n\tfunction JustDialog({ ...rest }) {\r\n\t\tconst classes = useStyles()\r\n\r\n\t\treturn (\r\n\t\t\t<Dialog open={true} classes={{ paper: classes.dialog }}>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Decorated {...rest} />\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n\r\n\treturn JustDialog\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport {\r\n\tmetamaskChecks,\r\n\tmetamaskNetworkCheck,\r\n\tgetRelayerConfig,\r\n\texecute,\r\n\tensureQuickWalletBackup,\r\n} from 'actions'\r\nimport { Route, Switch, Redirect } from 'react-router'\r\nimport Dashboard from 'components/dashboard/dashboard/Dashboard'\r\nimport ConnectHoc from 'components/signin/ConnectHoc'\r\nimport {\r\n\tCreateQuickIdentity,\r\n\tCreteFullIdentity,\r\n\t// DemoIdentity,\r\n\tLoginStandardIdentity,\r\n\tLoginQuickIdentity,\r\n} from 'components/signin/identity/Identity'\r\nimport SideSelect from 'components/signin/side-select/SideSelect'\r\nimport PageNotFound from 'components/page_not_found/PageNotFound'\r\nimport Home from 'components/signin/Home'\r\nimport JustDialog from 'components/common/dialog/JustDialog'\r\nimport { migrateLegacyWallet, removeLegacyKey } from 'services/wallet/wallet'\r\nimport Translate from 'components/translate/Translate'\r\nimport { selectAuth, selectWallet, selectLocation } from 'selectors'\r\n\r\nconst ConnectedCreateQuickIdentity = ConnectHoc(JustDialog(CreateQuickIdentity))\r\nconst ConnectedQuickLogin = ConnectHoc(JustDialog(LoginQuickIdentity))\r\nconst ConnectedCreateFullIdentity = ConnectHoc(JustDialog(CreteFullIdentity))\r\nconst ConnectedLoginStandardIdentity = ConnectHoc(\r\n\tJustDialog(LoginStandardIdentity)\r\n)\r\nconst ConnectedRoot = ConnectHoc(Home)\r\n\r\nconst PrivateRoute = ({ component: Component, auth, ...other }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...other}\r\n\t\t\trender={props =>\r\n\t\t\t\tauth === true ? ( //|| true\r\n\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nconst handleLegacyWallet = wallet => {\r\n\tconst { type, email, password, authType } = wallet || {}\r\n\r\n\tif (!type && email && password && authType === 'grant') {\r\n\t\tmigrateLegacyWallet({ email, password })\r\n\t\tremoveLegacyKey({ email, password })\r\n\t}\r\n\r\n\tif (email && password && authType) {\r\n\t\texecute(ensureQuickWalletBackup())\r\n\t}\r\n}\r\n\r\nconst Root = () => {\r\n\tconst auth = useSelector(selectAuth)\r\n\tconst wallet = useSelector(selectWallet)\r\n\tconst location = useSelector(selectLocation)\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(getRelayerConfig())\r\n\t\texecute(metamaskChecks())\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\thandleLegacyWallet(wallet)\r\n\t}, [wallet])\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(metamaskNetworkCheck())\r\n\t}, [location])\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<PrivateRoute auth={auth} path='/dashboard/:side' component={Dashboard} />\r\n\t\t\t<PrivateRoute auth={auth} path='/side-select' component={SideSelect} />\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/'\r\n\t\t\t\tcomponent={props => <ConnectedRoot {...props} noBackground />}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/signup/quick'\r\n\t\t\t\tcomponent={props => (\r\n\t\t\t\t\t<ConnectedCreateQuickIdentity {...props} noBackground />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/login/full'\r\n\t\t\t\tcomponent={props => (\r\n\t\t\t\t\t<ConnectedLoginStandardIdentity {...props} noBackground />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/login/quick'\r\n\t\t\t\tcomponent={props => <ConnectedQuickLogin {...props} noBackground />}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/signup/full'\r\n\t\t\t\tcomponent={props => (\r\n\t\t\t\t\t<ConnectedCreateFullIdentity {...props} noBackground />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t{/* <Route exact path=\"/identity/demo\" component={DemoIdentity} /> */}\r\n\t\t\t<Route>\r\n\t\t\t\t<PageNotFound />\r\n\t\t\t</Route>\r\n\t\t</Switch>\r\n\t)\r\n}\r\n\r\nexport default Translate(Root)\r\n","import React, { Component } from 'react'\r\nimport { HashRouter as Router } from 'react-router-dom'\r\nimport 'react-image-crop/dist/ReactCrop.css'\r\n// import './App.css'\r\nimport { Provider } from 'react-redux'\r\nimport configureStore from 'store/configureStore'\r\nimport history from 'store/history'\r\nimport { ConnectedRouter } from 'connected-react-router'\r\nimport Toast from 'components/toast/Toast'\r\nimport Confirm from 'components/confirm/Confirm'\r\nimport { PersistGate } from 'redux-persist/integration/react'\r\nimport Root from './Root'\r\nimport { MuiThemeProvider } from '@material-ui/core/styles'\r\nimport { themeMUI } from './themeMUi'\r\nimport MomentUtils from '@date-io/moment'\r\nimport { MuiPickersUtilsProvider } from 'material-ui-pickers'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\n\r\nconst { persistor, store } = configureStore\r\n// console.log('initial store', store.getState())\r\n\r\nconst onBeforeLift = () => {\r\n\t// take some action before the gate lifts\r\n}\r\n\r\nclass App extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<CssBaseline />\r\n\t\t\t\t<MuiThemeProvider theme={themeMUI}>\r\n\t\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t\t<Provider store={store}>\r\n\t\t\t\t\t\t\t<PersistGate onBeforeLift={onBeforeLift} persistor={persistor}>\r\n\t\t\t\t\t\t\t\t<ConnectedRouter history={history}>\r\n\t\t\t\t\t\t\t\t\t<Router>\r\n\t\t\t\t\t\t\t\t\t\t<div className='adex-dapp'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Root />\r\n\t\t\t\t\t\t\t\t\t\t\t<Toast />\r\n\t\t\t\t\t\t\t\t\t\t\t<Confirm />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Router>\r\n\t\t\t\t\t\t\t\t</ConnectedRouter>\r\n\t\t\t\t\t\t\t</PersistGate>\r\n\t\t\t\t\t\t</Provider>\r\n\t\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\t</MuiThemeProvider>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n)\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error)\r\n\t\t})\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type')\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t)\r\n\t\t})\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister()\r\n\t\t})\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './components/App/App'\r\nimport { unregister } from './serviceWorker'\r\n\r\n// Temp here?\r\nObject.values = function* values(obj) {\r\n\tfor (let prop of Object.keys(obj)) {\r\n\t\tyield obj[prop]\r\n\t}\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\nunregister()\r\n","// Nodejs encryption with CTR\r\nconst crypto = require('crypto')\r\n\r\nconst CIPHER_LEGACY_ALG = 'aes-256-ctr'\r\nconst CIPHER_ALG = 'aes-256-cbc'\r\nconst IV_LENGTH = 16\r\nconst HASH_ALG = 'sha256'\r\n\r\nconst getKeyHash = key => {\r\n\tconst hash = crypto.createHash(HASH_ALG)\r\n\thash.update(key)\r\n\tconst hashed = hash.digest()\r\n\treturn hashed\r\n}\r\n\r\nexport const encrypt = (text, key) => {\r\n\tif (!text) return ''\r\n\tif (!key) {\r\n\t\tthrow new Error('ERR_ENCRYPTING_NO_PASS')\r\n\t}\r\n\tconst iv = crypto.randomBytes(IV_LENGTH)\r\n\tconst cipher = crypto.createCipheriv(CIPHER_ALG, getKeyHash(key), iv)\r\n\tconst encr = cipher.update(text)\r\n\tconst encrypted = Buffer.concat([encr, cipher.final()])\r\n\r\n\treturn `${iv.toString('hex')}:${encrypted.toString('hex')}`\r\n}\r\n\r\nexport const decrypt = (text, key) => {\r\n\tconst textParts = text.split(':')\r\n\tconst iv = Buffer.from(textParts.shift(), 'hex')\r\n\tconst encryptedText = Buffer.from(textParts.join(':'), 'hex')\r\n\tconst decipher = crypto.createDecipheriv(CIPHER_ALG, getKeyHash(key), iv)\r\n\tconst decr = decipher.update(encryptedText)\r\n\tconst decrypted = Buffer.concat([decr, decipher.final()])\r\n\r\n\treturn decrypted.toString()\r\n}\r\n\r\nexport const encryptLegacy = (text, password) => {\r\n\tif (!text) return ''\r\n\tconst cipher = crypto.createCipher(CIPHER_LEGACY_ALG, password)\r\n\tlet crypted = cipher.update(text, 'utf8', 'hex')\r\n\tcrypted += cipher.final('hex')\r\n\treturn crypted\r\n}\r\n\r\nexport const decryptLegacy = (text, password) => {\r\n\tif (!text) return ''\r\n\tconst decipher = crypto.createDecipher(CIPHER_LEGACY_ALG, password)\r\n\tlet dec = decipher.update(text, 'hex', 'utf8')\r\n\tdec += decipher.final('utf8')\r\n\treturn dec\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/no-image-box-eddie.09d4c583.jpg\";","module.exports = __webpack_public_path__ + \"static/media/trezor-logo-h.1da00f60.png\";","module.exports = \"data:image/png;base64,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\"","import { Signer } from 'ethers'\r\nimport { ethers, utils } from 'ethers'\r\nimport LedgerEth from '@ledgerhq/hw-app-eth'\r\nimport TransportU2F from '@ledgerhq/hw-transport-u2f'\r\nimport HDKey from 'hdkey'\r\nimport { constants } from 'adex-models'\r\n\r\nconst DEFAULT_HD_PATH = \"m/44'/60'/0'\"\r\n\r\nexport default class LedgerSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\t\tthis._provider = provider\r\n\t\tthis._path = opts.path || DEFAULT_HD_PATH\r\n\t\tthis._transport = TransportU2F\r\n\t}\r\n\r\n\tget path() {\r\n\t\treturn this._path\r\n\t}\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\taddrsFromPubKey = async (\r\n\t\tpublicKey = '',\r\n\t\tchainCode = '',\r\n\t\t{ from = 0, to = 19 } = {}\r\n\t) => {\r\n\t\tconst hdKey = new HDKey()\r\n\t\thdKey.publicKey = Buffer.from(publicKey, 'hex')\r\n\t\thdKey.chainCode = Buffer.from(chainCode, 'hex')\r\n\r\n\t\tconst addrs = []\r\n\t\tfor (let index = from; index < to; index++) {\r\n\t\t\tconst derivedKey = hdKey.derive(`m/${index}`).publicExtendedKey\r\n\r\n\t\t\tconst addr = utils.HDNode.fromExtendedKey(derivedKey).address\r\n\r\n\t\t\taddrs.push({\r\n\t\t\t\taddress: addr,\r\n\t\t\t\tpath: `${this.path}/${index}`,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn addrs\r\n\t}\r\n\r\n\tgetAddresses = async ({ from = 0, to = 5 } = {}) => {\r\n\t\tconst transport = await this._transport.create()\r\n\t\tconst eth = new LedgerEth(transport)\r\n\t\tconst { publicKey, chainCode } = await eth.getAddress(\r\n\t\t\tthis.path,\r\n\t\t\tfalse,\r\n\t\t\ttrue\r\n\t\t)\r\n\r\n\t\tconst addresses = await this.addrsFromPubKey(publicKey, chainCode, {\r\n\t\t\tfrom,\r\n\t\t\tto,\r\n\t\t})\r\n\r\n\t\treturn addresses\r\n\t}\r\n\r\n\tsignTx = async params => {\r\n\t\tconst txProps = await utils.resolveProperties(params)\r\n\t\tconst txUnsigned = utils.serializeTransaction(txProps).substring(2)\r\n\r\n\t\tconst transport = await this._transport.create()\r\n\t\tconst eth = new LedgerEth(transport)\r\n\t\tconst { r, s, v } = await eth.signTransaction(this.path, txUnsigned)\r\n\r\n\t\tconst signature = {\r\n\t\t\tr: '0x' + r,\r\n\t\t\ts: '0x' + s,\r\n\t\t\tv,\r\n\t\t}\r\n\r\n\t\tconst txSigned = utils.serializeTransaction(txProps, signature)\r\n\r\n\t\treturn txSigned\r\n\t}\r\n\r\n\t/*\r\n\t * TODO: may not work.\r\n\t * The ledger device or u2f seems to broken\r\n\t * Can list the addresses\r\n\t * Can sign messages\r\n\t * Signs transactions\r\n\t * Actually it show the tx but does not return value after\r\n\t * confirmation on the device\r\n\t */\r\n\tsendTransaction = async params => {\r\n\t\tconst txSigned = await this.signTx(params)\r\n\t\tconst txData = this.provider.sendTransaction(txSigned)\r\n\t\treturn txData\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tif (!opts.hex) {\r\n\t\t\tif (typeof message === 'string') {\r\n\t\t\t\tmessage = utils.toUtf8Bytes(message)\r\n\t\t\t}\r\n\r\n\t\t\tmessage = ethers.utils.hexlify(message)\r\n\t\t}\r\n\r\n\t\tmessage = message.substring(2)\r\n\r\n\t\tconst transport = await this._transport.create()\r\n\t\tconst eth = new LedgerEth(transport)\r\n\r\n\t\tconst signature = await eth.signPersonalMessage(this.path, message)\r\n\t\tsignature.r = '0x' + signature.r\r\n\t\tsignature.s = '0x' + signature.s\r\n\r\n\t\tconst { address } = await eth.getAddress(this.path)\r\n\r\n\t\tconst res = {\r\n\t\t\tsignature: ethers.utils.joinSignature(signature),\r\n\t\t\thash: message,\r\n\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\taddress,\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new LedgerSigner(provider, { path: this.path })\r\n\t}\r\n}\r\n","import base64 from 'base64url'\r\nimport ethers from 'ethers'\r\n\r\n// see https://github.com/ethereum/EIPs/issues/1341\r\n// Implements EIP 1341: Ethereum Web Tokens\r\n\r\nconst HEADER = base64.encode(\r\n\tJSON.stringify({\r\n\t\ttype: 'JWT',\r\n\t\talg: 'ETH',\r\n\t})\r\n)\r\n\r\n// signer is always etherjs Wallet: https://docs.ethers.io/ethers.js/html/api-wallet.html\r\n// .address is always checksummed\r\nfunction sign(signer, payload) {\r\n\tconst payloadEncoded = base64.encode(\r\n\t\tJSON.stringify({\r\n\t\t\t...payload,\r\n\t\t\taddress: signer.address,\r\n\t\t})\r\n\t)\r\n\treturn signer.signMessage(`${HEADER}.${payloadEncoded}`).then(function(sig) {\r\n\t\tconst sigBuf = Buffer.from(sig.signature.slice(2), 'hex')\r\n\t\treturn `${HEADER}.${payloadEncoded}.${base64.encode(sigBuf)}`\r\n\t})\r\n}\r\n\r\nfunction verify(token) {\r\n\tconst parts = token.split('.')\r\n\tif (parts.length !== 3) {\r\n\t\treturn Promise.reject(new Error('verify: token needs to be of 3 parts'))\r\n\t}\r\n\tconst msg = parts.slice(0, 2).join('.')\r\n\tconst sigBuf = Buffer.from(parts[2], 'base64')\r\n\ttry {\r\n\t\tconst from = ethers.utils.verifyMessage(msg, sigBuf)\r\n\t\tconst payload = JSON.parse(base64.decode(parts[1]))\r\n\t\treturn Promise.resolve({ from, payload })\r\n\t} catch (e) {\r\n\t\treturn Promise.reject(e)\r\n\t}\r\n}\r\n\r\nexport default { sign, verify }\r\n","module.exports = Module;","module.exports = __webpack_public_path__ + \"static/media/metamask-logo.45982b2b.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/video-placeholder.f25010ce.jpg\";","module.exports = __webpack_public_path__ + \"static/media/404.12db5cc0.png\";","module.exports = __webpack_public_path__ + \"static/media/download-metamask.d5cb0c90.png\";","module.exports = __webpack_public_path__ + \"static/media/metamask.023762b6.png\";","module.exports = __webpack_public_path__ + \"static/media/eddie-14.8bd0ccfa.png\";"],"sourceRoot":""}