{"version":3,"sources":["resources/home-wallpaper.jpg","constants/actionTypes.js","constants/misc.js","store/initialState.js","services/translations/translations.js","reducers/configReducer.js","reducers/index.js","reducers/accountReducer.js","reducers/itemsReducer.js","reducers/uiReducer.js","reducers/languageReducer.js","reducers/web3TransactionsReducer.js","reducers/tagsReducer.js","reducers/ethNetworkReducer.js","reducers/analyticsReducer.js","reducers/signinReducer.js","reducers/identityReducer.js","reducers/walletReducer.js","reducers/newItemsReducer.js","reducers/spinnersReducer.js","reducers/toastsReducer.js","reducers/confirmReducer.js","reducers/navReducer.js","reducers/validateItemsReducer.js","reducers/newTransactionsReducer.js","store/history.js","store/configureStore.js","actions/common.js","helpers/miscHelpers.js","selectors/selectors.js","selectors/accountSelectors.js","selectors/identitySelectors.js","selectors/locationSelectors.js","selectors/uiSelectors.js","selectors/translationsSelectors.js","helpers/formatters.js","selectors/analyticsSelectors.js","services/store-data/loop.js","services/store-data/campaigns.js","services/store-data/account.js","services/store-data/analytics.js","services/store-data/auth.js","services/requester/index.js","services/requester/requester.js","services/adex-market/actions.js","actions/uiActions.js","services/auth/auth.js","services/adex-relayer/actions.js","services/smart-contracts/contractsCfg.js","services/smart-contracts/ethers.js","services/smart-contracts/signers/trezor.js","services/crypto/crypto.js","helpers/localStorageHelpers.js","services/wallet/wallet.js","services/smart-contracts/signers/local.js","services/smart-contracts/signers/metamask.js","actions/transactionActions.js","services/smart-contracts/actions/ethers.js","services/adex-validator/actions.js","services/smart-contracts/actions/stats.js","services/adex-relayer/config.js","services/smart-contracts/actions/identity.js","services/smart-contracts/actions/core.js","actions/accountActions.js","helpers/mediaHelpers.js","constants/targeting.js","actions/itemActions.js","actions/identityActions.js","actions/bidActions.js","services/smart-contracts/actions/erc20.js","services/smart-contracts/actions/common.js","helpers/validators.js","actions/validationActions.js","actions/analyticsActions.js","actions/index.js","components/toast/Toast.js","components/toast/styles.js","components/translate/Translate.js","components/confirm/Confirm.js","components/common/rr_hoc/RRHoc.js","components/common/icons/createSvgIconCustom.js","components/common/icons/CampaignIcon.js","components/common/anchor/anchor.js","components/dashboard/dashboard/styles.js","components/dashboard/dashboard/SideSwitch.js","components/common/icons/AdexIconTxt.js","components/common/spinners/index.js","components/dashboard/dashboard/SideNav.js","components/common/button_menu/ButtonMenuMui.js","helpers/logosHelpers.js","components/dashboard/dashboard/TopBar.js","components/common/img/Img.js","components/common/img/styles.js","services/images/crop.js","components/dashboard/forms/ImgForm/ImgForm.js","components/dashboard/forms/ImgForm/styles.js","components/dashboard/forms/ValidImageHoc.js","components/dashboard/forms/ValidItemHoc.js","components/dashboard/containers/ImgDialog/styles.js","components/dashboard/containers/ImgDialog/ImgDialog.js","components/dashboard/containers/SaveBtn/SaveBtn.js","components/dashboard/containers/SaveBtn/styles.js","components/dashboard/containers/ItemHoc/styles.js","components/page_not_found/PageNotFound.js","components/page_not_found/styles.js","components/dashboard/containers/ItemHoc/ItemHoc.js","components/common/dropdown/Dropdown.js","components/common/dropdown/styles.js","components/dashboard/containers/Lists/styles.js","components/dashboard/containers/Lists/Controls.js","components/dashboard/containers/Lists/ListWithControls.js","components/dashboard/collection/Rows.js","components/dashboard/forms/stepper/MaterialUiStepper.js","components/dashboard/forms/stepper/styles.js","components/dashboard/forms/FormSteps.js","components/common/dialog/styles.js","components/common/dialog/WithDialog.js","components/dashboard/forms/items/AdUnit/NewAdUnitHoc.js","components/dashboard/forms/items/AdUnit/AdUnitBasic.js","helpers/utmHelpers.js","components/dashboard/forms/items/AdUnit/AdUnitMedia.js","components/common/autocomplete/common.js","components/common/autocomplete/DownshiftMultiple.js","components/common/autocomplete/DownshiftSingle.js","components/common/autocomplete/Autocomplete.js","components/common/autocomplete/styles.js","components/dashboard/forms/items/AdUnit/AdUnitTargeting.js","components/dashboard/containers/UnitTargets/UnitTargets.js","components/common/dialog/content.js","components/dashboard/forms/items/styles.js","components/dashboard/forms/items/AdUnit/AdUnitFormPreview.js","components/dashboard/forms/items/Campaign/NewCampaignHoc.js","components/dashboard/forms/items/Campaign/CampaignUnits.js","components/common/DateTimePicker/DateTimePicker.js","components/dashboard/forms/items/Campaign/CampaignFinance.js","components/common/DateTimePicker/styles.js","components/dashboard/forms/FormsCommon.js","components/dashboard/forms/items/Campaign/CampaignFormPreview.js","components/dashboard/forms/items/AdSlot/NewAdSlotHoc.js","components/dashboard/forms/items/AdSlot/AdSlotBasic.js","components/dashboard/forms/items/AdSlot/AdSlotMedia.js","components/dashboard/forms/items/AdSlot/AdSlotTargeting.js","components/dashboard/forms/items/AdSlot/AdSlotPreview.js","components/dashboard/forms/items/NewItems.js","components/dashboard/containers/ItemsList/ItemsList.js","components/dashboard/containers/ItemsList/styles.js","components/dashboard/containers/ItemCommon/styles.js","components/dashboard/containers/ItemCommon/ItemCommon.js","components/dashboard/containers/Campaign/Campaign.js","components/dashboard/containers/Campaign/styles.js","components/common/icons/AdexPublisher.js","components/common/icons/AdexAdvertiser.js","components/signin/side-select/SideSelect.js","components/signin/side-select/styles.js","components/common/tooltips/index.js","components/dashboard/containers/DashboardStats/StatsCard.js","components/dashboard/containers/DashboardStats/styles.js","components/dashboard/charts/options.js","components/dashboard/charts/simplified.js","components/App/themeMUi.js","components/dashboard/containers/DashboardStats/BasicStats.js","components/dashboard/containers/DashboardStats/DashboardStats.js","components/dashboard/containers/Unit/Unit.js","components/dashboard/containers/Slot/Slot.js","components/dashboard/containers/Slot/styles.js","components/dashboard/containers/Items/Items.js","components/dashboard/forms/web3/TransactionHoc.js","components/dashboard/forms/web3/WithdrawFromIdentity.js","components/dashboard/forms/web3/WithdrawAnyTokenFromIdentity.js","components/dashboard/forms/web3/SeAddressPrivilege.js","components/dashboard/forms/web3/previews.js","components/dashboard/forms/web3/TransactionPreview.js","components/dashboard/forms/web3/styles.js","components/dashboard/forms/web3/transactions.js","components/dashboard/account/styles.js","components/dashboard/account/AccountInfo.js","components/dashboard/dashboard/Dashboard.js","components/signin/styles.js","components/signin/auth-select/AuthSelect.js","components/signin/auth-select/styles.js","components/signin/ConnectHoc.js","components/signin/identity/IdentityHoc.js","components/signin/identity/styles.js","components/signin/identity/IdentityContractAddressEthDeploy.js","components/common/stepper/ValidItemHoc.js","components/signin/identity/ownerAuth/AuthHoc.js","components/signin/identity/ownerAuth/styles.js","components/signin/identity/ownerAuth/AuthCommon.js","components/signin/identity/ownerAuth/AuthMetamask.js","components/signin/identity/ownerAuth/AuthTrezor.js","components/signin/identity/ownerAuth/AuthLedger.js","components/signin/identity/ownerAuth/AuthMethod.js","components/signin/identity/IdentityContractOwner.js","components/signin/identity/GrantInfo.js","components/signin/identity/GrantDeploy.js","components/signin/identity/GrantLogin.js","components/signin/identity/QuickInfo.js","components/signin/identity/QuickDeploy.js","components/signin/identity/QuickLogin.js","components/signin/identity/QuickRecover.js","components/signin/identity/FullLogin.js","components/signin/identity/ExternalWalletConnect.js","components/common/stepper/styles.js","components/common/stepper/MaterialUiStepper.js","components/signin/identity/IdentitySteps.js","components/signin/identity/Identity.js","components/signin/Home.js","components/common/dialog/JustDialog.js","components/App/Root.js","components/App/App.js","serviceWorker.js","index.js","resources/no-image-box-eddie.jpg","resources/trezor-logo-h.png","resources/ledger_logo_header.png","services/smart-contracts/signers/ledger.js","services/adex-validator/ewt.js","../external \"Module\"","resources/metamask-logo.png","resources/demo-logo.png","resources/video-placeholder.jpg","resources/404.png","resources/download-metamask.png","resources/metamask.png","resources/eddie/eddie-14.png"],"names":["module","exports","__webpack_require__","p","ADD_ITEM","UPDATE_ITEM","UPDATE_NEW_ITEM","RESET_NEW_ITEM","RESET_ALL_NEW_ITEMS","DELETE_ITEM","REMOVE_ITEM_FROM_ITEM","ADD_ITEM_TO_ITEM","UPDATE_ALL_ITEMS","RESET_ALL_ITEMS","SET_CURRENT_ITEM","UPDATE_CURRENT_ITEM","UPDATE_SPINNER","UPDATE_UI","ADD_TOAST","REMOVE_TOAST","CONFIRM_ACTION","UPDATE_NAV","CHANGE_LANGUAGE","UPDATE_ITEM_VALIDATION","RESET_ITEM_VALIDATION","UPDATE_NEW_BID","RESET_NEW_BID","UPDATE_SIGNIN","RESET_SIGNIN","CREATE_ACCOUNT","UPDATE_ACCOUNT","RESET_ACCOUNT","UPDATE_NEW_TRANSACTION","RESET_NEW_TRANSACTION","ADD_WEB3_TRANSACTION","UPDATE_WEB3_TRANSACTION","RESET_WEB3_TRANSACTION","UPDATE_TAGS","ADD_NEW_TAG","UPDATE_IDENTITY","RESET_IDENTITY","UPDATE_GAS_DATA","UPDATE_WALLET","RESET_WALLET","UPDATE_RELAYER_CFG","UPDATE_ANALYTICS","RESET_ANALYTICS","BID_STATES","ExchangeConstants","TIMEOUTS","SignatureModes","constants","AdTypes","AdUnitsTypes","map","type","value","label","split","SORT_PROPERTIES_ITEMS","Object","keys","key","id","FILTER_PROPERTIES_ITEMS","labelIsProp","values","AUTH_TYPES","METAMASK","name","signType","GETH","limit","TREZOR","LEDGER","DEMO","GRANT","QUICK","SEED","ETHEREUM_NETWORKS","1","for","5","production","development","SORT_PROPERTIES_CAMPAIGN","FILTER_PROPERTIES_CAMPAIGN","status.name","UTM_PARAMS","utm_source","utm_medium","utm_campaign","utm_content","VALIDATOR_ANALYTICS_METRICS","VALIDATOR_ANALYTICS_SIDES","VALIDATOR_ANALYTICS_EVENT_TYPES","VALIDATOR_ANALYTICS_TIMEFRAMES","initialState","account","Account","signin","email","password","passConfirm","seed","publicKey","seedCheck","authenticated","newItem","Campaign","plainObj","AdUnit","temp","addUtmLink","AdSlot","currentItem","items","spinners","ui","toasts","confirm","data","nav","side","language","validations","newTransactions","default","web3Transactions","tags","identity","ethNetwork","networkId","gasData","wallet","config","relayer","market","validators","analytics","forEach","eventType","metric","timeframe","getValidatorAnalyticsInitialState","translations","adexTranslations","lang","translate","val","arguments","length","undefined","_ref","_ref$isProp","isProp","_ref$args","args","replace","toUpperCase","translation","Array","isArray","tpl","_","v","arg","component","renderToString","interpolate","a","setLang","lng","updateCfg","current","cfg","newCfg","objectSpread","persistReducers","newState","state","action","Base","updateObject","item","newValues","objModel","filterActions","newCollection","collectionId","collection","defineProperty","itemType","Item","addItem","_id","toAdd","prop","newCol","removeCollectionProp","removeItem","toRemove","newItems","reduce","index","currentItems","ipfs","match","category","types","newLang","newTx","newAddrTxs","pendingTxs","updatePendingTxs","_ref2","pTxs","status","indexOf","hash","push","filter","tx","addr","toConsumableArray","obj","updateObj","txHash","tag","memoryReducers","newSignin","newIdentity","newWallet","spinner","newToast","toast","added","Date","now","concat","t","onConfirm","onCancel","active","noActionBtns","calledOn","newErrors","errors","hasOwnProperty","updateTx","history","createHashHistory","reduxRouterMiddleware","routerMiddleware","configStorage","storage","localStorage","rootReducer","combineReducers","persist","persistCombineReducers","memory","router","connectRouter","configureStore","middlewares","thunk","store","createStore","compose","applyMiddleware","apply","persistor","persistStore","execute","dispatch","getState","miscHelpers","hexToRgbaColorString","hex","alpha","Error","substr","hexToDec","h","parseInt","r","g","b","getErrMsg","err","stack","message","toString","error","isInt","int","shuffleArray","array","sort","Math","random","c","prefix","substring","min","max","floor","this","getRandomInt","maxDaysPast","maxDaysAhead","initialMoment","initial","moment","isMoment","valueOf","add","queryParams","encodeURIComponent","join","createDeepEqualSelector","createSelectorCreator","defaultMemoize","isEqual","selectAccount","selectAuth","createSelector","address","authSig","authType","selectAuthSig","selectWallet","_ref3","selectAccountIdentity","_ref4","selectAccountIdentityAddr","_ref5","selectAccountStats","_ref6","stats","selectAccountStatsFormatted","_ref7","raw","_ref8","formatted","selectIdentity","selectLocation","location","selectNavTitle","navTitle","selectSide","selectSpinnerById","selectLang","selectTranslations","opts","_opts$isProp","_opts$args","MomentUtils","formatDateTime","timestamp","format","date","formatTokenAmount","amountString","decimals","pretty","formatUnits","commify","formatAddress","formatNumberWithCommas","x","selectAnalytics","selectAnalyticsDataAggr","aggr","selectTotalImpressions","eventCounts","Number","selectTotalMoney","eventPayouts","selectAverageCPM","totalMoney","totalImpressions","selectStatsChartData","_ref9","noLastOne","rest","objectWithoutProperties","_ref10","_ref10$data","slice","memo","time","labels","datasets","parseFloat","parseValueByMetric","Looper","_this","timeout","syncAction","loopName","classCallCheck","clearLoopTimeout","loopTimeout","clearTimeout","syncData","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","_x","startLoop","_callee2","_context2","checkLoop","t0","console","_x2","setTimeout","start","campaignsLoop","Loop","hasAuth","_selectAccount","campaigns","campaignsMapped","getCampaigns","creator","sent","toLowerCase","spec","updateItems","addToast","toastStr","accountStatsLoop","updateAccountStats","analyticsLoop","updateAccountAnalytics","logOut","skipRedirect","statsLoop","resetIdentity","resetAllItems","resetAllNewItems","resetAllBids","resetAccount","resetAnalytics","requester","AdexNodeRequester","baseUrl","getAuthHeaders","authSignature","X-User-Signature","noCacheHeaders","Cache-Control","Expires","Pragma","getUrl","base","route","query","url","fetch","_ref3$route","_ref3$queryParams","_ref3$method","method","body","_ref3$headers","headers","_ref3$authSig","userAddr","_ref3$noCache","authToken","noCache","qp","_authType","demo","Helper","getQuery","hdrs","Requester","process","processResponse","res","dontThrow","json","text","then","statusText","getSession","mode","signature","typedData","signerAddress","JSON","stringify","Content-Type","checkSession","skipErrToast","convertItemToJSON","itemToConvert","created","unix","getAdUnits","postAdUnit","unit","updateAdUnit","getAdSlots","postAdSlot","slot","updateAdSlot","byCreator","getAllCampaigns","all","updateSpinner","updateUi","_ref$label","_ref$timeout","unclosable","anchorOrigin","top","getGuid","removeToast","toastId","confirmAction","_ref2$confirmLabel","confirmLabel","_ref2$cancelLabel","cancelLabel","_ref2$title","title","_ref2$text","updateNav","changeLanguage","updateValidationErrors","resetValidationErrors","addSig","_ref$addr","sig","expiryTime","_ref$identity","setItem","getSig","_ref2$addr","_ref2$identity","sigAndTIme","getItem","grantAccount","ownerAddr","mail","couponCode","getGrantType","getOwnerIdentities","owner","registerFullIdentity","privileges","sendOpenChannel","txnsRaw","signatures","channel","identityAddr","registerExpectedIdentity","getRelayerConfigData","executeTx","_ref11","setAddrPriv","_ref12","privLevel","setAddr","regAccount","_ref13","bytecode","identityFactoryAddr","identityBaseAddr","salt","contracts","Identity","abi","AdExCore","DAI","Dai","IdentityFactory","ethers","setLogLevel","localWeb3","provider","adexCore","dai","identityFactory","results","providers","JsonRpcProvider","Contract","abrupt","loadInjectedWeb3","Promise","resolve","reject","window","addEventListener","ethereum","web3","injectedWeb3","enable","Web3Provider","getLocalWeb3","log","getEthers","ethereumSelectedAddress","_callee3","_context3","selectedAddress","utils","getAddress","ethereumNetworkId","_callee4","_context4","networkVersion","getEthereumProvider","_callee5","_context5","isMetaMask","DEFAULT_HD_PATH","TrezorConnect","manifest","appUrl","TrezorSigner","possibleConstructorReturn","getPrototypeOf","call","getAddsParams","_ref$from","from","_ref$to","to","bundle","path","showOnTrezor","getAddresses","_ref3$from","_ref3$to","success","payload","_args","ethereumGetAddress","signTx","params","txProps","txSigned","resolveProperties","hexlify","ethereumSignTransaction","transaction","s","serializeTransaction","sendTransaction","txData","signMessage","_args4","ethereumSignMessage","_x3","connect","_provider","_path","Signer","crypto","require","encrypt","cipher","createCipher","crypted","update","final","decrypt","decipher","createDecipher","dec","loadFromLocalStorage","parse","saveToLocalStorage","serialized","warn","generateWallet","mnemonic","randomEntropy","randomBytes","HDNode","entropyToMnemonic","getRandomMnemonic","Wallet","fromMnemonic","privateKey","encrKey","encrData","createLocalWallet","_ref4$email","_ref4$password","_ref4$mnemonic","_ref4$authType","walletData","migrateLegacyWallet","_ref5$email","_ref5$password","getLocalWallet","getEncrypted","removeLegacyKey","_ref6$email","_ref6$password","removeFromLocalStorage","addDataToWallet","_ref7$email","_ref7$password","_ref7$dataKey","dataKey","_ref7$dataValue","dataValue","props","decryptedStr","decrData","getAllWallets","isWallet","walletInfo","LocalSigner","_wallet","signetTx","sign","arrayify","MetaMaskSigner","_signer","_args3","t1","t2","t3","getSigner","updateNewTransaction","resetNewTransaction","addWeb3Transaction","updateWeb3Transaction","resetWeb3Transaction","prepareTx","_prepareTx","sender","gasLimit","gasPrice","pTx","populateTransaction","toHexString","nonce","processTx","_processTx","fromType","txRes","settings","receipt","txSuccessData","nextNonce","updateAccount","wait","_getSigner","signer","_signer2","_signer3","LedgerSigner","getTypedDataHash","entry","toUtf8Bytes","valuesHash","keccak256","schema","schemaHash","solidityKeccak256","getAuthSig","_x4","_getAuthSig","MAX_SAFE_INTEGER","_x6","_signTx","_callee6","_context6","Transaction","hashHex","splitSig","getMultipleTxSignatures","_x7","_getMultipleTxSignatures","_callee7","txns","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_context7","Symbol","iterator","done","return","finish","getValidatorRequester","getRequesters","campaign","leader","follower","validator","getValidatorAuthToken","validatorId","existingAuth","token","validatorAuthTokens","era","ewt","sendMessage","_authTokens","options","_getRequesters","followerAuthToken","leaderAuthToken","followerResult","leaderResult","authorization","authTokens","lastApprovedState","closeCampaign","events","identityAnalytics","campaignId","leaderAuth","aggregates","idenityAddr","privilegesNames","valueToKey","IdentityPrivilegeLevel","getAddressBalances","_getAddressBalances","calls","balances","getBalance","balanceOf","serializedPath","balanceEth","balanceDai","getAccountStats","_getAccountStats","_ref2$outstandingBala","outstandingBalanceDai","_identity$status","identityContract","privilegesAction","walletBalanceEth","walletBalanceDai","_ref8$","identityBalanceDai","walletPrivileges","total","bigNumberify","available","deployed","catch","e","slicedToArray","totalOutstandingBalanceDai","availableIdentityBalanceDai","totalIdentityBalanceDai","walletAddress","walletAuthType","formatEther","identityAddress","getOutstandingBalance","_getOutstandingBalance","withBalance","bigZero","allOutstanding","amounts","ch","outstanding","outstandingAvailable","gt","getAllValidatorsAuthForIdentity","_getAllValidatorsAuthForIdentity","allValidators","tokenCalls","allTokens","validatorsAuth","_objectSpread2","_x5","relayerConfig","GAS_LIMIT_DEPLOY_CONTRACT","IDENTITY_BASE_ADDR","IDENTITY_FACTORY_ADDR","feeAmountTransfer","feeAmountSetPrivileges","ERC20","Interface","getRelayerRoutinesAuthAuth","outpace","registry","validUntil","feeTokenAddr","weeklyFeeAmount","relayerAuth","RoutineAuthorization","getIdentityBytecode","_getIdentityBytecode","routineAuthorizations","_ref2$privileges","privSlot","routineAuthsSlot","getProxyDeployBytecode","solc","getIdentityDeployData","_getIdentityDeployData","addReleyerRoutinesAuth","_ref3$relayerRoutineA","relayerRoutineAuthValidUntil","_relayerConfig","registryAddr","identityRecoveryAddr","coreAddr","feeTokenWhitelist","generateAddress2","deployIdentityContract","_deployIdentityContract","identityFactoryWithSigner","expectedAddr","deploy","withdrawFromIdentity","_withdrawFromIdentity","amountToWithdraw","withdrawTo","getFeesOnly","tokenAddress","toWithdraw","sweepTxns","sweepFees","fees","tokenAmount","tokenAddr","tx1","result","parseUnits","getSweepingTxnsIfNeeded","amountNeeded","feeAmount","sub","toGet","functions","transfer","encode","getIdentityTnxsWithNonces","setIdentityPrivilege","_setIdentityPrivilege","_ref14","identityInterface","setAddrPrivilege","_x8","_getIdentityTnxsWithNonces","_callee8","_ref10$txns","initialNonce","withNonce","_context8","toNumber","i","Core","feeAmountApprove","feeAmountOpen","VALID_UNTIL_COEFFICIENT","VALID_UNTIL_MIN_PERIOD","totalFeesFormatted","toEthereumChannel","specHash","createHash","digest","Channel","depositAsset","depositAmount","getReadyCampaign","newCampaign","activeFrom","withdrawPeriodStart","period","getValidUntil","adUnits","minPerImpression","div","maxPerImpression","eventSubmission","allow","uids","rateLimit","lastChecked","getExpiredWithdrawnOutstanding","withdrawn","states","ChannelState","Active","getWithdrawnPerUserOutstanding","balance","withdrawnPerUser","getChannelsWithOutstanding","_getChannelsWithOutstanding","channels","_relayerConfig$feeTok","channelWithdrawFee","_channel$status","lastApprovedSigs","lastApprovedBalances","allLeafs","entries","_ref15","_ref16","k","getBalanceLeaf","mTree","MerkleTree","_ref17","_ref19","_ref18","_x9","getChannelsToSweepFrom","amountToSweep","allChannels","_allChannels$filter$s","eligible","c1","c2","sum","lt","getChannelWithdrawData","ethChannelTuple","leaf","proof","vsig1","vsig2","channelWithdraw","getRoot","getSweepChannelsTxns","_getSweepChannelsTxns","_ref20","channelsToSweep","toSolidityTuple","channelWithdrawExpired","_getSweepingTxnsIfNeeded","needed","accountBalance","openChannel","_openChannel","_ref21","readyCampaign","openReady","ethChannel","tx2","approve","channelOpen","closeChannel","_closeChannel","_callee9","_context9","UPDATE_SETTINGS_INTERVAL","VALIDATOR_LEADER_ID","updateSignin","resetSignin","createAccount","acc","meta","updateGasData","registerAccount","identityTxData","updateAccountSettings","_getState$persist$acc","grantType","updated","doUpdate","newSettings","updateValidatorAuthTokens","newAuth","newTokens","createSession","deleteLegacyKey","sessionSignature","leaderValidatorAuth","getRelayerConfig","getNetworkId","_callee12","_ref22","_context12","getNetwork","chainId","getNetworkData","_callee13","network","_context13","onMetamaskNetworkChange","_getState","search","isMetamaskMatters","t4","t5","_x11","_x12","onMetamaskAccountChange","accountAddress","_account$wallet","identityContractOwner","_x13","_x14","metamaskAccountCheck","_x15","_x16","metamaskNetworkCheck","_callee10","_context10","_x17","_x18","metamaskChecks","_callee11","_context11","on","accounts","_x19","_x20","isVideoMedia","getMediaSize","mime","src","video","document","createElement","onloadedmetadata","target","width","videoWidth","height","videoHeight","getVideoSize","image","Image","onload","getImageSize","checkExactishAspect","widthTarget","heightTarget","maxPercentTolerance","targetAspect","aspect","aspectDiff","abs","SOURCES","locations","AllCountries","country","genders","Genders","gender","PredefinedTags","custom","AddToastUi","getImgsIpfsFromBlob","tempUrl","resp","blob","imgBlob","URL","revokeObjectURL","imageBlob","_ref3$imageName","imageName","formData","FormData","append","uploadImage","updateNewItem","resetNewItem","addUnit","imageIpfs","resItem","mediaUrl","mediaMime","marketAdd","addSlot","fallbackUnit","resUnit","useFallback","targetUrl","description","targeting","passback","getAllItems","units","slots","resUnits","resSlots","openCampaign","removeItemFromItem","addItemToItem","updateItem","updatedItem","marketUpdate","_x10","deleteItem","_deleted","restoreItem","successMsg","errMsg","findSourceByTag","find","cloneItem","response","mediaURL","mediaSize","targets","source","placeholder","helpers","getMediaUrlWithProvider","createObjectURL","archiveItem","_archived","unarchiveItem","setCurrentItem","updateCurrentItem","newMeta","updateTags","addNewTag","_ref23","updateCampaignState","_ref24","_ref25","_ref26","_ref27","_ref28","updateIdentity","initIdentity","updateWallet","resetWallet","getGrantAccount","walletAddr","coupon","identityData","deployFullIdentity","getIdentityTxData","getRegisterExpectedIdentity","onUploadLocalWallet","event","file","reader","onError","files","FileReader","ev","onerror","abort","onabort","readAsText","identityWithdraw","ownerIdentities","addrIdentityPrivilege","updateNewBid","bidId","resetNewBid","updateBids","advBids","pubBids","bidsById","isEthAddressERC20","contract","isEthAddress","ERC20TokenABI","totalSupply","AddressZero","allowance","getERC20Balance","_ref3$addr","_ref3$balanceFor","balanceFor","isConnectionLost","eth","race","getBlockNumber","urlRegex","emailRegex","passwordRegex","couponRegex","validUrl","test","validEmail","validateNumber","numberStr","isNaN","isFinite","validName","msg","errMsgArgs","validPassword","validQuickAccountCoupon","isEthAddressZero","isZero","validEthAddress","nonZeroAddr","nonERC20","ethAddressZero","ethAddressERC20","validateAddress","dirty","validate","setBalance","isValid","analyticsParams","callsParams","checkAccountChanged","accountCheck","accountChanged","allAnalytics","src_actions","common","itemActions","uiActions","accountActions","identityActions","bidActions","transactionActions","validationActions","analyticsActions","variantIcon","accept","CheckCircleIcon","warning","WarningIcon","cancel","ErrorIcon","info","InfoIcon","Toast","_Component","close","setState","actions","inherits","createClass","nextProps","nextToast","_classnames","_this2","classes","Icon","vertical","horizontal","react_default","Snackbar","open","autoHideDuration","onClose","SnackbarContent","aria-describedby","className","classnames","icon","iconVariant","IconButton","aria-label","color","onClick","Close_default","snackbar","Component","bindActionCreators","withStyles","theme","spacing","border","borderRadius","backgroundColor","&.active","transform","margin","borderColor","fontSize","opacity","marginRight","display","alignItems","wordBreak","maxWidth","Translate","Decorated","useSelector","assign","Confirm","bind","assertThisInitialized","visible","_this$props","children","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","autoFocus","withReactRouterLink","_React$Component","_getPrototypeOf2","_len","_key","resolveToLocation","pathname","createHref","handleClick","preventDefault","stopPropagation","_this$props2","staticContext","toLocation","href","React","withRouter","createSvgIconCustom","displayName","viewBox","SvgIcon","pure","muiName","d","Anchor","Link","underline","draggable","rel","style","styles","_appBar","_drawerPaper","root","flexGrow","zIndex","overflow","position","minHeight","appBar","left","right","breakpoints","up","flex","flexDirection","flexRow","flexBasis","paddingTop","paddingBottom","&:last-child","paddingRight","paddingLeft","toolbarControls","justifyContent","toolbarTitle","navIconHide","toolbar","flexFlow","mixins","drawerPaper","content","palette","background","padding","marginLeft","contentInner","EddieSwitch","advColor","accentOne","main","pubColor","accentTwo","switchBase","&$checked","&$checked + $track","checked","track","Switch","RRSwitch","ListItem","ListItemText","primary","ListItemSecondaryAction","SideSwitch","fill","InputLoading","_ref$color","LinearProgress","LoadingSection","loading","Box","ml","mr","CircularProgress","RRListItem","ETH_SCAN_ADDR_HOST","useStyles","makeStyles","activeBgColor","navigation","paper","sntPadding","navListRoot","secondary","navList","bottom","overflowY","overflowX","sideNavToolbar","version","borderTopWidth","borderTopColor","divider","borderTopStyle","contrastText","&:focus","adxLink","hint","&:hover","useCommonStyles","SideNav","commonClasses","List","AdexIconTxt","spinners_LoadingSection","Typography","variant","toFixed","gutterBottom","Divider","dashboard_SideSwitch","button","ListItemIcon","Dashboard_default","Fragment","CampaignIcon","List_default","anchor_anchor","HelpOutline_default","SwapHoriz_default","AccountBox_default","getFullYear","packageJson","ImgIcon","alt","ButtonMenu","btnStyle","rightIcon","leftIconSrc","_useState","useState","_useState2","setActive","_useState3","_useState4","anchorEl","setAnchorEl","Boolean","leftIcon","ButtonMenuMui_ImgIcon","currentTarget","aria-owns","aria-haspopup","textOverflow","Menu","getAuthLogo","metamaskLogo","trezorLogo","ledgerLogo","demoLogo","RRMenuItem","MenuItem","handleDrawerToggle","imgSrc","btnMenuLabel","AppBar","Toolbar","Menu_default","react_jazzicon_lib_default","diameter","jsNumberForAddress","ButtonMenuMui","ExpandMore_default","caption","ExitToApp_default","noWrap","MAX_IMG_LOAD_TIME","Img","ipfsSrc","Regexes","ipfsRegex","handleToggle","componentWillReceiveProps","nextSrc","thisSrc","nextFallback","fallbackSrc","displayVideo","setDisplayVideo","fallback","NO_IMAGE","displayImage","setDisplayImage","clearLoadTimeout","loadTimeout","onFail","videoSrc","allowVideo","isVideo","VIDEO_IMAGE","Fab","mini","fullscreenIcon","Fullscreen_default","renderFullscreenDialog","_this$state","dialog","dialogImageParent","dialogImage","imgLoading","onDragStart","autoPlay","muted","loop","controls","_this3","_this$props3","allowFullscreen","fullScreenOnClick","_this$state2","imgParent","wrapper","img","fullScreenBtn","circular","cursor","@media(max-width:744px)","minWidth","@media(max-height:823px)","@media(max-width:1080px)","maxHeight","getCroppedImgUrl","objUrl","pixelCrop","fileName","size","cropCanvas","scaleCanvas","crossOrigin","crop","round","y","getContext","drawImage","toBlob","ImgForm","onDrop","acceptedFiles","rejectedFiles","that","objectUrl","imgName","onChange","onRemove","preventBubbling","onCropChange","saveCropped","croppedBlob","cropMode","nativeEvent","stopImmediatePropagation","UploadInfo","uploadInfo","uploadActions","dropzoneBtn","Crop_default","Clear_default","CloudUpload_default","additionalInfo","_this$state3","imgForm","header","dropzone","Grid","container","alignContent","sm","md","react_image_crop_default","imageStyle","imgDropzonePreview","disabled","Save_default","dist_es","img_Img","marginBottom","grey","marginTop","ValidImageHoc","ValidImage","propsName","mediaWidth","mediaHeight","exact","required","masgArgs","validateMedia","media","validateId","NewItemHoc","ValidItemHoc","_ref$err","_ref$dirty","_ref$removeAll","removeAll","invalidFields","ImgDialog","handleChange","onOk","vals","onChangeReady","errImg","imgPropName","Cancel_default","forms_ImgForm_ImgForm","imgLabel","SaveBtn","dirtyProps","save","validationId","fabButton","Check_default","fabProgress","spinnerId","buttonSuccess","buttonProgress","mediaRoot","buttonRight","buttonLeft","textField","flexWrap","changesLine","changeChip","editIcon","RRButton","PageNotFound","subtitle","goToTxt","goToPath","skipGoToButton","justify","inline","textTransform","IMG_404","adSlotPut","schemas","adUnitPut","AdSizesByValue","ItemsConstants","ItemHoc","dp","returnPropToInitialState","propName","initialItemState","initialItemStateValue","setActiveFields","field","newActiveFields","activeFields","editImg","_activeInput","_this$props4","matchId","nextState","currentItemInst","nexItemInst","modifiedOn","_this$props5","Joi","_this$props6","_this$props7","page_not_found_PageNotFound","isDemo","canEdit","fallbackMediaUrl","titleErr","descriptionErr","Prompt","when","containers_ImgDialog_ImgDialog","updateImgWidth","updateImgHeight","updateImgLabel","updateImgInfoLabel","updateImgExact","updateImgErrMsg","Info_default","Chip","onDelete","xs","lg","FormControl","fullWidth","InputLabel","Input","validateTitle","maxLength","onBlur","onFocus","endAdornment","InputAdornment","Edit_default","FormHelperText","htmlFor","multiline","rows","validateDescription","showLogo","Paper","imgContainer","fullName","pointer","canEditImg","containers_SaveBtn_SaveBtn","inEdit","toggleImgEdit","tryGetItemByIpfs","_ipfs","itemId","Dropdown","_this$props$label","_this$props$source","_this$props$htmlId","htmlId","_this$props$name","_this$props$disabled","_this$props$error","helperText","_this$props$fullWidth","noSrcLabel","formControl","Select","input","spinners_InputLoading","selectEmpty","flexItem","rowButton","rwoButtonRoot","row","bottomControls","listRoot","controlsRoot","pageSize","Pagination","page","pages","goToPrevPage","goToNextPage","goToPage","dropdown_Dropdown","getAllPagedValues","ChevronLeft_default","ChevronRight_default","INT_STRING","mapFilterProps","_ref$filterProps","filterProps","labelArgs","mapSortProperties","_ref2$sortProps","sortProps","ListWithControls","context","newStateValue","filterByValues","filterProperties","filterByValueFilter","handleChangeRxState","uiStateId","changePageSize","newPageSize","itemsLength","searchMatch","regex","RegExp","matchString","exec","filterItems","sortProperty","sortOrder","filterBy","filterArchived","filtered","isItem","archived","o","propA","propB","filteredLength","maxPages","ceil","sortProperties","filteredItems","renderItems","renderRows","startAdornment","Search_default","ArrowUpward_default","ArrowDownward_default","goToLastPage","goToFirstPage","rowsView","viewModeId","Rows","handleRowSelect","selected","newSelected","Table","tableHeadRenderer","TableBody","u","rowRenderer","StepperNav","currentPage","innerWidth","StepLabel","mobileStepLabel","MobileStepper","activeStep","steps","mobileStepper","Stepper","alternativeLabel","Step","MaterialStepper","nextStep","canAdvance","canAdvanceNextToPage","canGoBack","setPageIndex","Comp","MaterialUiStepper_StepperNav","stepperNav","pagePaper","pageContent","canReverse","cancelBtn","completeBtn","isValidPage","WithMaterialStepper","withStepper","&$active","WebkitOverflowScrolling","@media(max-width:500px)","textAlign","@media(max-width:475px)","& div","& span","MyMaterialStepper","stepper","CancelBtn","onSave","stepsId","stepsPages","stepsPreviewPage","validateIdBase","cancelButton","MaterialUiStepper","fullHeight","innerHeight","dialogTitle","wordWrap","&:first-child","contentBox","propRow","contentBody","contentTopLoadingCircular","flexShrink","contentTopLoading","& > div","textBtn","btnIconLeft","leftCol","down","rightCol","progressCircleCenter","floating","breakLong","overflowWrap","hyphens","demoImg","demoBody","contentStickyTop","TextBtn","Transition","Slide","direction","iconButton","textButton","fabVariant","btnLabelArgs","btnLabel","dialogActions","btnProps","setOpen","onBeforeOpen","ButtonComponent","btnLabelTranslated","react","first","second","TransitionComponent","disableTypography","closeDialog","NewAdUnitHoc","ItemForm","saved","adUnitPost","AdUnitBasic","validateAndUpdateType","validateTargetUrl","prevProps","addUtmParameters","removeFromUrl","protocol","host","newQuery","_i","_Object$entries","addUrlUtmTracking","newTemp","errTitle","errDescription","errTargetUrl","TextField","FormControlLabel","control","Checkbox","handleChangeAddUtmLink","getWidAndHightFromType","sizes","handleImgChange","_getWidAndHightFromTy","_getWidAndHightFromTy2","renderInput","inputProps","InputProps","ref","other","inputRef","inputRoot","renderSuggestion","suggestion","itemProps","highlightedIndex","selectedItem","showSelected","isHighlighted","isSelected","fontWeight","getSuggestions","inputValue","allowCreate","validateCreation","trim","includes","newSuggestion","DownshiftMultiple","handleKeyDown","keycode","newItemValue","handleInputChange","handleDelete","splice","openOnClick","allValues","downshift_esm","itemToString","getInputProps","getItemProps","isOpen","inputValue2","selectedItem2","toggleMenu","tabIndex","chip","onKeyDown","square","DownshiftSingle","onInit","errorText","suggestions","clearSelection","react_virtualized_auto_sizer_dist_index_esm","dist_index_esm","itemSize","itemCount","multiple","autocomplete_DownshiftMultiple","autocomplete_DownshiftSingle","marks","SourcesSelect","score","AdUnitTargeting","handleTargetChange","newValue","newTargets","newTarget","updateNewItemCollections","removeTarget","validateAutocomplete","targetTag","autocomplete_Autocomplete","suggestionMatch","showSuggestionsWhenValueIsSet","Slider","slider","markLabel","aria-labelledby","step","valueLabelDisplay","collections","tg","_ref4$target","targetIcon","LocationOnIcon","WcIcon","age","ChildCareIcon","getTargetType","UnitTargets","targetArrayValues","TargetIcon","CompareArrows","isTarget","TargetsList","_ref$targets","subHeader","dense","subheader","ListSubheader","PropRow","classNameLeft","classNameRight","_ref$style","uppercase","ContentBox","ContentBody","ContentStickyTop","TopLoading","subMsg","FullContentSpinner","imgPreview","boxShadow","shadows","imgPreviewWrapper","AdUnitFormPreview","containers_UnitTargets_UnitTargets","NewAdUnitFormPreview","NewCampaignHoc","waitingAction","adUnitsArray","CampaignUnits","handleSelect","validateUnits","hasAdUnits","containers_ItemsList_ItemsList","selectMode","selectedItems","onSelect","listMode","noActions","NewItems_NewUnitDialog","CalendarIconAdor","_ref$icon","DateRange_default","iconColor","onIconClick","DateTimePicker","calendarIcon","material_ui_pickers_esm","DateTimePicker_CalendarIconAdor","datepickerContrastInput","white","datepickerContrastLabel","&$datepickerContrastLabelFocused","datepickerContrastLabelFocused","datepickerContrastUnderline","&:after","&:before","DateTimePicker_DateTimePicker","InputLabelProps","FormLabelClasses","focused","VALIDATOR_LEADER_URL","VALIDATOR_LEADER_FEE","VALIDATOR_FOLLOWER_URL","VALIDATOR_FOLLOWER_ID","VALIDATOR_FOLLOWER_FEE","VALIDATOR_SOURCES","fee","validateCampaignDates","_ref2$created","NewCampaignFinance","validateAndUpdateValidator","newValidators","handleDates","validateAmount","isNumberString","_ref4$availableIdenti","_ref3$maxDeposit","maxDeposit","maxDep","dep","validateAmounts","minTargetingScore","_ref5$availableIdenti","errDepAmnt","errMin","errFrom","errTo","impressions","getTotalImpressions","common_DateTimePicker_DateTimePicker","emptyLabel","disablePast","minDate","maxDate","FormGroup","WalletAction","CampaignFormPreview","AdUnitsTable","noControls","FormsCommon_WalletAction","NewCampaignFormPreview","adSlotPost","NewAdSlotHoc","updateMinPerImpression","validateImage","validateFallbackUrl","handleFallbackChange","_this$props$newItem","errFallbackUrl","Switch_Switch","Collapse","in","AdSlotTargeting","SlotFallback","AdSlotPreview","AdSlotPreview_SlotFallback","NewAdSlotPreview","SaveBtnWithAdUnit","SaveBtnWithCampaign","saveBtnLabel","saveBtnIcon","HourglassEmpty_default","SaveBtnWithAdSlot","esm_extends","CancelBtnWithItem","CancelBtnWithCampaign","CancelBtnWithAdSlot","dialogCommon","darkerBackground","Add_default","NewUnitStepsWithDialog","WithDialog","forms_FormSteps","AdUnitMedia","noDefaultImg","itemModel","NewUnitDialog","copyProps","FileCopy_default","NewCloneUnitDialog","NewCampaignStepsWithDialog","CampaignFinance","imgAdditionalInfo","NewCampaignDialog","NewSlotStepsWithDialog","AdSlotBasic","AdSlotMedia","descriptionHelperTxt","NewSlotDialog","TableCell","TableCell_TableCell","RRTableCell","ItemsList","renderTableHead","TableHead","TableRow","ItemsList_TableCell","renderCampaignTableHead","renderTableRow","cellImg","fallbackMediaiUrl","renderActions","renderCampaignTableRow","firstUnit","fundsDistributedRatio","mul","Tooltip","enterDelay","ItemsList_RRButton","NewItems_NewCloneUnitDialog","collection_Rows","Lists_ListWithControls","archive","card","@media(max-width:380px)","basicInfo","ValidatedFallbackAdData","rightComponent","toggleFallbackImgEdit","errFallbackAdUrl","Card","raised","CardMedia","fallbackTargetUrl","CardContent","ValidatedSlotMinCPM","minCPM","_ref2$prop","_ref2$value","_ref2$item","updateItemTemp","MediaCard","BasicProps","ItemCommon_MediaCard","CampaignProps","VIEW_MODE","handleTabChange","CampaignActions","statistics","CampaignModel","Tabs","scrollable","scrollButtons","indicatorColor","textColor","Tab","removeFromItem","AdUnitModel","CampaignItem","datepicker","RRSideBox","_ref$salePoints","salePoints","linkTitle","sideBox","point","SideSelect","dialogPaper","BackdropProps","backdrop","AdexAdvertiser","AdexPublisher","verticalAlign","&:hover:not(.disabled)","&.disabled","@media(max-width:425px)","& li","listStyle","tooltip","useStylesArrow","black","popper","&[x-placement*=\"bottom\"] $arrow","&::before","borderWidth","&[x-placement*=\"top\"] $arrow","&[x-placement*=\"right\"] $arrow","&[x-placement*=\"left\"] $arrow","arrow","borderStyle","ArrowTooltip","_useStylesArrow","_React$useState","_React$useState2","arrowRef","setArrowRef","PopperProps","popperOptions","modifiers","enabled","element","typography","pxToRem","_ref$bgColor","bgColor","_ref2$bgColor","infoCard","linkCard","&:hover, &:focus","progress","StatsCard","explain","infoStatsContainer","dashboardCardBody","CHARTS_COLORS","CHARTS_COMMON_OPTIONS","responsive","tooltips","cornerRadius","merge","defaults","global","commonDsProps","lineTension","pointRadius","pointHitRadius","SimpleStatistics","_ref$timeframe","_ref$options","_ref$xLabel","xLabel","_ref$y1Label","y1Label","_ref$y2Label","y2Label","_ref$y1Color","y1Color","_ref$y2Color","y2Color","payouts","counts","useEffect","Chart","pluginService","register","afterDraw","chart","_active","activePoint","controller","ctx","tooltipPosition","topY","scales","bottomY","beginPath","moveTo","lineTo","lineWidth","setLineDash","strokeStyle","stroke","restore","chartData","yAxisID","pointBackgroundColor","linesOptions","maintainAspectRatio","intersect","callbacks","datasetIndex","yLabel","hover","xAxes","gridLines","scaleLabel","labelString","yAxes","ticks","beginAtZero","precision","drawOnChartArea","react_chartjs_2_es","deepOrange","amber","lime","contrastThreshold","tonalOffset","createMuiTheme","fontFamily","overrides","MuiButton","outlined","MuiTableCell","head","whiteSpace","MuiPaper","rounded","MuiTooltip","themeMUI","responsiveFontSizes","factor","timeFrames","tf","translated","metrics","publisher","advertiser","timeHints","hour","day","week","BasicStats","setTimeframe","averageCPM","loadingImpressions","loadingMoney","loadingCPM","DashboardStats_StatsCard","simplified_SimpleStatistics","DashboardStats","goToAccount","side_select_SideSelect","UnitItem","Unit","adUrl","ADVIEW_URL","adviewUrl","origin","AUTO_HIDE_STRING","IntegrationCode","_ref$slot","onCopy","publisherAddr","whitelistedToken","whitelistedType","randomize","marketSlot","iframeStr","integrationLabel","copy","integrationCode","Slot","handleFallbackImgUpdateToggle","editFallbackImg","tabsFocus","scrollIntoView","behavior","block","createRef","Slot_IntegrationCode","SlotItem","alignSelf","Items","newItemBtn","NewTransactionHoc","TransactionHoc","txId","manyTxs","resetTransaction","handleSaveRes","saveFn","txs","txResults","WithdrawFromIdentityForm","numStr","amount","identityAvailable","withdrawAmount","withdrawToSpinner","errAmount","errAddr","WithdrawAnyTokenFromIdentityForm","balanceAnySpinner","tokenBalance","errToken","bal","PRIV_LEVELS_SRC","SeAddressPrivilegeForm","setAddrSpinner","IdentityWithdrawPreview","SetPrivilegePreview","IdentityWithdrawAnyPreview","TransactionPreviewForm","TransactionPreview","gas","getFeesFn","_this$props2$transact","previewWarnMsgs","_transaction$fees","waitingForWalletAction","Error_default","Warning_default","previews_IdentityWithdrawPreview","previews_SetPrivilegePreview","previews_IdentityWithdrawAnyPreview","A700","centralSpinner","FormStepsWithDialog","FormSteps","txCommon","cancelBtnLabel","WithdrawTokenFromIdentity","WithdrawFromExchangePage","SetIdentityPrivilege","SeAddressPrivilege","WithdrawAnyTokenFromIdentity","WithdrawAnyTokenFromIdentityPage","actionBtn","advancedList","iconBtnLeft","localWalletDownloadHref","getRecoveryWalletData","walletJsonData","expanded","setExpanded","_formatted$walletAuth","_formatted$walletPriv","_account$wallet2","chr","py","download","SaveAlt_default","pr","widget","RampInstantSDK","hostAppName","hostLogoUrl","swapAsset","userAddress","domNodes","overlay","show","displayRampWidget","CreditCard_default","transactions_WithdrawTokenFromIdentity","identityAvailableRaw","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","heading","ExpansionPanelDetails","transactions_SetIdentityPrivilege","transactions_WithdrawAnyTokenFromIdentity","Campaigns","NewItems_NewCampaignDialog","accent","containers_Items_Items","AdUnits","AdSlots","NewItems_NewSlotDialog","AdSlotModel","Dashboard","mobileOpen","setMobileOpen","drawer","dashboard_SideNav","TopBar","Hidden","mdUp","Drawer","anchor","ModalProps","keepMounted","smDown","implementation","Route","containers_Campaign_Campaign","containers_Unit_Unit","containers_Slot_Slot","account_AccountInfo","DashboardStats_DashboardStats","signinContainer","backgroundRepeat","backgroundSize","backgroundPosition","backgroundImage","buttons","adxVersion","adexLogoTop","logo","noBg","limitedWidthBtn","btnLogo","btnLogoNoTxt","metamaskBtn","trezorBtn","wallets","setWallets","setHasLegacyWallets","auth","allWallets","w","hasLegacy","goTo","confirmLogout","toExecute","align","m","AuthSelect_RRButton","ConnectHoc","xl","ArrowDropDown_default","auth_select_AuthSelect","IdentityHoc","IdentityForm","componentDidUpdate","registerExpected","ready","waitingExpected","waiting","waitingUpload","buttonProgressWrapper","infoPaper","gutters","IdentityContractAddressStep","validateIdentity","getIdentityContractData","_this$props$identity","emailCheck","code","validateEmail","validateEmailCheck","validateCode","currIdentity","isValidFormat","waitingCheck","checkAccessCode","cpn","exist","used","paragraph","AuthHoc","Auth","hdWalletAddrPath","hdWalletAddrIdx","sideSelect","addrListItem","addrInfo","& strong","addrInfoLabel","tabsContainer","tabLogo","tabLabel","dlBtnImg","leftBtnIcon","AddrItem","installingMetamask","setInstallingMetamask","setAddress","_useState5","_useState6","setStats","_useState7","_useState8","waitingMetamaskAction","setWaitingMetamaskAction","_useState9","_useState10","waitingAddrsData","setWaitingAddrsData","isOpera","opr","opera","navigator","userAgent","_useState11","_useState12","isMetamaskEthereumProvider","setIsMetamaskEthereumProvider","ethereumProvider","setEth","onfocus","reload","checkMetamask","metamaskSigner","_address","_stats","tabBox","METAMASK_IMG","dangerouslySetInnerHTML","__html","METAMASK_DL_IMG","metamaskLAbel","AuthTrezor","connectTrezor","waitingTrezorAction","trezorSigner","addresses","allAddressesData","hdPath","AddressSelect","onAddrSelect","addrData","TREZOR_DL_IMG","AuthLedger","connectLedger","waitingLedgerAction","ledgerSigner","LEDGER_DL_IMG","AuthMethod","ownerAuth_AuthMetamask","ownerAuth_AuthTrezor","ownerAuth_AuthLedger","validateContractOwner","currOwner","ownerAuth_AuthMethod","IdentityGrantInfoStep","passwordCheck","tosCheck","validatePassword","validatePasswordCheck","validateCoupon","validateTOS","checkCoupon","accepted","IdentityGrantDeployStep","initLocalWallet","getIdentity","waitingGrant","grantAmount","IdentityGrantLoginStep","validateWallet","identityPrivileges","IdentityQuickDeployStep","waitingQuick","IdentityQuickLoginStep","QuickLogin_RRButton","IdentityQuickRecoverStep","getIdentitiesForDropdown","balanceDAI","IdentityFullLoginStep","identityContractAddress","useCallback","identityDataSplit","updateOwnerIdentities","ExternalConnect","connectType","setConnectType","identity_FullLogin","identity_IdentityContractAddressEthDeploy","stepperWrapper","stepper_MaterialUiStepper_StepperNav","disableBtnsIfValid","MaterialUiStepper_WithMaterialStepper","IdentitySteps","mapPages","GoBtn","_this$props$stepsPage","stepper_MaterialUiStepper","vitalik","SNT_VITALIK_BUTERIN_RIDES_EDDIE_WHILE_PUMPING_IT_UP","DialogHoc","ConnectedCreateGrantIdentity","JustDialog","identity_IdentitySteps","GrantInfo","GrantDeploy","ConnectedGrantLogin","GrantLogin","ConnectedCreateQuickIdentity","QuickInfo","QuickDeploy","ConnectedQuickLogin","QuickLogin","ConnectedQuickRecovery","QuickRecover","ConnectedCreateFullIdentity","IdentityContractOwner","IdentityContractAddressEthDeploy","ConnectedLoginStandardIdentity","ConnectedRoot","PrivateRoute","render","Redirect","handleLegacyWallet","Root_PrivateRoute","noBackground","onBeforeLift","App","CssBaseline","ThemeProvider","es","integration_react","esm","react_router_dom","App_Root","toast_Toast","confirm_Confirm","hostname","_Object$keys","ReactDOM","components_App_App","getElementById","serviceWorker","registration","unregister","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","addrsFromPubKey","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","chainCode","_ref2$from","_ref2$to","hdKey","addrs","derivedKey","HDKey","Buffer","derive","publicExtendedKey","fromExtendedKey","_ref4$from","_ref4$to","transport","_args2","_transport","create","LedgerEth","txUnsigned","signTransaction","_args5","signPersonalMessage","joinSignature","TransportU2F","HEADER","base64","alg","__webpack_exports__","payloadEncoded","C_git_platform_4_0_adex_platform_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","sigBuf","verify","parts","verifyMessage","decode","Module"],"mappings":"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","file":"static/js/main.344853d5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/home-wallpaper.9793fae1.jpg\";","export const ADD_ITEM = 'ADD_ITEM'\r\nexport const UPDATE_ITEM = 'UPDATE_ITEM'\r\nexport const UPDATE_NEW_ITEM = 'UPDATE_NEWITEM'\r\nexport const RESET_NEW_ITEM = 'RESET_NEWITEM'\r\nexport const RESET_ALL_NEW_ITEMS = 'RESET_ALL_NEWITEMS'\r\nexport const DELETE_ITEM = 'DELETE_ITEM'\r\nexport const REMOVE_ITEM_FROM_ITEM = 'REMOVE_ITEM_FROM_ITEM'\r\nexport const ADD_ITEM_TO_ITEM = 'ADD_ITEM_TO_ITEM'\r\nexport const UPDATE_ALL_ITEMS = 'UPDATE_ALL_ITEMS' // SYNC?\r\nexport const RESET_ALL_ITEMS = 'RESET_ALL_ITEMS'\r\nexport const SET_CURRENT_ITEM = 'SET_CURRENTITEM'\r\nexport const UPDATE_CURRENT_ITEM = 'UPDATE_CURRENTITEM'\r\nexport const SAVE_CURRENT_ITEM = 'SAVE_CURRENTITEM'\r\nexport const UPDATE_SPINNER = 'UPDATE_SPINNER'\r\nexport const UPDATE_UI = 'UPDATE_UI'\r\nexport const ADD_TOAST = 'ADD_TOAST'\r\nexport const REMOVE_TOAST = 'REMOVE_TOAST'\r\nexport const CONFIRM_ACTION = 'CONFIRM_ACTION'\r\nexport const UPDATE_NAV = 'UPDATE_NAV'\r\nexport const CHANGE_LANGUAGE = 'CHANGE_LANGUAGE'\r\nexport const UPDATE_ITEM_VALIDATION = 'UPDATE_ITEM_VALIDATION'\r\nexport const RESET_ITEM_VALIDATION = 'RESET_ITEM_VALIDATION'\r\nexport const UNIT_PLACE_BID = 'PLACE_BID'\r\nexport const UNIT_CANCEL_BID = 'UNIT_CANCEL_BID'\r\nexport const SLOT_ACCEPT_BID = 'SLOT_ACCEPT_BID'\r\nexport const SLOT_REJECT_BID = 'SLOT_REJECT_BID'\r\nexport const UPDATE_NEW_BID = 'UPDATE_NEW_BID'\r\nexport const RESET_NEW_BID = 'RESET_NEW_BID'\r\nexport const UPDATE_SIGNIN = 'UPDATE_SIGNIN'\r\nexport const RESET_SIGNIN = 'RESET_SIGNIN'\r\nexport const CREATE_ACCOUNT = 'CREATE_ACCOUNT'\r\nexport const UPDATE_ACCOUNT = 'UPDATE_ACCOUNT'\r\nexport const RESET_ACCOUNT = 'RESET_ACCOUNT'\r\nexport const UPDATE_NEW_TRANSACTION = 'UPDATE_NEW_TRANSACTION'\r\nexport const RESET_NEW_TRANSACTION = 'RESET_NEW_TRANSACTION'\r\nexport const ADD_WEB3_TRANSACTION = 'ADD_WEB3_TRANSACTION'\r\nexport const UPDATE_WEB3_TRANSACTION = 'UPDATE_WEB3_TRANSACTION'\r\nexport const RESET_WEB3_TRANSACTION = 'RESET_WEB3_TRANSACTION'\r\nexport const UPDATE_ALL_BIDS = 'UPDATE_ALL_BIDS'\r\nexport const RESET_ALL_BIDS = 'RESET_ALL_BIDS'\r\nexport const UPDATE_TAGS = 'UPDATE_TAGS'\r\nexport const ADD_NEW_TAG = 'ADD_NEW_TAG'\r\nexport const UPDATE_IDENTITY = 'UPDATE_IDENTITY'\r\nexport const RESET_IDENTITY = 'RESET_IDENTITY'\r\nexport const UPDATE_GAS_DATA = 'UPDATE_GAS_DATA'\r\nexport const UPDATE_WALLET = 'UPDATE_WALLET'\r\nexport const RESET_WALLET = 'RESET_WALLET'\r\nexport const UPDATE_RELAYER_CFG = 'UPDATE_RELAYER_CFG'\r\nexport const UPDATE_ANALYTICS = 'UPDATE_ANALYTICS'\r\nexport const RESET_ANALYTICS = 'RESET_ANALYTICS'\r\n","import { exchange as ExchangeConstants } from 'adex-constants'\r\nimport { constants } from 'adex-models'\r\n\r\nconst { BID_STATES, TIMEOUTS } = ExchangeConstants\r\nconst { SignatureModes } = constants\r\nconst AdTypes = constants.AdUnitsTypes.map(type => {\r\n\treturn {\r\n\t\tvalue: type,\r\n\t\tlabel: type.split('_')[1],\r\n\t}\r\n})\r\n\r\nexport const AVATAR_MAX_WIDTH = 600\r\nexport const AVATAR_MAX_HEIGHT = 400\r\n\r\nexport const SORT_PROPERTIES_BIDS = [\r\n\t{ value: '_state', label: '' },\r\n\t{ value: '_target', label: '' },\r\n\t{ value: '_amount', label: '' },\r\n\t{ value: '_timeout', label: '' },\r\n]\r\n\r\nexport const FILTER_PROPERTIES_BIDS = {\r\n\t_state: {\r\n\t\tlabel: '_state',\r\n\t\tlabelIsProp: true,\r\n\t\tvalues: Object.keys(BID_STATES).map(key => {\r\n\t\t\treturn { value: BID_STATES[key].id, label: BID_STATES[key].label }\r\n\t\t}),\r\n\t},\r\n\t_timeout: { label: '_timeout', labelIsProp: true, values: TIMEOUTS },\r\n}\r\n\r\nexport const FILTER_PROPERTIES_BIDS_NO_STATE = {\r\n\t_timeout: FILTER_PROPERTIES_BIDS._timeout,\r\n}\r\n\r\nexport const SORT_PROPERTIES_ITEMS = [\r\n\t{ value: 'created' },\r\n\t{ value: 'title' },\r\n\t{ value: 'type' },\r\n]\r\n\r\nexport const SORT_PROPERTIES_COLLECTION = [\r\n\t{ value: 'created' },\r\n\t{ value: 'title' },\r\n]\r\n\r\nexport const FILTER_PROPERTIES_ITEMS = {\r\n\ttype: { label: 'type', labelIsProp: true, values: AdTypes },\r\n}\r\n\r\nexport const AUTH_TYPES = {\r\n\tMETAMASK: { name: 'metamask', signType: SignatureModes.GETH, limit: 0 },\r\n\tTREZOR: { name: 'trezor', signType: SignatureModes.GETH, limit: 0 },\r\n\tLEDGER: { name: 'ledger', signType: SignatureModes.GETH, limit: 0 },\r\n\tDEMO: { name: 'demo', signType: SignatureModes.GETH, limit: 0 },\r\n\tGRANT: { name: 'grant', signType: SignatureModes.GETH, limit: 50 },\r\n\tQUICK: { name: 'quick', signType: SignatureModes.GETH, limit: 50 },\r\n\tSEED: { name: 'seed', signType: SignatureModes.GETH, limit: 500 },\r\n}\r\n\r\nexport const NETWORK_STATUS = {\r\n\t0: 'pending',\r\n\t1: 'success',\r\n\t2: 'failed',\r\n}\r\n\r\nexport const ETHEREUM_NETWORKS = {\r\n\t1: { name: 'Mainnet', for: 'production' },\r\n\t5: { name: 'Goerli', for: 'development' },\r\n\tproduction: { name: 'Mainnet', for: 'production' },\r\n\tdevelopment: { name: 'Goerli', for: 'development' },\r\n}\r\n\r\nexport const SORT_PROPERTIES_CAMPAIGN = [\r\n\t{ value: 'created', label: 'Created' },\r\n\t{ value: 'status.name', label: 'Status' },\r\n\t{ value: 'withdrawPeriodStart', label: 'Ends' },\r\n\t{ value: 'activeFrom', label: 'Starts' },\r\n\t{ value: 'depositAmount', label: 'depositAmount' },\r\n\t{ value: 'maxPerImpression', label: 'cpm' },\r\n]\r\n\r\nexport const FILTER_PROPERTIES_CAMPAIGN = {\r\n\t'status.name': {\r\n\t\tlabel: 'ststus',\r\n\t\tlabelIsProp: true,\r\n\t\tvalues: [\r\n\t\t\t{ value: 'Pending', label: 'Pending' }, // UI only state\r\n\t\t\t{ value: 'Initializing', label: 'Initializing' },\r\n\t\t\t{ value: 'Offline', label: 'Offline' },\r\n\t\t\t{ value: 'Disconnected', label: 'Disconnected' },\r\n\t\t\t{ value: 'Invalid', label: 'Invalid' },\r\n\t\t\t{ value: 'Unhealthy', label: 'Unhealthy' },\r\n\t\t\t{ value: 'Ready', label: 'Ready' },\r\n\t\t\t{ value: 'Active', label: 'Active' },\r\n\t\t\t{ value: 'Exhausted', label: 'Exhausted' },\r\n\t\t\t{ value: 'Expired', label: 'Expired' },\r\n\t\t],\r\n\t},\r\n}\r\n\r\nexport const UTM_PARAMS = {\r\n\tutm_source: 'ADEX',\r\n\tutm_medium: 'CPM',\r\n\tutm_campaign: 'none',\r\n\tutm_content: 'none',\r\n}\r\n\r\nexport const VALIDATOR_ANALYTICS_METRICS = [\r\n\t'eventPayouts', //\r\n\t'eventCounts',\r\n]\r\nexport const VALIDATOR_ANALYTICS_SIDES = [\r\n\t'advertiser',\r\n\t'publisher', //\r\n]\r\nexport const VALIDATOR_ANALYTICS_EVENT_TYPES = ['IMPRESSION']\r\n\r\n// TEMP: disable long periods\r\nexport const VALIDATOR_ANALYTICS_TIMEFRAMES = [\r\n\t{ label: 'LABEL_HOUR', value: 'hour' },\r\n\t{ label: 'LABEL_DAY', value: 'day' },\r\n\t{ label: 'LABEL_WEEK', value: 'week' },\r\n\t// { label: 'LABEL_MONTH', value: 'month' },\r\n\t// { label: 'LABEL_YEAR', value: 'year' },\r\n]\r\n\r\nexport const MOON_GRAVITY_ACCELERATION = 1.625\r\nexport const MOON_TO_EARTH_WEIGHT = 0.166\r\n","import { AdUnit, AdSlot, Campaign, Account } from 'adex-models'\r\nimport {\r\n\tVALIDATOR_ANALYTICS_SIDES,\r\n\tVALIDATOR_ANALYTICS_EVENT_TYPES,\r\n\tVALIDATOR_ANALYTICS_METRICS,\r\n\tVALIDATOR_ANALYTICS_TIMEFRAMES,\r\n} from 'constants/misc'\r\n\r\nexport const getValidatorAnalyticsInitialState = () => {\r\n\tconst initialState = {}\r\n\r\n\tVALIDATOR_ANALYTICS_SIDES.forEach(side =>\r\n\t\tVALIDATOR_ANALYTICS_EVENT_TYPES.forEach(eventType =>\r\n\t\t\tVALIDATOR_ANALYTICS_METRICS.forEach(metric =>\r\n\t\t\t\tVALIDATOR_ANALYTICS_TIMEFRAMES.forEach(timeframe => {\r\n\t\t\t\t\tinitialState[side] = initialState[side] || {}\r\n\t\t\t\t\tinitialState[side][eventType] = initialState[side][eventType] || {}\r\n\t\t\t\t\tinitialState[side][eventType][metric] =\r\n\t\t\t\t\t\tinitialState[side][eventType][metric] || {}\r\n\t\t\t\t\tinitialState[side][eventType][metric][timeframe.value] =\r\n\t\t\t\t\t\tinitialState[side][eventType][metric][timeframe.value] || {}\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t)\r\n\t)\r\n\r\n\treturn initialState\r\n}\r\n\r\nlet initialState = {\r\n\taccount: new Account(),\r\n\tsignin: {\r\n\t\tname: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\tpassConfirm: '',\r\n\t\tseed: '',\r\n\t\tpublicKey: '',\r\n\t\tseedCheck: [],\r\n\t\tauthenticated: false,\r\n\t},\r\n\tnewItem: {\r\n\t\tCampaign: new Campaign().plainObj(),\r\n\t\tAdUnit: new AdUnit({ temp: { addUtmLink: true } }).plainObj(),\r\n\t\tAdSlot: new AdSlot().plainObj(),\r\n\t},\r\n\tcurrentItem: {},\r\n\titems: {\r\n\t\tCampaign: {},\r\n\t\tAdUnit: {},\r\n\t\tAdSlot: {},\r\n\t},\r\n\tspinners: {},\r\n\tui: {},\r\n\ttoasts: [],\r\n\tconfirm: {\r\n\t\tdata: {},\r\n\t},\r\n\tnav: {\r\n\t\tside: '',\r\n\t},\r\n\tlanguage: 'en-US',\r\n\tvalidations: {},\r\n\tnewTransactions: {\r\n\t\tdefault: {},\r\n\t},\r\n\tweb3Transactions: {},\r\n\ttags: {},\r\n\tidentity: {},\r\n\tethNetwork: {\r\n\t\tnetworkId: null,\r\n\t\tgasData: {},\r\n\t},\r\n\twallet: {},\r\n\tconfig: {\r\n\t\trelayer: {},\r\n\t\tmarket: {},\r\n\t\tvalidators: {},\r\n\t},\r\n\tanalytics: getValidatorAnalyticsInitialState(),\r\n}\r\n\r\nexport default initialState\r\n","import adexTranslations from 'adex-translations'\r\nimport { renderToString } from 'react-dom/server'\r\n\r\nconst translations = adexTranslations()\r\n\r\nlet lang = 'en-US'\r\n\r\n// TODO: sanitization\r\nconst interpolate = (tpl, args) => {\r\n\tif (typeof tpl !== 'string') {\r\n\t\treturn ''\r\n\t}\r\n\r\n\treturn tpl.replace(/\\${(\\w+)}/g, (_, v) => {\r\n\t\tlet arg = args[v]\r\n\t\tif (typeof arg === 'object' && !!arg && arg.component) {\r\n\t\t\treturn renderToString(arg.component)\r\n\t\t} else {\r\n\t\t\treturn arg || ''\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const translate = (\r\n\tval = '',\r\n\t{ isProp = false, args = [''] } = {},\r\n\tlanguage = lang\r\n) => {\r\n\tlet key = val + ''\r\n\tif (isProp) {\r\n\t\tkey = 'PROP_' + key.replace(/^_/, '')\r\n\t}\r\n\r\n\tkey = key.toUpperCase()\r\n\r\n\tlet translation = translations[language][key] || val\r\n\r\n\tif (args.length && Array.isArray(args)) {\r\n\t\tconst translatedArgs = args.map(a => {\r\n\t\t\tif (typeof a === 'string') {\r\n\t\t\t\treturn translations[language][a] || a\r\n\t\t\t} else {\r\n\t\t\t\treturn a\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\ttranslation = interpolate(translation, translatedArgs)\r\n\t}\r\n\r\n\treturn translation\r\n}\r\n\r\n// TODO: fix that\r\nexport const setLang = lng => {\r\n\tlang = lng\r\n}\r\n","import { UPDATE_RELAYER_CFG } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nconst updateCfg = (current, type, cfg) => {\r\n\tconst newCfg = { ...current }\r\n\tnewCfg[type] = { ...cfg }\r\n\treturn newCfg\r\n}\r\n\r\nexport default function uiReducer(state = initialState.config, action) {\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_RELAYER_CFG:\r\n\t\t\treturn updateCfg(state, 'relayer', action.cfg)\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import account from './accountReducer'\r\nimport signin from './signinReducer'\r\nimport identity from './identityReducer'\r\nimport wallet from './walletReducer'\r\nimport items from './itemsReducer'\r\nimport newItem from './newItemsReducer'\r\n// import currentItem from './currentItemsReducer'\r\nimport spinners from './spinnersReducer'\r\nimport ui from './uiReducer'\r\nimport toasts from './toastsReducer'\r\nimport confirm from './confirmReducer'\r\nimport nav from './navReducer'\r\nimport language from './languageReducer'\r\nimport validations from './validateItemsReducer'\r\nimport newTransactions from './newTransactionsReducer'\r\nimport web3Transactions from './web3TransactionsReducer'\r\nimport tags from './tagsReducer'\r\nimport ethNetwork from './ethNetworkReducer'\r\nimport config from './configReducer'\r\nimport analytics from './analyticsReducer'\r\nimport { filterActions } from 'redux-ignore'\r\nimport * as types from 'constants/actionTypes'\r\n\r\nexport const persistReducers = {\r\n\taccount,\r\n\titems: filterActions(items, action => action.type.match(/_ITEM/)),\r\n\tui: filterActions(ui, [types.UPDATE_UI]),\r\n\tlanguage,\r\n\tweb3Transactions,\r\n\ttags,\r\n\tethNetwork,\r\n\tconfig,\r\n\tanalytics,\r\n}\r\n\r\nexport const memoryReducers = {\r\n\tsignin,\r\n\tidentity,\r\n\twallet,\r\n\tnewItem: filterActions(newItem, action => action.type.match(/_NEWITEM/)),\r\n\tspinners: filterActions(spinners, [types.UPDATE_SPINNER]),\r\n\ttoasts,\r\n\tconfirm: filterActions(confirm, [types.CONFIRM_ACTION]),\r\n\tnav: filterActions(nav, [types.UPDATE_NAV]),\r\n\tvalidations,\r\n\tnewTransactions,\r\n}\r\n","import {\r\n\tCREATE_ACCOUNT,\r\n\tRESET_ACCOUNT,\r\n\tUPDATE_ACCOUNT,\r\n} from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\nimport { Base, Account } from 'adex-models'\r\n\r\nexport default function accountReducer(state = initialState.account, action) {\r\n\tlet newState\r\n\tlet newAccount\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase CREATE_ACCOUNT:\r\n\t\t\tnewAccount = { ...action.account }\r\n\t\t\tnewState = newAccount\r\n\t\t\treturn newState\r\n\t\tcase RESET_ACCOUNT:\r\n\t\t\tnewAccount = initialState.account\r\n\t\t\tnewState = newAccount\r\n\t\t\treturn newState\r\n\t\tcase UPDATE_ACCOUNT:\r\n\t\t\tnewAccount = Base.updateObject({\r\n\t\t\t\titem: newState,\r\n\t\t\t\tnewValues: { ...action.newValues },\r\n\t\t\t\tobjModel: Account,\r\n\t\t\t})\r\n\t\t\tnewState = newAccount\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tADD_ITEM,\r\n\tDELETE_ITEM,\r\n\tUPDATE_ITEM,\r\n\tREMOVE_ITEM_FROM_ITEM,\r\n\tADD_ITEM_TO_ITEM,\r\n\tUPDATE_ALL_ITEMS,\r\n\tRESET_ALL_ITEMS,\r\n} from 'constants/actionTypes' // eslint-disable-line no-unused-vars\r\nimport initialState from 'store/initialState'\r\nimport { Item } from 'adex-models'\r\n\r\nexport default function itemsReducer(state = initialState.items, action) {\r\n\tlet newState\r\n\tlet newCollection\r\n\tlet newItem\r\n\tlet collectionId\r\n\tlet item\r\n\r\n\tconst collection = (state = {}, action) => {\r\n\t\tif (!action.item) return state\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\t[action.item.id]: action.item,\r\n\t\t}\r\n\t}\r\n\r\n\tconst removeCollectionProp = (collection = {}, prop) => {\r\n\t\tlet newCol = { ...collection }\r\n\t\tdelete newCol[prop]\r\n\t\treturn newCol\r\n\t}\r\n\r\n\tif (action.item && action.itemType) {\r\n\t\tnewState = { ...state }\r\n\t\titem = { ...action.item }\r\n\t\tcollectionId = action.itemType\r\n\t}\r\n\r\n\tswitch (action.type) {\r\n\t\tcase ADD_ITEM:\r\n\t\t\t// TODO: the item should come here ready (with id from bc and ipsf)\r\n\t\t\t// id is going to be set when it comes here\r\n\t\t\tnewItem = item\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase ADD_ITEM_TO_ITEM:\r\n\t\t\tnewItem = Item.addItem(newState[collectionId][item._id], action.toAdd)\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase DELETE_ITEM:\r\n\t\t\tnewCollection = removeCollectionProp(newState[collectionId], item._id)\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase REMOVE_ITEM_FROM_ITEM:\r\n\t\t\tnewItem = Item.removeItem(\r\n\t\t\t\tnewState[collectionId][item._id],\r\n\t\t\t\taction.toRemove\r\n\t\t\t)\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase UPDATE_ITEM:\r\n\t\t\tnewItem = item\r\n\t\t\tnewCollection = collection(newState[collectionId], {\r\n\t\t\t\t...action,\r\n\t\t\t\titem: newItem,\r\n\t\t\t})\r\n\t\t\tnewState[collectionId] = newCollection\r\n\t\t\treturn newState\r\n\r\n\t\tcase UPDATE_ALL_ITEMS:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tconst newItems = action.items.reduce((items, item, index) => {\r\n\t\t\t\tconst currentItems = { ...items }\r\n\t\t\t\tconst newItem = { ...item }\r\n\t\t\t\tcurrentItems[newItem.id || newItem.ipfs] = newItem\r\n\t\t\t\treturn currentItems\r\n\t\t\t}, newState[action.itemType])\r\n\r\n\t\t\tnewState[action.itemType] = newItems\r\n\t\t\treturn newState\r\n\t\tcase RESET_ALL_ITEMS:\r\n\t\t\tnewState = { ...initialState.items }\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_UI } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function uiReducer(state = initialState.ui, action) {\r\n\tlet newState\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_UI:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tif (action.category) {\r\n\t\t\t\tnewState[action.category] = { ...newState[action.category] }\r\n\t\t\t\tnewState[action.category][action.item] = action.value\r\n\t\t\t} else {\r\n\t\t\t\tnewState[action.item] = action.value\r\n\t\t\t}\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import initialState from 'store/initialState'\r\nimport { CHANGE_LANGUAGE } from 'constants/actionTypes'\r\nimport { setLang } from 'services/translations/translations'\r\n\r\nexport default function languageReducer(state = initialState.language, action) {\r\n\tswitch (action.type) {\r\n\t\tcase CHANGE_LANGUAGE:\r\n\t\t\tlet newLang = action.lang || state\r\n\t\t\tsetLang(newLang)\r\n\t\t\treturn newLang\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tADD_WEB3_TRANSACTION,\r\n\tUPDATE_WEB3_TRANSACTION,\r\n\tRESET_WEB3_TRANSACTION,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function web3TransactionsReducer(\r\n\tstate = initialState.web3Transactions,\r\n\taction\r\n) {\r\n\tlet newState\r\n\tlet newTx\r\n\tlet newAddrTxs\r\n\tlet pendingTxs\r\n\r\n\tnewState = { ...state }\r\n\r\n\t// No model update\r\n\tconst updateObj = ({ obj, key, val }) => {\r\n\t\tobj = obj || {}\r\n\t\tobj[key] = val\r\n\r\n\t\treturn obj\r\n\t}\r\n\r\n\tconst updatePendingTxs = ({ pTxs, newTx }) => {\r\n\t\tif (newTx.status === 0 && pTxs.indexOf(newTx.hash)) {\r\n\t\t\tpTxs.push(newTx.hash)\r\n\t\t} else {\r\n\t\t\tpTxs = pTxs.filter(tx => tx !== newTx.hash)\r\n\t\t}\r\n\r\n\t\treturn pTxs\r\n\t}\r\n\r\n\tif (!action.addr) {\r\n\t\treturn state\r\n\t}\r\n\r\n\tnewAddrTxs = { ...(newState[action.addr] || {}) }\r\n\tpendingTxs = [...(newAddrTxs.pendingTxs || [])]\r\n\r\n\t// NOTE: keep transaction by address in order to keep them in the persist storage when the user is switch\r\n\t// If we keep the transactions on the node we can clean them from local storage on address change\r\n\tswitch (action.type) {\r\n\t\tcase ADD_WEB3_TRANSACTION:\r\n\t\t\tnewTx = { ...action.value }\r\n\t\t\tnewAddrTxs[action.tx] = newTx\r\n\t\t\tnewAddrTxs.pendingTxs = updatePendingTxs({\r\n\t\t\t\tpTxs: pendingTxs,\r\n\t\t\t\tnewTx: newTx,\r\n\t\t\t})\r\n\t\t\tnewState[action.addr] = newAddrTxs\r\n\t\t\treturn newState\r\n\t\tcase UPDATE_WEB3_TRANSACTION:\r\n\t\t\tnewTx = { ...(newAddrTxs[action.tx] || {}) }\r\n\t\t\tnewTx = updateObj({ obj: newTx, key: action.key, val: action.value })\r\n\t\t\tnewAddrTxs[action.tx] = newTx\r\n\t\t\tnewAddrTxs.pendingTxs = updatePendingTxs({\r\n\t\t\t\tpTxs: pendingTxs,\r\n\t\t\t\tnewTx: newTx,\r\n\t\t\t})\r\n\t\t\tnewState[action.addr] = newAddrTxs\r\n\t\t\treturn newState\r\n\t\tcase RESET_WEB3_TRANSACTION:\r\n\t\t\tnewTx = { ...initialState.web3Transactions.default }\r\n\t\t\tnewAddrTxs[action.tx] = newTx\r\n\t\t\tnewAddrTxs.pendingTxs = updatePendingTxs({\r\n\t\t\t\tpTxs: pendingTxs,\r\n\t\t\t\tnewTx: { txHash: action.tx },\r\n\t\t\t})\r\n\t\t\tnewState[action.tx] = newTx\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_TAGS, ADD_NEW_TAG } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function tagsReducer(state = initialState.tags, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_TAGS:\r\n\t\t\tnewState = { ...state, ...action.tags }\r\n\t\t\treturn newState\r\n\t\tcase ADD_NEW_TAG:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState[action.tag] = action.tag\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_GAS_DATA } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function tagsReducer(state = initialState.tags, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_GAS_DATA:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState.gasData = { ...action.gasData }\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_ANALYTICS, RESET_ANALYTICS } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function analyticsReducer(\r\n\tstate = initialState.analytics,\r\n\taction\r\n) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_ANALYTICS:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState[action.side] = { ...newState[action.side] }\r\n\t\t\tnewState[action.side][action.eventType] = {\r\n\t\t\t\t...newState[action.side][action.eventType],\r\n\t\t\t}\r\n\t\t\tnewState[action.side][action.eventType][action.metric] = {\r\n\t\t\t\t...newState[action.side][action.eventType][action.metric],\r\n\t\t\t}\r\n\t\t\tnewState[action.side][action.eventType][action.metric][\r\n\t\t\t\taction.timeframe\r\n\t\t\t] = { ...action.value }\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_ANALYTICS:\r\n\t\t\tnewState = { ...initialState.analytics }\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_SIGNIN, RESET_SIGNIN } from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function signinReducer(state = initialState.signin, action) {\r\n\tlet newState\r\n\tlet newSignin\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_SIGNIN:\r\n\t\t\tnewSignin = { ...newState }\r\n\t\t\tif (Array.isArray(newSignin[action.prop])) {\r\n\t\t\t\tnewSignin[action.prop] = [...action.value]\r\n\t\t\t} else {\r\n\t\t\t\tnewSignin[action.prop] = action.value\r\n\t\t\t}\r\n\r\n\t\t\tnewState = newSignin\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_SIGNIN:\r\n\t\t\tnewSignin = { ...initialState.signin }\r\n\t\t\tnewState = newSignin\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_IDENTITY, RESET_IDENTITY } from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function identityReducer(state = initialState.identity, action) {\r\n\tlet newState\r\n\tlet newIdentity\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_IDENTITY:\r\n\t\t\tnewIdentity = newState\r\n\t\t\tif (Array.isArray(newIdentity[action.prop])) {\r\n\t\t\t\tnewIdentity[action.prop] = [...action.value]\r\n\t\t\t} else {\r\n\t\t\t\tnewIdentity[action.prop] = action.value\r\n\t\t\t}\r\n\r\n\t\t\tnewState = newIdentity\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_IDENTITY:\r\n\t\t\tnewIdentity = { ...initialState.identity }\r\n\t\t\tnewState = newIdentity\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_WALLET, RESET_WALLET } from '../constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function walletReducer(state = initialState.wallet, action) {\r\n\tlet newState\r\n\tlet newWallet\r\n\r\n\tnewState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_WALLET:\r\n\t\t\tnewWallet = newState\r\n\t\t\tif (Array.isArray(newWallet[action.prop])) {\r\n\t\t\t\tnewWallet[action.prop] = [...action.value]\r\n\t\t\t} else {\r\n\t\t\t\tnewWallet[action.prop] = action.value\r\n\t\t\t}\r\n\r\n\t\t\tnewState = newWallet\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_WALLET:\r\n\t\t\tnewWallet = { ...initialState.wallet }\r\n\t\t\tnewState = newWallet\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tUPDATE_NEW_ITEM,\r\n\tRESET_NEW_ITEM,\r\n\tRESET_ALL_NEW_ITEMS,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function newItemsReducer(state = initialState.newItem, action) {\r\n\tlet newState\r\n\tlet newItem\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_NEW_ITEM:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewItem = { ...action.item }\r\n\t\t\tnewState[action.itemType] = newItem\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_NEW_ITEM:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewItem = { ...initialState.newItem[action.item] }\r\n\t\t\tnewState[action.item] = newItem\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_ALL_NEW_ITEMS:\r\n\t\t\tnewState = { ...initialState.newItem }\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_SPINNER, UPDATE_ITEM } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function spinnersReducer(state = initialState.spinners, action) {\r\n\tlet newState = { ...state }\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_SPINNER:\r\n\t\t\tnewState[action.spinner] = action.value\r\n\r\n\t\t\treturn newState\r\n\t\tcase UPDATE_ITEM:\r\n\t\t\tnewState['update' + action.item._id] = false\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { ADD_TOAST, REMOVE_TOAST } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function toastsReducer(state = initialState.toasts, action) {\r\n\tlet newState\r\n\tlet newToast\r\n\r\n\tswitch (action.type) {\r\n\t\tcase ADD_TOAST:\r\n\t\t\tnewToast = { ...action.toast }\r\n\t\t\tnewToast.added = Date.now()\r\n\t\t\tnewState = [newToast, ...state]\r\n\t\t\treturn newState\r\n\r\n\t\tcase REMOVE_TOAST:\r\n\t\t\tnewState = state.filter(t => t.id !== action.toast)\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { CONFIRM_ACTION } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n// import Helper from './../helpers/miscHelpers'\r\n\r\nexport default function confirmReducer(state = initialState.confirm, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase CONFIRM_ACTION:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState.data = { ...action.confirm.data }\r\n\t\t\tnewState.onConfirm = action.confirm.onConfirm\r\n\t\t\tnewState.onCancel = action.confirm.onCancel\r\n\t\t\tnewState.active =\r\n\t\t\t\taction.confirm.active !== undefined ? action.confirm.active : true\r\n\t\t\tnewState.noActionBtns = !!action.confirm.noActionBtns\r\n\r\n\t\t\t// Force react-redux connect to update props if confirm is called again with same action\r\n\t\t\tnewState.calledOn = Date.now()\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { UPDATE_NAV } from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function navReducer(state = initialState.nav, action) {\r\n\tlet newState\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_NAV:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewState[action.item] = action.value\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tUPDATE_ITEM_VALIDATION,\r\n\tRESET_ITEM_VALIDATION,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function validateItemsReducer(\r\n\tstate = initialState.validations,\r\n\taction\r\n) {\r\n\tlet newState\r\n\tlet newErrors\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_ITEM_VALIDATION:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewErrors = { ...newState[action.item], ...action.errors }\r\n\t\t\tnewState[action.item] = newErrors\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tcase RESET_ITEM_VALIDATION:\r\n\t\t\tnewState = { ...state }\r\n\t\t\tnewErrors = { ...newState[action.item] }\r\n\t\t\tif (newErrors && newErrors.hasOwnProperty(action.key)) {\r\n\t\t\t\t// TODO: Keep it like that or change canAdvance function\r\n\t\t\t\tdelete newErrors[action.key]\r\n\t\t\t} else if (newErrors && !action.key) {\r\n\t\t\t\tnewErrors = {}\r\n\t\t\t}\r\n\r\n\t\t\tnewState[action.item] = newErrors\r\n\r\n\t\t\treturn newState\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import {\r\n\tUPDATE_NEW_TRANSACTION,\r\n\tRESET_NEW_TRANSACTION,\r\n} from 'constants/actionTypes'\r\nimport initialState from 'store/initialState'\r\n\r\nexport default function newTransactionsReducer(\r\n\tstate = initialState.newTransactions,\r\n\taction\r\n) {\r\n\tlet newState\r\n\tlet newTx\r\n\r\n\tnewState = { ...state }\r\n\r\n\t// No model update\r\n\tconst updateTx = ({ tx, key, val }) => {\r\n\t\ttx = tx || {}\r\n\t\ttx[key] = val\r\n\r\n\t\treturn tx\r\n\t}\r\n\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_NEW_TRANSACTION:\r\n\t\t\tnewTx = {\r\n\t\t\t\t...(newState[action.tx] || initialState.newTransactions.default),\r\n\t\t\t}\r\n\t\t\tnewTx = updateTx({ tx: newTx, key: action.key, val: action.value })\r\n\r\n\t\t\t// console.log('newTx', newTx)\r\n\t\t\tnewState[action.tx] = newTx\r\n\t\t\treturn newState\r\n\t\tcase RESET_NEW_TRANSACTION:\r\n\t\t\tnewTx = { ...initialState.newTransactions.default }\r\n\t\t\tnewState[action.tx] = newTx\r\n\t\t\treturn newState\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import { createHashHistory } from 'history'\r\n\r\nconst history = createHashHistory()\r\n\r\nexport default history\r\n","import { createStore, compose, applyMiddleware, combineReducers } from 'redux'\r\nimport reduxImmutableStateInvariant from 'redux-immutable-state-invariant'\r\nimport thunk from 'redux-thunk'\r\nimport { persistReducers, memoryReducers } from 'reducers'\r\nimport history from './history'\r\nimport { routerMiddleware, connectRouter } from 'connected-react-router'\r\nimport { persistStore, persistCombineReducers } from 'redux-persist'\r\nimport localStorage from 'redux-persist/es/storage'\r\n// import session from 'redux-persist/lib/storage/session'\r\n\r\nconst reduxRouterMiddleware = routerMiddleware(history)\r\n\r\nconst configStorage = {\r\n\tkey: 'persist',\r\n\tstorage: localStorage,\r\n}\r\n\r\n// const configSession = {\r\n//   key: 'session',\r\n//   storage: session,\r\n// }\r\n\r\n// const rootReducer = combineReducers(reducers)\r\n\r\n// TODO: make session reducer(signin) - RAM reducer (no persist)\r\nconst rootReducer = combineReducers({\r\n\tpersist: persistCombineReducers(configStorage, persistReducers),\r\n\tmemory: combineReducers(memoryReducers), // persistCombineReducers(configSession, sessionReducers), //\r\n\trouter: connectRouter(history),\r\n})\r\n\r\nconst logger = store => next => action => {\r\n\t// if (action.type === 'UPDATE_NEWITEM') {\r\n\t//   return next(action)\r\n\t// }\r\n\r\n\tconsole.groupCollapsed(action.type)\r\n\tconsole.info('dispatching', action)\r\n\tlet result = next(action)\r\n\tconsole.log('next state', store.getState())\r\n\tconsole.groupEnd(action.type)\r\n\treturn result\r\n}\r\n\r\nfunction configureStoreProd(initialState) {\r\n\tconst middlewares = [\r\n\t\t// Add other middleware on this line...\r\n\r\n\t\t// thunk middleware can also accept an extra argument to be passed to each thunk action\r\n\t\t// https://github.com/gaearon/redux-thunk#injecting-a-custom-argument\r\n\t\tthunk,\r\n\t\treduxRouterMiddleware,\r\n\t\t// logger\r\n\t]\r\n\r\n\tlet store = createStore(\r\n\t\trootReducer,\r\n\t\tinitialState,\r\n\t\tcompose(applyMiddleware(...middlewares))\r\n\t)\r\n\r\n\tlet persistor = persistStore(store)\r\n\r\n\treturn { persistor, store }\r\n}\r\n\r\nfunction configureStoreDev(initialState) {\r\n\tconst middlewares = [\r\n\t\t// Add other middleware on this line...\r\n\r\n\t\t// Redux middleware that spits an error on you when you try to mutate your state either inside a dispatch or between dispatches.\r\n\t\treduxImmutableStateInvariant(),\r\n\r\n\t\t// thunk middleware can also accept an extra argument to be passed to each thunk action\r\n\t\t// https://github.com/gaearon/redux-thunk#injecting-a-custom-argument\r\n\t\tthunk,\r\n\t\treduxRouterMiddleware,\r\n\t\tlogger,\r\n\t]\r\n\r\n\tconst composeEnhancers =\r\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose // add support for Redux dev tools\r\n\tconst store = createStore(\r\n\t\trootReducer,\r\n\t\tinitialState,\r\n\t\tcomposeEnhancers(applyMiddleware(...middlewares))\r\n\t)\r\n\r\n\tif (module.hot) {\r\n\t\t// Enable Webpack hot module replacement for reducers\r\n\t\tmodule.hot.accept('../reducers', () => {\r\n\t\t\tconst nextReducer = require('../reducers').default // eslint-disable-line global-require\r\n\t\t\tstore.replaceReducer(nextReducer)\r\n\t\t})\r\n\t}\r\n\r\n\tlet persistor = persistStore(store)\r\n\treturn { persistor, store }\r\n}\r\n\r\nconst configureStore =\r\n\tprocess.env.NODE_ENV === 'production' ? configureStoreProd : configureStoreDev\r\n\r\nexport default configureStore()\r\n","import configureStore from 'store/configureStore'\r\nconst { store } = configureStore\r\n\r\nexport const execute = store.dispatch\r\n\r\nexport const dispatch = store.dispatch\r\n\r\nexport const getState = () => {\r\n\treturn store.getState()\r\n}\r\n","import moment from 'moment'\r\n\r\n// TODO: separate exports - not class\r\nclass Helper {\r\n\tgetGuid() {\r\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t\tvar r = (Math.random() * 16) | 0,\r\n\t\t\t\tv = c === 'x' ? r : (r & 0x3) | 0x8 // eslint-disable-line no-mixed-operators\r\n\t\t\treturn v.toString(16)\r\n\t\t})\r\n\t}\r\n\r\n\tgetRndHash32(prefix) {\r\n\t\tlet h = 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t\tvar r = (Math.random() * 16) | 0,\r\n\t\t\t\tv = c === 'x' ? r : (r & 0x3) | 0x8 // eslint-disable-line no-mixed-operators\r\n\t\t\treturn v.toString(16)\r\n\t\t})\r\n\t\tif (prefix) {\r\n\t\t\th = prefix + h.substring(prefix.length)\r\n\t\t}\r\n\t\treturn h\r\n\t}\r\n\r\n\tgetRandomInt(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1) + min)\r\n\t}\r\n\r\n\tgetRandomBool() {\r\n\t\treturn !!this.getRandomInt(0, 1)\r\n\t}\r\n\r\n\tgetRandomPropFromObj(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn obj[keys[(keys.length * Math.random()) << 0]]\r\n\t}\r\n\r\n\tgetRandomKeyFromObj(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn keys[(keys.length * Math.random()) << 0]\r\n\t}\r\n\r\n\tgeRandomMoment(maxDaysPast, maxDaysAhead, initialMoment) {\r\n\t\t// TODO: fix +/- 1 day bug\r\n\t\tlet initial = moment.isMoment(initialMoment)\r\n\t\t\t? initialMoment.valueOf()\r\n\t\t\t: undefined\r\n\r\n\t\treturn moment(initial)\r\n\t\t\t.add(this.getRandomInt(-maxDaysPast, maxDaysAhead), 'd')\r\n\t\t\t.add(this.getRandomInt(-24, 24), 'h')\r\n\t\t\t.add(this.getRandomInt(-60, 60), 'm')\r\n\t}\r\n\r\n\thexToRgbaColorString = (hex, alpha) => {\r\n\t\tif (!hex || typeof hex !== 'string') {\r\n\t\t\tthrow new Error('Invalid color')\r\n\t\t} else if (hex.length === 4) {\r\n\t\t\thex = hex + hex.substr(1, 4)\r\n\t\t}\r\n\r\n\t\tif (typeof alpha === 'object' || typeof alpha === 'undefined') {\r\n\t\t\talpha = 1\r\n\t\t}\r\n\r\n\t\tconst hexToDec = h => {\r\n\t\t\treturn parseInt('0x' + h, 16)\r\n\t\t}\r\n\r\n\t\tlet r = hexToDec(hex.substr(1, 2))\r\n\t\tlet g = hexToDec(hex.substr(3, 2))\r\n\t\tlet b = hexToDec(hex.substr(5, 2))\r\n\r\n\t\treturn `rgba(${r},${g},${b},${alpha})`\r\n\t}\r\n\r\n\tgetQuery(queryParams) {\r\n\t\tif (\r\n\t\t\t!queryParams ||\r\n\t\t\t(typeof queryParams === 'object' && !Object.keys(queryParams).length)\r\n\t\t) {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t'?' +\r\n\t\t\t\tObject.keys(queryParams)\r\n\t\t\t\t\t.filter(key => queryParams[key] !== undefined)\r\n\t\t\t\t\t.map(key => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tencodeURIComponent(key) +\r\n\t\t\t\t\t\t\t'=' +\r\n\t\t\t\t\t\t\tencodeURIComponent(queryParams[key])\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}, '')\r\n\t\t\t\t\t.join('&') || ''\r\n\t\t)\r\n\t}\r\n\r\n\tgetErrMsg = err => {\r\n\t\tlet stack = (err.message || err || '').toString().split(/\\r\\n|\\n|\\r/g)\r\n\r\n\t\tif (stack.length > 1) {\r\n\t\t\treturn (err.name ? err.name + ': ' : '') + stack[0].toString()\r\n\t\t} else {\r\n\t\t\treturn (err.error || err || '').toString()\r\n\t\t}\r\n\t}\r\n\r\n\tisInt = int => {\r\n\t\treturn typeof int === 'number' && int % 1 === 0\r\n\t}\r\n\r\n\tshuffleArray = array => {\r\n\t\treturn [...array].sort(() => Math.random() - 0.5)\r\n\t}\r\n}\r\n\r\nexport default new Helper()\r\n","import { createSelectorCreator, defaultMemoize } from 'reselect'\r\nimport isEqual from 'lodash.isequal'\r\n\r\n// deep equal memoization instad reference check\r\nexport const createDeepEqualSelector = createSelectorCreator(\r\n\tdefaultMemoize,\r\n\tisEqual\r\n)\r\n","import { createSelector } from 'reselect'\r\nimport { createDeepEqualSelector } from './selectors'\r\n\r\nexport const selectAccount = state => state.persist.account\r\n\r\nexport const selectAuth = createSelector(\r\n\tselectAccount,\r\n\t({ wallet, identity }) =>\r\n\t\t!!wallet &&\r\n\t\t!!wallet.address &&\r\n\t\t!!wallet.authSig &&\r\n\t\t!!wallet.authType &&\r\n\t\t!!identity.address\r\n)\r\n\r\nexport const selectAuthSig = createSelector(\r\n\tselectAccount,\r\n\t({ wallet }) => wallet.authSig\r\n)\r\n\r\nexport const selectWallet = createDeepEqualSelector(\r\n\tselectAccount,\r\n\t({ wallet }) => wallet\r\n)\r\n\r\nexport const selectAccountIdentity = createSelector(\r\n\tselectAccount,\r\n\t({ identity }) => identity\r\n)\r\n\r\nexport const selectAccountIdentityAddr = createSelector(\r\n\tselectAccountIdentity,\r\n\t({ address }) => address\r\n)\r\n\r\nexport const selectAccountStats = createSelector(\r\n\tselectAccount,\r\n\t({ stats }) => stats || {}\r\n)\r\n\r\nexport const selectAccountStatsRaw = createSelector(\r\n\tselectAccountStats,\r\n\t({ raw }) => raw || {}\r\n)\r\n\r\nexport const selectAccountStatsFormatted = createSelector(\r\n\tselectAccountStats,\r\n\t({ formatted }) => formatted || {}\r\n)\r\n","export const selectIdentity = state => state.memory.identity\r\n","export const selectLocation = state => state.router.location\r\n","import { createSelector } from 'reselect'\r\n\r\nexport const selectNavTitle = state => state.memory.nav.navTitle\r\nexport const selectSide = state => state.memory.nav.side\r\n\r\nexport const selectSpinners = state => state.memory.spinners\r\n\r\nexport const selectSpinnerById = createSelector(\r\n\t[selectSpinners, (_, id) => id],\r\n\t(spinners, id) => spinners[id]\r\n)\r\n","import { createSelector } from 'reselect'\r\nimport { getState } from 'actions'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nexport const selectLang = state => state.persist.language\r\n\r\nexport const selectTranslations = createSelector(\r\n\t[\r\n\t\tselectLang,\r\n\t\t(_, val, opts = {}) => {\r\n\t\t\treturn { val, opts }\r\n\t\t},\r\n\t],\r\n\t(lang, { val, opts }) => {\r\n\t\tconst { isProp = false, args = [''] } = opts\r\n\t\treturn translate(val, { isProp, args }, lang)\r\n\t}\r\n)\r\n\r\n// Need to useSelector for language in top component where this will be used\r\n// Now this is don by using Translate Hoc on Root\r\n// It will work in actions too as the state isg get when they are called and don't need update\r\nexport const t = (val, opts) => selectTranslations(getState(), val, opts)\r\n","import { formatUnits, commify } from 'ethers/utils'\r\nimport MomentUtils from '@date-io/moment'\r\nconst moment = new MomentUtils()\r\n\r\nconst DEFAULT_DATETIME_FORMAT = 'YYYY-MM-DD HH:mm'\r\n\r\nexport const formatDateTime = (timestamp, format = DEFAULT_DATETIME_FORMAT) => {\r\n\tif (!timestamp) {\r\n\t\treturn 'no date'\r\n\t}\r\n\tconst date = moment.date(timestamp)\r\n\treturn date.format(format)\r\n}\r\n\r\nexport const formatTokenAmount = (amountString, decimals = 18, pretty) => {\r\n\tconst formatted = formatUnits(amountString, decimals)\r\n\tif (pretty) {\r\n\t\treturn commify(formatted)\r\n\t} else {\r\n\t\treturn formatted\r\n\t}\r\n}\r\n\r\nexport const formatAddress = (address = '') => {\r\n\treturn `${address.substring(0, 8)}...${address.substring(36, 42)}`\r\n}\r\n\r\nexport const formatNumberWithCommas = x => {\r\n\treturn x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\r\n}\r\n","import { createSelector } from 'reselect'\r\nimport { formatTokenAmount, formatDateTime } from 'helpers/formatters'\r\n\r\nexport const selectAnalytics = state => state.persist.analytics\r\n\r\nexport const selectAnalyticsData = createSelector(\r\n\t[selectAnalytics, (_, side) => side],\r\n\t(analytics, side) => {\r\n\t\treturn analytics[side] || {}\r\n\t}\r\n)\r\n\r\nexport const selectAnalyticsDataAggr = createSelector(\r\n\t[selectAnalytics, (_, opts = {}) => opts],\r\n\t(analytics, { side, eventType, metric, timeframe }) => {\r\n\t\treturn analytics[side][eventType][metric][timeframe].aggr\r\n\t}\r\n)\r\n\r\nexport const selectTotalImpressions = createSelector(\r\n\t(state, { side, timeframe } = {}) =>\r\n\t\tselectAnalyticsDataAggr(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType: 'IMPRESSION',\r\n\t\t\tmetric: 'eventCounts',\r\n\t\t}),\r\n\teventCounts =>\r\n\t\teventCounts\r\n\t\t\t? eventCounts.reduce((a, { value }) => a + Number(value) || 0, 0)\r\n\t\t\t: null\r\n)\r\n\r\nexport const selectTotalMoney = createSelector(\r\n\t(state, { side, timeframe } = {}) =>\r\n\t\tselectAnalyticsDataAggr(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType: 'IMPRESSION',\r\n\t\t\tmetric: 'eventPayouts',\r\n\t\t}),\r\n\teventPayouts =>\r\n\t\teventPayouts\r\n\t\t\t? eventPayouts.reduce(\r\n\t\t\t\t\t(a, { value }) => a + Number(formatTokenAmount(value, 18)) || 0,\r\n\t\t\t\t\t0\r\n\t\t\t  )\r\n\t\t\t: null\r\n)\r\n\r\nexport const selectAverageCPM = createSelector(\r\n\t[\r\n\t\t(state, { side, timeframe } = {}) =>\r\n\t\t\tselectTotalMoney(state, { side, timeframe }),\r\n\t\t(state, { side, timeframe } = {}) =>\r\n\t\t\tselectTotalImpressions(state, { side, timeframe }),\r\n\t],\r\n\t(totalMoney, totalImpressions) =>\r\n\t\ttotalMoney !== null && totalImpressions !== null\r\n\t\t\t? (1000 * Number(totalMoney)) / Number(totalImpressions)\r\n\t\t\t: null\r\n)\r\n\r\nconst parseValueByMetric = ({ value, metric }) => {\r\n\tswitch (metric) {\r\n\t\tcase 'eventPayouts':\r\n\t\t\treturn parseFloat(formatTokenAmount(value, 18))\r\n\t\tcase 'eventCounts':\r\n\t\t\treturn parseInt(value, 10)\r\n\t\tdefault:\r\n\t\t\treturn value\r\n\t}\r\n}\r\n\r\nexport const selectStatsChartData = createSelector(\r\n\t[\r\n\t\t(state, { noLastOne, ...rest } = {}) => {\r\n\t\t\treturn { data: selectAnalyticsDataAggr(state, rest), noLastOne, ...rest }\r\n\t\t},\r\n\t],\r\n\t({ data = [], noLastOne, metric, ...rest }) => {\r\n\t\tconst aggr = noLastOne ? data.slice(0, -1) : data\r\n\t\treturn aggr.reduce(\r\n\t\t\t(memo, item) => {\r\n\t\t\t\tconst { time, value } = item\r\n\t\t\t\tmemo.labels.push(formatDateTime(time))\r\n\t\t\t\tmemo.datasets.push(parseValueByMetric({ value, metric }))\r\n\t\t\t\treturn memo\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabels: [],\r\n\t\t\t\tdatasets: [],\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n)\r\n","export default class Looper {\r\n\tconstructor({ timeout, syncAction, loopName = '' }) {\r\n\t\tif (!timeout) {\r\n\t\t\tthrow new Error('LOOPER timeout prop is required')\r\n\t\t}\r\n\r\n\t\tif (typeof syncAction !== 'function') {\r\n\t\t\tthrow new Error('LOOPER syncAction prop is has to be a function')\r\n\t\t}\r\n\r\n\t\tthis.loopTimeout = null\r\n\t\tthis.timeout = timeout\r\n\t\tthis.syncAction = syncAction\r\n\t}\r\n\r\n\tclearLoopTimeout = () => {\r\n\t\tif (this.loopTimeout) {\r\n\t\t\tclearTimeout(this.loopTimeout)\r\n\t\t\tthis.loopTimeout = null\r\n\t\t}\r\n\t}\r\n\r\n\tsyncData = async opts => {\r\n\t\tawait this.syncAction()\r\n\t}\r\n\r\n\tstartLoop = async opts => {\r\n\t\ttry {\r\n\t\t\tawait this.syncData(opts)\r\n\t\t\tthis.checkLoop()\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(`ERR_LOOP${this.loopName}`, err)\r\n\t\t\tthis.checkLoop()\r\n\t\t}\r\n\t}\r\n\r\n\tcheckLoop = () => {\r\n\t\tthis.clearLoopTimeout()\r\n\r\n\t\tthis.loopTimeout = setTimeout(this.startLoop, this.timeout)\r\n\t}\r\n\r\n\tstart = () => {\r\n\t\tthis.clearLoopTimeout()\r\n\t\tthis.startLoop()\r\n\t}\r\n\r\n\tstop = () => {\r\n\t\tthis.clearLoopTimeout()\r\n\t}\r\n}\r\n","import Loop from './loop'\r\nimport { getState, updateItems, execute, addToast } from 'actions'\r\nimport { getCampaigns } from 'services/adex-market/actions'\r\nimport { selectAccount, selectAuth } from 'selectors'\r\nimport { MOON_GRAVITY_ACCELERATION, MOON_TO_EARTH_WEIGHT } from 'constants/misc'\r\n\r\nconst LOOP_TIMEOUT =\r\n\t(69 - Math.floor(MOON_GRAVITY_ACCELERATION / MOON_TO_EARTH_WEIGHT)) * 500\r\n\r\nconst syncCampaigns = async () => {\r\n\tconst hasAuth = selectAuth(getState())\r\n\tconst { wallet, identity } = selectAccount(getState())\r\n\tconst { authSig } = wallet\r\n\tconst { address } = identity\r\n\r\n\tif (hasAuth && authSig && address) {\r\n\t\ttry {\r\n\t\t\tconst campaigns = await getCampaigns({ authSig, creator: address })\r\n\r\n\t\t\tconst campaignsMapped = campaigns\r\n\t\t\t\t.filter(\r\n\t\t\t\t\tc => c.creator && c.creator.toLowerCase() === address.toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t\t.map(c => {\r\n\t\t\t\t\treturn { ...c, ...c.spec }\r\n\t\t\t\t})\r\n\r\n\t\t\texecute(updateItems({ items: campaignsMapped, itemType: 'Campaign' }))\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_CAMPAIGNS', err)\r\n\t\t\texecute(\r\n\t\t\t\taddToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\ttoastStr: 'ERR_GETTING_ITEMS',\r\n\t\t\t\t\targs: [err],\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst campaignsLoop = new Loop({\r\n\ttimeout: LOOP_TIMEOUT,\r\n\tsyncAction: syncCampaigns,\r\n\tloopName: '_CAMPAIGNS',\r\n})\r\n\r\nexport default campaignsLoop\r\n","import Loop from './loop'\r\nimport { execute, updateAccountStats } from 'actions'\r\n\r\nconst LOOP_TIMEOUT = 30 * 1000\r\n\r\nconst accountStatsLoop = new Loop({\r\n\ttimeout: LOOP_TIMEOUT,\r\n\tsyncAction: () => execute(updateAccountStats()),\r\n\tloopName: '_ACCOUNTS_STATS',\r\n})\r\n\r\nexport default accountStatsLoop\r\n","import Loop from './loop'\r\nimport { execute, updateAccountAnalytics } from 'actions'\r\n\r\nconst LOOP_TIMEOUT = 120 * 1000\r\n\r\nconst analyticsLoop = new Loop({\r\n\ttimeout: LOOP_TIMEOUT,\r\n\tsyncAction: () => execute(updateAccountAnalytics()),\r\n\tloopName: '_ANALYTICS',\r\n})\r\n\r\nexport default analyticsLoop\r\n","import {\r\n\tgetState,\r\n\texecute,\r\n\tresetAllNewItems,\r\n\tresetAllItems,\r\n\tresetAllBids,\r\n\tresetIdentity,\r\n\tresetAccount,\r\n\tresetAnalytics,\r\n} from 'actions'\r\n\r\nimport campaignsLoop from 'services/store-data/campaigns'\r\nimport statsLoop from 'services/store-data/account'\r\nimport analyticsLoop from 'services/store-data/analytics'\r\n\r\nimport { push } from 'connected-react-router'\r\n\r\nexport const logOut = skipRedirect => {\r\n\tanalyticsLoop.stop()\r\n\tcampaignsLoop.stop()\r\n\tstatsLoop.stop()\r\n\tif (!skipRedirect) {\r\n\t\texecute(push('/'))\r\n\t}\r\n\texecute(resetIdentity())\r\n\texecute(resetAllItems())\r\n\texecute(resetAllNewItems())\r\n\texecute(resetAllBids())\r\n\texecute(resetAccount())\r\n\texecute(resetAnalytics())\r\n}\r\n\r\nexport const isDemoMode = () => {\r\n\treturn getState().persist.account._authType === 'demo'\r\n}\r\n\r\nexport const getAccount = () => {\r\n\treturn getState().persist.account\r\n}\r\n","import requester from './requester'\r\n\r\nexport default requester\r\n","import Helper from 'helpers/miscHelpers'\r\nimport { getState } from 'actions'\r\nimport { selectAuthSig } from 'selectors'\r\nimport { isDemoMode } from 'services/store-data/auth'\r\n\r\nclass AdexNodeRequester {\r\n\tconstructor({ baseUrl }) {\r\n\t\tthis.baseUrl = baseUrl\r\n\t}\r\n\r\n\tgetAuthHeaders = ({ authSig } = {}) => {\r\n\t\tconst authSignature = selectAuthSig(getState())\r\n\t\treturn {\r\n\t\t\t'X-User-Signature': authSig || authSignature,\r\n\t\t}\r\n\t}\r\n\r\n\tnoCacheHeaders = {\r\n\t\t'Cache-Control': 'no-cache',\r\n\t\tExpires: '0',\r\n\t\tPragma: 'no-cache',\r\n\t}\r\n\r\n\tgetUrl = (base, route, query) => {\r\n\t\tlet url = base + '/'\r\n\t\tif (route) {\r\n\t\t\troute = route.replace(/^\\//, '')\r\n\t\t\turl += route\r\n\t\t}\r\n\r\n\t\turl += query\r\n\r\n\t\treturn url\r\n\t}\r\n\r\n\tfetch = ({\r\n\t\troute = '',\r\n\t\tqueryParams = {},\r\n\t\tmethod = 'GET',\r\n\t\tbody,\r\n\t\theaders = {},\r\n\t\tuserAddr,\r\n\t\tauthSig = '',\r\n\t\tauthToken,\r\n\t\tnoCache = false,\r\n\t}) => {\r\n\t\tconst qp = { ...queryParams }\r\n\t\tif (isDemoMode()) {\r\n\t\t\tqp.demo = true\r\n\t\t}\r\n\r\n\t\tconst query = Helper.getQuery(qp)\r\n\t\tconst url = this.getUrl(this.baseUrl, route, query)\r\n\r\n\t\tconst hdrs = {\r\n\t\t\t...(noCache ? this.noCacheHeaders : {}),\r\n\t\t\t...this.getAuthHeaders({ authSig }),\r\n\t\t\t...headers,\r\n\t\t}\r\n\t\treturn fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: hdrs,\r\n\t\t\tbody: body,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport default AdexNodeRequester\r\n","import Requester from 'services/requester'\r\nimport { logOut } from 'services/store-data/auth'\r\nimport moment from 'moment'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nconst ADEX_MARKET_HOST = process.env.ADEX_MARKET_HOST\r\nconst requester = new Requester({ baseUrl: ADEX_MARKET_HOST })\r\n\r\nconst processResponse = (res, dontThrow) => {\r\n\tif (res.status >= 200 && res.status < 400) {\r\n\t\treturn res.json()\r\n\t}\r\n\r\n\treturn res.text().then(text => {\r\n\t\tif (res.status === 401 || res.status === 403) {\r\n\t\t\tlogOut()\r\n\t\t}\r\n\t\tif (!dontThrow) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\ttranslate('SERVICE_ERROR_MSG', {\r\n\t\t\t\t\targs: [res.url, res.status, res.statusText, text],\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const getSession = ({\r\n\tidentity,\r\n\tmode,\r\n\tsignature,\r\n\tauthToken,\r\n\thash,\r\n\ttypedData,\r\n\tsignerAddress,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'auth/',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tidentity,\r\n\t\t\t\tmode,\r\n\t\t\t\tsignature,\r\n\t\t\t\tauthToken,\r\n\t\t\t\thash,\r\n\t\t\t\ttypedData,\r\n\t\t\t\tsignerAddress,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const checkSession = ({ authSig, skipErrToast }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'session',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tauthSig,\r\n\t\t\tskipErrToast,\r\n\t\t})\r\n\t\t.then(res => processResponse(res, true))\r\n}\r\n\r\nexport const uploadImage = ({ imageBlob, imageName = '', authSig }) => {\r\n\tconst formData = new FormData()\r\n\tformData.append('media', imageBlob, imageName)\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'media',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: formData,\r\n\t\t\tauthSig,\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nconst convertItemToJSON = item => {\r\n\tconst itemToConvert = { ...item }\r\n\tif (itemToConvert.created && moment.isMoment(itemToConvert.created)) {\r\n\t\titemToConvert.created = moment.unix(itemToConvert.created) / 1000\r\n\t}\r\n\r\n\treturn JSON.stringify(itemToConvert)\r\n}\r\n\r\nexport const getAdUnits = ({ identity }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'units',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams: { identity },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const postAdUnit = ({ unit, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'units',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: convertItemToJSON(unit),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const updateAdUnit = ({ unit, id, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `units/${id}`,\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tbody: convertItemToJSON(unit),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getAdSlots = ({ identity }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'slots',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams: { identity },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const postAdSlot = ({ slot, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'slots',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: convertItemToJSON(slot),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const updateAdSlot = ({ slot, id, authSig }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `slots/${id}`,\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tbody: convertItemToJSON(slot),\r\n\t\t\tauthSig,\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getCampaigns = ({ authSig, creator }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'campaigns/by-owner',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tnoCache: true,\r\n\t\t\tqueryParams: {\r\n\t\t\t\tbyCreator: creator, //\r\n\t\t\t\tt: Date.now(),\r\n\t\t\t},\r\n\t\t\tauthSig,\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getAllCampaigns = all => {\r\n\tconst queryParams = all\r\n\t\t? {\r\n\t\t\t\tall: true,\r\n\t\t  }\r\n\t\t: {}\r\n\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'campaigns',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams,\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport Helper from 'helpers/miscHelpers'\r\n\r\nexport function updateSpinner(item, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_SPINNER,\r\n\t\t\tspinner: item,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateUi(item, value, category) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_UI,\r\n\t\t\titem: item,\r\n\t\t\tvalue: value,\r\n\t\t\tcategory: category,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function addToast({\r\n\ttype,\r\n\taction,\r\n\tlabel = '',\r\n\ttimeout = false,\r\n\tunclosable,\r\n\tanchorOrigin,\r\n\ttop,\r\n}) {\r\n\treturn function(dispatch) {\r\n\t\tconst id = Helper.getGuid()\r\n\t\tdispatch({\r\n\t\t\ttype: types.ADD_TOAST,\r\n\t\t\ttoast: {\r\n\t\t\t\ttype,\r\n\t\t\t\taction,\r\n\t\t\t\tlabel,\r\n\t\t\t\ttimeout,\r\n\t\t\t\tunclosable,\r\n\t\t\t\tanchorOrigin,\r\n\t\t\t\ttop,\r\n\t\t\t\tid,\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn id\r\n\t}\r\n}\r\n\r\nexport function removeToast(toastId) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.REMOVE_TOAST,\r\n\t\t\ttoast: toastId,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function confirmAction(\r\n\tonConfirm,\r\n\tonCancel,\r\n\t{ confirmLabel = '', cancelLabel = '', title = '', text = '' } = {},\r\n\tnoActionBtns,\r\n\tactive\r\n) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.CONFIRM_ACTION,\r\n\t\t\tconfirm: {\r\n\t\t\t\tonConfirm: onConfirm,\r\n\t\t\t\tonCancel: onCancel,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tconfirmLabel: confirmLabel,\r\n\t\t\t\t\tcancelLabel: cancelLabel,\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t},\r\n\t\t\t\tnoActionBtns,\r\n\t\t\t\tactive,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateNav(item, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NAV,\r\n\t\t\titem: item,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function changeLanguage(lang) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.CHANGE_LANGUAGE,\r\n\t\t\tlang: lang,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateValidationErrors(item, newErrors) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ITEM_VALIDATION,\r\n\t\t\titem: item,\r\n\t\t\terrors: newErrors,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetValidationErrors(item, key) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ITEM_VALIDATION,\r\n\t\t\titem: item,\r\n\t\t\tkey: key,\r\n\t\t})\r\n\t}\r\n}\r\n","export const addSig = ({\r\n\taddr = '',\r\n\tsig,\r\n\tmode,\r\n\texpiryTime,\r\n\tidentity = 'notset',\r\n}) => {\r\n\tif (!addr || !sig || !expiryTime || mode === undefined) {\r\n\t\tthrow new Error('addSig - all args are required')\r\n\t}\r\n\r\n\tlocalStorage.setItem(\r\n\t\t'addr-' + mode + '-' + addr.toLowerCase() + '-' + identity,\r\n\t\tsig + '-' + expiryTime\r\n\t)\r\n}\r\n\r\nexport const getSig = ({ addr = '', identity = '', mode }) => {\r\n\tlet sigAndTIme = localStorage.getItem(\r\n\t\t'addr-' + mode + '-' + addr.toLowerCase() + '-' + identity\r\n\t)\r\n\r\n\tif (!sigAndTIme) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tsigAndTIme = sigAndTIme.split('-')\r\n\tlet sig = sigAndTIme[0]\r\n\tlet time = sigAndTIme[1]\r\n\r\n\tif (!time || parseInt(time, 10) <= Date.now()) {\r\n\t\treturn null\r\n\t} else {\r\n\t\treturn sig\r\n\t}\r\n}\r\n","import Requester from 'services/requester'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nconst ADEX_RELAYER_HOST = process.env.ADEX_RELAYER_HOST\r\nconst requester = new Requester({ baseUrl: ADEX_RELAYER_HOST })\r\n\r\nconst processResponse = res => {\r\n\tif (res.status >= 200 && res.status < 400) {\r\n\t\treturn res.json()\r\n\t}\r\n\r\n\treturn res.text().then(text => {\r\n\t\tthrow new Error(\r\n\t\t\ttranslate('SERVICE_ERROR_MSG', {\r\n\t\t\t\targs: [res.url, res.status, res.statusText, text],\r\n\t\t\t})\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport const identityToEmail = ({ identity, privileges, mail }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/info-mail',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tidentity,\r\n\t\t\t\tprivileges,\r\n\t\t\t\tmail,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const grantAccount = ({ ownerAddr, mail, couponCode }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/grant-account',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tmail,\r\n\t\t\t\townerAddr,\r\n\t\t\t\tcouponCode,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getGrantType = ({ identity }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/grant-type/${identity}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const checkCoupon = ({ coupon }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/valid-coupon/${coupon}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const checkAccessCode = ({ code }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/valid-accesscode/${code}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getOwnerIdentities = ({ owner }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: `identity/owners/${owner}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const identityBytecode = ({ owner, privLevel, identityBaseAddr }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/identity-bytecode',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\towner,\r\n\t\t\t\tprivLevel,\r\n\t\t\t\tidentityBaseAddr,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const registerFullIdentity = ({\r\n\ttxHash,\r\n\tidentity,\r\n\tprivileges,\r\n\tmail,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/register-identity',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxHash,\r\n\t\t\t\tidentity,\r\n\t\t\t\tprivileges,\r\n\t\t\t\tmail,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const sendOpenChannel = ({\r\n\ttxnsRaw,\r\n\tsignatures,\r\n\tchannel,\r\n\tidentityAddr,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'channel/open',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxnsRaw,\r\n\t\t\t\tsignatures,\r\n\t\t\t\tchannel,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const registerExpectedIdentity = ({ owner, mail }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/register-expected',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\towner,\r\n\t\t\t\tmail,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const getRelayerConfigData = () => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'relayer/cfg',\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const executeTx = ({ txnsRaw, signatures, identityAddr }) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/execute',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxnsRaw,\r\n\t\t\t\tsignatures,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const setAddrPriv = ({\r\n\ttxnsRaw,\r\n\tsignatures,\r\n\tidentityAddr,\r\n\tprivLevel,\r\n\tsetAddr,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/set-addr-privilege',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxnsRaw,\r\n\t\t\t\tsignatures,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t\tsetAddr,\r\n\t\t\t\tprivLevel,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const regAccount = ({\r\n\towner,\r\n\temail,\r\n\tbytecode,\r\n\tidentityFactoryAddr,\r\n\tidentityBaseAddr,\r\n\tsalt,\r\n\tidentityAddr,\r\n\tprivileges,\r\n}) => {\r\n\treturn requester\r\n\t\t.fetch({\r\n\t\t\troute: 'identity/register',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\towner,\r\n\t\t\t\temail,\r\n\t\t\t\tbytecode,\r\n\t\t\t\tidentityFactoryAddr,\r\n\t\t\t\tidentityBaseAddr,\r\n\t\t\t\tsalt,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t\tprivileges,\r\n\t\t\t}),\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n","import Identity from './build/Identity.json'\r\nimport AdExCore from './build/AdExCore.json'\r\nimport Dai from './build/Dai.json'\r\nimport IdentityFactory from './build/IdentityFactory.json'\r\n\r\nexport const contracts = {\r\n\tIdentity: {\r\n\t\tabi: Identity.abi,\r\n\t},\r\n\tAdExCore: {\r\n\t\taddress: process.env.ADEX_CORE_ADDR,\r\n\t\tabi: AdExCore.abi,\r\n\t},\r\n\tDAI: {\r\n\t\taddress: process.env.DAI_TOKEN_ADDR,\r\n\t\tabi: Dai.abi,\r\n\t\tdecimals: 18,\r\n\t},\r\n\tIdentityFactory: {\r\n\t\taddress: process.env.IDENTITY_FACTORY_ADDR,\r\n\t\tabi: IdentityFactory.abi,\r\n\t},\r\n}\r\n","import { ethers, utils } from 'ethers'\r\nimport { contracts } from './contractsCfg'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\n\r\nethers.errors.setLogLevel('error')\r\n\r\nconst { AdExCore, Identity, DAI, IdentityFactory } = contracts\r\n\r\nconst localWeb3 = async () => {\r\n\tconst provider = new ethers.providers.JsonRpcProvider(\r\n\t\tprocess.env.WEB3_NODE_ADDR\r\n\t)\r\n\tconst adexCore = new ethers.Contract(AdExCore.address, AdExCore.abi, provider)\r\n\tconst dai = new ethers.Contract(DAI.address, DAI.abi, provider)\r\n\tconst identityFactory = new ethers.Contract(\r\n\t\tIdentityFactory.address,\r\n\t\tIdentityFactory.abi,\r\n\t\tprovider\r\n\t)\r\n\r\n\tconst results = {\r\n\t\tprovider: provider,\r\n\t\tAdExCore: adexCore,\r\n\t\tIdentity: Identity,\r\n\t\tDai: dai,\r\n\t\tIdentityFactory: identityFactory,\r\n\t}\r\n\r\n\treturn results\r\n}\r\n\r\nconst loadInjectedWeb3 = new Promise((resolve, reject) => {\r\n\twindow.addEventListener('load', () => {\r\n\t\tconst ethereum = window.ethereum\r\n\t\tconst web3 = window.web3\r\n\t\treturn resolve({\r\n\t\t\tethereum,\r\n\t\t\tweb3,\r\n\t\t})\r\n\t})\r\n})\r\n\r\nconst injectedWeb3 = async () => {\r\n\tconst { web3, ethereum } = await loadInjectedWeb3.then()\r\n\tlet provider = null\r\n\tlet adexCore = null\r\n\tlet dai = null\r\n\tlet identityFactory = null\r\n\r\n\tif (ethereum) {\r\n\t\ttry {\r\n\t\t\tawait ethereum.enable()\r\n\r\n\t\t\tprovider = new ethers.providers.Web3Provider(ethereum)\r\n\t\t\tadexCore = new ethers.Contract(AdExCore.address, AdExCore.abi, provider)\r\n\t\t\tdai = new ethers.Contract(DAI.address, DAI.abi, provider)\r\n\t\t\tidentityFactory = new ethers.Contract(\r\n\t\t\t\tIdentityFactory.address,\r\n\t\t\t\tIdentityFactory.abi,\r\n\t\t\t\tprovider\r\n\t\t\t)\r\n\t\t\tconst results = {\r\n\t\t\t\tprovider: provider,\r\n\t\t\t\tAdExCore: adexCore,\r\n\t\t\t\tIdentity: Identity,\r\n\t\t\t\tDai: dai,\r\n\t\t\t\tIdentityFactory: identityFactory,\r\n\t\t\t}\r\n\r\n\t\t\treturn results\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Err getting injected ethereum.', err)\r\n\t\t\tthrow new Error(err.message)\r\n\t\t}\r\n\t}\r\n\t// Legacy dapp browsers...\r\n\t// TODO: we just have to throw or show notification\r\n\t// At the moment if it throws it will show error toast but not always.\r\n\telse if (web3) {\r\n\t\tconsole.error('Legacy web3 browser detected. It is not supported!')\r\n\t\tconsole.error('Fallback to local web3 provider')\r\n\t\treturn await localWeb3()\r\n\t} else {\r\n\t\tconsole.error('Non-Ethereum browser detected.')\r\n\t\tconsole.error('Fallback to local web3 provider')\r\n\t\treturn await localWeb3()\r\n\t}\r\n}\r\n\r\nconst getLocalWeb3 = new Promise(function(resolve, reject) {\r\n\tconsole.log('getLocalWeb3')\r\n\tresolve(localWeb3())\r\n})\r\n\r\nconst getEthers = mode => {\r\n\t/* NOTE: use Promise wrapper because despite getWeb3 is Promise itself it is not called by user action\r\n\t *   and this results in Trezor popup block by the browser\r\n\t */\r\n\tif (mode === AUTH_TYPES.METAMASK.name) {\r\n\t\treturn injectedWeb3()\r\n\t} else {\r\n\t\treturn getLocalWeb3\r\n\t}\r\n}\r\n\r\nconst ethereumSelectedAddress = async () => {\r\n\tconst { ethereum } = await loadInjectedWeb3.then()\r\n\tif (ethereum && ethereum.selectedAddress) {\r\n\t\treturn utils.getAddress(ethereum.selectedAddress)\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nconst ethereumNetworkId = async () => {\r\n\tconst { ethereum } = await loadInjectedWeb3.then()\r\n\tif (ethereum) {\r\n\t\tconst id = parseInt(ethereum.networkVersion, 10)\r\n\t\treturn id\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nconst getEthereumProvider = async () => {\r\n\tconst { ethereum } = await loadInjectedWeb3.then()\r\n\tif (!ethereum) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tif (ethereum.isMetaMask) {\r\n\t\treturn AUTH_TYPES.METAMASK.name\r\n\t}\r\n\r\n\treturn null\r\n}\r\n\r\nexport {\r\n\tgetEthers,\r\n\tethereumSelectedAddress,\r\n\tethereumNetworkId,\r\n\tgetEthereumProvider,\r\n}\r\n","import { Signer, utils } from 'ethers'\r\nimport TrezorConnect from 'trezor-connect'\r\nimport { constants } from 'adex-models'\r\n\r\nconst DEFAULT_HD_PATH = \"m/44'/60'/0'/0\"\r\n\r\nTrezorConnect.manifest({\r\n\temail: 'contactus@adex.network',\r\n\tappUrl: 'http://adex.network',\r\n})\r\n\r\nexport default class TrezorSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\t\tthis._provider = provider\r\n\t\tthis._path = opts.path || DEFAULT_HD_PATH\r\n\t}\r\n\r\n\tget path() {\r\n\t\treturn this._path\r\n\t}\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\tgetAddsParams = ({ from = 0, to = 10 } = {}) => {\r\n\t\tconst bundle = []\r\n\t\tfor (let index = from; index < to; index++) {\r\n\t\t\tbundle.push({\r\n\t\t\t\tpath: this.path + `/${index}`,\r\n\t\t\t\tshowOnTrezor: false,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn { bundle }\r\n\t}\r\n\r\n\tgetAddresses = async ({ from = 0, to = 9 } = {}) => {\r\n\t\tconst { success, payload } = await TrezorConnect.ethereumGetAddress(\r\n\t\t\tthis.getAddsParams({ from, to })\r\n\t\t)\r\n\r\n\t\treturn { success, payload }\r\n\t}\r\n\r\n\tsignTx = async params => {\r\n\t\tconst txProps = await utils.resolveProperties(params)\r\n\r\n\t\ttxProps.value = txProps.value || utils.hexlify(0)\r\n\r\n\t\tconst { success, payload } = await TrezorConnect.ethereumSignTransaction({\r\n\t\t\tpath: this.path,\r\n\t\t\ttransaction: txProps,\r\n\t\t})\r\n\r\n\t\tif (success) {\r\n\t\t\tconst signature = {\r\n\t\t\t\tr: payload.r,\r\n\t\t\t\ts: payload.s,\r\n\t\t\t\tv: parseInt(payload.v),\r\n\t\t\t}\r\n\r\n\t\t\tconst txSigned = utils.serializeTransaction(txProps, signature)\r\n\r\n\t\t\treturn txSigned\r\n\t\t} else {\r\n\t\t\tthrow new Error(payload.error)\r\n\t\t}\r\n\t}\r\n\r\n\tsendTransaction = async params => {\r\n\t\tconst txSigned = await this.signTx(params)\r\n\t\tconst txData = this.provider.sendTransaction(txSigned)\r\n\t\treturn txData\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tconst { success, payload } = await TrezorConnect.ethereumSignMessage({\r\n\t\t\tpath: this.path,\r\n\t\t\tmessage: message,\r\n\t\t\thex: !!opts.hex,\r\n\t\t})\r\n\r\n\t\tif (success) {\r\n\t\t\tconst res = {\r\n\t\t\t\t/*\r\n\t\t\t\t * NOTE: SignatureTypes.GETH\r\n\t\t\t\t * Current TrezorConnect window does not\r\n\t\t\t\t * accept device with old firmware\r\n\t\t\t\t */\r\n\t\t\t\tsignature: '0x' + payload.signature,\r\n\t\t\t\thash: message,\r\n\t\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\t\taddress: payload.address,\r\n\t\t\t}\r\n\r\n\t\t\treturn res\r\n\t\t} else {\r\n\t\t\tthrow new Error(payload.error)\r\n\t\t}\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new TrezorSigner(provider, { path: this.path })\r\n\t}\r\n}\r\n","// Nodejs encryption with CTR\r\nvar crypto = require('crypto'),\r\n\talgorithm = 'aes-256-ctr',\r\n\tdefault_password = 'kaipahH5' // temp\r\n\r\nexport const encrypt = (text, password = default_password) => {\r\n\tif (!text) return ''\r\n\tvar cipher = crypto.createCipher(algorithm, password)\r\n\tvar crypted = cipher.update(text, 'utf8', 'hex')\r\n\tcrypted += cipher.final('hex')\r\n\treturn crypted\r\n}\r\n\r\nexport const decrypt = (text, password = default_password) => {\r\n\tif (!text) return ''\r\n\tvar decipher = crypto.createDecipher(algorithm, password)\r\n\tvar dec = decipher.update(text, 'hex', 'utf8')\r\n\tdec += decipher.final('utf8')\r\n\treturn dec\r\n}\r\n","export function loadFromLocalStorage(key) {\r\n\ttry {\r\n\t\tconst data = localStorage.getItem(key)\r\n\t\tif (data === null) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\treturn JSON.parse(data)\r\n\t} catch (err) {\r\n\t\treturn undefined\r\n\t}\r\n}\r\n\r\nexport function saveToLocalStorage(data, key) {\r\n\ttry {\r\n\t\tconst serialized = JSON.stringify(data)\r\n\t\tlocalStorage.setItem(key, serialized)\r\n\t} catch (err) {\r\n\t\tconsole.warn(err)\r\n\t}\r\n}\r\n\r\nexport function removeFromLocalStorage(key) {\r\n\tlocalStorage.removeItem(key)\r\n}\r\n\r\nexport function getKeys() {\r\n\treturn Object.keys(localStorage)\r\n}\r\n","import { ethers, utils } from 'ethers'\r\nimport { encrypt, decrypt } from 'services/crypto/crypto'\r\nimport {\r\n\tloadFromLocalStorage,\r\n\tsaveToLocalStorage,\r\n\tgetKeys,\r\n\tremoveFromLocalStorage,\r\n} from 'helpers/localStorageHelpers'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\n\r\n// Returns 12 random words\r\nexport function getRandomMnemonic() {\r\n\tconst randomEntropy = utils.randomBytes(16)\r\n\tconst mnemonic = utils.HDNode.entropyToMnemonic(randomEntropy)\r\n\r\n\treturn mnemonic\r\n}\r\n\r\nexport function generateWallet(mnemonic) {\r\n\tconst seed = mnemonic || getRandomMnemonic()\r\n\tconst wallet = ethers.Wallet.fromMnemonic(seed)\r\n\r\n\treturn {\r\n\t\tmnemonic,\r\n\t\tprivateKey: wallet.privateKey,\r\n\t\taddress: wallet.address,\r\n\t\tpath: wallet.path,\r\n\t}\r\n}\r\n\r\nfunction encrKey({ email, password, authType }) {\r\n\tif (!authType) {\r\n\t\treturn encrypt(email, password)\r\n\t} else if (typeof authType === 'string') {\r\n\t\treturn `adex-${authType}-wallet-${email}`\r\n\t} else {\r\n\t\tthrow new Error('INVALID_TYPE')\r\n\t}\r\n}\r\n\r\nfunction encrData({ email, password, data }) {\r\n\tconst encr = encrypt(JSON.stringify(data), email + password)\r\n\treturn encr\r\n}\r\n\r\nfunction decrData({ email, password, data }) {\r\n\tconst decryptedStr = decrypt(data, email + password)\r\n\ttry {\r\n\t\tconst decr = JSON.parse(decryptedStr)\r\n\t\treturn decr\r\n\t} catch (err) {\r\n\t\tthrow new Error('INVALID_PASSWORD_OR_EMAIL', err)\r\n\t}\r\n}\r\n\r\nexport function createLocalWallet({\r\n\temail = '',\r\n\tpassword = '',\r\n\tmnemonic = '',\r\n\tauthType = '',\r\n}) {\r\n\tconst walletData = generateWallet(mnemonic)\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst data = encrData({ data: walletData, email, password })\r\n\tsaveToLocalStorage({ data }, key)\r\n\r\n\twalletData.authType = authType\r\n\treturn walletData\r\n}\r\n\r\nexport function migrateLegacyWallet({ email = '', password = '' }) {\r\n\tconst wallet = getLocalWallet({\r\n\t\temail,\r\n\t\tpassword,\r\n\t\tgetEncrypted: true,\r\n\t})\r\n\r\n\tif (wallet && wallet.data) {\r\n\t\tconst newKey = encrKey({ email, password, authType: AUTH_TYPES.GRANT.name })\r\n\t\tsaveToLocalStorage(wallet, newKey)\r\n\t}\r\n}\r\n\r\nexport function removeLegacyKey({ email = '', password = '' }) {\r\n\tconst key = encrKey({ email, password })\r\n\tremoveFromLocalStorage(key)\r\n}\r\n\r\nexport function addDataToWallet({\r\n\temail = '',\r\n\tpassword = '',\r\n\tdataKey = '',\r\n\tdataValue = '',\r\n\tauthType,\r\n}) {\r\n\tif (dataKey === 'data') {\r\n\t\tthrow new Error('INVALID_DATA_KEY')\r\n\t}\r\n\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst wallet = loadFromLocalStorage(key)\r\n\r\n\tif (!wallet) {\r\n\t\tthrow new Error('WALLET_NOT_FOUND')\r\n\t}\r\n\r\n\tconst data = encrData({ data: dataValue, email, password })\r\n\twallet[dataKey] = data\r\n\tsaveToLocalStorage(wallet, key)\r\n}\r\n\r\nexport function getRecoveryWalletData({ email, password, authType }) {\r\n\tif (!email || !password) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst wallet = loadFromLocalStorage(key)\r\n\r\n\treturn {\r\n\t\tkey,\r\n\t\twallet,\r\n\t}\r\n}\r\n\r\nexport function getLocalWallet({ email, password, authType, getEncrypted }) {\r\n\tif (!email || !password) {\r\n\t\tthrow new Error('REQUIRED_EMAIL_AND_PASSWORD')\r\n\t}\r\n\r\n\tconst key = encrKey({ email, password, authType })\r\n\tconst wallet = loadFromLocalStorage(key)\r\n\r\n\tif (wallet) {\r\n\t\tif (getEncrypted) {\r\n\t\t\treturn wallet\r\n\t\t}\r\n\r\n\t\tconst data = Object.keys(wallet).reduce((props, key) => {\r\n\t\t\tprops[key] = decrData({\r\n\t\t\t\tdata: wallet[key],\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t})\r\n\r\n\t\t\treturn props\r\n\t\t}, {})\r\n\r\n\t\treturn data\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nfunction isWallet(item) {\r\n\treturn item && item.data && item.identity && item.privileges\r\n}\r\n\r\nfunction walletInfo(key, index, wallet) {\r\n\tconst split = key.split('-')\r\n\tconst mail = split.length >= 3 ? split.slice(3, split.length).join('-') : null\r\n\tconst authType = split[1] || 'legacy'\r\n\tconst name = mail || `Grant account # ${index + 1}`\r\n\r\n\tconst info = {\r\n\t\tkey,\r\n\t\twallet,\r\n\t\tname,\r\n\t\tauthType,\r\n\t}\r\n\r\n\treturn info\r\n}\r\n\r\nexport function getAllWallets() {\r\n\tconst walletKeys = getKeys()\r\n\t\t.map(key => {\r\n\t\t\treturn {\r\n\t\t\t\tkey,\r\n\t\t\t\titem: loadFromLocalStorage(key),\r\n\t\t\t}\r\n\t\t})\r\n\t\t.filter(({ item }) => isWallet(item))\r\n\t\t.map(({ item, key }, index) => walletInfo(key, index, item))\r\n\r\n\treturn walletKeys\r\n}\r\n","import { Signer, utils, Wallet } from 'ethers'\r\nimport { getLocalWallet } from 'services/wallet/wallet'\r\nimport { constants } from 'adex-models'\r\n\r\nexport default class LocalSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\r\n\t\tconst { email, password, authType } = opts\r\n\t\tthis._provider = provider\r\n\r\n\t\tconst walletData = getLocalWallet({\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\tauthType,\r\n\t\t})\r\n\r\n\t\tthis._wallet = new Wallet(walletData.data.privateKey, provider)\r\n\t}\r\n\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\tgetAddress = async () => {\r\n\t\treturn this._wallet.address\r\n\t}\r\n\r\n\tsignTx = async params => {\r\n\t\tconst signetTx = this._wallet.sign(params)\r\n\t\treturn signetTx\r\n\t}\r\n\r\n\tsendTransaction = async params => {\r\n\t\tconst txSigned = await this.signTx(params)\r\n\t\tconst txData = this.provider.sendTransaction(txSigned)\r\n\t\treturn txData\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tif (opts.hex) {\r\n\t\t\tmessage = utils.arrayify(message)\r\n\t\t}\r\n\r\n\t\tconst signature = await this._wallet.signMessage(message)\r\n\t\tconst res = {\r\n\t\t\tsignature,\r\n\t\t\thash: message,\r\n\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\taddress: this._wallet.address,\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new LocalSigner(provider, {\r\n\t\t\temail: this.email,\r\n\t\t\tpassword: this.password,\r\n\t\t})\r\n\t}\r\n}\r\n","import { Signer, utils } from 'ethers'\r\nimport { constants } from 'adex-models'\r\n\r\nexport default class MetaMaskSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\t\tthis._provider = provider\r\n\t\tthis._signer = provider.getSigner()\r\n\t}\r\n\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\tgetAddress = async () => {\r\n\t\treturn this._signer.getAddress()\r\n\t}\r\n\r\n\tsendTransaction = async params => {\r\n\t\treturn this._signer.sendTransaction(params)\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tif (opts.hex) {\r\n\t\t\tmessage = utils.arrayify(message)\r\n\t\t}\r\n\r\n\t\tconst signature = await this._signer.signMessage(message)\r\n\t\t// TODO: support EIP712\r\n\t\tconst res = {\r\n\t\t\tsignature,\r\n\t\t\thash: message,\r\n\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\taddress: await this._signer.getAddress(),\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new MetaMaskSigner(provider)\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\n\r\n// MEMORY STORAGE\r\nexport function updateNewTransaction({ tx, key, value }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NEW_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t\tkey: key,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetNewTransaction({ tx }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_NEW_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// PERSIST STORAGE\r\nexport function addWeb3Transaction({ tx, addr }) {\r\n\treturn function(dispatch) {\r\n\t\tif (!tx || !tx.hash || !addr) return\r\n\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.ADD_WEB3_TRANSACTION,\r\n\t\t\tvalue: tx,\r\n\t\t\ttx: tx.hash,\r\n\t\t\taddr: addr,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// TODO: make update multiple\r\nexport function updateWeb3Transaction({ tx, key, value, addr }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_WEB3_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t\tkey: key,\r\n\t\t\tvalue: value,\r\n\t\t\taddr: addr,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetWeb3Transaction({ tx, addr }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_WEB3_TRANSACTION,\r\n\t\t\ttx: tx,\r\n\t\t\taddr: addr,\r\n\t\t})\r\n\t}\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\nimport { utils } from 'ethers'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport TrezorSigner from 'services/smart-contracts/signers/trezor'\r\nimport LedgerSigner from 'services/smart-contracts/signers/ledger'\r\nimport LocalSigner from 'services/smart-contracts/signers/local'\r\nimport MetaMaskSigner from 'services/smart-contracts/signers/metamask'\r\nimport { translate } from 'services/translations/translations'\r\nimport { execute } from 'actions/common'\r\nimport {\r\n\t// addWeb3Transaction,\r\n\tupdateWeb3Transaction,\r\n} from 'actions/transactionActions'\r\nimport { addToast } from 'actions/uiActions'\r\nimport { updateAccount } from 'actions/accountActions'\r\nimport { splitSig, Transaction } from 'adex-protocol-eth/js'\r\n\r\n/**\r\n * NOTE: DO NOT CALL WITH CONNECTED SIGNER\r\n * Will fill missing props gasLimit, nonce, chainId, etc..  *\r\n * */\r\nexport async function prepareTx({ tx, provider, sender, gasLimit, gasPrice }) {\r\n\tconst pTx = await utils.populateTransaction(tx, provider, sender)\r\n\r\n\t// TO work with all signers\r\n\tpTx.gasLimit = gasLimit || pTx.gasLimit.toHexString()\r\n\tpTx.gasPrice = gasPrice || pTx.gasPrice.toHexString()\r\n\tpTx.value = pTx.value || utils.hexlify(0)\r\n\tpTx.nonce = utils.hexlify(pTx.nonce)\r\n\r\n\treturn pTx\r\n}\r\n\r\nexport async function processTx({\r\n\ttx,\r\n\ttxSuccessData,\r\n\tfrom,\r\n\tfromType,\r\n\taccount,\r\n}) {\r\n\ttry {\r\n\t\tconst txRes = await tx\r\n\t\t// const txData = {\r\n\t\t// \t// id: txRes.hash,\r\n\t\t// \thash: txRes.hash,\r\n\t\t// \tnonce: txRes.nonce,\r\n\t\t// \t...txSuccessData,\r\n\t\t// \tstatus: 'pending',\r\n\t\t// \tsendingTime: Date.now(),\r\n\t\t// \ttxData: txRes\r\n\t\t// }\r\n\r\n\t\t// execute(\r\n\t\t// \taddWeb3Transaction({ tx: txData, addr: from })\r\n\t\t// )\r\n\t\texecute(\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\taction: 'X',\r\n\t\t\t\tlabel: translate('TRANSACTION_SENT_MSG', {\r\n\t\t\t\t\targs: [txRes.hash],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 50000,\r\n\t\t\t})\r\n\t\t)\r\n\r\n\t\tconst settings = { ...account.settings }\r\n\t\tsettings[fromType] = { ...settings[fromType] } || {}\r\n\t\tsettings[fromType].nextNonce = txRes.nonce + 1\r\n\t\texecute(\r\n\t\t\tupdateAccount({\r\n\t\t\t\tnewValues: { settings },\r\n\t\t\t})\r\n\t\t)\r\n\r\n\t\t// TODO: catch and toast\r\n\t\tconst receipt = await txRes.wait()\r\n\t\texecute(\r\n\t\t\tupdateWeb3Transaction({\r\n\t\t\t\ttx: txRes.hash,\r\n\t\t\t\tkey: 'status',\r\n\t\t\t\tvalue:\r\n\t\t\t\t\treceipt.status === 1 ||\r\n\t\t\t\t\treceipt.status === '0x1' ||\r\n\t\t\t\t\treceipt.status === true\r\n\t\t\t\t\t\t? 'success'\r\n\t\t\t\t\t\t: 'failed',\r\n\t\t\t\taddr: from,\r\n\t\t\t})\r\n\t\t)\r\n\t} catch (err) {\r\n\t\tconsole.error(err)\r\n\t\texecute(\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\taction: 'X',\r\n\t\t\t\tlabel: translate('TRANSACTION_ERR_MSG', {\r\n\t\t\t\t\targs: [err],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 50000,\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport async function getSigner({ wallet, provider }) {\r\n\t// TODO: Maybe get provider here?\r\n\tconst { authType, path, email, password } = wallet\r\n\r\n\tif (authType === AUTH_TYPES.METAMASK.name) {\r\n\t\tconst signer = new MetaMaskSigner(provider)\r\n\t\treturn signer\r\n\t}\r\n\tif (authType === AUTH_TYPES.LEDGER.name) {\r\n\t\tconst signer = new LedgerSigner(provider, { path })\r\n\r\n\t\treturn signer\r\n\t}\r\n\tif (authType === AUTH_TYPES.TREZOR.name) {\r\n\t\tconst signer = new TrezorSigner(provider, { path })\r\n\t\treturn signer\r\n\t}\r\n\tif (\r\n\t\tauthType === AUTH_TYPES.GRANT.name ||\r\n\t\tauthType === AUTH_TYPES.QUICK.name\r\n\t) {\r\n\t\tconst signer = new LocalSigner(provider, { email, password, authType })\r\n\r\n\t\treturn signer\r\n\t}\r\n\r\n\tthrow new Error(`Invalid wallet authType ${wallet.authType}`)\r\n}\r\n\r\n// NOTE: works with typed data in format {type: 'solidity data type', name: 'string (label)', value: 'preferable string'}\r\nexport const getTypedDataHash = ({ typedData }) => {\r\n\tconst values = typedData.map(entry => {\r\n\t\treturn typeof entry.value === 'string'\r\n\t\t\t? utils.toUtf8Bytes(entry.value)\r\n\t\t\t: utils.hexlify(entry.value)\r\n\t})\r\n\tconst valuesHash = utils.keccak256.apply(null, values)\r\n\tconst schema = typedData.map(entry => {\r\n\t\treturn utils.toUtf8Bytes(entry.type + ' ' + entry.name)\r\n\t})\r\n\r\n\tconst schemaHash = utils.keccak256.apply(null, schema)\r\n\tconst hash = utils.solidityKeccak256(\r\n\t\t['bytes32', 'bytes32'],\r\n\t\t[schemaHash, valuesHash]\r\n\t)\r\n\r\n\treturn hash\r\n}\r\n\r\nexport async function getAuthSig({ wallet }) {\r\n\tconst { provider } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\r\n\tconst authToken = Math.floor(\r\n\t\tMath.random() * Number.MAX_SAFE_INTEGER\r\n\t).toString()\r\n\r\n\tconst typedData = [{ type: 'uint', name: 'Auth token', value: authToken }]\r\n\tconst hash = getTypedDataHash({ typedData })\r\n\tconst signature = await signer.signMessage(hash, { hex: true })\r\n\r\n\treturn {\r\n\t\t...signature,\r\n\t\tauthToken,\r\n\t\thash,\r\n\t}\r\n}\r\n\r\nexport async function getTransactionsReceipts({ txHashes = [], authType }) {\r\n\tconst { provider } = await getEthers(authType)\r\n\tconst receipts = txHashes.map(tx => provider.getTransactionReceipt(tx))\r\n\r\n\treturn Promise.all(receipts)\r\n}\r\n\r\nexport async function signTx({ tx, signer }) {\r\n\tconst sig = await signer.signMessage(new Transaction(tx).hashHex(), {\r\n\t\thex: true,\r\n\t})\r\n\tconst signature = splitSig(sig.signature)\r\n\treturn signature\r\n}\r\n\r\nexport async function getMultipleTxSignatures({ txns, signer }) {\r\n\tconst signatures = []\r\n\tfor (const tx of txns) {\r\n\t\tsignatures.push(await signTx({ tx, signer }))\r\n\t}\r\n\r\n\treturn signatures\r\n}\r\n","import Requester from 'services/requester'\r\nimport { translate } from 'services/translations/translations'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\nimport ewt from './ewt'\r\n\r\nconst BEARER_PREFIX = 'Bearer '\r\nconst VALIDATOR_LEADER_URL = process.env.VALIDATOR_LEADER_URL\r\n\r\nconst getValidatorRequester = ({ baseUrl }) => {\r\n\treturn new Requester({ baseUrl })\r\n}\r\n\r\nconst getRequesters = ({ campaign }) => {\r\n\tconst leader = (campaign.validators || campaign.spec.validators)[0]\r\n\tconst follower = (campaign.validators || campaign.spec.validators)[1]\r\n\tconst leaderRequester = getValidatorRequester({ baseUrl: leader.url })\r\n\tconst followerRequester = getValidatorRequester({\r\n\t\tbaseUrl: follower.url,\r\n\t})\r\n\r\n\treturn {\r\n\t\tleader: { requester: leaderRequester, validator: leader },\r\n\t\tfollower: { requester: followerRequester, validator: follower },\r\n\t}\r\n}\r\n\r\nconst processResponse = res => {\r\n\tif (res.status >= 200 && res.status < 400) {\r\n\t\treturn res.json()\r\n\t}\r\n\r\n\treturn res.text().then(text => {\r\n\t\tthrow new Error(\r\n\t\t\ttranslate('SERVICE_ERROR_MSG', {\r\n\t\t\t\targs: [res.url, res.status, res.statusText, text],\r\n\t\t\t})\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport const getValidatorAuthToken = async ({ validatorId, account }) => {\r\n\tconst { identity, wallet } = account\r\n\tconst existingAuth = (identity.validatorAuthTokens || {})[validatorId]\r\n\tif (existingAuth) {\r\n\t\treturn existingAuth\r\n\t}\r\n\r\n\tconst { provider } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\r\n\tconst payload = {\r\n\t\tid: validatorId,\r\n\t\tidentity: identity.address,\r\n\t\tera: Math.floor(Date.now() / 60000),\r\n\t}\r\n\r\n\tconst token = ewt.sign(signer, payload)\r\n\r\n\treturn token\r\n}\r\n\r\nconst sendMessage = async ({ campaign, options, account }) => {\r\n\tconst { follower, leader } = getRequesters({ campaign })\r\n\r\n\tconst followerAuthToken = await getValidatorAuthToken({\r\n\t\tvalidatorId: follower.validator.id,\r\n\t\taccount,\r\n\t})\r\n\tconst leaderAuthToken = await getValidatorAuthToken({\r\n\t\tvalidatorId: leader.validator.id,\r\n\t\taccount,\r\n\t})\r\n\tconst followerResult = await follower.requester\r\n\t\t.fetch({\r\n\t\t\t...options,\r\n\t\t\theaders: {\r\n\t\t\t\t...options.headers,\r\n\t\t\t\tauthorization: BEARER_PREFIX + followerAuthToken,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(processResponse)\r\n\r\n\tconst leaderResult = await leader.requester\r\n\t\t.fetch({\r\n\t\t\t...options,\r\n\t\t\theaders: {\r\n\t\t\t\t...options.headers,\r\n\t\t\t\tauthorization: BEARER_PREFIX + leaderAuthToken,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(processResponse)\r\n\r\n\treturn {\r\n\t\tresults: {\r\n\t\t\tfollowerResult,\r\n\t\t\tleaderResult,\r\n\t\t},\r\n\t\tauthTokens: {\r\n\t\t\t[follower.id]: followerAuthToken,\r\n\t\t\t[leader.id]: leaderAuthToken,\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport const lastApprovedState = ({ campaign }) => {\r\n\tconst { leader } = getRequesters({ campaign })\r\n\r\n\treturn leader.requester\r\n\t\t.fetch({\r\n\t\t\troute: `channel/${campaign.id}/last-approved`,\r\n\t\t\tmethod: 'GET',\r\n\t\t})\r\n\t\t.then(processResponse)\r\n}\r\n\r\nexport const closeCampaign = ({ campaign, account }) => {\r\n\tconst options = {\r\n\t\troute: `channel/${campaign.id}/events`,\r\n\t\tmethod: 'POST',\r\n\t\tbody: JSON.stringify({ events: [{ type: 'CLOSE' }] }),\r\n\t\theaders: { 'Content-Type': 'application/json' },\r\n\t}\r\n\r\n\treturn sendMessage({ campaign, options, account })\r\n}\r\n\r\nexport const identityAnalytics = async ({\r\n\tidenityAddr,\r\n\tcampaign,\r\n\tcampaignId,\r\n\tleaderAuth,\r\n\teventType,\r\n\tmetric,\r\n\ttimeframe,\r\n\tlimit,\r\n\tside,\r\n}) => {\r\n\tconst baseUrl = VALIDATOR_LEADER_URL\r\n\tconst requester = getValidatorRequester({ baseUrl })\r\n\r\n\tconst aggregates = await requester\r\n\t\t.fetch({\r\n\t\t\troute: `/analytics/for-${side}${campaignId || ''}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqueryParams: { eventType, metric, timeframe, limit },\r\n\t\t\theaders: {\r\n\t\t\t\tauthorization: BEARER_PREFIX + leaderAuth,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(processResponse)\r\n\r\n\treturn aggregates\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\nimport { constants } from 'adex-models'\r\nimport { Contract } from 'ethers'\r\nimport { getValidatorAuthToken } from 'services/adex-validator/actions'\r\nimport { bigNumberify, formatEther, formatUnits } from 'ethers/utils'\r\nconst privilegesNames = constants.valueToKey(constants.IdentityPrivilegeLevel)\r\n\r\nexport async function getAddressBalances({ address, authType }) {\r\n\tconst { provider, Dai } = await getEthers(authType)\r\n\r\n\tconst calls = [\r\n\t\tprovider.getBalance(address.address),\r\n\t\tDai.balanceOf(address.address),\r\n\t]\r\n\r\n\tconst balances = await Promise.all(calls)\r\n\tconst formatted = {\r\n\t\taddress: address.address,\r\n\t\tpath: address.serializedPath || address.path, // we are going to keep the entire path\r\n\t\tbalanceEth: balances[0].toString(),\r\n\t\tbalanceDai: balances[1].toString(),\r\n\t}\r\n\r\n\treturn formatted\r\n}\r\n\r\nexport async function getAccountStats({\r\n\taccount,\r\n\toutstandingBalanceDai = {\r\n\t\ttotal: bigNumberify('0'),\r\n\t\tavailable: bigNumberify('0'),\r\n\t},\r\n}) {\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai, Identity } = await getEthers(wallet.authType)\r\n\r\n\tconst { status = {} } = identity\r\n\tconst identityContract = new Contract(\r\n\t\tidentity.address,\r\n\t\tIdentity.abi,\r\n\t\tprovider\r\n\t)\r\n\tlet privilegesAction\r\n\ttry {\r\n\t\tawait identityContract.deployed()\r\n\t\tprivilegesAction = identityContract.privileges(wallet.address)\r\n\t} catch {\r\n\t\tprivilegesAction = Promise.resolve(status.type || 'Not Deployed')\r\n\t}\r\n\r\n\tconst calls = [\r\n\t\tprovider.getBalance(wallet.address),\r\n\t\tDai.balanceOf(wallet.address),\r\n\t\tDai.balanceOf(identity.address),\r\n\t\tprivilegesAction,\r\n\t]\r\n\r\n\tconst [\r\n\t\twalletBalanceEth,\r\n\t\twalletBalanceDai,\r\n\t\tidentityBalanceDai = bigNumberify('0'),\r\n\t\twalletPrivileges,\r\n\t] = await Promise.all(\r\n\t\tcalls.map(c =>\r\n\t\t\tc\r\n\t\t\t\t.then(res => res)\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\treturn undefined\r\n\t\t\t\t})\r\n\t\t)\r\n\t)\r\n\r\n\t// BigNumber values for balances\r\n\tconst raw = {\r\n\t\twalletBalanceEth,\r\n\t\twalletBalanceDai,\r\n\t\tidentityBalanceDai,\r\n\t\twalletPrivileges,\r\n\t\toutstandingBalanceDai: outstandingBalanceDai.available,\r\n\t\ttotalOutstandingBalanceDai: outstandingBalanceDai.total,\r\n\t\tavailableIdentityBalanceDai: identityBalanceDai.add(\r\n\t\t\toutstandingBalanceDai.available\r\n\t\t),\r\n\t\ttotalIdentityBalanceDai: identityBalanceDai.add(\r\n\t\t\toutstandingBalanceDai.total\r\n\t\t),\r\n\t}\r\n\r\n\tconst formatted = {\r\n\t\twalletAddress: wallet.address,\r\n\t\twalletAuthType: wallet.authType,\r\n\t\twalletPrivileges: privilegesNames[walletPrivileges],\r\n\t\twalletBalanceEth: formatEther(walletBalanceEth),\r\n\t\twalletBalanceDai: formatUnits(walletBalanceDai, 18),\r\n\t\tidentityAddress: identity.address,\r\n\t\tidentityBalanceDai: formatUnits(identityBalanceDai, 18),\r\n\t\toutstandingBalanceDai: formatUnits(raw.outstandingBalanceDai, 18),\r\n\t\ttotalOutstandingBalanceDai: formatUnits(raw.totalOutstandingBalanceDai, 18),\r\n\t\tavailableIdentityBalanceDai: formatUnits(\r\n\t\t\traw.availableIdentityBalanceDai,\r\n\t\t\t18\r\n\t\t),\r\n\t\ttotalIdentityBalanceDai: formatUnits(raw.totalIdentityBalanceDai, 18),\r\n\t}\r\n\r\n\treturn {\r\n\t\traw,\r\n\t\tformatted,\r\n\t}\r\n}\r\n\r\nexport async function getOutstandingBalance({ wallet, address, withBalance }) {\r\n\t// const sweepMin = minToSweep()\r\n\tconst bigZero = bigNumberify(0)\r\n\r\n\tconst initial = { total: bigNumberify('0'), available: bigNumberify('0') }\r\n\r\n\tconst allOutstanding = withBalance.reduce((amounts, ch) => {\r\n\t\tconst { outstanding, outstandingAvailable } = ch\r\n\t\tconst current = { ...amounts }\r\n\t\tcurrent.total = current.total.add(outstanding)\r\n\r\n\t\tif (outstandingAvailable.gt(bigZero)) {\r\n\t\t\tcurrent.available = current.available.add(outstandingAvailable)\r\n\t\t}\r\n\r\n\t\treturn current\r\n\t}, initial)\r\n\r\n\treturn allOutstanding || initial\r\n}\r\n\r\nexport async function getAllValidatorsAuthForIdentity({\r\n\twithBalance,\r\n\taccount,\r\n}) {\r\n\tconst validatorAuthTokens = account.identity.validatorAuthTokens || {}\r\n\r\n\tconst allValidators = withBalance.reduce((all, { channel }) => {\r\n\t\tconst leader = (channel.validators || channel.spec.validators)[0].id\r\n\t\tconst follower = (channel.validators || channel.spec.validators)[1].id\r\n\r\n\t\tconst validators = {\r\n\t\t\t...all,\r\n\t\t\t[leader]: all[leader] || validatorAuthTokens[leader] || null,\r\n\t\t\t[follower]: all[follower] || validatorAuthTokens[follower] || null,\r\n\t\t}\r\n\r\n\t\treturn validators\r\n\t}, {})\r\n\r\n\tconst keys = Object.keys(allValidators)\r\n\r\n\tconst tokenCalls = keys.map(async key => {\r\n\t\tif (allValidators[key]) {\r\n\t\t\treturn allValidators[key]\r\n\t\t} else {\r\n\t\t\tconst token = await getValidatorAuthToken({\r\n\t\t\t\tvalidatorId: key,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\treturn token\r\n\t\t}\r\n\t})\r\n\r\n\tconst allTokens = await Promise.all(tokenCalls)\r\n\r\n\tconst validatorsAuth = keys.reduce((all, key, index) => {\r\n\t\tconst validators = {\r\n\t\t\t...all,\r\n\t\t\t[key]: allTokens[index],\r\n\t\t}\r\n\r\n\t\treturn validators\r\n\t}, {})\r\n\r\n\treturn validatorsAuth\r\n}\r\n","import configureStore from 'store/configureStore'\r\nconst { store } = configureStore\r\n\r\nexport const relayerConfig = () => {\r\n\tconst cfg = store.getState().persist.config.relayer\r\n\r\n\treturn cfg\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\nimport {\r\n\tgetSigner,\r\n\tprepareTx,\r\n\tprocessTx,\r\n\tgetMultipleTxSignatures,\r\n} from 'services/smart-contracts/actions/ethers'\r\nimport { getSweepingTxnsIfNeeded } from 'services/smart-contracts/actions/core'\r\nimport { ethers, Contract } from 'ethers'\r\nimport {\r\n\tbigNumberify,\r\n\tparseUnits,\r\n\t// randomBytes,\r\n\tgetAddress,\r\n\thexlify,\r\n\tInterface,\r\n\tkeccak256,\r\n} from 'ethers/utils'\r\nimport { generateAddress2 } from 'ethereumjs-util'\r\nimport {\r\n\t// identityBytecode,\r\n\texecuteTx,\r\n\tsetAddrPriv,\r\n\trelayerConfig,\r\n} from 'services/adex-relayer'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\nimport { contracts } from '../contractsCfg'\r\nimport { getProxyDeployBytecode } from 'adex-protocol-eth/js/IdentityProxyDeploy'\r\n// import FactoryABI from 'adex-protocol-eth/abi/IdentityFactory'\r\n// const Factory = new Interface(FactoryABI)\r\n\r\nimport solc from 'solcBrowser'\r\nimport { RoutineAuthorization } from 'adex-protocol-eth/js/Identity'\r\n\r\nconst { DAI } = contracts\r\n\r\nconst { IDENTITY_BASE_ADDR, IDENTITY_FACTORY_ADDR } = process.env\r\n\r\nconst GAS_LIMIT_DEPLOY_CONTRACT = 150000\r\nconst feeAmountTransfer = '150000000000000000'\r\nconst feeAmountSetPrivileges = '150000000000000000'\r\nconst ERC20 = new Interface(DAI.abi)\r\n/*\r\nexport async function getIdentityBytecode({ owner, privLevel }) {\r\n\tconst res = await identityBytecode({\r\n\t\towner,\r\n\t\tprivLevel,\r\n\t\tidentityBaseAddr: IDENTITY_BASE_ADDR\r\n\t})\r\n\treturn res.bytecode\r\n}\r\n\r\nexport async function getIdentityDeployData({ owner, privLevel }) {\r\n\tconst bytecode = await getIdentityBytecode({ owner, privLevel })\r\n\tconst salt =\r\n\t\t`0x${Buffer.from(randomBytes(32)).toString('hex')}`\r\n\tconst expectedAddr = getAddress(\r\n\t\t`0x${generateAddress2(IDENTITY_FACTORY_ADDR, salt, bytecode)\r\n\t\t\t.toString('hex')}`\r\n\t)\r\n\r\n\treturn {\r\n\t\tbytecode,\r\n\t\tsalt,\r\n\t\texpectedAddr\r\n\t}\r\n}\r\n*/\r\n\r\nasync function getRelayerRoutinesAuthAuth({\r\n\trelayer,\r\n\toutpace,\r\n\tregistry,\r\n\tvalidUntil,\r\n\tfeeTokenAddr,\r\n\tweeklyFeeAmount,\r\n}) {\r\n\tconst relayerAuth = new RoutineAuthorization({\r\n\t\trelayer,\r\n\t\toutpace,\r\n\t\tregistry,\r\n\t\tvalidUntil,\r\n\t\tfeeTokenAddr,\r\n\t\tweeklyFeeAmount,\r\n\t})\r\n\r\n\treturn relayerAuth\r\n}\r\n\r\nexport async function getIdentityBytecode({\r\n\tidentityBaseAddr,\r\n\troutineAuthorizations,\r\n\tprivileges = [],\r\n}) {\r\n\tconst opts = {\r\n\t\tprivSlot: 0,\r\n\t}\r\n\r\n\tif (!!routineAuthorizations && routineAuthorizations.length) {\r\n\t\topts.routineAuthsSlot = 1\r\n\t\topts.routineAuthorizations = routineAuthorizations.map(a => a.hash())\r\n\t}\r\n\r\n\tconst bytecode = getProxyDeployBytecode(\r\n\t\tidentityBaseAddr,\r\n\t\tprivileges,\r\n\t\topts,\r\n\t\tsolc\r\n\t)\r\n\r\n\treturn bytecode\r\n}\r\n\r\nexport async function getIdentityDeployData({\r\n\towner,\r\n\tprivLevel,\r\n\taddReleyerRoutinesAuth,\r\n\trelayerRoutineAuthValidUntil = 10648454444,\r\n}) {\r\n\tconst {\r\n\t\tidentityFactoryAddr,\r\n\t\tregistryAddr,\r\n\t\tidentityBaseAddr,\r\n\t\tidentityRecoveryAddr,\r\n\t\tcoreAddr,\r\n\t\tfeeTokenWhitelist,\r\n\t\tweeklyFeeAmount,\r\n\t} = relayerConfig()\r\n\r\n\tconst privileges = [[owner, 3], [identityRecoveryAddr, 3]]\r\n\r\n\tconst opts = {\r\n\t\tidentityBaseAddr,\r\n\t\tprivileges,\r\n\t}\r\n\r\n\tif (addReleyerRoutinesAuth) {\r\n\t\tconst relayerAuth = getRelayerRoutinesAuthAuth({\r\n\t\t\tregistry: registryAddr,\r\n\t\t\toutpace: coreAddr,\r\n\t\t\tvalidUntil: relayerRoutineAuthValidUntil,\r\n\t\t\tfeeTokenAddr: feeTokenWhitelist[0].address,\r\n\t\t\tweeklyFeeAmount,\r\n\t\t})\r\n\r\n\t\topts.routineAuthorizations = [relayerAuth]\r\n\t}\r\n\r\n\tconst bytecode = await getIdentityBytecode(opts)\r\n\tconst salt = keccak256(owner)\r\n\r\n\tconst identityAddr = getAddress(\r\n\t\t`0x${generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex')}`\r\n\t)\r\n\r\n\treturn {\r\n\t\tidentityFactoryAddr,\r\n\t\tidentityBaseAddr,\r\n\t\tbytecode,\r\n\t\tsalt,\r\n\t\tidentityAddr,\r\n\t\tprivileges,\r\n\t}\r\n}\r\n\r\nexport async function deployIdentityContract({\r\n\twallet,\r\n\tbytecode,\r\n\tsalt,\r\n\texpectedAddr,\r\n}) {\r\n\tconst { provider, IdentityFactory } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\r\n\tconst pTx = await prepareTx({\r\n\t\ttx: IdentityFactory.deploy(bytecode, salt),\r\n\t\tprovider,\r\n\t\tsender: wallet.address,\r\n\t\tgasLimit: hexlify(GAS_LIMIT_DEPLOY_CONTRACT),\r\n\t})\r\n\r\n\tpTx.gasLimit = hexlify(GAS_LIMIT_DEPLOY_CONTRACT)\r\n\tconst identityFactoryWithSigner = IdentityFactory.connect(signer)\r\n\r\n\tconst tx = identityFactoryWithSigner.deploy(bytecode, salt, pTx)\r\n\r\n\tprocessTx({\r\n\t\ttx,\r\n\t\ttxSuccessData: {},\r\n\t\tfrom: wallet.address,\r\n\t\taccount: {},\r\n\t})\r\n\r\n\treturn tx\r\n}\r\n\r\nexport function getPrivileges({ walletAddr, identityAddr, walletAuthType }) {\r\n\treturn getEthers(walletAuthType).then(({ provider, Identity }) => {\r\n\t\tconst contract = new ethers.Contract(identityAddr, Identity.abi, provider)\r\n\t\treturn contract.privileges(walletAddr)\r\n\t})\r\n}\r\n\r\nexport async function sendDaiToIdentity({\r\n\taccount,\r\n\tamountToSend,\r\n\t// gas,\r\n\testimateGasOnly,\r\n}) {\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst daiWithSigner = Dai.connect(signer)\r\n\tconst tokenAmount = parseUnits(amountToSend, 18).toString()\r\n\r\n\tconst pTx = await prepareTx({\r\n\t\ttx: Dai.transfer(identity.address, tokenAmount),\r\n\t\tprovider,\r\n\t\t// gasLimit,\r\n\t\tsender: wallet.address,\r\n\t})\r\n\r\n\tif (estimateGasOnly) {\r\n\t\treturn pTx.gasLimit\r\n\t}\r\n\r\n\tprocessTx({\r\n\t\ttx: daiWithSigner.transfer(identity.address, tokenAmount, pTx),\r\n\t\ttxSuccessData: { txMethod: 'TX_SEND_DAI_TO_IDENTITY' },\r\n\t\tfrom: wallet.address,\r\n\t\tfromType: 'wallet',\r\n\t\taccount,\r\n\t})\r\n\r\n\treturn {}\r\n}\r\n\r\nexport async function withdrawFromIdentity({\r\n\taccount,\r\n\tamountToWithdraw,\r\n\twithdrawTo,\r\n\tgetFeesOnly,\r\n\ttokenAddress,\r\n}) {\r\n\tconst toWithdraw = parseUnits(amountToWithdraw, 18)\r\n\tconst sweepTxns = await getSweepingTxnsIfNeeded({\r\n\t\tamountNeeded: toWithdraw,\r\n\t\taccount,\r\n\t})\r\n\tconst sweepFees = sweepTxns.reduce(\r\n\t\t(total, tx) => total.add(bigNumberify(tx.feeAmount)),\r\n\t\tbigNumberify(0)\r\n\t)\r\n\tconst fees = bigNumberify(feeAmountTransfer).add(sweepFees)\r\n\tconst tokenAmount = toWithdraw.sub(fees).toString()\r\n\r\n\tif (getFeesOnly) {\r\n\t\treturn {\r\n\t\t\tfees: formatTokenAmount(fees.toString(), 18),\r\n\t\t\ttoGet: formatTokenAmount(tokenAmount, 18),\r\n\t\t}\r\n\t}\r\n\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai, Identity } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst identityAddr = identity.address\r\n\t// TEMP HOTFIX\r\n\t// TODO: Make it work with multiple tokens\r\n\tconst tokenAddr = tokenAddress || Dai.address\r\n\r\n\tconst tx1 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: tokenAddr,\r\n\t\tfeeAmount: feeAmountTransfer,\r\n\t\tto: tokenAddr,\r\n\t\tdata: ERC20.functions.transfer.encode([withdrawTo, tokenAmount]),\r\n\t}\r\n\tconst txns = [...sweepTxns, tx1]\r\n\r\n\tconst txnsRaw = await getIdentityTnxsWithNonces({\r\n\t\ttxns,\r\n\t\tidentityAddr,\r\n\t\tprovider,\r\n\t\tIdentity,\r\n\t})\r\n\r\n\tconst signatures = await getMultipleTxSignatures({ txns: txnsRaw, signer })\r\n\r\n\tconst data = {\r\n\t\ttxnsRaw,\r\n\t\tsignatures,\r\n\t\tidentityAddr,\r\n\t}\r\n\r\n\tconst result = await executeTx(data)\r\n\r\n\treturn {\r\n\t\tresult,\r\n\t}\r\n}\r\n\r\nexport async function setIdentityPrivilege({\r\n\taccount,\r\n\tsetAddr,\r\n\tprivLevel,\r\n\tgetFeesOnly,\r\n}) {\r\n\tconst fees = bigNumberify(feeAmountSetPrivileges)\r\n\r\n\tif (getFeesOnly) {\r\n\t\treturn {\r\n\t\t\tfees: formatTokenAmount(fees.toString(), 18),\r\n\t\t}\r\n\t}\r\n\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, Dai, Identity } = await getEthers(wallet.authType)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst identityAddr = identity.address\r\n\r\n\tconst identityInterface = new Interface(Identity.abi)\r\n\r\n\tconst tx1 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: Dai.address,\r\n\t\tfeeAmount: feeAmountSetPrivileges,\r\n\t\tto: identityAddr,\r\n\t\tdata: identityInterface.functions.setAddrPrivilege.encode([\r\n\t\t\tsetAddr,\r\n\t\t\tprivLevel,\r\n\t\t]),\r\n\t}\r\n\r\n\tconst txns = [tx1]\r\n\tconst txnsRaw = await getIdentityTnxsWithNonces({\r\n\t\ttxns,\r\n\t\tidentityAddr,\r\n\t\tprovider,\r\n\t\tIdentity,\r\n\t})\r\n\r\n\tconst signatures = await getMultipleTxSignatures({ txns: txnsRaw, signer })\r\n\r\n\tconst data = {\r\n\t\ttxnsRaw,\r\n\t\tsignatures,\r\n\t\tidentityAddr,\r\n\t\tsetAddr,\r\n\t\tprivLevel,\r\n\t}\r\n\r\n\tconst result = await setAddrPriv(data)\r\n\r\n\treturn {\r\n\t\tresult,\r\n\t}\r\n}\r\n\r\nexport async function getIdentityTnxsWithNonces({\r\n\ttxns = [],\r\n\tidentityAddr,\r\n\tprovider,\r\n\tIdentity,\r\n}) {\r\n\tconst identityContract = new Contract(identityAddr, Identity.abi, provider)\r\n\tconst initialNonce = (await identityContract.nonce()).toNumber()\r\n\tconst withNonce = txns.map((tx, i) => {\r\n\t\treturn {\r\n\t\t\t...tx,\r\n\t\t\tnonce: initialNonce + i,\r\n\t\t}\r\n\t})\r\n\r\n\treturn withNonce\r\n}\r\n","import crypto from 'crypto'\r\nimport {\r\n\tChannel,\r\n\tMerkleTree,\r\n\tsplitSig,\r\n\tChannelState,\r\n} from 'adex-protocol-eth/js'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getIdentityTnxsWithNonces } from 'services/smart-contracts/actions/identity'\r\nimport {\r\n\tgetSigner,\r\n\tgetMultipleTxSignatures,\r\n} from 'services/smart-contracts/actions/ethers'\r\nimport { contracts } from '../contractsCfg'\r\nimport { sendOpenChannel } from 'services/adex-relayer/actions'\r\nimport { closeCampaign } from 'services/adex-validator/actions'\r\nimport { Campaign, AdUnit } from 'adex-models'\r\nimport { getAllCampaigns } from 'services/adex-market/actions'\r\nimport {\r\n\tbigNumberify,\r\n\trandomBytes,\r\n\tparseUnits,\r\n\tInterface,\r\n\tformatUnits,\r\n} from 'ethers/utils'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\nimport { relayerConfig } from 'services/adex-relayer'\r\n\r\nconst { AdExCore, DAI } = contracts\r\nconst Core = new Interface(AdExCore.abi)\r\nconst ERC20 = new Interface(DAI.abi)\r\nconst feeAmountApprove = '150000000000000000'\r\nconst feeAmountTransfer = '150000000000000000'\r\nconst feeAmountOpen = '160000000000000000'\r\nconst timeframe = 15 * 1000 // 1 event per 15 seconds\r\nconst VALID_UNTIL_COEFFICIENT = 0.5\r\nconst VALID_UNTIL_MIN_PERIOD = 7 * 24 * 60 * 60 * 1000 // 7 days in ms\r\n\r\nexport const totalFeesFormatted = formatUnits(\r\n\tbigNumberify(feeAmountApprove)\r\n\t\t.add(bigNumberify(feeAmountOpen))\r\n\t\t.toString(),\r\n\t18\r\n)\r\n\r\nfunction toEthereumChannel(channel) {\r\n\tconst specHash = crypto\r\n\t\t.createHash('sha256')\r\n\t\t.update(JSON.stringify(channel.spec))\r\n\t\t.digest()\r\n\r\n\treturn new Channel({\r\n\t\tcreator: channel.creator,\r\n\t\ttokenAddr: channel.depositAsset,\r\n\t\ttokenAmount: channel.depositAmount,\r\n\t\tvalidUntil: channel.validUntil,\r\n\t\tvalidators: channel.spec.validators.map(v => v.id),\r\n\t\tspec: specHash,\r\n\t})\r\n}\r\n\r\nfunction getValidUntil(activeFrom, withdrawPeriodStart) {\r\n\tconst period = withdrawPeriodStart - activeFrom\r\n\tconst validUntil =\r\n\t\twithdrawPeriodStart +\r\n\t\tMath.max(period * VALID_UNTIL_COEFFICIENT, VALID_UNTIL_MIN_PERIOD)\r\n\r\n\treturn Math.floor(validUntil / 1000)\r\n}\r\n\r\nfunction getReadyCampaign(campaign, identity, Dai) {\r\n\tconst newCampaign = new Campaign(campaign)\r\n\tnewCampaign.creator = identity.address\r\n\tnewCampaign.created = Date.now()\r\n\tnewCampaign.validUntil = getValidUntil(\r\n\t\tnewCampaign.activeFrom,\r\n\t\tnewCampaign.withdrawPeriodStart\r\n\t)\r\n\tnewCampaign.nonce = bigNumberify(randomBytes(32)).toString()\r\n\tnewCampaign.adUnits = newCampaign.adUnits.map(unit => new AdUnit(unit).spec)\r\n\tnewCampaign.depositAmount = parseUnits(\r\n\t\tnewCampaign.depositAmount,\r\n\t\tDAI.decimals\r\n\t).toString()\r\n\r\n\t// NOTE: TEMP in UI its set per 1000 impressions (CPM)\r\n\tnewCampaign.minPerImpression = parseUnits(\r\n\t\tnewCampaign.minPerImpression,\r\n\t\tDAI.decimals\r\n\t)\r\n\t\t.div(bigNumberify(1000))\r\n\t\t.toString()\r\n\tnewCampaign.maxPerImpression = newCampaign.minPerImpression\r\n\r\n\tnewCampaign.depositAsset = newCampaign.depositAsset || Dai.address\r\n\tnewCampaign.eventSubmission = {\r\n\t\tallow: [\r\n\t\t\t{\r\n\t\t\t\tuids: [\r\n\t\t\t\t\tnewCampaign.creator,\r\n\t\t\t\t\tnewCampaign.validators[0].id,\r\n\t\t\t\t\tnewCampaign.validators[1].id,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{ uids: null, rateLimit: { type: 'ip', timeframe } },\r\n\t\t],\r\n\t}\r\n\r\n\tnewCampaign.status = { name: 'Pending', lastChecked: Date.now() }\r\n\r\n\treturn newCampaign\r\n}\r\n\r\nconst getExpiredWithdrawnOutstanding = async ({ channel, AdExCore }) => {\r\n\tconst [withdrawn, state] = await Promise.all([\r\n\t\tAdExCore.functions.withdrawn(channel.id),\r\n\t\tAdExCore.functions.states(channel.id),\r\n\t])\r\n\r\n\tif (state === ChannelState.Active) {\r\n\t\treturn bigNumberify(channel.depositAmount).sub(withdrawn)\r\n\t} else {\r\n\t\treturn bigNumberify('0')\r\n\t}\r\n}\r\n\r\nconst getWithdrawnPerUserOutstanding = async ({\r\n\tAdExCore,\r\n\tchannel,\r\n\tbalance,\r\n\tidentityAddr,\r\n}) => {\r\n\treturn bigNumberify(balance).sub(\r\n\t\tawait AdExCore.functions.withdrawnPerUser(channel.id, identityAddr)\r\n\t)\r\n}\r\n\r\nexport async function getChannelsWithOutstanding({ identityAddr, wallet }) {\r\n\tconst { authType } = wallet\r\n\tconst channels = await getAllCampaigns(true)\r\n\tconst { AdExCore } = await getEthers(authType)\r\n\tconst { feeTokenWhitelist = {} } = relayerConfig()\r\n\tconst channelWithdrawFee = bigNumberify(\r\n\t\tfeeTokenWhitelist.min || feeAmountTransfer\r\n\t)\r\n\r\n\tconst all = await Promise.all(\r\n\t\tchannels\r\n\t\t\t.map(channel => {\r\n\t\t\t\tconst { lastApprovedSigs, lastApprovedBalances } = channel.status\r\n\t\t\t\tif (lastApprovedBalances) {\r\n\t\t\t\t\tconst allLeafs = Object.entries(lastApprovedBalances).map(([k, v]) =>\r\n\t\t\t\t\t\tChannel.getBalanceLeaf(k, v)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconst mTree = new MerkleTree(allLeafs)\r\n\t\t\t\t\treturn { lastApprovedSigs, lastApprovedBalances, mTree, channel }\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlastApprovedSigs: null,\r\n\t\t\t\t\t\tlastApprovedBalances: null,\r\n\t\t\t\t\t\tmTree: null,\r\n\t\t\t\t\t\tchannel,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.filter(({ channel, lastApprovedBalances }) => {\r\n\t\t\t\tif (!!channel.status && channel.status.name === 'Expired') {\r\n\t\t\t\t\treturn channel.creator === identityAddr\r\n\t\t\t\t}\r\n\t\t\t\treturn lastApprovedBalances && !!lastApprovedBalances[identityAddr]\r\n\t\t\t})\r\n\t\t\t.map(\r\n\t\t\t\tasync ({ channel, lastApprovedBalances, lastApprovedSigs, mTree }) => {\r\n\t\t\t\t\tconst balance = lastApprovedBalances[identityAddr]\r\n\r\n\t\t\t\t\tconst outstanding =\r\n\t\t\t\t\t\tchannel.status.name === 'Expired'\r\n\t\t\t\t\t\t\t? await getExpiredWithdrawnOutstanding({ channel, AdExCore })\r\n\t\t\t\t\t\t\t: await getWithdrawnPerUserOutstanding({\r\n\t\t\t\t\t\t\t\t\tAdExCore,\r\n\t\t\t\t\t\t\t\t\tchannel,\r\n\t\t\t\t\t\t\t\t\tbalance,\r\n\t\t\t\t\t\t\t\t\tidentityAddr,\r\n\t\t\t\t\t\t\t  })\r\n\r\n\t\t\t\t\tconst outstandingAvailable = bigNumberify(outstanding).sub(\r\n\t\t\t\t\t\tchannelWithdrawFee\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tchannel,\r\n\t\t\t\t\t\tbalance,\r\n\t\t\t\t\t\tlastApprovedBalances,\r\n\t\t\t\t\t\tlastApprovedSigs,\r\n\t\t\t\t\t\toutstanding,\r\n\t\t\t\t\t\toutstandingAvailable,\r\n\t\t\t\t\t\tmTree,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t)\r\n\r\n\treturn all\r\n}\r\n\r\nasync function getChannelsToSweepFrom({ amountToSweep, identityAddr, wallet }) {\r\n\tconst allChannels = await getChannelsWithOutstanding({\r\n\t\tidentityAddr,\r\n\t\twallet,\r\n\t})\r\n\r\n\tconst bigZero = bigNumberify(0)\r\n\r\n\tconst { eligible } = allChannels\r\n\t\t.filter(c => {\r\n\t\t\tconst { outstandingAvailable } = c\r\n\t\t\treturn outstandingAvailable.gt(bigZero)\r\n\t\t})\r\n\t\t.sort((c1, c2) => {\r\n\t\t\treturn c2.outstandingAvailable.gt(c1.outstandingAvailable)\r\n\t\t})\r\n\t\t.reduce(\r\n\t\t\t(data, c) => {\r\n\t\t\t\tconst current = { ...data }\r\n\t\t\t\tif (current.sum.lt(amountToSweep)) {\r\n\t\t\t\t\tcurrent.eligible.push(c)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent.sum = current.sum.add(c.outstandingAvailable)\r\n\r\n\t\t\t\treturn current\r\n\t\t\t},\r\n\t\t\t{ sum: bigZero, eligible: [] }\r\n\t\t)\r\n\r\n\treturn eligible\r\n}\r\n\r\nconst getChannelWithdrawData = ({\r\n\tidentityAddr,\r\n\tbalance,\r\n\tmTree,\r\n\tlastApprovedSigs,\r\n\tethChannelTuple,\r\n}) => {\r\n\tconst leaf = Channel.getBalanceLeaf(identityAddr, balance)\r\n\tconst proof = mTree.proof(leaf)\r\n\tconst vsig1 = splitSig(lastApprovedSigs[0])\r\n\tconst vsig2 = splitSig(lastApprovedSigs[1])\r\n\r\n\treturn Core.functions.channelWithdraw.encode([\r\n\t\tethChannelTuple,\r\n\t\tmTree.getRoot(),\r\n\t\t[vsig1, vsig2],\r\n\t\tproof,\r\n\t\tbalance,\r\n\t])\r\n}\r\n\r\nexport async function getSweepChannelsTxns({\r\n\tfeeTokenAddr,\r\n\taccount,\r\n\tamountToSweep,\r\n}) {\r\n\tconst { wallet, identity } = account\r\n\tconst { Dai, AdExCore } = await getEthers(wallet.authType)\r\n\tconst identityAddr = identity.address\r\n\tconst channelsToSweep = await getChannelsToSweepFrom({\r\n\t\tamountToSweep,\r\n\t\tidentityAddr,\r\n\t\twallet,\r\n\t})\r\n\r\n\tconst txns = channelsToSweep.map((c, i) => {\r\n\t\tconst { mTree, channel, lastApprovedSigs, balance } = c\r\n\t\tconst ethChannelTuple = toEthereumChannel(channel).toSolidityTuple()\r\n\r\n\t\tconst data =\r\n\t\t\tchannel.status.name === 'Expired'\r\n\t\t\t\t? Core.functions.channelWithdrawExpired.encode([ethChannelTuple])\r\n\t\t\t\t: getChannelWithdrawData({\r\n\t\t\t\t\t\tidentityAddr,\r\n\t\t\t\t\t\tbalance,\r\n\t\t\t\t\t\tmTree,\r\n\t\t\t\t\t\tlastApprovedSigs,\r\n\t\t\t\t\t\tethChannelTuple,\r\n\t\t\t\t  })\r\n\r\n\t\treturn {\r\n\t\t\tidentityContract: identityAddr,\r\n\t\t\tto: AdExCore.address,\r\n\t\t\tfeeTokenAddr: feeTokenAddr || Dai.address,\r\n\t\t\tfeeAmount: feeAmountTransfer, // Same fee as withdrawFromIdentity\r\n\t\t\tdata,\r\n\t\t}\r\n\t})\r\n\r\n\treturn txns\r\n}\r\n\r\nexport async function getSweepingTxnsIfNeeded({ amountNeeded, account }) {\r\n\tconst needed = bigNumberify(amountNeeded)\r\n\tconst accountBalance = bigNumberify(account.stats.raw.identityBalanceDai)\r\n\tif (needed.gt(accountBalance)) {\r\n\t\treturn await getSweepChannelsTxns({\r\n\t\t\taccount,\r\n\t\t\tamountToSweep: needed.sub(accountBalance),\r\n\t\t})\r\n\t} else {\r\n\t\treturn []\r\n\t}\r\n}\r\n\r\nexport async function openChannel({ campaign, account, getFeesOnly }) {\r\n\tconst { wallet, identity } = account\r\n\tconst { provider, AdExCore, Dai, Identity } = await getEthers(wallet.authType)\r\n\tconst depositAmount = parseUnits(campaign.depositAmount)\r\n\tconst sweepTxns = await getSweepingTxnsIfNeeded({\r\n\t\tamountNeeded: depositAmount,\r\n\t\taccount,\r\n\t})\r\n\tconst sweepFees = sweepTxns.reduce(\r\n\t\t(total, tx) => total.add(bigNumberify(tx.feeAmount)),\r\n\t\tbigNumberify(0)\r\n\t)\r\n\r\n\tconst fees = bigNumberify(feeAmountApprove)\r\n\t\t.add(bigNumberify(feeAmountOpen))\r\n\t\t.add(sweepFees)\r\n\r\n\tif (getFeesOnly) {\r\n\t\treturn {\r\n\t\t\tfees: formatTokenAmount(fees.toString(), 18),\r\n\t\t}\r\n\t}\r\n\r\n\tconst readyCampaign = getReadyCampaign(campaign, identity, Dai)\r\n\tconst openReady = readyCampaign.openReady\r\n\tconst ethChannel = toEthereumChannel(openReady)\r\n\tconst signer = await getSigner({ wallet, provider })\r\n\tconst channel = {\r\n\t\t...openReady,\r\n\t\tid: ethChannel.hashHex(AdExCore.address),\r\n\t}\r\n\tconst identityAddr = openReady.creator\r\n\r\n\tconst feeTokenAddr = campaign.temp.feeTokenAddr || Dai.address\r\n\r\n\tconst tx1 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: feeTokenAddr,\r\n\t\tfeeAmount: feeAmountApprove,\r\n\t\tto: Dai.address,\r\n\t\tdata: ERC20.functions.approve.encode([\r\n\t\t\tAdExCore.address,\r\n\t\t\tchannel.depositAmount,\r\n\t\t]),\r\n\t}\r\n\r\n\tconst tx2 = {\r\n\t\tidentityContract: identityAddr,\r\n\t\tfeeTokenAddr: feeTokenAddr,\r\n\t\tfeeAmount: feeAmountOpen,\r\n\t\tto: AdExCore.address,\r\n\t\tdata: Core.functions.channelOpen.encode([ethChannel.toSolidityTuple()]),\r\n\t}\r\n\tconst txns = [...sweepTxns, tx1, tx2]\r\n\tconst txnsRaw = await getIdentityTnxsWithNonces({\r\n\t\ttxns,\r\n\t\tidentityAddr,\r\n\t\tprovider,\r\n\t\tIdentity,\r\n\t})\r\n\r\n\tconst signatures = await getMultipleTxSignatures({ txns: txnsRaw, signer })\r\n\r\n\tconst data = {\r\n\t\ttxnsRaw,\r\n\t\tsignatures,\r\n\t\tchannel,\r\n\t\tidentityAddr,\r\n\t}\r\n\r\n\tconst result = await sendOpenChannel(data)\r\n\treadyCampaign.id = channel.id\r\n\treturn {\r\n\t\tresult,\r\n\t\treadyCampaign,\r\n\t}\r\n}\r\n\r\nexport async function closeChannel({ account, campaign }) {\r\n\tconst result = await closeCampaign({ account, campaign })\r\n\treturn result\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport { addSig, getSig } from 'services/auth/auth'\r\nimport { getSession, checkSession } from 'services/adex-market/actions'\r\nimport {\r\n\tgetRelayerConfigData,\r\n\tregAccount,\r\n\tgetGrantType,\r\n} from 'services/adex-relayer/actions'\r\nimport { updateSpinner } from './uiActions'\r\nimport { translate } from 'services/translations/translations'\r\nimport { getAuthSig } from 'services/smart-contracts/actions/ethers'\r\nimport { removeLegacyKey } from 'services/wallet/wallet'\r\nimport { getValidatorAuthToken } from 'services/adex-validator/actions'\r\nimport {\r\n\tgetAccountStats,\r\n\tgetOutstandingBalance,\r\n} from 'services/smart-contracts/actions/stats'\r\nimport { getChannelsWithOutstanding } from 'services/smart-contracts/actions/core'\r\nimport { addToast, confirmAction } from './uiActions'\r\nimport {\r\n\tgetEthers,\r\n\tgetEthereumProvider,\r\n\tethereumSelectedAddress,\r\n\tethereumNetworkId,\r\n} from 'services/smart-contracts/ethers'\r\nimport { AUTH_TYPES, ETHEREUM_NETWORKS } from 'constants/misc'\r\nimport { selectAccount, selectIdentity, selectAuth } from 'selectors'\r\nimport { logOut } from 'services/store-data/auth'\r\n\r\nconst UPDATE_SETTINGS_INTERVAL = 24 * 60 * 60 * 1000 // 1 hour\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\n\r\n// MEMORY STORAGE\r\nexport function updateSignin(prop, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_SIGNIN,\r\n\t\t\tprop: prop,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetSignin() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_SIGNIN,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// PERSISTENT STORAGE\r\nexport function createAccount(acc) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.CREATE_ACCOUNT,\r\n\t\t\taccount: acc,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// LOGOUT\r\nexport function resetAccount() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ACCOUNT,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateAccount({ meta, newValues }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ACCOUNT,\r\n\t\t\tmeta: meta,\r\n\t\t\tnewValues: newValues,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateGasData({ gasData }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_GAS_DATA,\r\n\t\t\tgasData: gasData,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateAccountStats() {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { account } = getState().persist\r\n\t\ttry {\r\n\t\t\tconst { identity, wallet } = account\r\n\t\t\tconst { address } = identity\r\n\t\t\tconst withBalance = await getChannelsWithOutstanding({\r\n\t\t\t\tidentityAddr: address,\r\n\t\t\t\twallet,\r\n\t\t\t})\r\n\r\n\t\t\tconst outstandingBalanceDai = await getOutstandingBalance({\r\n\t\t\t\twallet,\r\n\t\t\t\taddress,\r\n\t\t\t\twithBalance,\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.error('ERR_OUTSTANDING_BALANCES', err)\r\n\t\t\t})\r\n\r\n\t\t\tconst { formatted, raw } = await getAccountStats({\r\n\t\t\t\taccount,\r\n\t\t\t\toutstandingBalanceDai,\r\n\t\t\t})\r\n\r\n\t\t\tupdateAccount({\r\n\t\t\t\tnewValues: { stats: { formatted, raw } },\r\n\t\t\t})(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_STATS', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_STATS', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function registerAccount({ owner, identityTxData, email }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('registering-account', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tawait regAccount({\r\n\t\t\t\towner,\r\n\t\t\t\temail,\r\n\t\t\t\t...identityTxData,\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_REGISTERING_ACCOUNT', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_REGISTERING_ACCOUNT', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner('registering-account', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function updateAccountSettings() {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { identity, settings } = getState().persist.account\r\n\t\tconst { grantType, updated } = settings\r\n\t\tconst now = Date.now()\r\n\t\tconst doUpdate =\r\n\t\t\t!grantType || now - (updated || 0) > UPDATE_SETTINGS_INTERVAL\r\n\r\n\t\ttry {\r\n\t\t\tif (doUpdate) {\r\n\t\t\t\tconst newSettings = { ...settings }\r\n\t\t\t\tnewSettings.grantType = (await getGrantType({\r\n\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t})).type\r\n\t\t\t\tnewSettings.updated = now\r\n\t\t\t\tupdateAccount({ newValues: { settings: newSettings } })(dispatch)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_SETTINGS', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_SETTINGS', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function updateValidatorAuthTokens({ newAuth }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { identity } = getState().persist.account\r\n\r\n\t\tconst newIdentity = { ...identity }\r\n\t\tconst newTokens = { ...(newIdentity.validatorAuthTokens || {}), ...newAuth }\r\n\r\n\t\t// We don't want to update account if there is no actual change\r\n\t\tif (\r\n\t\t\tJSON.stringify(newIdentity.validatorAuthTokens) !==\r\n\t\t\tJSON.stringify(newTokens)\r\n\t\t) {\r\n\t\t\tnewIdentity.validatorAuthTokens = newTokens\r\n\t\t\tupdateAccount({ newValues: { identity: newIdentity } })(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function createSession({ wallet, identity, email, deleteLegacyKey }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('creating-session', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst newWallet = { ...wallet }\r\n\t\t\tconst sessionSignature =\r\n\t\t\t\tgetSig({\r\n\t\t\t\t\taddr: newWallet.address,\r\n\t\t\t\t\tmode: newWallet.authType,\r\n\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t}) || null\r\n\r\n\t\t\tconst hasSession =\r\n\t\t\t\t!!sessionSignature &&\r\n\t\t\t\t(await checkSession({\r\n\t\t\t\t\tauthSig: sessionSignature,\r\n\t\t\t\t\tskipErrToast: true,\r\n\t\t\t\t}))\r\n\r\n\t\t\tif (hasSession) {\r\n\t\t\t\tnewWallet.authSig = sessionSignature\r\n\t\t\t} else {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tsignature,\r\n\t\t\t\t\tmode,\r\n\t\t\t\t\tauthToken,\r\n\t\t\t\t\thash,\r\n\t\t\t\t\ttypedData,\r\n\t\t\t\t} = await getAuthSig({ wallet: newWallet })\r\n\r\n\t\t\t\tconst { status, expiryTime } = await getSession({\r\n\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t\tmode: mode,\r\n\t\t\t\t\tsignature: signature,\r\n\t\t\t\t\tauthToken: authToken,\r\n\t\t\t\t\thash,\r\n\t\t\t\t\ttypedData,\r\n\t\t\t\t\tsignerAddress: newWallet.address,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (status === 'OK') {\r\n\t\t\t\t\taddSig({\r\n\t\t\t\t\t\taddr: wallet.address,\r\n\t\t\t\t\t\tsig: signature,\r\n\t\t\t\t\t\tmode: wallet.authType,\r\n\t\t\t\t\t\texpiryTime: expiryTime,\r\n\t\t\t\t\t\tidentity: identity.address,\r\n\t\t\t\t\t})\r\n\t\t\t\t\tnewWallet.authSig = signature\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst account = {\r\n\t\t\t\temail: email,\r\n\t\t\t\twallet: newWallet,\r\n\t\t\t\tidentity: { ...identity },\r\n\t\t\t}\r\n\r\n\t\t\tconst leaderValidatorAuth = await getValidatorAuthToken({\r\n\t\t\t\tvalidatorId: VALIDATOR_LEADER_ID,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\taccount.identity.validatorAuthTokens = {\r\n\t\t\t\t[VALIDATOR_LEADER_ID]: leaderValidatorAuth,\r\n\t\t\t}\r\n\r\n\t\t\tupdateAccount({\r\n\t\t\t\tnewValues: { ...account },\r\n\t\t\t})(dispatch)\r\n\r\n\t\t\tif (deleteLegacyKey) {\r\n\t\t\t\tremoveLegacyKey({\r\n\t\t\t\t\temail: wallet.email,\r\n\t\t\t\t\tpassword: wallet.password,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_SESSION', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_GETTING_SESSION', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner('creating-session', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function getRelayerConfig() {\r\n\treturn async function(dispatch) {\r\n\t\tconst cfg = await getRelayerConfigData()\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_RELAYER_CFG,\r\n\t\t\tcfg,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nasync function getNetworkId() {\r\n\tconst { provider } = await getEthers(AUTH_TYPES.METAMASK.name)\r\n\tconst networkId = (await provider.getNetwork()).chainId\r\n\r\n\treturn networkId\r\n}\r\n\r\nasync function getNetworkData({ id }) {\r\n\tconst networkId = id || (await getNetworkId())\r\n\tconst network = ETHEREUM_NETWORKS[networkId] || {}\r\n\r\n\treturn network\r\n}\r\n\r\nexport function onMetamaskNetworkChange({ id } = {}) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { persist, router } = getState()\r\n\t\tconst { location } = router\r\n\t\tconst { account } = persist\r\n\t\tconst { search } = location\r\n\t\tconst { authType } = account.wallet\r\n\r\n\t\tconst isMetamaskMatters =\r\n\t\t\t(authType === AUTH_TYPES.METAMASK.name ||\r\n\t\t\t\t(!authType && search === '?metamask')) &&\r\n\t\t\t(await getEthereumProvider()) === AUTH_TYPES.METAMASK.name\r\n\r\n\t\tif (\r\n\t\t\tisMetamaskMatters &&\r\n\t\t\tprocess.env.NODE_ENV !== (await getNetworkData({ id })).for\r\n\t\t) {\r\n\t\t\tconfirmAction(\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: translate('WARNING'),\r\n\t\t\t\t\ttext: translate('WATNING_METAMASK_INVALID_NETWORK', {\r\n\t\t\t\t\t\targs: [ETHEREUM_NETWORKS[process.env.NODE_ENV].name],\r\n\t\t\t\t\t}),\r\n\t\t\t\t},\r\n\t\t\t\ttrue\r\n\t\t\t)(dispatch)\r\n\t\t} else {\r\n\t\t\tconfirmAction(null, null, {}, true, false)(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const onMetamaskAccountChange = accountAddress => {\r\n\treturn async function(_, getState) {\r\n\t\tconst state = getState()\r\n\t\tconst hasAuth = selectAuth(state)\r\n\t\tconst account = selectAccount(state)\r\n\t\tconst { authType, address } = account.wallet\r\n\r\n\t\tif (\r\n\t\t\thasAuth &&\r\n\t\t\tauthType === AUTH_TYPES.METAMASK.name &&\r\n\t\t\t(!accountAddress || address !== accountAddress)\r\n\t\t) {\r\n\t\t\tlogOut()\r\n\t\t} else if (!hasAuth) {\r\n\t\t\tconst identity = selectIdentity(state)\r\n\t\t\tconst { identityContractOwner } = identity\r\n\t\t\tlogOut(!identityContractOwner || identityContractOwner === accountAddress)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function metamaskAccountCheck() {\r\n\treturn async function(_, getState) {\r\n\t\tconst address = await ethereumSelectedAddress()\r\n\t\tonMetamaskAccountChange(address)(_, getState)\r\n\t}\r\n}\r\n\r\nexport function metamaskNetworkCheck() {\r\n\treturn async function(_, getState) {\r\n\t\tconst id = await ethereumNetworkId()\r\n\t\tonMetamaskNetworkChange({ id })(_, getState)\r\n\t}\r\n}\r\n\r\nexport function metamaskChecks() {\r\n\treturn async function(_, getState) {\r\n\t\tmetamaskNetworkCheck()(_, getState)\r\n\t\tmetamaskAccountCheck()(_, getState)\r\n\t\tif (window.ethereum) {\r\n\t\t\twindow.ethereum.on('accountsChanged', accounts => {\r\n\t\t\t\tconsole.log('acc changed', accounts[0])\r\n\t\t\t\tonMetamaskAccountChange(accounts[0])(_, getState)\r\n\t\t\t})\r\n\t\t\twindow.ethereum.on('networkChanged', network => {\r\n\t\t\t\tconsole.log('networkChanged', network)\r\n\t\t\t\tonMetamaskNetworkChange({ id: network })(_, getState)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n","const MAX_ASPECT_TOLERANCE = 5\r\n\r\nexport const isVideoMedia = (mime = '') => mime.split('/')[0] === 'video'\r\n\r\nconst getVideoSize = src =>\r\n\tnew Promise(resolve => {\r\n\t\tconst video = document.createElement('video')\r\n\t\tvideo.src = src\r\n\r\n\t\tvideo.onloadedmetadata = ({ target }) => {\r\n\t\t\treturn resolve({\r\n\t\t\t\twidth: target.videoWidth,\r\n\t\t\t\theight: target.videoHeight,\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\nconst getImageSize = src =>\r\n\tnew Promise(resolve => {\r\n\t\tconst image = new Image()\r\n\t\timage.src = src\r\n\t\timage.onload = function() {\r\n\t\t\treturn resolve({\r\n\t\t\t\twidth: this.width,\r\n\t\t\t\theight: this.height,\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\nexport const getMediaSize = ({ mime, src }) =>\r\n\tisVideoMedia(mime) ? getVideoSize(src) : getImageSize(src)\r\n\r\nexport const checkExactishAspect = (\r\n\twidthTarget,\r\n\twidth,\r\n\theightTarget,\r\n\theight,\r\n\tmaxPercentTolerance = MAX_ASPECT_TOLERANCE\r\n) => {\r\n\tif (widthTarget <= 0 || width <= 0 || heightTarget <= 0 || height <= 0) {\r\n\t\treturn false\r\n\t}\r\n\tconst targetAspect = parseFloat(widthTarget / heightTarget)\r\n\tconst aspect = parseFloat(width / height)\r\n\r\n\tconst aspectDiff = Math.abs(((targetAspect - aspect) / targetAspect) * 100)\r\n\r\n\tconst isValid =\r\n\t\twidthTarget <= width &&\r\n\t\theightTarget <= height &&\r\n\t\taspectDiff <= maxPercentTolerance\r\n\r\n\treturn isValid\r\n}\r\n","import { constants } from 'adex-models'\r\nimport { translate } from 'services/translations/translations'\r\n\r\nconst autocompleteLocationsSingleSelect = () => {\r\n\treturn constants.AllCountries.map(country => {\r\n\t\treturn {\r\n\t\t\tlabel: country.name,\r\n\t\t\tvalue: country.value,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst autocompleteGendersSingleSelect = () => {\r\n\treturn constants.Genders.map(gender => {\r\n\t\treturn {\r\n\t\t\tlabel: translate(gender.split('_')[1]),\r\n\t\t\tvalue: gender,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst autocompleteTagsSingleSelect = () => {\r\n\treturn constants.PredefinedTags.map(tag => {\r\n\t\treturn {\r\n\t\t\tlabel: tag._id,\r\n\t\t\tvalue: tag._id,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const AcLocations = autocompleteLocationsSingleSelect()\r\nexport const AcGenders = autocompleteGendersSingleSelect()\r\nexport const AcTags = autocompleteTagsSingleSelect()\r\n\r\nexport const SOURCES = {\r\n\tlocations: { src: AcLocations, collection: 'targeting' },\r\n\tgenders: { src: AcGenders, collection: 'targeting' },\r\n\ttags: { src: AcTags, collection: 'targeting' },\r\n\tcustom: { src: [], collection: 'targeting' },\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport {\r\n\tuploadImage,\r\n\tpostAdUnit,\r\n\tpostAdSlot,\r\n\tupdateAdSlot,\r\n\tupdateAdUnit,\r\n} from 'services/adex-market/actions'\r\nimport { parseUnits, bigNumberify } from 'ethers/utils'\r\nimport { Base, AdSlot, AdUnit, helpers } from 'adex-models'\r\nimport { addToast as AddToastUi, updateSpinner } from './uiActions'\r\nimport { updateValidatorAuthTokens } from './accountActions'\r\nimport { translate } from 'services/translations/translations'\r\nimport { getAllValidatorsAuthForIdentity } from 'services/smart-contracts/actions/stats'\r\nimport {\r\n\tgetAdUnits,\r\n\tgetAdSlots,\r\n\t// getCampaigns,\r\n} from 'services/adex-market/actions'\r\nimport {\r\n\topenChannel,\r\n\tcloseChannel,\r\n} from 'services/smart-contracts/actions/core'\r\nimport { lastApprovedState } from 'services/adex-validator/actions'\r\nimport initialState from 'store/initialState'\r\nimport { getMediaSize } from 'helpers/mediaHelpers'\r\n\r\nimport { contracts } from 'services/smart-contracts/contractsCfg'\r\nimport { SOURCES } from 'constants/targeting'\r\nimport { selectAccount, selectAuthSig } from 'selectors'\r\nconst { DAI } = contracts\r\n\r\nconst addToast = ({ type, toastStr, args, dispatch }) => {\r\n\treturn AddToastUi({\r\n\t\tdispatch: dispatch,\r\n\t\ttype: type,\r\n\t\taction: 'X',\r\n\t\tlabel: translate(toastStr, { args: args }),\r\n\t\ttimeout: 5000,\r\n\t})(dispatch)\r\n}\r\n\r\nconst getImgsIpfsFromBlob = ({ tempUrl, authSig }) => {\r\n\treturn fetch(tempUrl)\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.blob()\r\n\t\t})\r\n\t\t.then(imgBlob => {\r\n\t\t\tURL.revokeObjectURL(tempUrl)\r\n\t\t\treturn uploadImage({\r\n\t\t\t\timageBlob: imgBlob,\r\n\t\t\t\timageName: 'image.jpeg',\r\n\t\t\t\tauthSig: authSig,\r\n\t\t\t})\r\n\t\t})\r\n}\r\n\r\n// const uploadImages = ({ item, authSig }) => {\r\n// \tlet imgIpfsProm = Promise.resolve()\r\n// \tlet fallbackImgIpfsProm = Promise.resolve()\r\n\r\n// \tif (item._meta.img.tempUrl) {\r\n// \t\timgIpfsProm = getImgsIpfsFromBlob({ tempUrl: item._meta.img.tempUrl, authSig: authSig })\r\n// \t}\r\n\r\n// \tif (item._fallbackAdImg && item._fallbackAdImg.tempUrl) {\r\n// \t\tfallbackImgIpfsProm = getImgsIpfsFromBlob({ tempUrl: item._fallbackAdImg.tempUrl, authSig: authSig })\r\n// \t}\r\n\r\n// \treturn Promise.all([imgIpfsProm, fallbackImgIpfsProm])\r\n// \t\t.then(([imgIpf, fallbackImgIpfs]) => {\r\n// \t\t\tif (imgIpf) {\r\n// \t\t\t\titem._meta.img = { ipfs: imgIpf.ipfs }\r\n// \t\t\t}\r\n\r\n// \t\t\tif (fallbackImgIpfs) {\r\n// \t\t\t\titem._fallbackAdImg = { ipfs: fallbackImgIpfs.ipfs }\r\n// \t\t\t}\r\n\r\n// \t\t\treturn item\r\n// \t\t})\r\n// }\r\n\r\nexport function updateNewItem(item, newValues, itemType, objModel) {\r\n\titem = Base.updateObject({ item, newValues, objModel })\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NEW_ITEM,\r\n\t\t\titem,\r\n\t\t\titemType,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetNewItem(item) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_NEW_ITEM,\r\n\t\t\titem: item,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetAllNewItems() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ALL_NEW_ITEMS,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// register item\r\nexport function addUnit(item) {\r\n\tconst newItem = { ...item }\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst state = getState()\r\n\t\t\tconst authSig = selectAuthSig(state)\r\n\t\t\tconst imageIpfs = (await getImgsIpfsFromBlob({\r\n\t\t\t\ttempUrl: newItem.temp.tempUrl,\r\n\t\t\t\tauthSig,\r\n\t\t\t})).ipfs\r\n\r\n\t\t\tnewItem.mediaUrl = `ipfs://${imageIpfs}`\r\n\t\t\tnewItem.mediaMime = newItem.temp.mime\r\n\t\t\tnewItem.created = Date.now()\r\n\r\n\t\t\tconst resItem = await postAdUnit({\r\n\t\t\t\tunit: new AdUnit(newItem).marketAdd,\r\n\t\t\t\tauthSig,\r\n\t\t\t})\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.ADD_ITEM,\r\n\t\t\t\titem: new AdUnit(resItem).plainObj(),\r\n\t\t\t\titemType: 'AdUnit',\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_CREATING_ITEM',\r\n\t\t\t\targs: ['AdUnit', newItem.title],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_CREATING_ITEM', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CREATING_ITEM',\r\n\t\t\t\targs: ['AdUnit', err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function addSlot(item) {\r\n\tconst newItem = { ...item }\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst state = getState()\r\n\t\t\tconst authSig = selectAuthSig(state)\r\n\t\t\tlet fallbackUnit = null\r\n\t\t\tif (newItem.temp.useFallback) {\r\n\t\t\t\tconst imageIpfs = (await getImgsIpfsFromBlob({\r\n\t\t\t\t\ttempUrl: newItem.temp.tempUrl,\r\n\t\t\t\t\tauthSig,\r\n\t\t\t\t})).ipfs\r\n\r\n\t\t\t\tconst unit = new AdUnit({\r\n\t\t\t\t\ttype: newItem.type,\r\n\t\t\t\t\tmediaUrl: `ipfs://${imageIpfs}`,\r\n\t\t\t\t\ttargetUrl: newItem.targetUrl,\r\n\t\t\t\t\tmediaMime: newItem.temp.mime,\r\n\t\t\t\t\tcreated: Date.now(),\r\n\t\t\t\t\ttitle: newItem.title,\r\n\t\t\t\t\tdescription: newItem.description,\r\n\t\t\t\t\ttargeting: [],\r\n\t\t\t\t\ttags: [],\r\n\t\t\t\t\tpassback: true,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst resUnit = await postAdUnit({\r\n\t\t\t\t\tunit: unit.marketAdd,\r\n\t\t\t\t\tauthSig,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tfallbackUnit = resUnit.ipfs\r\n\t\t\t}\r\n\r\n\t\t\tnewItem.fallbackUnit = fallbackUnit\r\n\t\t\tnewItem.created = Date.now()\r\n\r\n\t\t\tif (newItem.temp.minPerImpression) {\r\n\t\t\t\tnewItem.minPerImpression = {\r\n\t\t\t\t\t[DAI.address]: parseUnits(newItem.temp.minPerImpression, DAI.decimals)\r\n\t\t\t\t\t\t.div(bigNumberify(1000))\r\n\t\t\t\t\t\t.toString(),\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst resItem = await postAdSlot({\r\n\t\t\t\tslot: new AdSlot(newItem).marketAdd,\r\n\t\t\t\tauthSig,\r\n\t\t\t})\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.ADD_ITEM,\r\n\t\t\t\titem: new AdSlot(resItem).plainObj(),\r\n\t\t\t\titemType: 'AdSlot',\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_CREATING_ITEM',\r\n\t\t\t\targs: ['AdSlot', newItem.title],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_CREATING_ITEM', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CREATING_ITEM',\r\n\t\t\t\targs: ['AdSlot', err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getAllItems() {\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst { account } = getState().persist\r\n\t\t\t// const { authSig } = account.wallet\r\n\t\t\tconst { address } = account.identity\r\n\t\t\tconst units = getAdUnits({ identity: address })\r\n\t\t\tconst slots = getAdSlots({ identity: address })\r\n\t\t\t// const campaigns = getCampaigns({ authSig })\r\n\r\n\t\t\tconst [\r\n\t\t\t\tresUnits,\r\n\t\t\t\tresSlots,\r\n\t\t\t\t// resCampaigns,\r\n\t\t\t] = await Promise.all([\r\n\t\t\t\tunits,\r\n\t\t\t\tslots,\r\n\t\t\t\t//\tcampaigns\r\n\t\t\t])\r\n\r\n\t\t\t// const campaignsMapped = resCampaigns.map(c => {\r\n\t\t\t// \treturn { ...c, ...c.spec }\r\n\t\t\t// })\r\n\r\n\t\t\tupdateItems({ items: resUnits, itemType: 'AdUnit' })(dispatch)\r\n\t\t\tupdateItems({ items: resSlots, itemType: 'AdSlot' })(dispatch)\r\n\t\t\t// updateItems({ items: campaignsMapped, itemType: 'Campaign' })(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_ITEMS', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_GETTING_ITEMS',\r\n\t\t\t\targs: [err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function openCampaign({ campaign }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('opening-campaign', true)(dispatch)\r\n\t\tconst account = selectAccount(getState())\r\n\t\ttry {\r\n\t\t\tawait getAllValidatorsAuthForIdentity({\r\n\t\t\t\twithBalance: [{ channel: campaign }],\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\tconst { readyCampaign } = await openChannel({\r\n\t\t\t\tcampaign,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.ADD_ITEM,\r\n\t\t\t\titem: readyCampaign,\r\n\t\t\t\titemType: 'Campaign',\r\n\t\t\t})\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'OPENING_CAMPAIGN_SENT_TO_RELAYER',\r\n\t\t\t\targs: [readyCampaign.id],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_OPENING_CAMPAIGN', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_OPENING_CAMPAIGN',\r\n\t\t\t\targs: [err],\r\n\t\t\t})\r\n\t\t}\r\n\t\tupdateSpinner('opening-campaign', false)(dispatch)\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nexport function removeItemFromItem({ item, toRemove, authSig } = {}) {\r\n\treturn function(dispatch) {\r\n\t\t// removeItmFromItm({ item: item._id, collection: toRemove._id || toRemove, authSig: authSig })\r\n\t\t// \t.then((res) => {\r\n\t\t// \t\taddToast({ dispatch: dispatch, type: 'accept', toastStr: 'SUCCESS_REMOVE_ITEM_FROM_ITEM', args: [ItemTypesNames[item._type], item._meta.fullName, ItemTypesNames[toRemove._type], toRemove._meta.fullName,] })\r\n\t\t// \t\treturn dispatch({\r\n\t\t// \t\t\ttype: types.REMOVE_ITEM_FROM_ITEM,\r\n\t\t// \t\t\titem: item,\r\n\t\t// \t\t\ttoRemove: toRemove,\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// \t.catch((err) => {\r\n\t\t// \t\treturn addToast({ dispatch: dispatch, type: 'cancel', toastStr: 'ERR_REMOVE_ITEM_FROM_ITEM', args: [ItemTypesNames[item._type], ItemTypesNames[toRemove._type], err] })\r\n\t\t// \t})\r\n\t}\r\n}\r\n\r\nexport function addItemToItem({ item, toAdd, authSig } = {}) {\r\n\treturn function(dispatch) {\r\n\t\t// addItmToItm({ item: item._id, collection: toAdd._id || toAdd, authSig: authSig })\r\n\t\t// \t.then((res) => {\r\n\t\t// \t\t//TODO: use response and UPDATE_ITEM\r\n\t\t// \t\taddToast({ dispatch: dispatch, type: 'accept', toastStr: 'SUCCESS_ADD_ITEM_TO_ITEM', args: [ItemTypesNames[item._type], item._meta.fullName, ItemTypesNames[toAdd._type], toAdd._meta.fullName,] })\r\n\t\t// \t\treturn dispatch({\r\n\t\t// \t\t\ttype: types.ADD_ITEM_TO_ITEM,\r\n\t\t// \t\t\titem: item,\r\n\t\t// \t\t\ttoAdd: toAdd,\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// \t.catch((err) => {\r\n\t\t// \t\treturn addToast({ dispatch: dispatch, type: 'cancel', toastStr: 'ERR_ADD_ITEM_FROM_ITEM', args: [ItemTypesNames[item._type], ItemTypesNames[toAdd._type], err] })\r\n\t\t// \t})\r\n\t}\r\n}\r\n\r\n// Accepts the entire new item and replace so be careful!\r\nexport function updateItem({ item, itemType } = {}) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('update' + item.id, true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst { account } = getState().persist\r\n\t\t\tconst { authSig } = account.wallet\r\n\r\n\t\t\tlet updatedItem = null\r\n\t\t\tlet objModel = null\r\n\r\n\t\t\tconst { id } = item\r\n\r\n\t\t\tswitch (itemType) {\r\n\t\t\t\tcase 'AdSlot':\r\n\t\t\t\t\tif (item.temp.minPerImpression) {\r\n\t\t\t\t\t\titem.minPerImpression = {\r\n\t\t\t\t\t\t\t[DAI.address]: parseUnits(\r\n\t\t\t\t\t\t\t\titem.temp.minPerImpression,\r\n\t\t\t\t\t\t\t\tDAI.decimals\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.div(bigNumberify(1000))\r\n\t\t\t\t\t\t\t\t.toString(),\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst slot = new AdSlot(item).marketUpdate\r\n\t\t\t\t\tupdatedItem = (await updateAdSlot({ slot, id, authSig })).slot\r\n\t\t\t\t\tobjModel = AdSlot\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'AdUnit':\r\n\t\t\t\t\tconst unit = new AdUnit(item).marketUpdate\r\n\t\t\t\t\tupdatedItem = (await updateAdUnit({ unit, id, authSig })).unit\r\n\t\t\t\t\tobjModel = AdUnit\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error(translate('INVALID_ITEM_TYPE'))\r\n\t\t\t}\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.UPDATE_ITEM,\r\n\t\t\t\titem: new objModel(updatedItem).plainObj(),\r\n\t\t\t\titemType,\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_UPDATING_ITEM',\r\n\t\t\t\targs: [itemType, item.title],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_UPDATING_ITEM', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_UPDATING_ITEM',\r\n\t\t\t\targs: [itemType, err],\r\n\t\t\t})\r\n\t\t}\r\n\t\tupdateSpinner('update' + item.id, false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function deleteItem({ item, objModel, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._deleted = true\r\n\r\n\t// return updateItem({ item: item, authSig: authSig, successMsg: 'SUCCESS_DELETING_ITEM', errMsg: 'ERR_DELETING_ITEM' })\r\n}\r\n\r\nexport function restoreItem({ item, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._deleted = false\r\n\r\n\treturn updateItem({\r\n\t\titem: item,\r\n\t\tauthSig: authSig,\r\n\t\tsuccessMsg: 'SUCCESS_RESTORE_ITEM',\r\n\t\terrMsg: 'ERR_RESTORING_ITEM',\r\n\t})\r\n}\r\n\r\nconst findSourceByTag = tag => {\r\n\treturn Object.keys(SOURCES).find(\r\n\t\titem => SOURCES[item].src.filter(data => data.value === tag).length > 0\r\n\t)\r\n}\r\n\r\nexport function cloneItem({ item, itemType, objModel } = {}) {\r\n\treturn async function(dispatch) {\r\n\t\ttry {\r\n\t\t\tconst newItem = Base.updateObject({ item, objModel })\r\n\t\t\tnewItem.id = ''\r\n\t\t\tnewItem.temp = {\r\n\t\t\t\t...initialState.newItem[itemType].temp,\r\n\t\t\t\ttargets: item.targeting.map((t, index) => {\r\n\t\t\t\t\tconst key = findSourceByTag(t.tag) || ''\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tkey: index,\r\n\t\t\t\t\t\tcollection: 'targeting',\r\n\t\t\t\t\t\tsource: key,\r\n\t\t\t\t\t\tlabel: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\t\t\t\tplaceholder: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\t\t\t\ttarget: { ...t },\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\r\n\t\t\tconst tempUrl = helpers.getMediaUrlWithProvider(\r\n\t\t\t\tnewItem.mediaUrl,\r\n\t\t\t\tprocess.env.IPFS_GATEWAY\r\n\t\t\t)\r\n\r\n\t\t\tconst response = await fetch(tempUrl)\r\n\t\t\tconst mediaURL = URL.createObjectURL(await response.blob())\r\n\t\t\tconst mediaSize = await getMediaSize({\r\n\t\t\t\tmime: newItem.mediaMime,\r\n\t\t\t\tsrc: mediaURL,\r\n\t\t\t})\r\n\r\n\t\t\tconst temp = {\r\n\t\t\t\t...newItem.temp,\r\n\t\t\t\tmime: item.mediaMime,\r\n\t\t\t\ttempUrl: mediaURL,\r\n\t\t\t\twidth: mediaSize.width,\r\n\t\t\t\theight: mediaSize.height,\r\n\t\t\t}\r\n\r\n\t\t\tnewItem.temp = temp\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: types.UPDATE_NEW_ITEM,\r\n\t\t\t\titem: newItem,\r\n\t\t\t\titemType,\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CLONING_ITEM',\r\n\t\t\t\targs: [itemType, err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function archiveItem({ item, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._archived = true\r\n\r\n\treturn updateItem({\r\n\t\titem: item,\r\n\t\tauthSig: authSig,\r\n\t\tsuccessMsg: 'SUCCESS_ARCHIVING_ITEM',\r\n\t\terrMsg: 'ERR_ARCHIVING_ITEM',\r\n\t})\r\n}\r\n\r\nexport function unarchiveItem({ item, authSig } = {}) {\r\n\titem = { ...item }\r\n\titem._archived = false\r\n\r\n\treturn updateItem({\r\n\t\titem: item,\r\n\t\tauthSig: authSig,\r\n\t\tsuccessMsg: 'SUCCESS_UNARCHIVING_ITEM',\r\n\t\terrMsg: 'ERR_UNARCHIVING_ITEM',\r\n\t})\r\n}\r\n\r\nexport function setCurrentItem(item) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.SET_CURRENT_ITEM,\r\n\t\t\titem: item,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateCurrentItem(item, newMeta) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_CURRENT_ITEM,\r\n\t\t\titem: item,\r\n\t\t\tmeta: newMeta,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function updateItems({ items, itemType }) {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ALL_ITEMS,\r\n\t\t\titems: items,\r\n\t\t\titemType: itemType,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const resetAllItems = () => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ALL_ITEMS,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const updateTags = ({ tags }) => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_TAGS,\r\n\t\t\ttags: tags,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const addNewTag = ({ tag }) => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.ADD_NEW_TAG,\r\n\t\t\ttag: tag,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const updateCampaignState = ({ campaign }) => {\r\n\treturn async dispatch => {\r\n\t\ttry {\r\n\t\t\tconst state = await lastApprovedState({ campaign })\r\n\t\t\tconst newCampaign = { ...campaign }\r\n\t\t\tnewCampaign.state = state\r\n\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: types.UPDATE_ITEM,\r\n\t\t\t\titem: newCampaign,\r\n\t\t\t\titemType: 'Campaign',\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_CAMPAIGN_LAST_STATUS', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch: dispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_GETTING_CAMPAIGN_LAST_STATUS',\r\n\t\t\t\targs: [err],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function closeCampaign({ campaign }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tupdateSpinner('closing-campaign', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst { account } = getState().persist\r\n\t\t\tconst { results, authTokens } = await closeChannel({ account, campaign })\r\n\r\n\t\t\tupdateValidatorAuthTokens({ newAuth: authTokens })(dispatch, getState)\r\n\t\t\t// TODO: update campaign state\r\n\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\ttoastStr: 'SUCCESS_CLOSING_CAMPAIGN',\r\n\t\t\t\targs: [campaign.id],\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_CLOSING_CAMPAIGN', err)\r\n\t\t\taddToast({\r\n\t\t\t\tdispatch,\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\ttoastStr: 'ERR_CLOSING_CAMPAIGN',\r\n\t\t\t\targs: [err],\r\n\t\t\t})\r\n\t\t}\r\n\t\tupdateSpinner('closing-campaign', false)(dispatch)\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport { grantAccount } from 'services/adex-relayer/actions'\r\nimport { updateSpinner } from './uiActions'\r\nimport { deployIdentityContract } from 'services/smart-contracts/actions/identity'\r\nimport {\r\n\tregisterFullIdentity,\r\n\tregisterExpectedIdentity,\r\n\tgetOwnerIdentities,\r\n} from 'services/adex-relayer/actions'\r\nimport { translate } from 'services/translations/translations'\r\nimport { addToast } from './uiActions'\r\nimport {\r\n\tgetIdentityDeployData,\r\n\twithdrawFromIdentity,\r\n\tsetIdentityPrivilege,\r\n} from 'services/smart-contracts/actions/identity'\r\nimport { addDataToWallet } from 'services/wallet/wallet'\r\nimport { saveToLocalStorage } from 'helpers/localStorageHelpers'\r\nimport { selectAccount } from 'selectors'\r\n\r\n// MEMORY STORAGE\r\nexport function updateIdentity(prop, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_IDENTITY,\r\n\t\t\tprop: prop,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetIdentity() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_IDENTITY,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function initIdentity({ email, authType }) {\r\n\treturn function(dispatch) {\r\n\t\tdispatch({\r\n\t\t\ttype: types.RESET_IDENTITY,\r\n\t\t})\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: types.UPDATE_IDENTITY,\r\n\t\t\tprop: 'email',\r\n\t\t\tvalue: email,\r\n\t\t})\r\n\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_IDENTITY,\r\n\t\t\tprop: 'authType',\r\n\t\t\tvalue: authType,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// MEMORY STORAGE\r\nexport function updateWallet(prop, value) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_WALLET,\r\n\t\t\tprop: prop,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetWallet() {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_WALLET,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function getGrantAccount({\r\n\twalletAddr,\r\n\temail,\r\n\tpassword,\r\n\tcoupon,\r\n\tauthType,\r\n}) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('getting-grant-identity', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst identityData = await grantAccount({\r\n\t\t\t\townerAddr: walletAddr,\r\n\t\t\t\tmail: email,\r\n\t\t\t\tcouponCode: coupon,\r\n\t\t\t})\r\n\r\n\t\t\t// TODO: validate identityData\r\n\r\n\t\t\tif (identityData) {\r\n\t\t\t\taddDataToWallet({\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tauthType,\r\n\t\t\t\t\tdataKey: 'identity',\r\n\t\t\t\t\tdataValue: identityData.address,\r\n\t\t\t\t})\r\n\t\t\t\taddDataToWallet({\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tauthType,\r\n\t\t\t\t\tdataKey: 'privileges',\r\n\t\t\t\t\tdataValue: identityData.privileges,\r\n\t\t\t\t})\r\n\t\t\t\tupdateIdentity('identityAddr', identityData.address)(dispatch)\r\n\t\t\t\tupdateIdentity('identityData', identityData)(dispatch)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_REGISTER_GRANT_IDENTITY', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_REGISTER_GRANT_IDENTITY', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\r\n\t\tupdateSpinner('getting-grant-identity', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function deployFullIdentity({\r\n\twallet,\r\n\temail,\r\n\tidentityTxData,\r\n\tidentityAddr,\r\n}) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('getting-full-identity', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst tx = await deployIdentityContract({\r\n\t\t\t\t...identityTxData,\r\n\t\t\t\twallet,\r\n\t\t\t})\r\n\r\n\t\t\tconst regInfo = await registerFullIdentity({\r\n\t\t\t\ttxHash: tx.hash,\r\n\t\t\t\tidentity: identityAddr,\r\n\t\t\t\tprivileges: [wallet.address, 3],\r\n\t\t\t\tmail: email,\r\n\t\t\t})\r\n\r\n\t\t\tif (regInfo) {\r\n\t\t\t\tupdateIdentity('isRegistered', true)(dispatch)\r\n\t\t\t} else {\r\n\t\t\t\taddToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\tlabel: translate('ERR_REGISTER_IDENTITY', { args: [tx.hash] }),\r\n\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t})(dispatch)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_REGISTER_IDENTITY', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_REGISTER_IDENTITY', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateSpinner('getting-full-identity', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function getIdentityTxData({ owner, privLevel }) {\r\n\treturn async function(dispatch) {\r\n\t\ttry {\r\n\t\t\tconst txData = await getIdentityDeployData({ owner, privLevel })\r\n\t\t\tupdateIdentity('identityAddr', txData.identityAddr)(dispatch)\r\n\t\t\tupdateIdentity('identityTxData', txData)(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GET_IDENTITY_TX_DATA', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_GET_IDENTITY_TX_DATA', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getRegisterExpectedIdentity({ owner, mail }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('getting-expected-identity', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst identityData = await registerExpectedIdentity({ owner, mail })\r\n\t\t\tupdateIdentity('identityData', identityData)(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_REGISTERING_EXPECTED_IDENTITY', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_REGISTERING_EXPECTED_IDENTITY', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateSpinner('getting-expected-identity', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function onUploadLocalWallet(event) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('uploading-account-data', true)(dispatch)\r\n\t\tconst file = event.target.files[0]\r\n\t\tconst reader = new FileReader()\r\n\r\n\t\treader.onload = ev => {\r\n\t\t\ttry {\r\n\t\t\t\tconst obj = JSON.parse(ev.target.result)\r\n\t\t\t\tif (\r\n\t\t\t\t\t!obj ||\r\n\t\t\t\t\t!obj.key ||\r\n\t\t\t\t\t!obj.wallet ||\r\n\t\t\t\t\t!obj.wallet.data ||\r\n\t\t\t\t\t!obj.wallet.identity ||\r\n\t\t\t\t\t!obj.wallet.privileges\r\n\t\t\t\t) {\r\n\t\t\t\t\tthrow new Error(translate('INVALID_JSON_DATA'))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsaveToLocalStorage(obj.wallet, obj.key)\r\n\t\t\t\t\taddToast({\r\n\t\t\t\t\t\ttype: 'accept',\r\n\t\t\t\t\t\tlabel: translate('SUCCESS_UPLOADING_ACCOUNT_DATA'),\r\n\t\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t\t})(dispatch)\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Error uploading account json data: ', err)\r\n\t\t\t\taddToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\tlabel: translate('ERR_UPLOADING_ACCOUNT_DATA', {\r\n\t\t\t\t\t\targs: [err.message],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})(dispatch)\r\n\t\t\t}\r\n\t\t\tupdateSpinner('uploading-account-data', true)(dispatch)\r\n\t\t}\r\n\r\n\t\tconst onError = err => {\r\n\t\t\tconsole.error('Error uploading account data.', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_UPLOADING_ACCOUNT_DATA', { args: [err] }),\r\n\t\t\t\ttimeout: 5000,\r\n\t\t\t})(dispatch)\r\n\t\t\tupdateSpinner('uploading-account-data', true)(dispatch)\r\n\t\t}\r\n\r\n\t\treader.onerror = ev => {\r\n\t\t\treader.abort()\r\n\t\t\tonError(translate())\r\n\t\t}\r\n\r\n\t\treader.onabort = ev => {\r\n\t\t\tonError(translate('ABORTING_DATA_UPLOAD'))\r\n\t\t}\r\n\r\n\t\treader.readAsText(file)\r\n\t}\r\n}\r\n\r\nexport function identityWithdraw({\r\n\tamountToWithdraw,\r\n\twithdrawTo,\r\n\ttokenAddress,\r\n}) {\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst account = selectAccount(getState())\r\n\t\t\tconst result = await withdrawFromIdentity({\r\n\t\t\t\taccount,\r\n\t\t\t\tamountToWithdraw,\r\n\t\t\t\twithdrawTo,\r\n\t\t\t\ttokenAddress,\r\n\t\t\t})\r\n\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\tlabel: translate('IDENTITY_WITHDRAW_NOTIFICATION', { args: [result] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_IDENTITY_WITHDRAW_NOTIFICATION', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_IDENTITY_WITHDRAW_NOTIFICATION', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function ownerIdentities({ owner }) {\r\n\treturn async function(dispatch) {\r\n\t\tupdateSpinner('getting-owner-identities', true)(dispatch)\r\n\t\ttry {\r\n\t\t\tconst identityData = await getOwnerIdentities({ owner })\r\n\t\t\tupdateIdentity('ownerIdentities', identityData)(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_GETTING_OWNER_IDENTITIES', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_GETTING_OWNER_IDENTITIES', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateSpinner('getting-owner-identities', false)(dispatch)\r\n\t}\r\n}\r\n\r\nexport function addrIdentityPrivilege({ setAddr, privLevel }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\ttry {\r\n\t\t\tconst account = selectAccount(getState())\r\n\t\t\tconst result = await setIdentityPrivilege({\r\n\t\t\t\taccount,\r\n\t\t\t\tsetAddr,\r\n\t\t\t\tprivLevel,\r\n\t\t\t})\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'accept',\r\n\t\t\t\tlabel: translate('IDENTITY_SET_ADDR_PRIV_NOTIFICATION', {\r\n\t\t\t\t\targs: [result],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_IDENTITY_SET_ADDR_PRIV_NOTIFICATION', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_IDENTITY_SET_ADDR_PRIV_NOTIFICATION', {\r\n\t\t\t\t\targs: [err],\r\n\t\t\t\t}),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\n\r\n// MEMORY STORAGE\r\nexport function updateNewBid({ bidId, key, value }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_NEW_BID,\r\n\t\t\tbidId: bidId,\r\n\t\t\tkey: key,\r\n\t\t\tvalue: value,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport function resetNewBid({ bidId }) {\r\n\treturn function(dispatch) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_NEW_BID,\r\n\t\t\tbidId: bidId,\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// PERSIST STORAGE\r\n\r\nexport const updateBids = ({ advBids, pubBids, bidsById }) => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.UPDATE_ALL_BIDS,\r\n\t\t\tadvBids: advBids,\r\n\t\t\tpubBids: pubBids,\r\n\t\t\tbidsById: bidsById,\r\n\t\t})\r\n\t}\r\n}\r\nexport const resetAllBids = () => {\r\n\treturn dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ALL_BIDS,\r\n\t\t})\r\n\t}\r\n}\r\n","import { ethers, constants } from 'ethers'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { isEthAddress } from 'helpers/validators'\r\nimport ERC20TokenABI from 'services/smart-contracts/abi/ERC20Token'\r\n\r\nexport const isEthAddressERC20 = async (addr = '', authType) => {\r\n\ttry {\r\n\t\tif (isEthAddress(addr)) {\r\n\t\t\tconst { provider } = await getEthers(authType)\r\n\t\t\tconst contract = new ethers.Contract(addr, ERC20TokenABI, provider)\r\n\t\t\tawait Promise.all([\r\n\t\t\t\tcontract.totalSupply(),\r\n\t\t\t\tcontract.balanceOf(constants.AddressZero),\r\n\t\t\t\tcontract.allowance(constants.AddressZero, constants.AddressZero),\r\n\t\t\t])\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t} catch (error) {\r\n\t\treturn false\r\n\t}\r\n}\r\n\r\nexport const getERC20Balance = async ({\r\n\taddr = '',\r\n\tbalanceFor = '',\r\n\tauthType,\r\n}) => {\r\n\ttry {\r\n\t\tconst { provider } = await getEthers(authType)\r\n\t\tconst contract = new ethers.Contract(addr, ERC20TokenABI, provider)\r\n\t\tconst balance = await contract.balanceOf(balanceFor)\r\n\r\n\t\treturn balance\r\n\t} catch (error) {\r\n\t\tconsole.error('ERR_GETTING_ERC20_BALANCE')\r\n\t\treturn null\r\n\t}\r\n}\r\n","import { getEthers } from 'services/smart-contracts/ethers'\r\n\r\nexport const isConnectionLost = async authType => {\r\n\ttry {\r\n\t\t// When we remove Metamask\r\n\t\t// if in 5 sec doesn't connect will\r\n\t\t// return that connection is lost\r\n\t\tconst eth = await Promise.race([\r\n\t\t\tgetEthers(authType),\r\n\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\treject('Timed out')\r\n\t\t\t\t}, 5000)\r\n\t\t\t}),\r\n\t\t])\r\n\t\tawait eth.provider.getBlockNumber()\r\n\t\treturn false\r\n\t} catch (error) {\r\n\t\treturn true\r\n\t}\r\n}\r\n","import { utils } from 'ethers'\r\nimport { isEthAddressERC20 } from 'services/smart-contracts/actions/erc20'\r\nimport { isConnectionLost } from 'services/smart-contracts/actions/common'\r\n\r\n/*eslint-disable */\r\nconst urlRegex = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/\r\nconst emailRegex = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\r\nconst onlyDigitsRegex = /^([1-9]+\\d*)$/\r\n// Min 8 chars - at least 1 uppercase, 1 lowercase, 1 digit\r\nconst passwordRegex = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/\r\nconst couponRegex = /^[a-fA-F0-9]{8}$/\r\n/*eslint-enable */\r\n\r\nexport const validUrl = url => {\r\n\turl = url || ''\r\n\tconst isValid = urlRegex.test(url)\r\n\treturn isValid\r\n}\r\n\r\nexport const validEmail = email => {\r\n\temail = email || ''\r\n\tconst isValid = emailRegex.test(email)\r\n\treturn isValid\r\n}\r\n\r\nexport const validateNumber = numberStr => {\r\n\tnumberStr = numberStr || ''\r\n\tconst isValid =\r\n\t\t!isNaN(parseFloat(numberStr)) && isFinite(numberStr) && numberStr > 0\r\n\treturn isValid\r\n}\r\n\r\n// > 0\r\nexport const validPositiveInt = intStr => {\r\n\tintStr = intStr || ''\r\n\tconst isValid = onlyDigitsRegex.test(intStr)\r\n\treturn isValid\r\n}\r\n\r\nexport const validName = name => {\r\n\tlet msg = ''\r\n\tconst errMsgArgs = []\r\n\tif (!name) {\r\n\t\tmsg = 'ERR_REQUIRED_FIELD'\r\n\t} else if (name.length < 4) {\r\n\t\tmsg = 'ERR_MIN_LENGTH'\r\n\t\terrMsgArgs.push(4)\r\n\t} else if (name.length > 128) {\r\n\t\tmsg = 'ERR_MAX_LENGTH'\r\n\t\terrMsgArgs.push(128)\r\n\t}\r\n\r\n\treturn {\r\n\t\tmsg,\r\n\t\terrMsgArgs,\r\n\t}\r\n}\r\n\r\nexport const validPassword = password => {\r\n\tpassword = password || ''\r\n\tconst isValid = passwordRegex.test(password)\r\n\treturn isValid\r\n}\r\n\r\nexport const validQuickAccountCoupon = coupon => {\r\n\tcoupon = coupon || ''\r\n\tconst isValid = couponRegex.test(coupon)\r\n\treturn isValid\r\n}\r\n\r\nexport const isEthAddress = (addr = '') => {\r\n\ttry {\r\n\t\tutils.getAddress(addr)\r\n\t} catch (e) {\r\n\t\treturn false\r\n\t}\r\n\treturn true\r\n}\r\n\r\nexport const isEthAddressZero = (addr = '') => {\r\n\treturn isEthAddress(addr)\r\n\t\t? utils.bigNumberify(utils.getAddress(addr)).isZero()\r\n\t\t: false\r\n}\r\n\r\nexport const validEthAddress = async ({\r\n\taddr = '',\r\n\tnonZeroAddr,\r\n\tnonERC20,\r\n\tauthType,\r\n}) => {\r\n\tlet msg = ''\r\n\ttry {\r\n\t\tconst ethAddressZero = isEthAddressZero(addr)\r\n\t\tconst notEthAddress = !isEthAddress(addr)\r\n\t\tif (notEthAddress) {\r\n\t\t\tmsg = 'ERR_INVALID_ETH_ADDRESS'\r\n\t\t} else {\r\n\t\t\tif (nonZeroAddr && ethAddressZero) {\r\n\t\t\t\tmsg = 'ERR_INVALID_ETH_ADDRESS_ZERO'\r\n\t\t\t} else {\r\n\t\t\t\tconst connectionLost = await isConnectionLost(authType)\r\n\t\t\t\tif (connectionLost) {\r\n\t\t\t\t\tmsg = 'ERR_INVALID_CONNECTION_LOST'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst ethAddressERC20 = await isEthAddressERC20(addr)\r\n\t\t\t\t\tif (!ethAddressZero && nonERC20 && ethAddressERC20)\r\n\t\t\t\t\t\tmsg = 'ERR_INVALID_ETH_ADDRESS_TOKEN'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tif (error === 'Non-Ethereum browser detected.')\r\n\t\t\tmsg = 'ERR_INVALID_CONNECTION_LOST'\r\n\t}\r\n\treturn { msg }\r\n}\r\n","import { updateSpinner } from './uiActions'\r\nimport { validEthAddress } from '../helpers/validators'\r\nimport { translate } from 'services/translations/translations'\r\nimport { addToast } from './uiActions'\r\nimport { getERC20Balance } from 'services/smart-contracts/actions/erc20'\r\nimport { formatUnits, bigNumberify } from 'ethers/utils'\r\n\r\nexport function validateAddress({ addr, dirty, validate, name, setBalance }) {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { wallet, identity } = getState().persist.account\r\n\t\tconst { authType } = wallet\r\n\t\ttry {\r\n\t\t\tif (validate) validate(name, { isValid: false })\r\n\t\t\tupdateSpinner(name, dirty)(dispatch)\r\n\t\t\tconst { msg } = await validEthAddress({\r\n\t\t\t\taddr,\r\n\t\t\t\tnonZeroAddr: true,\r\n\t\t\t\tnonERC20: !setBalance,\r\n\t\t\t\tauthType,\r\n\t\t\t})\r\n\t\t\tconst isValid = !msg\r\n\r\n\t\t\tif (typeof setBalance === 'function') {\r\n\t\t\t\tconst balance =\r\n\t\t\t\t\t(await getERC20Balance({\r\n\t\t\t\t\t\taddr,\r\n\t\t\t\t\t\tauthType,\r\n\t\t\t\t\t\tbalanceFor: identity.address,\r\n\t\t\t\t\t})) || bigNumberify('0')\r\n\t\t\t\tsetBalance(formatUnits(balance, 18))\r\n\t\t\t}\r\n\t\t\tif (validate)\r\n\t\t\t\tvalidate(name, { isValid: isValid, err: { msg: msg }, dirty: dirty })\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('ERR_VALIDATING_ETH_ADDRESS', error)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_VALIDATING_ETH_ADDRESS', { args: [error] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t\tupdateSpinner(name, false)(dispatch)\r\n\t}\r\n}\r\n","import * as types from 'constants/actionTypes'\r\nimport { addToast, removeToast, confirmAction } from './uiActions'\r\nimport { translate } from 'services/translations/translations'\r\nimport {\r\n\tgetValidatorAuthToken,\r\n\tidentityAnalytics,\r\n} from 'services/adex-validator/actions'\r\nimport { updateValidatorAuthTokens } from './accountActions'\r\nimport {\r\n\tVALIDATOR_ANALYTICS_SIDES,\r\n\tVALIDATOR_ANALYTICS_EVENT_TYPES,\r\n\tVALIDATOR_ANALYTICS_METRICS,\r\n\tVALIDATOR_ANALYTICS_TIMEFRAMES,\r\n} from 'constants/misc'\r\n\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\n\r\nconst analyticsParams = () => {\r\n\tconst callsParams = []\r\n\r\n\tVALIDATOR_ANALYTICS_SIDES.forEach(side =>\r\n\t\tVALIDATOR_ANALYTICS_EVENT_TYPES.forEach(eventType =>\r\n\t\t\tVALIDATOR_ANALYTICS_METRICS.forEach(metric =>\r\n\t\t\t\tVALIDATOR_ANALYTICS_TIMEFRAMES.forEach(timeframe => {\r\n\t\t\t\t\tcallsParams.push({\r\n\t\t\t\t\t\tmetric,\r\n\t\t\t\t\t\ttimeframe: timeframe.value,\r\n\t\t\t\t\t\tside,\r\n\t\t\t\t\t\teventType,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t)\r\n\t)\r\n\r\n\treturn callsParams\r\n}\r\n\r\n// getIdentityStatistics tooks to long some times\r\n// if the account is change we do not update the account\r\n// TODO: we can use something for abortable tasks\r\nfunction checkAccountChanged(getState, account) {\r\n\tconst accountCheck = getState().persist.account\r\n\tconst accountChanged =\r\n\t\t!accountCheck.wallet.address ||\r\n\t\taccountCheck.wallet.address !== account.wallet.address ||\r\n\t\t!accountCheck.identity.address ||\r\n\t\t!accountCheck.identity.address !== !account.identity.address\r\n\r\n\treturn accountChanged\r\n}\r\n\r\nexport function updateAccountAnalytics() {\r\n\treturn async function(dispatch, getState) {\r\n\t\tconst { account } = getState().persist\r\n\t\ttry {\r\n\t\t\tconst toastId = addToast({\r\n\t\t\t\ttype: 'warning',\r\n\t\t\t\tlabel: translate('SIGN_VALIDATORS_AUTH'),\r\n\t\t\t\ttimeout: false,\r\n\t\t\t\tunclosable: true,\r\n\t\t\t\ttop: true,\r\n\t\t\t})(dispatch)\r\n\r\n\t\t\tconst leaderAuth = await getValidatorAuthToken({\r\n\t\t\t\tvalidatorId: VALIDATOR_LEADER_ID,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\r\n\t\t\tremoveToast(toastId)(dispatch)\r\n\r\n\t\t\tupdateValidatorAuthTokens({\r\n\t\t\t\tnewAuth: { [VALIDATOR_LEADER_ID]: leaderAuth },\r\n\t\t\t})(dispatch, getState)\r\n\r\n\t\t\tconst params = analyticsParams()\r\n\t\t\tlet accountChanged = false\r\n\t\t\tconst allAnalytics = params.map(async opts => {\r\n\t\t\t\tidentityAnalytics({\r\n\t\t\t\t\t...opts,\r\n\t\t\t\t\tleaderAuth,\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\taccountChanged =\r\n\t\t\t\t\t\t\taccountChanged || checkAccountChanged(getState, account)\r\n\r\n\t\t\t\t\t\tif (!accountChanged) {\r\n\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\ttype: types.UPDATE_ANALYTICS,\r\n\t\t\t\t\t\t\t\t...opts,\r\n\t\t\t\t\t\t\t\tvalue: { ...res },\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.error('ERR_ANALYTICS_SINGLE', err)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tawait Promise.all(allAnalytics)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('ERR_ANALYTICS', err)\r\n\t\t\taddToast({\r\n\t\t\t\ttype: 'cancel',\r\n\t\t\t\tlabel: translate('ERR_ANALYTICS', { args: [err] }),\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t})(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function resetAnalytics() {\r\n\treturn async function(dispatch, getState) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: types.RESET_ANALYTICS,\r\n\t\t})\r\n\t}\r\n}\r\n","import * as common from './common'\r\nimport * as itemActions from './itemActions'\r\nimport * as uiActions from './uiActions'\r\nimport * as accountActions from './accountActions'\r\nimport * as identityActions from './identityActions'\r\nimport * as bidActions from './bidActions'\r\nimport * as transactionActions from './transactionActions'\r\nimport * as validationActions from './validationActions'\r\nimport * as analyticsActions from './analyticsActions'\r\n\r\n// keep it for class components that use connect and actions prop\r\n// without needing to change the code\r\nexport default {\r\n\t...common,\r\n\t...itemActions,\r\n\t...uiActions,\r\n\t...accountActions,\r\n\t...identityActions,\r\n\t...bidActions,\r\n\t...transactionActions,\r\n\t...validationActions,\r\n\t...analyticsActions,\r\n}\r\n\r\n// used for minimal deps in hook components\r\n// import { execute, addTost } from 'actions'\r\n// execute(addTost())\r\nexport * from './common'\r\nexport * from './itemActions'\r\nexport * from './uiActions'\r\nexport * from './accountActions'\r\nexport * from './identityActions'\r\nexport * from './bidActions'\r\nexport * from './transactionActions'\r\nexport * from './analyticsActions'\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\r\nimport ErrorIcon from '@material-ui/icons/Error'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nconst variantIcon = {\r\n\taccept: CheckCircleIcon,\r\n\tsuccess: CheckCircleIcon,\r\n\twarning: WarningIcon,\r\n\tcancel: ErrorIcon,\r\n\terror: ErrorIcon,\r\n\tinfo: InfoIcon,\r\n}\r\n\r\nexport class Toast extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tactive: false,\r\n\t\t\ttoast: {},\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tlet toast = this.state.toast\r\n\t\tlet nextToast = nextProps.toasts[0]\r\n\r\n\t\tif (!nextToast) {\r\n\t\t\tthis.setState({ active: false, toast: {} })\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet isNewToast = !!nextToast && toast.id !== nextToast.id\r\n\r\n\t\tif (isNewToast) {\r\n\t\t\tthis.setState({ active: true, toast: nextToast })\r\n\t\t}\r\n\t}\r\n\r\n\tclose = id => {\r\n\t\tthis.setState({ active: false })\r\n\t\tthis.props.actions.removeToast(id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { toast } = this.state\r\n\t\tconst { classes } = this.props\r\n\t\tconst Icon = variantIcon[toast.type]\r\n\r\n\t\tif (!toast || !Icon) return null\r\n\r\n\t\tconst anchorOrigin = toast.anchorOrigin || {\r\n\t\t\tvertical: 'bottom',\r\n\t\t\thorizontal: 'center',\r\n\t\t}\r\n\r\n\t\tif (toast.top) {\r\n\t\t\tanchorOrigin.horizontal = 'center'\r\n\t\t\tanchorOrigin.vertical = 'top'\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Snackbar\r\n\t\t\t\topen={this.state.active}\r\n\t\t\t\tautoHideDuration={toast.timeout || 0}\r\n\t\t\t\tonClose={() => !toast.unclosable && this.close(toast.id)}\r\n\t\t\t\tanchorOrigin={anchorOrigin}\r\n\t\t\t>\r\n\t\t\t\t<SnackbarContent\r\n\t\t\t\t\taria-describedby='client-snackbar'\r\n\t\t\t\t\tmessage={\r\n\t\t\t\t\t\t<span id='client-snackbar' className={classes.message}>\r\n\t\t\t\t\t\t\t<Icon className={classnames(classes.icon, classes.iconVariant)} />\r\n\t\t\t\t\t\t\t{(toast.label || '').toString()}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t}\r\n\t\t\t\t\taction={[\r\n\t\t\t\t\t\t!toast.unclosable && (\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tkey='close'\r\n\t\t\t\t\t\t\t\taria-label='Close'\r\n\t\t\t\t\t\t\t\tcolor='inherit'\r\n\t\t\t\t\t\t\t\tclassName={classes.close}\r\n\t\t\t\t\t\t\t\tonClick={() => !toast.unclosable && this.close(toast.id)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CloseIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tclassName={classnames(classes.snackbar, {\r\n\t\t\t\t\t\t[classes.top]: !!toast.top,\r\n\t\t\t\t\t\t[classes.accept]: toast.type === 'accept',\r\n\t\t\t\t\t\t[classes.cancel]: toast.type === 'cancel',\r\n\t\t\t\t\t\t[classes.warning]: toast.type === 'warning',\r\n\t\t\t\t\t})}\r\n\t\t\t\t/>\r\n\t\t\t</Snackbar>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nToast.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\ttoasts: PropTypes.array.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\t// let persist = state.persist\r\n\tlet memory = state.memory\r\n\treturn {\r\n\t\ttoasts: memory.toasts || [],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withStyles(styles)(Toast))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tsnackbar: {\r\n\t\t\tborder: '3px solid',\r\n\t\t\tborderRadius: 0,\r\n\t\t\tbackgroundColor: '#222',\r\n\t\t\t'&.active': {\r\n\t\t\t\ttransform: 'translateY(-20%)',\r\n\t\t\t},\r\n\t\t\tmargin: spacing,\r\n\t\t},\r\n\t\twarning: {\r\n\t\t\tborderColor: '#FFAB00',\r\n\t\t\tcolor: '#FFAB00',\r\n\t\t},\r\n\t\tcancel: {\r\n\t\t\tborderColor: '#FF5722',\r\n\t\t\tcolor: '#FF5722',\r\n\t\t},\r\n\t\taccept: {\r\n\t\t\tborderColor: '#00E676',\r\n\t\t\tcolor: '#00E676',\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\tfontSize: 20,\r\n\t\t},\r\n\t\ticonVariant: {\r\n\t\t\topacity: 0.9,\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tmessage: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\talignItems: 'center',\r\n\t\t\twordBreak: 'break-all',\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\twidth: '98vw',\r\n\t\t\tmaxWidth: '98vw',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { translate } from 'services/translations/translations'\r\nimport { selectLang } from 'selectors'\r\n\r\nexport default function Translate(Decorated) {\r\n\tfunction Translated(props) {\r\n\t\tconst language = useSelector(selectLang)\r\n\r\n\t\tconst t = (val, { isProp = false, args = [''] } = {}) => {\r\n\t\t\tconst translation = translate(val, { isProp, args }, language)\r\n\r\n\t\t\treturn translation\r\n\t\t}\r\n\r\n\t\treturn <Decorated {...props} t={t} />\r\n\t}\r\n\r\n\treturn Translated\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport Button from '@material-ui/core/Button'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nexport class Confirm extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.cancel = this.cancel.bind(this)\r\n\t\tthis.confirm = this.confirm.bind(this)\r\n\t\tthis.state = {\r\n\t\t\tactive: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tthis.setState({ active: nextProps.visible })\r\n\t}\r\n\r\n\tconfirm() {\r\n\t\tif (typeof this.props.confirm === 'function') {\r\n\t\t\tthis.props.confirm()\r\n\t\t}\r\n\t\tthis.setState({ active: false })\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tif (typeof this.props.cancel === 'function') {\r\n\t\t\tthis.props.cancel()\r\n\t\t}\r\n\r\n\t\tthis.setState({ active: false })\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\ttitle,\r\n\t\t\ttext,\r\n\t\t\tchildren,\r\n\t\t\tcancelLabel,\r\n\t\t\tconfirmLabel,\r\n\t\t\tt,\r\n\t\t\tnoActionBtns,\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<Dialog open={this.state.active}>\r\n\t\t\t\t<DialogTitle id='alert-dialog-title'>{title}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText id='alert-dialog-description'>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t{!noActionBtns && (\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.cancel} color='primary'>\r\n\t\t\t\t\t\t\t{cancelLabel || t('CANCEL')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button onClick={this.confirm} color='primary' autoFocus>\r\n\t\t\t\t\t\t\t{confirmLabel || t('OK')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t)}\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nConfirm.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tcancelLabel: PropTypes.string,\r\n\tconfirmLabel: PropTypes.string,\r\n\ttitle: PropTypes.string.isRequired,\r\n\ttext: PropTypes.string,\r\n\tconfirm: PropTypes.func,\r\n\tcancel: PropTypes.func,\r\n\tvisible: PropTypes.bool,\r\n\tcalledOn: PropTypes.number,\r\n\tnoActionBtns: PropTypes.bool,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tstate = state.memory\r\n\treturn {\r\n\t\tcancelLabel: state.confirm.data.cancelLabel,\r\n\t\tconfirmLabel: state.confirm.data.confirmLabel,\r\n\t\ttitle: state.confirm.data.title || '',\r\n\t\ttext: state.confirm.data.text || '',\r\n\t\tconfirm: state.confirm.onConfirm,\r\n\t\tcancel: state.confirm.onCancel,\r\n\t\tvisible: state.confirm.active || false,\r\n\t\tcalledOn: state.confirm.calledOn,\r\n\t\tnoActionBtns: state.confirm.noActionBtns,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(Confirm))\r\n","import React from 'react'\r\n// import PropTypes from 'prop-types'\r\nimport { withRouter } from 'react-router'\r\n\r\nexport const withReactRouterLink = Component => {\r\n\tclass Decorated extends React.Component {\r\n\t\tresolveToLocation = to => {\r\n\t\t\tconst path = typeof to === 'object' ? to : { pathname: to }\r\n\t\t\tconst href = this.props.history.createHref(path)\r\n\t\t\treturn href\r\n\t\t}\r\n\r\n\t\thandleClick = async event => {\r\n\t\t\tevent.preventDefault()\r\n\t\t\tevent.stopPropagation()\r\n\t\t\tconst { to, onClick } = this.props\r\n\r\n\t\t\tif (onClick && typeof onClick === 'function') {\r\n\t\t\t\tawait onClick()\r\n\t\t\t\tthis.props.history.push(to)\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.history.push(to)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// TODO: check if it works without infinite loops\r\n\t\t// shouldComponentUpdate(nextProps, nextState) {\r\n\t\t//   // const { to } = this.props;\r\n\t\t//   return this.resolveToLocation(this.props.to) !== this.resolveToLocation(nextProps.to)\r\n\t\t// }\r\n\r\n\t\trender() {\r\n\t\t\tconst {\r\n\t\t\t\tto,\r\n\t\t\t\tmatch,\r\n\t\t\t\tlocation,\r\n\t\t\t\thistory,\r\n\t\t\t\tstaticContext,\r\n\t\t\t\tonClick,\r\n\t\t\t\t...rest\r\n\t\t\t} = this.props\r\n\t\t\tconst toLocation = this.resolveToLocation(to)\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Component {...rest} href={toLocation} onClick={this.handleClick} />\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\treturn withRouter(Decorated)\r\n}\r\n","import React from 'react'\r\nimport SvgIcon from '@material-ui/core/SvgIcon'\r\nimport pure from 'recompose/pure'\r\n\r\nexport default (path, displayName, viewBox = '') => {\r\n\tlet Icon = props => (\r\n\t\t<SvgIcon viewBox={viewBox} {...props}>\r\n\t\t\t{path}\r\n\t\t</SvgIcon>\r\n\t)\r\n\r\n\tIcon.displayName = displayName\r\n\tIcon = pure(Icon)\r\n\tIcon.muiName = 'SvgIcon'\r\n\r\n\treturn Icon\r\n}\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path d='M7.23,5.37,1.4,5.3A1.34,1.34,0,0,0,0,6.63L.07,10.3a1.42,1.42,0,0,0,1.08,1.32,1.52,1.52,0,0,0,.37,0H2.2L.88,16.39a.72.72,0,0,0,.47.85h0a1.93,1.93,0,0,0,1.45-.05,1.7,1.7,0,0,0,.93-1L5.2,11.71l2.15,0Z' />\r\n\t\t<path d='M24.33,5.95,24.38,0a.05.05,0,0,0,0,0h0L9.16,4.9l.08,7.33,14.65,4.46a.28.28,0,0,0,.24,0,.25.25,0,0,0,.11-.2l0-4.16h0V10.94a2.14,2.14,0,0,0,1.82-2.4A2.24,2.24,0,0,0,24.33,5.95Z' />\r\n\t</g>,\r\n\r\n\t'Campaign',\r\n\t'0 0 26.12 17.37'\r\n)\r\n","import React from 'react'\r\nimport Link from '@material-ui/core/Link'\r\n\r\nconst getUrl = url => {\r\n\turl = (url || '').replace(/^(https?:)?\\/\\//i, '')\r\n\tif (url) {\r\n\t\turl = '//' + url\r\n\t}\r\n\r\n\treturn url\r\n}\r\n\r\nconst Anchor = ({ href, target, children, label, ...rest }) => {\r\n\tlet url = target && target === '_blank' ? getUrl(href) : href\r\n\treturn (\r\n\t\t<Link\r\n\t\t\tunderline='none'\r\n\t\t\tcolor='inherit'\r\n\t\t\tdraggable='false'\r\n\t\t\trel='noopener noreferrer'\r\n\t\t\t{...rest}\r\n\t\t\ttarget={target}\r\n\t\t\thref={url}\r\n\t\t\tstyle={{ wordBreak: 'break-all' }} // TODO: add it where needed only\r\n\t\t>\r\n\t\t\t{children || label}\r\n\t\t</Link>\r\n\t)\r\n}\r\n\r\nexport default Anchor\r\n","const drawerWidth = 250\r\n\r\nexport const styles = theme => {\r\n\treturn {\r\n\t\troot: {\r\n\t\t\tflexGrow: 1,\r\n\t\t\tzIndex: 1,\r\n\t\t\toverflow: 'hidden',\r\n\t\t\tposition: 'relative',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tminHeight: '100vh',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\tappBar: {\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\twidth: 'auto',\r\n\t\t\tposition: 'fixed',\r\n\t\t\t// marginLeft: drawerWidth,\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\t// width: `calc(100% - ${drawerWidth}px)`,\r\n\t\t\t\tleft: drawerWidth,\r\n\t\t\t},\r\n\t\t\tbackgroundColor: '#eee',\r\n\t\t\tcolor: '#000',\r\n\t\t},\r\n\t\tflex: {\r\n\t\t\tflex: 1,\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\talignItems: 'center',\r\n\t\t},\r\n\r\n\t\tflexRow: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\talignItems: 'center',\r\n\t\t\tflexBasis: '100%',\r\n\t\t\tpaddingTop: theme.spacing(1),\r\n\t\t\tpaddingBottom: theme.spacing(1),\r\n\t\t\t'&:last-child': {\r\n\t\t\t\tpaddingRight: 240,\r\n\t\t\t\tpaddingTop: theme.spacing(1),\r\n\t\t\t\tpaddingBottom: theme.spacing(1),\r\n\t\t\t\tpaddingLeft: theme.spacing(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\ttoolbarControls: {\r\n\t\t\tjustifyContent: 'flex-end',\r\n\t\t},\r\n\t\ttoolbarTitle: {\r\n\t\t\tjustifyContent: 'flex-start',\r\n\t\t},\r\n\t\tnavIconHide: {\r\n\t\t\tmarginRight: 10,\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\tdisplay: 'none',\r\n\t\t\t},\r\n\t\t},\r\n\t\ttoolbar: {\r\n\t\t\tflexFlow: 'wrap',\r\n\t\t\theight: 114,\r\n\t\t\t...theme.mixins.toolbar,\r\n\t\t},\r\n\t\tdrawerPaper: {\r\n\t\t\twidth: drawerWidth,\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\tposition: 'fixed',\r\n\t\t\t},\r\n\t\t\tbackgroundColor: '#fff',\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tflexGrow: 1,\r\n\t\t\tbackgroundColor: theme.palette.background.default,\r\n\t\t\tpadding: theme.spacing(3),\r\n\t\t\tpaddingTop: theme.spacing(5),\r\n\t\t\toverflow: 'auto',\r\n\t\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\t\tmarginLeft: drawerWidth,\r\n\t\t\t},\r\n\t\t},\r\n\t\tcontentInner: {\r\n\t\t\tmaxWidth: 1600,\r\n\t\t\tmargin: 'auto',\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\theight: 36,\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\n\r\nconst EddieSwitch = withStyles(theme => {\r\n\tconst advColor = theme.palette.accentOne.main\r\n\tconst pubColor = theme.palette.accentTwo.main\r\n\treturn {\r\n\t\tswitchBase: {\r\n\t\t\tcolor: advColor,\r\n\r\n\t\t\t'&$checked': {\r\n\t\t\t\tcolor: pubColor,\r\n\t\t\t},\r\n\t\t\t'&$checked + $track': {\r\n\t\t\t\tbackgroundColor: pubColor,\r\n\t\t\t},\r\n\t\t},\r\n\t\tchecked: {},\r\n\t\ttrack: { backgroundColor: advColor },\r\n\t}\r\n})(Switch)\r\n\r\nconst RRSwitch = withReactRouterLink(props => (\r\n\t<ListItem>\r\n\t\t<ListItemText primary={props.label} />\r\n\t\t<ListItemSecondaryAction>\r\n\t\t\t<EddieSwitch {...props} />\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n))\r\n\r\nconst SideSwitch = ({ side, t }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{/* Keep both if there is no valid side and force react to rerender at the same time */}\r\n\t\t\t{side !== 'advertiser' && (\r\n\t\t\t\t<RRSwitch\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tchecked={true}\r\n\t\t\t\t\tvalue='account'\r\n\t\t\t\t\tto={{ pathname: '/dashboard/advertiser' }}\r\n\t\t\t\t\tlabel={t('PUBLISHER')}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t{side !== 'publisher' && (\r\n\t\t\t\t<RRSwitch\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tchecked={false}\r\n\t\t\t\t\tto={{ pathname: '/dashboard/publisher' }}\r\n\t\t\t\t\tlabel={t('ADVERTISER')}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SideSwitch\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path\r\n\t\t\tfill='rgb(60, 60, 59)'\r\n\t\t\td='M44.995,49.818 L36.605,58.060 L22.494,44.199 L8.383,58.060 L-0.007,49.818 L14.104,35.957 L-0.007,22.095 L8.383,13.853 L22.494,27.715 L36.605,13.853 L44.995,22.095 L30.884,35.957 L44.995,49.818 ZM22.494,13.562 L16.296,19.724 L9.354,12.904 L17.594,4.809 L22.494,-0.004 L27.394,4.809 L35.634,12.904 L28.692,19.724 L22.494,13.562 ZM22.494,58.438 L28.692,52.276 L35.634,59.095 L27.394,67.190 L22.494,72.003 L17.594,67.190 L9.354,59.095 L16.296,52.276 L22.494,58.438 Z'\r\n\t\t/>\r\n\t\t<path\r\n\t\t\tfill='rgb(27, 117, 188)'\r\n\t\t\td='M30.884,35.997 L44.995,22.124 L36.605,13.876 L22.494,27.748 L8.383,13.876 L-0.007,22.124 L14.104,35.997 L-0.007,49.869 L8.383,58.117 L22.494,44.245 L36.605,58.117 L44.995,49.869 L30.884,35.997 Z'\r\n\t\t/>\r\n\t\t<path\r\n\t\t\tfill='rgb(60, 60, 59)'\r\n\t\t\td='M185.004,59.417 L181.713,59.417 L171.925,45.572 L162.080,59.417 L158.961,59.417 L170.237,43.460 L159.391,28.389 L162.653,28.389 L171.925,41.463 L181.112,28.389 L184.231,28.389 L173.556,43.460 L185.004,59.417 ZM130.972,17.685 L153.839,17.685 L153.839,20.369 L133.893,20.369 L133.893,36.154 L152.722,36.154 L152.722,38.837 L133.893,38.837 L133.893,56.733 L153.839,56.733 L153.839,59.417 L130.972,59.417 L130.972,17.685 ZM117.235,54.680 L117.005,54.680 C114.640,58.219 111.243,59.989 106.817,59.989 C102.525,59.989 99.243,58.656 96.972,55.991 C94.700,53.326 93.566,49.444 93.566,44.345 C93.566,38.979 94.693,34.878 96.945,32.043 C99.196,29.208 102.468,27.790 106.760,27.790 C109.011,27.790 110.958,28.199 112.599,29.018 C114.240,29.836 115.708,31.235 117.005,33.214 L117.178,33.214 C117.062,30.816 117.005,28.466 117.005,26.164 L117.005,15.003 L119.810,15.003 L119.810,59.417 L117.949,59.417 L117.235,54.680 ZM117.005,43.859 C117.005,39.064 116.200,35.615 114.588,33.513 C112.975,31.411 110.365,30.360 106.760,30.360 C103.365,30.360 100.812,31.549 99.105,33.927 C97.397,36.306 96.545,39.760 96.545,44.288 C96.545,53.079 99.967,57.475 106.817,57.475 C110.328,57.475 112.903,56.459 114.544,54.420 C116.185,52.385 117.005,49.025 117.005,44.345 L117.005,43.859 ZM81.062,44.688 L64.061,44.688 L58.224,59.417 L54.990,59.417 L71.818,17.514 L73.679,17.514 L90.160,59.417 L86.872,59.417 L81.062,44.688 ZM74.393,27.020 C73.916,25.840 73.342,24.203 72.675,22.111 C72.161,23.937 71.598,25.592 70.988,27.077 L65.121,42.061 L80.089,42.061 L74.393,27.020 Z'\r\n\t\t/>\r\n\t</g>,\r\n\t'AdexIcon',\r\n\t'0 0 185 72'\r\n)\r\n","import React from 'react'\r\nimport { LinearProgress, Box, CircularProgress } from '@material-ui/core'\r\n\r\nexport const InputLoading = ({ className, color = 'primary' }) => (\r\n\t<LinearProgress className={className} color={color} />\r\n)\r\n\r\nexport const LoadingSection = ({ loading, children }) => (\r\n\t<Box display='flex' flex='1' alignItems='center'>\r\n\t\t<Box>{children}</Box>\r\n\t\t<Box ml={2} mr={2}>\r\n\t\t\t{loading && <CircularProgress />}\r\n\t\t</Box>\r\n\t</Box>\r\n)\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListDivider from '@material-ui/core/Divider'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport CampaignIcon from 'components/common/icons/CampaignIcon'\r\nimport classnames from 'classnames'\r\nimport packageJson from './../../../../package.json'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport { styles } from './styles'\r\nimport SideSwitch from './SideSwitch'\r\nimport AdexIconTxt from 'components/common/icons/AdexIconTxt'\r\nimport DashboardIcon from '@material-ui/icons/Dashboard'\r\nimport SwapHorizontalIcon from '@material-ui/icons/SwapHoriz'\r\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline'\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox'\r\nimport ListIcon from '@material-ui/icons/List'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { LoadingSection } from 'components/common/spinners'\r\nimport {\r\n\tt,\r\n\tselectSide,\r\n\tselectLocation,\r\n\tselectAccountIdentityAddr,\r\n\tselectAccountStatsFormatted,\r\n} from 'selectors'\r\n\r\nconst RRListItem = withReactRouterLink(ListItem)\r\nconst { ETH_SCAN_ADDR_HOST } = process.env\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\tconst activeColor = ({ side }) =>\r\n\t\tside === 'advertiser'\r\n\t\t\t? theme.palette.accentOne.contrastText\r\n\t\t\t: theme.palette.accentTwo.contrastText\r\n\r\n\tconst activeBgColor = ({ side }) =>\r\n\t\tside === 'advertiser'\r\n\t\t\t? theme.palette.accentOne.main\r\n\t\t\t: theme.palette.accentTwo.main\r\n\r\n\treturn {\r\n\t\tnavigation: {\r\n\t\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\t},\r\n\t\tsntPadding: {\r\n\t\t\tpaddingTop: 0,\r\n\t\t},\r\n\t\tnavListRoot: {\r\n\t\t\tcolor: theme.palette.text.secondary,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tjustifyContent: 'space-between',\r\n\t\t},\r\n\t\tnavList: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 80,\r\n\t\t\toverflowY: 'auto',\r\n\t\t\toverflowX: 'hidden',\r\n\t\t},\r\n\t\tsideNavToolbar: {},\r\n\t\tversion: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tpadding: 10,\r\n\t\t\tpaddingLeft: 16,\r\n\t\t\tborderTopWidth: 1,\r\n\t\t\tborderTopColor: theme.palette.divider,\r\n\t\t\tborderTopStyle: 'solid',\r\n\t\t},\r\n\t\tactive: {\r\n\t\t\tcolor: activeColor,\r\n\t\t\tbackgroundColor: activeBgColor,\r\n\t\t\t'&:focus': {\r\n\t\t\t\tbackgroundColor: activeBgColor,\r\n\t\t\t},\r\n\t\t},\r\n\t\tadxLink: {\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t\t'&:hover': {\r\n\t\t\t\tcolor: theme.palette.text.secondary,\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n})\r\n\r\nconst useCommonStyles = makeStyles(styles)\r\n\r\nfunction SideNav(props) {\r\n\tconst side = useSelector(selectSide)\r\n\tconst identity = useSelector(selectAccountIdentityAddr)\r\n\tconst classes = useStyles({ side })\r\n\tconst commonClasses = useCommonStyles()\r\n\tconst routerLocation = useSelector(selectLocation)\r\n\r\n\t// TODO: test location\r\n\tconst location = routerLocation.pathname.split('/')[3]\r\n\tconst isAdvertiser = side === 'advertiser'\r\n\tconst items = isAdvertiser ? 'units' : 'slots'\r\n\tconst { availableIdentityBalanceDai } = useSelector(\r\n\t\tselectAccountStatsFormatted\r\n\t)\r\n\r\n\treturn side !== 'advertiser' && side !== 'publisher' ? null : (\r\n\t\t<div className={classes.navigation}>\r\n\t\t\t<List\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\tpadding: classes.sntPadding,\r\n\t\t\t\t\troot: classes.navListRoot,\r\n\t\t\t\t}}\r\n\t\t\t\tclassName={classes.navList}\r\n\t\t\t\tcomponent='nav'\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\tcommonClasses.toolbar,\r\n\t\t\t\t\t\t\tclasses.sideNavToolbar\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<AdexIconTxt className={commonClasses.icon} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<LoadingSection\r\n\t\t\t\t\t\t\t\tloading={\r\n\t\t\t\t\t\t\t\t\t!availableIdentityBalanceDai &&\r\n\t\t\t\t\t\t\t\t\tavailableIdentityBalanceDai !== 0\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemText>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='h6' component='div' color='textPrimary'>\r\n\t\t\t\t\t\t\t\t\t\t<strong>{`${parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\tavailableIdentityBalanceDai || 0\r\n\t\t\t\t\t\t\t\t\t\t).toFixed(2)} SAI`}</strong>\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='button' display='block' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t\t{t('IDENTITY_BALANCE')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t\t\t</LoadingSection>\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t<SideSwitch side={side} t={t} />\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side }}\r\n\t\t\t\t\t\tclassName={classnames({ [classes.active]: !location })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<DashboardIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={t('DASHBOARD')} />\r\n\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t{side === 'advertiser' && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\tto={{ pathname: '/dashboard/advertiser/campaigns' }}\r\n\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t[classes.active]: location === 'campaigns',\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<CampaignIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText primary={t('CAMPAIGNS')} />\r\n\t\t\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side + '/' + items }}\r\n\t\t\t\t\t\tclassName={classnames({ [classes.active]: location === items })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<ListIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={t(items.toUpperCase())} />\r\n\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t<ListDivider />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\thref='https://medium.com/adex-network-tips-and-tricks'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t<HelpOutlineIcon />\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t('HELP')} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t</Anchor>\r\n\r\n\t\t\t\t\t<Anchor target='_blank' href={`${ETH_SCAN_ADDR_HOST + identity}`}>\r\n\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t<SwapHorizontalIcon />\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t('TRANSACTIONS')} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t</Anchor>\r\n\r\n\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side + '/account' }}\r\n\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t[classes.active]: location === 'account',\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<AccountBoxIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={t('ACCOUNT')} />\r\n\t\t\t\t\t</RRListItem>\r\n\t\t\t\t</div>\r\n\t\t\t</List>\r\n\t\t\t<div className={classes.version}>\r\n\t\t\t\t<div className={classes.adxLink}>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t&copy; {new Date().getFullYear()} &nbsp;\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref={process.env.ADEX_SITE_HOST}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tAdEx Network OÜ\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref={process.env.ETH_SCAN_ADDR_HOST + process.env.ADX_TOKEN_ADDR}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tAdEx (ADX) Token\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t\t<small> / </small>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref={process.env.ETH_SCAN_ADDR_HOST + process.env.ADEX_CORE_ADDR}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tAdExCore\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\thref='https://github.com/AdExBlockchain/adex-dapp/blob/master/CHANGELOG.md'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tv.{packageJson.version}-beta\r\n\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SideNav\r\n","import React, { useState } from 'react'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nconst ImgIcon = ({ src }) => {\r\n\treturn (\r\n\t\t<img\r\n\t\t\tsrc={src}\r\n\t\t\theight={36}\r\n\t\t\twidth='auto'\r\n\t\t\talt='logo'\r\n\t\t\tstyle={{ marginRight: 5 }}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nfunction ButtonMenu({ children, btnStyle, label, rightIcon, leftIconSrc, id }) {\r\n\tconst [active, setActive] = useState(false)\r\n\tconst [anchorEl, setAnchorEl] = useState(null)\r\n\tconst open = Boolean(anchorEl)\r\n\r\n\tconst handleButtonClick = () => {\r\n\t\tsetActive(!active)\r\n\t\tsetAnchorEl(null)\r\n\t}\r\n\r\n\tconst handleMenu = event => {\r\n\t\tsetAnchorEl(event.currentTarget)\r\n\t}\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null)\r\n\t}\r\n\r\n\tconst leftIcon = leftIconSrc ? <ImgIcon src={leftIconSrc} /> : null\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\tstyle={btnStyle}\r\n\t\t\t\tonClick={handleMenu}\r\n\t\t\t\taria-owns={id}\r\n\t\t\t\taria-haspopup='true'\r\n\t\t\t>\r\n\t\t\t\t{leftIcon}\r\n\t\t\t\t<span\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmaxWidth: 150,\r\n\t\t\t\t\t\toverflow: 'hidden',\r\n\t\t\t\t\t\ttextOverflow: 'ellipsis',\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</span>\r\n\t\t\t\t{rightIcon}\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tid={id}\r\n\t\t\t\topen={open}\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t// anchorOrigin={{\r\n\t\t\t\t// \tvertical: 'top',\r\n\t\t\t\t// \thorizontal: 'right',\r\n\t\t\t\t// }}\r\n\t\t\t\t// transformOrigin={{\r\n\t\t\t\t// \tvertical: 'top',\r\n\t\t\t\t// \thorizontal: 'right',\r\n\t\t\t\t// }}\r\n\t\t\t\tonClick={handleButtonClick}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ButtonMenu\r\n","import { AUTH_TYPES } from 'constants/misc'\r\nimport metamaskLogo from 'resources/metamask-logo.png'\r\nimport trezorLogo from 'resources/trezor-logo-h.png'\r\nimport ledgerLogo from 'resources/ledger_logo_header.png'\r\nimport demoLogo from 'resources/demo-logo.png'\r\n\r\nexport const getAuthLogo = authType => {\r\n\tswitch (authType) {\r\n\t\tcase AUTH_TYPES.METAMASK.name:\r\n\t\t\treturn metamaskLogo\r\n\t\tcase AUTH_TYPES.TREZOR.name:\r\n\t\t\treturn trezorLogo\r\n\t\tcase AUTH_TYPES.LEDGER.name:\r\n\t\t\treturn ledgerLogo\r\n\t\tcase AUTH_TYPES.DEMO.name:\r\n\t\t\treturn demoLogo\r\n\t\tdefault:\r\n\t\t\treturn ''\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n// import AdexIconTxt from 'components/common/icons/AdexIconTxt'\r\nimport ButtonMenu from 'components/common/button_menu/ButtonMenuMui'\r\nimport Jazzicon, { jsNumberForAddress } from 'react-jazzicon'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\n// import ChangeLang from 'components/translate/ChangeLang'\r\nimport { getAuthLogo } from 'helpers/logosHelpers'\r\nimport { logOut } from 'services/store-data/auth'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport classnames from 'classnames'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport { selectNavTitle, selectAccount } from 'selectors'\r\nimport { styles } from './styles'\r\nimport { formatAddress } from 'helpers/formatters'\r\n\r\nconst RRMenuItem = withReactRouterLink(MenuItem)\r\nconst useStyles = makeStyles(styles)\r\n\r\nfunction TopNav({ handleDrawerToggle, side, t }) {\r\n\tconst classes = useStyles()\r\n\tconst navTitle = useSelector(selectNavTitle)\r\n\tconst account = useSelector(selectAccount)\r\n\tconst imgSrc = getAuthLogo(account.wallet.authType)\r\n\tconst btnMenuLabel =\r\n\t\taccount.wallet.authType === 'demo'\r\n\t\t\t? t('DEMO_MODE')\r\n\t\t\t: account.email ||\r\n\t\t\t  formatAddress(account.wallet.address) ||\r\n\t\t\t  t('NOT_LOGGED')\r\n\r\n\treturn (\r\n\t\t<AppBar className={classes.appBar} position='sticky'>\r\n\t\t\t<Toolbar className={classes.toolbar}>\r\n\t\t\t\t<div className={classes.flexRow}>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='inherit'\r\n\t\t\t\t\t\taria-label='open drawer'\r\n\t\t\t\t\t\tonClick={handleDrawerToggle}\r\n\t\t\t\t\t\tclassName={classnames(classes.navIconHide)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t{/* <AdexIconTxt\r\n              className={classes.icon}\r\n            /> */}\r\n\t\t\t\t\t<div className={classnames(classes.flex, classes.toolbarControls)}>\r\n\t\t\t\t\t\t{/* <Navigation type='horizontal' className={theme.rightNavigation}> */}\r\n\t\t\t\t\t\t{/* At the moment we use translations only for proper items properties display names */}\r\n\t\t\t\t\t\t{/* <ChangeLang /> */}\r\n\t\t\t\t\t\t<Jazzicon\r\n\t\t\t\t\t\t\tdiameter={30}\r\n\t\t\t\t\t\t\tseed={jsNumberForAddress(account.wallet.address)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ButtonMenu\r\n\t\t\t\t\t\t\tid='menu-appbar'\r\n\t\t\t\t\t\t\tleftIconSrc={imgSrc}\r\n\t\t\t\t\t\t\trightIcon={<ExpandMoreIcon />}\r\n\t\t\t\t\t\t\tlabel={btnMenuLabel}\r\n\t\t\t\t\t\t\tactive={true}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<RRMenuItem\r\n\t\t\t\t\t\t\t\tvalue='account'\r\n\t\t\t\t\t\t\t\tto={{ pathname: '/dashboard/' + side + '/account' }}\r\n\t\t\t\t\t\t\t\tcaption={t('ACCOUNT')}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<AccountBoxIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclasses={{ primary: classes.primary }}\r\n\t\t\t\t\t\t\t\t\tprimary={t('ACCOUNT')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</RRMenuItem>\r\n\t\t\t\t\t\t\t{/* <MenuDivider /> */}\r\n\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\tvalue='logout'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tlogOut()\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<ExitToAppIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclasses={{ primary: classes.primary }}\r\n\t\t\t\t\t\t\t\t\tprimary={t('LOGOUT')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t</ButtonMenu>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.flexRow}>\r\n\t\t\t\t\t<div className={classnames(classes.flex, classes.toolbarTitle)}>\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tvariant='subtitle1'\r\n\t\t\t\t\t\t\tcolor='inherit'\r\n\t\t\t\t\t\t\tclassName={classes.flex}\r\n\t\t\t\t\t\t\tnoWrap\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(navTitle)}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n}\r\n\r\nexport default Translate(TopNav)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NO_IMAGE from 'resources/no-image-box-eddie.jpg'\r\nimport VIDEO_IMAGE from 'resources/video-placeholder.jpg'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\n// import IconButton from '@material-ui/core/IconButton'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport Translate from 'components/translate/Translate'\r\nimport { validations, helpers } from 'adex-models'\r\nimport { isVideoMedia } from 'helpers/mediaHelpers.js'\r\n\r\nconst MAX_IMG_LOAD_TIME = 7000\r\nclass Img extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\timgSrc: null,\r\n\t\t\tactive: false,\r\n\t\t\tvideoSrc: null,\r\n\t\t}\r\n\r\n\t\tthis.setDisplayImage = this.setDisplayImage.bind(this)\r\n\t\tthis.setDisplayVideo = this.setDisplayVideo.bind(this)\r\n\t\tthis.loadTimeout = null\r\n\t}\r\n\r\n\tipfsSrc = src => {\r\n\t\tif (!!src && validations.Regexes.ipfsRegex.test(src)) {\r\n\t\t\treturn helpers.getMediaUrlWithProvider(src, process.env.IPFS_GATEWAY)\r\n\t\t}\r\n\r\n\t\treturn src\r\n\t}\r\n\r\n\thandleToggle = () => {\r\n\t\tlet active = this.state.active\r\n\t\tthis.setState({ active: !active })\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { src, fallbackSrc, mediaMime, allowVideo } = this.props\r\n\t\tconst isVideo = !!mediaMime && isVideoMedia(mediaMime)\r\n\r\n\t\tif (isVideo && !allowVideo) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\timgSrc: VIDEO_IMAGE,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (isVideo) {\r\n\t\t\tthis.displayVideo = document.createElement('video')\r\n\t\t\tthis.setDisplayVideo({\r\n\t\t\t\timage: this.ipfsSrc(src),\r\n\t\t\t\tfallback: this.ipfsSrc(fallbackSrc) || NO_IMAGE,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.displayImage = new Image()\r\n\t\t\tthis.setDisplayImage({\r\n\t\t\t\timage: this.ipfsSrc(src),\r\n\t\t\t\tfallback: this.ipfsSrc(fallbackSrc) || NO_IMAGE,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps = nextProps => {\r\n\t\tconst nextSrc = this.ipfsSrc(nextProps.src)\r\n\t\tconst thisSrc = this.ipfsSrc(this.props.src)\r\n\t\tconst nextFallback = this.ipfsSrc(nextProps.fallbackSrc)\r\n\t\tconst { mediaMime } = nextProps\r\n\r\n\t\tif (nextSrc !== thisSrc) {\r\n\t\t\tconst isVideo = !!mediaMime && isVideoMedia(mediaMime)\r\n\r\n\t\t\tif (isVideo) {\r\n\t\t\t\tthis.displayVideo = this.displayVideo || document.createElement('video')\r\n\t\t\t\tthis.setDisplayVideo({\r\n\t\t\t\t\timage: this.ipfsSrc(nextSrc),\r\n\t\t\t\t\tfallback: this.ipfsSrc(nextFallback) || NO_IMAGE,\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.displayImage = this.displayImage || new Image()\r\n\t\t\t\tthis.setDisplayImage({\r\n\t\t\t\t\timage: this.ipfsSrc(nextSrc),\r\n\t\t\t\t\tfallback: this.ipfsSrc(nextFallback) || NO_IMAGE,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.clearLoadTimeout()\r\n\t\tif (this.displayImage) {\r\n\t\t\tthis.displayImage.onerror = null\r\n\t\t\tthis.displayImage.onload = null\r\n\t\t\tthis.displayImage.onabort = null\r\n\t\t\tthis.displayImage = null\r\n\t\t}\r\n\t}\r\n\r\n\tclearLoadTimeout = () => {\r\n\t\tif (this.loadTimeout) {\r\n\t\t\tclearTimeout(this.loadTimeout)\r\n\t\t\tthis.loadTimeout = null\r\n\t\t}\r\n\t}\r\n\r\n\tonFail = fallback => {\r\n\t\tif (this.displayImage) {\r\n\t\t\tthis.displayImage.onerror = null\r\n\t\t\tthis.displayImage.onload = null\r\n\t\t\tthis.displayImage.onabort = null\r\n\r\n\t\t\tthis.clearLoadTimeout()\r\n\t\t\tthis.displayImage.src = fallback\r\n\t\t}\r\n\r\n\t\tthis.clearLoadTimeout()\r\n\r\n\t\tthis.setState({\r\n\t\t\timgSrc: fallback || null,\r\n\t\t})\r\n\t}\r\n\r\n\tsetDisplayImage = ({ image, fallback }) => {\r\n\t\tthis.loadTimeout = setTimeout(() => {\r\n\t\t\tthis.onFail(fallback)\r\n\t\t}, MAX_IMG_LOAD_TIME)\r\n\r\n\t\tthis.displayImage.onerror = this.displayImage.onabort = this.onFail.bind(\r\n\t\t\tthis,\r\n\t\t\tfallback\r\n\t\t)\r\n\r\n\t\tthis.displayImage.onload = () => {\r\n\t\t\tthis.clearLoadTimeout()\r\n\t\t\tthis.setState({\r\n\t\t\t\timgSrc: image,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.displayImage.src = image\r\n\t}\r\n\r\n\tsetDisplayVideo = ({ image, fallback }) => {\r\n\t\tthis.displayVideo.src = image\r\n\r\n\t\tthis.loadTimeout = setTimeout(() => {\r\n\t\t\tthis.onFail(fallback)\r\n\t\t}, MAX_IMG_LOAD_TIME)\r\n\r\n\t\tthis.displayVideo.onloadedmetadata = ({ target }) => {\r\n\t\t\tthis.clearLoadTimeout()\r\n\t\t\tthis.setState({\r\n\t\t\t\tvideoSrc: image,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfullScreenBtn() {\r\n\t\tconst { classes } = this.props\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<Fab\r\n\t\t\t\t\tmini\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tclassName={classnames(classes.fullscreenIcon)}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.handleToggle()\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<FullscreenIcon />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t{this.renderFullscreenDialog()}\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n\r\n\trenderFullscreenDialog() {\r\n\t\tconst { t, alt, classes, type } = this.props\r\n\t\tconst { active, imgSrc, videoSrc } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\topen={active}\r\n\t\t\t\ttype={type || 'normal'}\r\n\t\t\t\tmaxWidth={false}\r\n\t\t\t\tonClose={this.handleToggle}\r\n\t\t\t\tclasses={{ paper: classes.dialog }}\r\n\t\t\t>\r\n\t\t\t\t<DialogContent className={classes.dialogImageParent}>\r\n\t\t\t\t\t{imgSrc ? (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\talt={alt}\r\n\t\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t\t\tdraggable='false'\r\n\t\t\t\t\t\t\tclassName={classnames(classes.dialogImage, classes.imgLoading)}\r\n\t\t\t\t\t\t\tonDragStart={event => event.preventDefault() /*Firefox*/}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<video\r\n\t\t\t\t\t\t\tsrc={videoSrc}\r\n\t\t\t\t\t\t\tautoPlay\r\n\t\t\t\t\t\t\tmuted\r\n\t\t\t\t\t\t\tloop\r\n\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\tclassName={classnames(classes.dialogImage, classes.imgLoading)}\r\n\t\t\t\t\t\t></video>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={this.handleToggle} color='primary'>\r\n\t\t\t\t\t\t{t('CLOSE')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\talt,\r\n\t\t\tallowFullscreen,\r\n\t\t\tclassName,\r\n\t\t\tclasses,\r\n\t\t\tfullScreenOnClick,\r\n\t\t} = this.props\r\n\t\tconst { imgSrc, videoSrc } = this.state\r\n\t\treturn imgSrc || videoSrc ? (\r\n\t\t\t<div\r\n\t\t\t\tclassName={classnames(classes.imgParent, className, classes.wrapper)}\r\n\t\t\t>\r\n\t\t\t\t{!!imgSrc ? (\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\talt={alt}\r\n\t\t\t\t\t\tsrc={this.state.imgSrc}\r\n\t\t\t\t\t\tdraggable='false'\r\n\t\t\t\t\t\tclassName={classnames(classes.imgLoading, className, classes.img)}\r\n\t\t\t\t\t\tonDragStart={event => event.preventDefault() /*Firefox*/}\r\n\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\tfullScreenOnClick &&\r\n\t\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t\tthis.handleToggle()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<video\r\n\t\t\t\t\t\tsrc={videoSrc}\r\n\t\t\t\t\t\tclassName={classnames(classes.imgLoading, className, classes.img)}\r\n\t\t\t\t\t\tautoPlay\r\n\t\t\t\t\t\tmuted\r\n\t\t\t\t\t\tloop\r\n\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\tfullScreenOnClick &&\r\n\t\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t\tthis.handleToggle()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t></video>\r\n\t\t\t\t)}\r\n\t\t\t\t{allowFullscreen && this.fullScreenBtn()}\r\n\t\t\t\t{fullScreenOnClick && this.renderFullscreenDialog()}\r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<span className={classnames(classes.imgLoading, className)}>\r\n\t\t\t\t<span className={classes.circular}>\r\n\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nImg.propTypes = {\r\n\tsrc: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\r\n\tfallbackSrc: PropTypes.string,\r\n\talt: PropTypes.string,\r\n\tallowFullscreen: PropTypes.bool,\r\n\tfullScreenOnClick: PropTypes.bool,\r\n\tmediaMime: PropTypes.string,\r\n}\r\n\r\nexport default Translate(withStyles(styles)(Img))\r\n","export const styles = theme => ({\r\n\timgLoading: {\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\twidth: 'auto',\r\n\t\theight: '100%',\r\n\t\tposition: 'relative',\r\n\t\tdisplay: 'inline-block',\r\n\t},\r\n\timgParent: {\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\twidth: 'auto',\r\n\t\theight: 'max-content',\r\n\t\tposition: 'relative',\r\n\t\tdisplay: 'inline-block',\r\n\t},\r\n\tcircular: {\r\n\t\tposition: 'relative',\r\n\t\ttop: 'calc(50% - 20px)', //UGLY but works best - DEFAULT circular size is 40px\r\n\t\tleft: 'calc(50% - 20px)',\r\n\t\tdisplay: 'inline-block',\r\n\t},\r\n\tfullscreenIcon: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: theme.spacing(1),\r\n\t\tright: theme.spacing(1),\r\n\t\tcursor: 'pointer',\r\n\t\twidth: '30px',\r\n\t\theight: '30px',\r\n\t\tminHeight: '24px',\r\n\t},\r\n\tdialog: {\r\n\t\t'@media(max-width:744px)': {\r\n\t\t\tminWidth: `calc(100vw - ${theme.spacing(2)}px)`,\r\n\t\t},\r\n\t\t'@media(max-height:823px)': {\r\n\t\t\tminHeight: 'auto',\r\n\t\t},\r\n\t},\r\n\tdialogImageParent: {\r\n\t\t'@media(max-width:1080px)': {\r\n\t\t\tmaxWidth: '80vw',\r\n\t\t\tmaxHeight: '100vw',\r\n\t\t\tdisplay: 'block',\r\n\t\t\tmargin: 'auto',\r\n\t\t},\r\n\t\t'@media(max-width:744px)': {\r\n\t\t\tpaddingLeft: 0,\r\n\t\t\tpaddingRight: 0,\r\n\t\t},\r\n\t},\r\n\tdialogImage: {\r\n\t\theight: 'auto',\r\n\t\tmaxWidth: '80vw',\r\n\t},\r\n\timg: {\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t},\r\n\twrapper: {\r\n\t\theight: 'max-content',\r\n\t\twidth: 'max-content',\r\n\t},\r\n})\r\n","/**\r\n * @param {String} objUrl - Image blob url URL.createObjectURL\r\n * @param {Object} pixelCrop - pixelCrop Object provided by react-image-crop\r\n * @param {String} fileName - Name of the returned file in Promise\r\n */\r\nexport const getCroppedImgUrl = ({ objUrl, pixelCrop, fileName, size }) => {\r\n\t// TODO: Validate pixelCrop and size\r\n\tconst cropCanvas = document.createElement('canvas')\r\n\tconst scaleCanvas = document.createElement('canvas')\r\n\r\n\tconst img = new Image()\r\n\timg.crossOrigin = 'Anonymous' // For ipfs URL\r\n\timg.src = objUrl\r\n\r\n\t// As a blob\r\n\treturn new Promise((resolve, reject) => {\r\n\t\timg.onload = () => {\r\n\t\t\tconst width = img.width\r\n\t\t\tconst height = img.height\r\n\r\n\t\t\t// pixelCrop come in %\r\n\t\t\tconst crop = {\r\n\t\t\t\tx: Math.round(width * (pixelCrop.x / 100)),\r\n\t\t\t\ty: Math.round(height * (pixelCrop.y / 100)),\r\n\t\t\t\twidth: Math.round(width * (pixelCrop.width / 100)),\r\n\t\t\t\theight: Math.round(height * (pixelCrop.height / 100)),\r\n\t\t\t}\r\n\r\n\t\t\tcropCanvas.width = crop.width\r\n\t\t\tcropCanvas.height = crop.height\r\n\t\t\tconst cctx = cropCanvas.getContext('2d')\r\n\r\n\t\t\tcctx.drawImage(\r\n\t\t\t\timg,\r\n\t\t\t\tcrop.x,\r\n\t\t\t\tcrop.y,\r\n\t\t\t\tcrop.width,\r\n\t\t\t\tcrop.height,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tcrop.width,\r\n\t\t\t\tcrop.height\r\n\t\t\t)\r\n\r\n\t\t\tscaleCanvas.width = size.width\r\n\t\t\tscaleCanvas.height = size.height\r\n\r\n\t\t\tconst sctx = scaleCanvas.getContext('2d')\r\n\r\n\t\t\tsctx.drawImage(\r\n\t\t\t\tcropCanvas,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tcrop.width,\r\n\t\t\t\tcrop.height,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t)\r\n\r\n\t\t\tscaleCanvas.toBlob(file => {\r\n\t\t\t\tif (!file) {\r\n\t\t\t\t\treject('Error cropping file')\r\n\t\t\t\t}\r\n\t\t\t\tfile.name = fileName\r\n\t\t\t\tresolve(URL.createObjectURL(file))\r\n\t\t\t}, 'image/jpeg')\r\n\t\t}\r\n\t})\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Img from 'components/common/img/Img'\r\n// import debounce from 'debounce'\r\nimport Dropzone from 'react-dropzone'\r\nimport Translate from 'components/translate/Translate'\r\nimport Button from '@material-ui/core/Button'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ReactCrop from 'react-image-crop'\r\nimport { getCroppedImgUrl } from 'services/images/crop'\r\nimport CropIcon from '@material-ui/icons/Crop'\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport FileUploadIcon from '@material-ui/icons/CloudUpload'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { isVideoMedia } from 'helpers/mediaHelpers.js'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nclass ImgForm extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tconst { size, imgSrc, mime } = props\r\n\t\tconst aspect = size ? size.width / size.height : undefined\r\n\r\n\t\tthis.state = {\r\n\t\t\timgSrc: imgSrc || '',\r\n\t\t\tmime: mime || '',\r\n\t\t\timgName: '',\r\n\t\t\tcropMode: false,\r\n\t\t\tcrop: { aspect: aspect },\r\n\t\t}\r\n\t}\r\n\r\n\tonDrop = (acceptedFiles, rejectedFiles) => {\r\n\t\tconst that = this\r\n\t\tconst file = acceptedFiles[0]\r\n\t\tif (!file) return\r\n\t\tconst objectUrl = URL.createObjectURL(file)\r\n\r\n\t\tthat.setState({\r\n\t\t\timgSrc: objectUrl,\r\n\t\t\timgName: file.name,\r\n\t\t\tmime: file.type,\r\n\t\t})\r\n\t\t// TODO: Maybe get width and height here instead on ing validation hoc\r\n\t\tthis.props.onChange({\r\n\t\t\ttempUrl: objectUrl,\r\n\t\t\tmime: file.type,\r\n\t\t})\r\n\t}\r\n\r\n\tonRemove = e => {\r\n\t\tthis.preventBubbling(e)\r\n\r\n\t\tconst { imgSrc } = this.state\r\n\r\n\t\tif (imgSrc) {\r\n\t\t\tURL.revokeObjectURL(imgSrc)\r\n\t\t\tthis.setState({ imgSrc: '', imgName: '' })\r\n\t\t\tthis.props.onChange({ tempUrl: null, mime: null })\r\n\t\t}\r\n\t}\r\n\r\n\tonCropChange = crop => {\r\n\t\tthis.setState({ crop })\r\n\t}\r\n\r\n\tsaveCropped = () => {\r\n\t\tconst { imgSrc, crop, mime, imgName } = this.state\r\n\t\tconst { onChange, size } = this.props\r\n\t\tgetCroppedImgUrl({\r\n\t\t\tobjUrl: imgSrc,\r\n\t\t\tpixelCrop: crop,\r\n\t\t\tfileName: `cropped-${imgName}`,\r\n\t\t\tsize,\r\n\t\t}).then(croppedBlob => {\r\n\t\t\tURL.revokeObjectURL(imgSrc)\r\n\t\t\tthis.setState({ imgSrc: croppedBlob, cropMode: false })\r\n\t\t\tonChange({\r\n\t\t\t\ttempUrl: croppedBlob,\r\n\t\t\t\tmime,\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tpreventBubbling = e => {\r\n\t\tif (e.stopPropagation) {\r\n\t\t\te.stopPropagation()\r\n\t\t}\r\n\t\tif (e.nativeEvent) {\r\n\t\t\te.nativeEvent.stopImmediatePropagation()\r\n\t\t}\r\n\t}\r\n\r\n\tUploadInfo = () => {\r\n\t\tconst { t, classes, size, errMsg } = this.props\r\n\t\tconst { imgSrc, mime } = this.state\r\n\t\treturn (\r\n\t\t\t<div className={classes.uploadInfo}>\r\n\t\t\t\t{imgSrc && !isVideoMedia(mime) ? (\r\n\t\t\t\t\t<div className={classes.uploadActions}>\r\n\t\t\t\t\t\t{/* TEMP: make size required */}\r\n\t\t\t\t\t\t{!!size && (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\tthis.preventBubbling(e)\r\n\t\t\t\t\t\t\t\t\tthis.setState({ cropMode: true })\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CropIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t\t{t('IMG_FORM_CROP')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\tonClick={this.onRemove}\r\n\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ClearIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t{t('IMG_FORM_CLEAR')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<FileUploadIcon />\r\n\t\t\t\t)}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span> {t('DRAG_AND_DROP_TO_UPLOAD')} </span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small> (max 2MB; .jpeg, .jpg) </small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Typography className={classes.errMsg} color='error'>\r\n\t\t\t\t\t\t{errMsg}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\t// TODO: CLEAR IMG BLOB!!!!\r\n\trender() {\r\n\t\tconst { t, classes, label, additionalInfo } = this.props\r\n\t\tconst { crop, cropMode, imgName, imgSrc, mime } = this.state\r\n\r\n\t\tconst videoSrc = isVideoMedia(mime)\r\n\t\treturn (\r\n\t\t\t<div className={classes.imgForm}>\r\n\t\t\t\t<AppBar\r\n\t\t\t\t\tposition='static'\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\troot: classes.header,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t{imgSrc && imgName ? (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{label || 'Image'}: {imgName}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<span> {label || 'Upload image'} </span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{cropMode ? (\r\n\t\t\t\t\t\t<div className={classes.dropzone} onClick={this.preventBubbling}>\r\n\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\t\tspacing={2}\r\n\t\t\t\t\t\t\t\talignContent='center'\r\n\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={8}>\r\n\t\t\t\t\t\t\t\t\t<ReactCrop\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: '100%', maxHeight: 320 }}\r\n\t\t\t\t\t\t\t\t\t\timageStyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: '320px',\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 'auto',\r\n\t\t\t\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.imgDropzonePreview}\r\n\t\t\t\t\t\t\t\t\t\tcrop={crop}\r\n\t\t\t\t\t\t\t\t\t\tsrc={imgSrc || ''}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onCropChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={4}>\r\n\t\t\t\t\t\t\t\t\t<Typography color='primary' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t\t{t('CROP_MODE_MSG')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.saveCropped}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!crop.width || !crop.height}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<SaveIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t\t\t\t{t('IMG_FORM_SAVE_CROP')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.setState({ cropMode: false })}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dropzoneBtn}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<ClearIcon className={classes.leftIcon} />\r\n\t\t\t\t\t\t\t\t\t\t{t('IMG_FORM_CANCEL_CROP')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Dropzone\r\n\t\t\t\t\t\t\taccept='.jpeg,.jpg,.png,.mp4'\r\n\t\t\t\t\t\t\tonDrop={this.onDrop}\r\n\t\t\t\t\t\t\tclassName={classes.dropzone}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\t\tspacing={2}\r\n\t\t\t\t\t\t\t\talignContent='center'\r\n\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={8}>\r\n\t\t\t\t\t\t\t\t\t{videoSrc ? (\r\n\t\t\t\t\t\t\t\t\t\t<video controls src={imgSrc} type='video/mp4'></video>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\t\t\talt={'name'}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.imgDropzonePreview}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item sm={12} md={4}>\r\n\t\t\t\t\t\t\t\t\t<this.UploadInfo />\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Dropzone>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<small> {additionalInfo} </small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nImgForm.propTypes = {\r\n\timgSrc: PropTypes.string,\r\n\tlabel: PropTypes.string,\r\n\tsize: PropTypes.object,\r\n}\r\n\r\nexport default Translate(withStyles(styles)(ImgForm))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\theader: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\tdropzone: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1',\r\n\t\t\theight: 'auto',\r\n\t\t\twidth: 'auto',\r\n\t\t\tborder: `2px dashed ${theme.palette.grey[500]}`,\r\n\t\t\tbackground: theme.palette.background.default,\r\n\t\t\tpadding: 10,\r\n\t\t\tcursor: 'pointer',\r\n\t\t\toverflow: 'hidden',\r\n\t\t},\r\n\t\timgDropzonePreview: {\r\n\t\t\tmaxHeight: 320,\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: 'auto',\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t\tdropzoneBtn: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tleftIcon: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tuploadActions: {\r\n\t\t\tmarginTop: spacing,\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\nimport { getMediaSize, checkExactishAspect } from 'helpers/mediaHelpers'\r\n\r\nexport default function ValidImageHoc(Decorated) {\r\n\tclass ValidImage extends Component {\r\n\t\tvalidate = ({\r\n\t\t\tpropsName,\r\n\t\t\twidthTarget,\r\n\t\t\theightTarget,\r\n\t\t\tmediaWidth,\r\n\t\t\tmediaHeight,\r\n\t\t\tmsg,\r\n\t\t\texact,\r\n\t\t\trequired,\r\n\t\t\tonChange,\r\n\t\t\tmime,\r\n\t\t\ttempUrl,\r\n\t\t}) => {\r\n\t\t\tlet isValid = true\r\n\r\n\t\t\tif (exact) {\r\n\t\t\t\tisValid = checkExactishAspect(\r\n\t\t\t\t\twidthTarget,\r\n\t\t\t\t\tmediaWidth,\r\n\t\t\t\t\theightTarget,\r\n\t\t\t\t\tmediaHeight\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\tif (!exact && (widthTarget < mediaWidth || heightTarget < mediaHeight)) {\r\n\t\t\t\tisValid = false\r\n\t\t\t}\r\n\r\n\t\t\tconst masgArgs = [widthTarget, heightTarget, 'px']\r\n\r\n\t\t\tthis.props.validate(propsName, {\r\n\t\t\t\tisValid: isValid,\r\n\t\t\t\terr: { msg: msg, args: masgArgs },\r\n\t\t\t\tdirty: true,\r\n\t\t\t})\r\n\r\n\t\t\tconst resMedia = {\r\n\t\t\t\twidth: mediaWidth,\r\n\t\t\t\theight: mediaHeight,\r\n\t\t\t\tmime,\r\n\t\t\t\ttempUrl,\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof onChange === 'function') {\r\n\t\t\t\tonChange(propsName, resMedia)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvalidateMedia = async (\r\n\t\t\t{\r\n\t\t\t\tpropsName,\r\n\t\t\t\twidthTarget,\r\n\t\t\t\theightTarget,\r\n\t\t\t\tmsg,\r\n\t\t\t\texact,\r\n\t\t\t\trequired,\r\n\t\t\t\tonChange,\r\n\t\t\t} = {},\r\n\t\t\tmedia\r\n\t\t) => {\r\n\t\t\tif (!required && !media.tempUrl && onChange) {\r\n\t\t\t\tthis.props.validate(propsName, {\r\n\t\t\t\t\tisValid: true,\r\n\t\t\t\t\terr: { msg: msg, args: [] },\r\n\t\t\t\t\tdirty: true,\r\n\t\t\t\t})\r\n\t\t\t\t// TODO: fix this\r\n\t\t\t\tonChange(propsName, media)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (!media.mime || !media.tempUrl) {\r\n\t\t\t\tthis.props.validate(propsName, {\r\n\t\t\t\t\tisValid: false,\r\n\t\t\t\t\tdirty: true,\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst size = await getMediaSize({ mime: media.mime, src: media.tempUrl })\r\n\r\n\t\t\tthis.validate({\r\n\t\t\t\tpropsName,\r\n\t\t\t\twidthTarget,\r\n\t\t\t\theightTarget,\r\n\t\t\t\tmediaWidth: size.width,\r\n\t\t\t\tmediaHeight: size.height,\r\n\t\t\t\tmsg,\r\n\t\t\t\texact,\r\n\t\t\t\trequired,\r\n\t\t\t\tonChange,\r\n\t\t\t\tmime: media.mime,\r\n\t\t\t\ttempUrl: media.tempUrl,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst props = this.props\r\n\t\t\treturn <Decorated {...props} validateMedia={this.validateMedia} />\r\n\t\t}\r\n\t}\r\n\r\n\tValidImage.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tvalidateId: PropTypes.string.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { memory } = state\r\n\t\treturn {\r\n\t\t\tvalidations: memory.validations[props.validateId],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(ValidImage))\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nexport default function NewItemHoc(Decorated) {\r\n\tclass ValidItemHoc extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tinvalidFields: {},\r\n\t\t\t}\r\n\r\n\t\t\tthis.validate = this.validate.bind(this)\r\n\t\t}\r\n\r\n\t\tcomponentWillReceiveProps(nextProps) {\r\n\t\t\tthis.setState({ invalidFields: nextProps.validations || {} })\r\n\t\t}\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t\tthis.setState({ invalidFields: this.props.validations || {} })\r\n\t\t}\r\n\r\n\t\tvalidate = (\r\n\t\t\tkey,\r\n\t\t\t{ isValid, err = { msg: '', args: [] }, dirty = false, removeAll = false }\r\n\t\t) => {\r\n\t\t\tif (!isValid) {\r\n\t\t\t\tlet errors = {}\r\n\t\t\t\terrors[key] = {\r\n\t\t\t\t\terrMsg: this.props.t(err.msg, { args: err.args }),\r\n\t\t\t\t\tdirty: dirty,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.props.actions.updateValidationErrors(this.props.validateId, errors)\r\n\t\t\t} else if (removeAll) {\r\n\t\t\t\tthis.props.actions.resetValidationErrors(this.props.validateId)\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.actions.resetValidationErrors(this.props.validateId, key)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst props = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tvalidate={this.validate}\r\n\t\t\t\t\tinvalidFields={this.state.invalidFields}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tValidItemHoc.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tvalidateId: PropTypes.string.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\t// let persist = state.persist\r\n\t\tlet memory = state.memory\r\n\t\treturn {\r\n\t\t\tvalidations: memory.validations[props.validateId],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(ValidItemHoc))\r\n}\r\n","export const styles = theme => {\r\n\t// const spacing = theme.spacing(3)\r\n\treturn {}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Button from '@material-ui/core/Button'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ImgForm from 'components/dashboard/forms/ImgForm'\r\nimport ValidImageHoc from 'components/dashboard/forms/ValidImageHoc'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport { AVATAR_MAX_WIDTH, AVATAR_MAX_HEIGHT } from 'constants/misc'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nexport class ImgDialog extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tvalues: {},\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (name, value) => {\r\n\t\tlet newValues = { ...this.state.values }\r\n\t\tnewValues[name] = value\r\n\t\tthis.setState({ values: newValues })\r\n\t}\r\n\r\n\tonOk = () => {\r\n\t\tconst vals = this.state.values\r\n\t\tObject.keys(vals).forEach(key => {\r\n\t\t\tthis.props.onChangeReady(key, vals[key])\r\n\t\t})\r\n\t\tthis.props.handleToggle()\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet t = () => {}\r\n\t\tlet validations = this.props.invalidFields || {}\r\n\t\tlet errImg = validations[this.props.imgPropName]\r\n\t\tlet width = this.props.width || AVATAR_MAX_WIDTH\r\n\t\tlet height = this.props.height || AVATAR_MAX_HEIGHT\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={this.props.active}\r\n\t\t\t\t\t// onEscKeyDown={this.props.handleToggle}\r\n\t\t\t\t\t// onOverlayClick={this.props.handleToggle}\r\n\t\t\t\t\ttitle={this.props.title}\r\n\t\t\t\t\ttype={this.props.type || 'normal'}\r\n\t\t\t\t\t// className={theme[ItemTypesNames[this.props.itemType]]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t\t<IconButton onClick={this.props.handleToggle}>\r\n\t\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t{this.props.t(this.props.title)}\r\n\t\t\t\t\t</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<ImgForm\r\n\t\t\t\t\t\t\tlabel={t(this.props.imgLabel)}\r\n\t\t\t\t\t\t\timgSrc={this.props.imgSrc || ''}\r\n\t\t\t\t\t\t\tonChange={this.props.validateMedia.bind(this, {\r\n\t\t\t\t\t\t\t\tpropsName: this.props.imgPropName,\r\n\t\t\t\t\t\t\t\twidthTarget: width,\r\n\t\t\t\t\t\t\t\theightTarget: height,\r\n\t\t\t\t\t\t\t\tmsg: this.props.errMsg,\r\n\t\t\t\t\t\t\t\texact: this.props.exact,\r\n\t\t\t\t\t\t\t\trequired: this.props.required,\r\n\t\t\t\t\t\t\t\tonChange: this.handleChange,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tadditionalInfo={t(this.props.additionalInfo)}\r\n\t\t\t\t\t\t\terrMsg={errImg ? errImg.errMsg : ''}\r\n\t\t\t\t\t\t\tsize={{ width: width, height: height }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.props.handleToggle} color='primary'>\r\n\t\t\t\t\t\t\t{'Cancel'}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={this.onOk}\r\n\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t!!(this.props.invalidFields || {})[this.props.imgPropName]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{'Ok'}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nImgDialog.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tlet persist = state.persist\r\n\t// let memory = state.memory\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ValidItemHoc(ValidImageHoc(withStyles(styles)(ImgDialog))))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\n// import classnames from 'classnames'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport CheckIcon from '@material-ui/icons/Check'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\n// NOTE: Separate component to track the validations and spinner to avoid rerender of item top level components\r\nclass SaveBtn extends Component {\r\n\trender() {\r\n\t\tlet {\r\n\t\t\tspinner,\r\n\t\t\tclasses,\r\n\t\t\tsuccess,\r\n\t\t\tdirtyProps,\r\n\t\t\tsave,\r\n\t\t\tvalidations,\r\n\t\t\tvalidationId,\r\n\t\t\tdisabled,\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<div className={classes.position}>\r\n\t\t\t\t<div className={classes.wrapper}>\r\n\t\t\t\t\t<Fab\r\n\t\t\t\t\t\tfabButton\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t// className={buttonClassname}\r\n\t\t\t\t\t\tonClick={() => save()}\r\n\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\tdisabled ||\r\n\t\t\t\t\t\t\tspinner ||\r\n\t\t\t\t\t\t\t!dirtyProps.length ||\r\n\t\t\t\t\t\t\t!!Object.keys(validations[validationId] || {}).length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// {...other}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{/*TODO: Success */}\r\n\t\t\t\t\t\t{success ? <CheckIcon /> : <SaveIcon />}\r\n\t\t\t\t\t</Fab>\r\n\t\t\t\t\t{!!spinner && (\r\n\t\t\t\t\t\t<CircularProgress size={68} className={classes.fabProgress} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSaveBtn.propTypes = {\r\n\tspinnerId: PropTypes.string,\r\n\tvalidationId: PropTypes.string,\r\n\titemId: PropTypes.string,\r\n\tvalidations: PropTypes.object,\r\n\tdisabled: PropTypes.bool,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\treturn {\r\n\t\tspinner: memory.spinners[props.spinnerId],\r\n\t\tvalidations: memory.validations,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(SaveBtn)))\r\n","import color from '@material-ui/core/colors/purple'\r\n\r\nexport const styles = theme => ({\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n\twrapper: {\r\n\t\tposition: 'relative',\r\n\t},\r\n\tbuttonSuccess: {\r\n\t\tbackgroundColor: color[500],\r\n\t\t'&:hover': {\r\n\t\t\tbackgroundColor: color[700],\r\n\t\t},\r\n\t},\r\n\tfabProgress: {\r\n\t\tcolor: color[500],\r\n\t\tposition: 'absolute',\r\n\t\ttop: -6,\r\n\t\tleft: -6,\r\n\t\tzIndex: 1,\r\n\t},\r\n\tbuttonProgress: {\r\n\t\tcolor: color[500],\r\n\t\tposition: 'absolute',\r\n\t\ttop: '50%',\r\n\t\tleft: '50%',\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tposition: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 86,\r\n\t\tright: 40,\r\n\t\tzIndex: theme.zIndex.appBar,\r\n\t},\r\n})\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\tconst aspect = '56.25%'\r\n\r\n\treturn {\r\n\t\tmediaRoot: {\r\n\t\t\theight: 0,\r\n\t\t\tpaddingTop: aspect, // 16:9\r\n\t\t\tposition: 'relative',\r\n\t\t\toverflow: 'hidden',\r\n\t\t},\r\n\t\timg: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tmargin: 'auto',\r\n\t\t\t// minWidth: '50%',\r\n\t\t\t// minHeight: '50%',\r\n\t\t\theight: 'auto',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\tbuttonRight: {\r\n\t\t\tmarginLeft: spacing,\r\n\t\t},\r\n\t\tbuttonLeft: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\terror: {\r\n\t\t\tcolor: theme.palette.error.main,\r\n\t\t},\r\n\t\ttextField: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tmaxWidth: '70%',\r\n\t\t},\r\n\t\tchangesLine: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\talignItems: 'center',\r\n\t\t\tcolor: theme.palette.secondary.main,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\tchangeChip: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tmarginLeft: 0,\r\n\t\t},\r\n\t\teditIcon: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tbottom: spacing,\r\n\t\t\tright: spacing,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Button from '@material-ui/core/Button'\r\nimport IMG_404 from 'resources/404.png'\r\nimport Img from 'components/common/img/Img'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Translate from 'components/translate/Translate'\r\nimport { styles } from './styles'\r\n\r\nconst RRButton = withReactRouterLink(Button)\r\n\r\nclass PageNotFound extends React.Component {\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tclasses,\r\n\t\t\ttitle,\r\n\t\t\tsubtitle,\r\n\t\t\tgoToTxt,\r\n\t\t\tgoToPath,\r\n\t\t\tskipGoToButton,\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<div className={classes.wrapper}>\r\n\t\t\t\t<Grid container spacing={2} justify='center' alignItems='center'>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Typography className={classes.text} variant='h3'>\r\n\t\t\t\t\t\t\t{t(title || '404_TEXT')}\r\n\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t{subtitle && (\r\n\t\t\t\t\t\t\t<Typography className={classes.text} variant='subtitle1'>\r\n\t\t\t\t\t\t\t\t{t(subtitle)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\tclassName={classes.text}\r\n\t\t\t\t\t\t\tvariant='h1'\r\n\t\t\t\t\t\t\tstyle={{ textTransform: 'uppercase' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('404')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\tsrc={IMG_404}\r\n\t\t\t\t\t\t\talt={'Downlad metamask'}\r\n\t\t\t\t\t\t\tclassName={classes.img}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t{!skipGoToButton && (\r\n\t\t\t\t\t\t\t<RRButton\r\n\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\tto={goToPath || '/'}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(goToTxt || 'GO_HOME')}\r\n\t\t\t\t\t\t\t</RRButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nPageNotFound.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tsubtitle: PropTypes.string,\r\n\tgoToTxt: PropTypes.string,\r\n\tgoToPath: PropTypes.string,\r\n\tskipGoToButton: PropTypes.bool,\r\n}\r\n\r\nexport default Translate(withStyles(styles)(PageNotFound))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\twrapper: {\r\n\t\t\tmargin: `${spacing * 2}px auto`,\r\n\t\t\tmaxWidth: 1000,\r\n\t\t},\r\n\t\timg: {\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: 'auto',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Button from '@material-ui/core/Button'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport ImgDialog from 'components/dashboard/containers/ImgDialog'\r\nimport { schemas, Joi } from 'adex-models'\r\nimport classnames from 'classnames'\r\nimport { Prompt } from 'react-router'\r\nimport Translate from 'components/translate/Translate'\r\nimport { items as ItemsConstants } from 'adex-constants'\r\nimport Img from 'components/common/img/Img'\r\nimport SaveBtn from 'components/dashboard/containers/SaveBtn'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport InfoOutlineIcon from '@material-ui/icons/Info'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport { styles } from './styles'\r\nimport { validName } from 'helpers/validators'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport PageNotFound from 'components/page_not_found/PageNotFound'\r\n\r\nconst { adSlotPut, adUnitPut } = schemas\r\nconst { AdSizesByValue } = ItemsConstants\r\n\r\nexport default function ItemHoc(Decorated) {\r\n\tclass Item extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\t\t\tthis.save = this.save.bind(this)\r\n\t\t\tthis.state = {\r\n\t\t\t\tactiveFields: {},\r\n\t\t\t\titem: null,\r\n\t\t\t\tinitialItemState: {},\r\n\t\t\t\tdirtyProps: [],\r\n\t\t\t\teditImg: false,\r\n\t\t\t\t_activeInput: null,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateNav = (item = {}) => {\r\n\t\t\tconst { actions, t, itemType } = this.props\r\n\t\t\tactions.updateNav(\r\n\t\t\t\t'navTitle',\r\n\t\t\t\tt(itemType, { isProp: true }) + ' > ' + item.title || ''\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t\tconst { item, matchId, objModel } = this.props\r\n\r\n\t\t\tif (!item) {\r\n\t\t\t\tthis.updateNav({ title: matchId })\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst initialItemState = new objModel(item)\r\n\r\n\t\t\tthis.setState({ item: { ...item }, initialItemState: initialItemState })\r\n\t\t\tthis.updateNav(initialItemState)\r\n\t\t}\r\n\r\n\t\t// shouldComponentUpdate(nextProps, nextState) {\r\n\t\t//     let diffProps = JSON.stringify(this.props) !== JSON.stringify(nextProps)\r\n\t\t//     let diffState = JSON.stringify(this.state) !== JSON.stringify(nextState)\r\n\t\t//     return diffProps || diffState\r\n\t\t// }\r\n\r\n\t\tcomponentWillReceiveProps(nextProps, nextState) {\r\n\t\t\tconst { objModel } = this.props\r\n\t\t\tconst { item } = this.state\r\n\t\t\tlet currentItemInst = new objModel(item || {})\r\n\t\t\t// Assume that the this.props.match.params.itemId can not be changed without remount of the component\r\n\t\t\t// TODO: check the above\r\n\t\t\tlet nextItem = nextProps.item\r\n\t\t\tlet nexItemInst = new objModel(nextItem || {})\r\n\r\n\t\t\tif (currentItemInst.modifiedOn !== nexItemInst.modifiedOn) {\r\n\t\t\t\t// if (\r\n\t\t\t\t// \tJSON.stringify(currentItemInst.plainObj()) !==\r\n\t\t\t\t// \tJSON.stringify(nexItemInst.plainObj())\r\n\t\t\t\t// ) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\titem: nexItemInst.plainObj(),\r\n\t\t\t\t\tinitialItemState: nexItemInst,\r\n\t\t\t\t\tactiveFields: {},\r\n\t\t\t\t\tdirtyProps: [],\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateNav(nexItemInst)\r\n\t\t}\r\n\r\n\t\tcomponentWillUnmount() {\r\n\t\t\tif (this.state.item) {\r\n\t\t\t\tthis.props.actions.updateSpinner('update' + this.state.item.id, false)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (name, value) => {\r\n\t\t\tconst { objModel } = this.props\r\n\t\t\tconst { item, dirtyProps } = this.state\r\n\r\n\t\t\tconst newItem = new objModel(item)\r\n\t\t\tnewItem[name] = value\r\n\r\n\t\t\tconst dp = dirtyProps.slice(0)\r\n\r\n\t\t\tif (dp.indexOf(name) < 0) {\r\n\t\t\t\tdp.push(name)\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({ item: newItem.plainObj(), dirtyProps: dp })\r\n\t\t}\r\n\r\n\t\treturnPropToInitialState = propName => {\r\n\t\t\tconst { objModel, actions } = this.props\r\n\t\t\tconst { dirtyProps, initialItemState, item } = this.state\r\n\t\t\tconst initialItemStateValue = initialItemState[propName]\r\n\t\t\tconst newItem = new objModel(item)\r\n\t\t\tnewItem[propName] = initialItemStateValue\r\n\r\n\t\t\tconst dp = dirtyProps.filter(dp => {\r\n\t\t\t\treturn dp !== propName\r\n\t\t\t})\r\n\r\n\t\t\tthis.setState({ item: newItem.plainObj(), dirtyProps: dp })\r\n\t\t\t// TEMP fix, we assume that the initial values are validated\r\n\t\t\tactions.resetValidationErrors(item.id, propName)\r\n\t\t}\r\n\r\n\t\tsetActiveFields = (field, value) => {\r\n\t\t\tlet newActiveFields = { ...this.state.activeFields }\r\n\t\t\tnewActiveFields[field] = value\r\n\t\t\tthis.setState({ activeFields: newActiveFields })\r\n\t\t}\r\n\r\n\t\t//TODO: Do not save if not dirty!\r\n\t\tsave = () => {\r\n\t\t\tconst { itemType, spinner, actions } = this.props\r\n\t\t\tconst { item, dirtyProps } = this.state\r\n\r\n\t\t\tif (dirtyProps.length && !spinner) {\r\n\t\t\t\tactions.updateItem({\r\n\t\t\t\t\titemType,\r\n\t\t\t\t\titem,\r\n\t\t\t\t})\r\n\t\t\t\tthis.setState({ dirtyProps: [] })\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tisDirtyProp(prop) {\r\n\t\t\treturn this.state.item.dirtyProps.indexOf(prop) > -1\r\n\t\t}\r\n\r\n\t\thandleToggle = () => {\r\n\t\t\tconst isDemo = this.props.account._authType === 'demo'\r\n\r\n\t\t\tif (isDemo) return\r\n\r\n\t\t\tlet active = this.state.editImg\r\n\t\t\tthis.setState({ editImg: !active })\r\n\t\t}\r\n\r\n\t\tisNameValid(name) {\r\n\t\t\tconst { msg } = validName(name)\r\n\t\t\treturn !msg\r\n\t\t}\r\n\r\n\t\tvalidateTitle(name, dirty, errMsg) {\r\n\t\t\tconst { itemType, validate } = this.props\r\n\t\t\tlet schema = null\r\n\r\n\t\t\tswitch (itemType) {\r\n\t\t\t\tcase 'AdSlot':\r\n\t\t\t\t\tschema = adSlotPut.title\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'AdUnit':\r\n\t\t\t\t\tschema = adUnitPut.title\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\tconst result = Joi.validate(name, schema)\r\n\t\t\tvalidate('title', {\r\n\t\t\t\tisValid: !result.error,\r\n\t\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tvalidateDescription(name, dirty, errMsg) {\r\n\t\t\tconst { itemType, validate } = this.props\r\n\t\t\tlet schema = null\r\n\r\n\t\t\tswitch (itemType) {\r\n\t\t\t\tcase 'AdSlot':\r\n\t\t\t\t\tschema = adSlotPut.description\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'AdUnit':\r\n\t\t\t\t\tschema = adUnitPut.description\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tconst result = Joi.validate(name, schema)\r\n\t\t\tvalidate('description', {\r\n\t\t\t\tisValid: !result.error,\r\n\t\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst {\r\n\t\t\t\tvalidations,\r\n\t\t\t\tclasses,\r\n\t\t\t\tt,\r\n\t\t\t\taccount,\r\n\t\t\t\titemType,\r\n\t\t\t\tobjModel,\r\n\t\t\t\tmatchId,\r\n\t\t\t\tside,\r\n\t\t\t\tinvalidFields,\r\n\t\t\t\tvalidateId,\r\n\t\t\t\t...rest\r\n\t\t\t} = this.props\r\n\t\t\tconst propsItem = this.props.item\r\n\r\n\t\t\tif (!propsItem) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<PageNotFound\r\n\t\t\t\t\t\ttitle={t('ITEM_NOT_FOUND_TITLE')}\r\n\t\t\t\t\t\tsubtitle={t('ITEM_NOT_FOUND_SUBTITLE', {\r\n\t\t\t\t\t\t\targs: [itemType, matchId],\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tskipGoToButton\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t * NOTE: using instance of the item, the instance is passes to the Unit, Slot, Channel and Campaign components,\r\n\t\t\t * in this case there is no need to make instance inside them\r\n\t\t\t */\r\n\r\n\t\t\tconst isDemo = account._authType === 'demo'\r\n\t\t\tconst item = new objModel(this.state.item || {})\r\n\t\t\tlet canEdit = itemType === 'AdSlot'\r\n\t\t\tlet imgSrc = item.temp.tempUrl || item.mediaUrl || item.fallbackMediaUrl\r\n\r\n\t\t\tconst titleErr = invalidFields['title']\r\n\t\t\tconst descriptionErr = invalidFields['description']\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Prompt\r\n\t\t\t\t\t\twhen={!!this.state.dirtyProps.length}\r\n\t\t\t\t\t\tmessage={t('UNSAVED_CHANGES_ALERT')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{itemType !== 'Campaign' && (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<ImgDialog\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\timgSrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\thandleToggle={this.handleToggle}\r\n\t\t\t\t\t\t\t\t\tactive={this.state.editImg}\r\n\t\t\t\t\t\t\t\t\tonChangeReady={this.handleChange}\r\n\t\t\t\t\t\t\t\t\tvalidateId={item._id}\r\n\t\t\t\t\t\t\t\t\twidth={\r\n\t\t\t\t\t\t\t\t\t\tthis.props.updateImgWidth ||\r\n\t\t\t\t\t\t\t\t\t\t(AdSizesByValue[item.size] || {}).width\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\theight={\r\n\t\t\t\t\t\t\t\t\t\tthis.props.updateImgHeight ||\r\n\t\t\t\t\t\t\t\t\t\t(AdSizesByValue[item.size] || {}).height\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttitle={t(this.props.updateImgLabel)}\r\n\t\t\t\t\t\t\t\t\tadditionalInfo={t(this.props.updateImgInfoLabel)}\r\n\t\t\t\t\t\t\t\t\texact={this.props.updateImgExact}\r\n\t\t\t\t\t\t\t\t\terrMsg={this.props.updateImgErrMsg}\r\n\t\t\t\t\t\t\t\t\timgPropName='img'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{!!this.state.dirtyProps.length && (\r\n\t\t\t\t\t\t\t\t\t<div className={classes.changesLine}>\r\n\t\t\t\t\t\t\t\t\t\t<InfoOutlineIcon className={classes.buttonLeft} />\r\n\t\t\t\t\t\t\t\t\t\t<span className={classes.buttonLeft}>\r\n\t\t\t\t\t\t\t\t\t\t\t{t('UNSAVED_CHANGES')}:\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.dirtyProps.map(p => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.changeChip}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={p}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t(p, { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonDelete={() => this.returnPropToInitialState(p)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={7}>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\terror={!!titleErr && !!titleErr.errMsg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel>{t('title', { isProp: true })}</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={t('title', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.validateTitle(ev.target.value, true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleChange('title', ev.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength={1024}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('title', false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={() => this.validateTitle(item.title, false)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.activeFields.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position='end'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ev =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('title', true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{titleErr && titleErr.errMsg && titleErr.dirty && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t(titleErr.errMsg, { args: titleErr.errMsgArgs })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\terror={!!descriptionErr && !!descriptionErr.errMsg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel htmlFor='description'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t('description', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname='description'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.description || ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.validateDescription(ev.target.value, true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleChange('description', ev.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength={1024}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('description', false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.validateDescription(item.description, false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.activeFields.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position='end'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ev =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setActiveFields('description', true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{descriptionErr && !!descriptionErr.errMsg ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t(descriptionErr.errMsg, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\targs: descriptionErr.errMsgArgs,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t!item.description && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('NO_DESCRIPTION_YET')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={5}>\r\n\t\t\t\t\t\t\t\t\t\t{this.props.showLogo && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ width: 270 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Paper\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses.mediaRoot,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses.imgContainer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={item.fullName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(classes.img, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[classes.pointer]:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.canEditImg && !isDemo,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfabButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmini\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.editIcon}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={!isDemo ? this.handleToggle : null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<SaveBtn\r\n\t\t\t\t\t\t\t\t\tspinnerId={'update' + item.id}\r\n\t\t\t\t\t\t\t\t\tvalidationId={'update-' + validateId}\r\n\t\t\t\t\t\t\t\t\tdirtyProps={this.state.dirtyProps}\r\n\t\t\t\t\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t!this.state.dirtyProps.length ||\r\n\t\t\t\t\t\t\t\t\t\t!!Object.keys(invalidFields).length\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Decorated\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\taccount={account}\r\n\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\tinEdit={!!this.state.dirtyProps.length}\r\n\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\t\t\ttoggleImgEdit={this.handleToggle.bind(this)}\r\n\t\t\t\t\t\t\tactiveFields={this.state.activeFields}\r\n\t\t\t\t\t\t\tsetActiveFields={this.setActiveFields.bind(this)}\r\n\t\t\t\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\t\t\t\titemType={itemType}\r\n\t\t\t\t\t\t\tisDemo={isDemo}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItem.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\taccount: PropTypes.object.isRequired,\r\n\t\titem: PropTypes.object.isRequired,\r\n\t\tspinner: PropTypes.bool,\r\n\t\titemType: PropTypes.string.isRequired,\r\n\t\tobjModel: PropTypes.func.isRequired,\r\n\t}\r\n\r\n\tconst tryGetItemByIpfs = ({ items, ipfs }) => {\r\n\t\tlet keys = Object.keys(items)\r\n\r\n\t\tfor (let index = 0; index < keys.length; index++) {\r\n\t\t\tconst key = keys[index]\r\n\t\t\tconst item = items[key]\r\n\r\n\t\t\tif (!!item && item._ipfs && !!ipfs && item._ipfs === ipfs) {\r\n\t\t\t\treturn item\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist } = state\r\n\t\t// const memory = state.memory\r\n\t\tconst items = persist.items[props.itemType]\r\n\t\tconst id = props.match.params.itemId\r\n\t\tlet item = items[id]\r\n\r\n\t\tif (!item && props.itemType !== undefined) {\r\n\t\t\titem = tryGetItemByIpfs({ items: items, ipfs: id })\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t\titem: item,\r\n\t\t\tvalidateId: 'update-' + (item.id || item.ipfs),\r\n\t\t\tmatchId: id,\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(withStyles(styles)(ValidItemHoc(Translate(Item))))\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport { InputLoading } from 'components/common/spinners/'\r\nimport classnames from 'classnames'\r\nimport { styles } from './styles'\r\nimport { t } from 'selectors'\r\n\r\nclass Dropdown extends React.Component {\r\n\thandleChange = event => {\r\n\t\tthis.props.onChange(event.target.value)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses,\r\n\t\t\tlabel = '',\r\n\t\t\tvalue,\r\n\t\t\tsource = [],\r\n\t\t\thtmlId = 'some-id',\r\n\t\t\tname = '',\r\n\t\t\tdisabled = false,\r\n\t\t\terror = false,\r\n\t\t\thelperText,\r\n\t\t\t// margin = '',\r\n\t\t\tfullWidth = false,\r\n\t\t\tclassName,\r\n\t\t\trequired,\r\n\t\t\tloading,\r\n\t\t\tnoSrcLabel,\r\n\t\t} = this.props\r\n\r\n\t\t// TODO: add native renderer for mobile devices when supported\r\n\t\treturn (\r\n\t\t\t<FormControl\r\n\t\t\t\tclassName={classnames(className, classes.formControl)}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\terror={error}\r\n\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel htmlFor={htmlId} required={required}>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</InputLabel>\r\n\t\t\t\t{!!source.length && !loading ? (\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tvalue={value.id || value}\r\n\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\tinput={<Input name={name} id={htmlId} />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{[...source].map(src => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\tkey={src.value.key || src.value.id || src.value}\r\n\t\t\t\t\t\t\t\t\tvalue={src.value.id || src.value}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{src.label}\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t) : !loading ? (\r\n\t\t\t\t\t<Input disabled value={noSrcLabel} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Input disabled value={t('LOADING_DATA')} />\r\n\t\t\t\t\t\t<InputLoading />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{helperText && <FormHelperText>{helperText}</FormHelperText>}\r\n\t\t\t</FormControl>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nDropdown.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\tonChange: PropTypes.func.isRequired,\r\n\tvalue: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.bool,\r\n\t]),\r\n\tsource: PropTypes.array.isRequired, //([{label: 'some label', value: 'some value'}])\r\n\tdisabled: PropTypes.bool,\r\n\terror: PropTypes.bool,\r\n\thtmlId: PropTypes.string.isRequired,\r\n\tname: PropTypes.string,\r\n\tdisplayEmpty: PropTypes.bool,\r\n\thelperText: PropTypes.string,\r\n}\r\n\r\nexport default withStyles(styles)(Dropdown)\r\n","export const styles = theme => ({\r\n\tformControl: {\r\n\t\t// margin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n\tselectEmpty: {\r\n\t\tmarginTop: theme.spacing(1),\r\n\t},\r\n})\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\t// const iconButtonSize = 48 - (spacing * 2)\r\n\treturn {\r\n\t\tcontrols: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tflexDirection: 'row',\r\n\t\t},\r\n\t\tflexRow: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t},\r\n\t\tflexItem: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\trowButton: {\r\n\t\t\tmarginTop: spacing * 1.5,\r\n\t\t\t// width: iconButtonSize,\r\n\t\t\t// height: iconButtonSize\r\n\t\t},\r\n\t\trwoButtonRoot: {\r\n\t\t\tmargin: spacing / 2,\r\n\t\t},\r\n\t\trow: {\r\n\t\t\tdisplay: 'block',\r\n\t\t},\r\n\t\tbottomControls: {\r\n\t\t\tjustifyContent: 'flex-start',\r\n\t\t},\r\n\t\tlistRoot: {\r\n\t\t\tpaddingBottom: spacing * 1.5,\r\n\t\t\toverflowX: 'auto',\r\n\t\t},\r\n\t\tcontrolsRoot: {\r\n\t\t\tpadding: spacing * 1.5,\r\n\t\t\tpaddingBottom: spacing * 0.5,\r\n\t\t\t// marginBottom: spacing * 2\r\n\t\t},\r\n\t\tpageSize: {\r\n\t\t\twidth: '100px',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\n// import Slider from '@material-ui/core/Slider'\r\nimport classnames from 'classnames'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft'\r\nimport ChevronRight from '@material-ui/icons/ChevronRight'\r\nimport Dropdown from 'components/common/dropdown'\r\n// import Typography from '@material-ui/core/Typography'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nexport const PAGE_SIZES = [\r\n\t{ value: 5, label: 5 },\r\n\t{ value: 10, label: 10 },\r\n\t{ value: 20, label: 20 },\r\n\t{ value: 46, label: 46 },\r\n]\r\n\r\nconst pagination = props => {\r\n\tconst {\r\n\t\tpage,\r\n\t\tpages,\r\n\t\t// pageSize,\r\n\t\tclasses,\r\n\t\tgoToPrevPage,\r\n\t\tgoToNextPage,\r\n\t\tgoToPage,\r\n\t\t// changePageSize,\r\n\t\t// className,\r\n\t\tt,\r\n\t} = props\r\n\treturn (\r\n\t\t<div className={classes.flexRow}>\r\n\t\t\t{pages > 1 && (\r\n\t\t\t\t<div className={classnames(classes.flexItem, classes.flexRow)}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_PAGE')}\r\n\t\t\t\t\t\t\thelperText={t('LIST_CONTROL_LABEL_PAGE_OF', { args: [pages] })}\r\n\t\t\t\t\t\t\tonChange={goToPage}\r\n\t\t\t\t\t\t\tsource={getAllPagedValues(page, pages)}\r\n\t\t\t\t\t\t\tvalue={page + ''}\r\n\t\t\t\t\t\t\thtmlId='page-size-select'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tdisabled={!(page > 0 && pages > page)}\r\n\t\t\t\t\t\tonClick={goToPrevPage}\r\n\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ChevronLeft />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tdisabled={!(page < pages - 1)}\r\n\t\t\t\t\t\tonClick={goToNextPage}\r\n\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ChevronRight />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{/* <div\r\n\t\t\t\tclassName={classnames(classes.flexItem, classes.pageSize)}\r\n\t\t\t>\r\n\t\t\t\t<Typography noWrap id=\"page-size\">{t('LIST_CONTROL_LABEL_PAGE_SIZE')} <strong>{pageSize}</strong> </Typography>\r\n\t\t\t\t<Slider style={{ padding: '22px 0' }} aria-labelledby=\"page-size\" min={5} max={25} step={5} value={pageSize} onChange={changePageSize} />\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport const Pagination = withStyles(styles)(pagination)\r\n\r\nconst getAllPagedValues = (current, max) => {\r\n\t// let pages = {}\r\n\r\n\t// for (var index = 0; index < max; index++) {\r\n\t//     pages[index + ''] = index + 1 + ''\r\n\t// }\r\n\r\n\tlet pages = []\r\n\r\n\tfor (var index = 0; index < max; index++) {\r\n\t\tpages.push({ value: index + '', label: index + 1 + '' })\r\n\t}\r\n\r\n\treturn pages\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport Input from '@material-ui/core/Input'\r\nimport { Pagination } from './Controls'\r\nimport Translate from 'components/translate/Translate'\r\n// import classnames from 'classnasmes'\r\n// import Radio from '@material-ui/core/Radio'\r\n// import RadioGroup from '@material-ui/core/RadioGroup'\r\n// import FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward'\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport classnames from 'classnames'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport { bigNumberify } from 'ethers/utils'\r\n\r\nconst INT_STRING = /^[0-9]+$/\r\nconst PAGE_SIZE = 50\r\n\r\nconst mapFilterProps = ({ filterProps = {}, t }) => {\r\n\treturn Object.keys(filterProps).map(key => {\r\n\t\tconst prop = filterProps[key]\r\n\t\tconst label = prop.label || key\r\n\t\treturn {\r\n\t\t\tlabel: t(label, {\r\n\t\t\t\tisProp: prop.labelIsProp || !prop.label,\r\n\t\t\t\targs: prop.labelArgs || [],\r\n\t\t\t}),\r\n\t\t\tvalue: key,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst mapSortProperties = ({ sortProps = [], t }) => {\r\n\treturn sortProps.map(prop => {\r\n\t\tconst label = prop.label || prop.value\r\n\t\tconst value = (prop.value !== null && prop.value !== undefined\r\n\t\t\t? prop.value\r\n\t\t\t: ''\r\n\t\t).toString()\r\n\r\n\t\treturn {\r\n\t\t\tvalue,\r\n\t\t\tlabel: t(label, { isProp: !prop.label, args: prop.labelArgs || [] }),\r\n\t\t}\r\n\t})\r\n}\r\n\r\nclass ListWithControls extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tconst uiStateId = props.uiStateId\r\n\r\n\t\tconst sortProperties = mapSortProperties({\r\n\t\t\tsortProps: props.sortProperties || [{}],\r\n\t\t\tt: props.t,\r\n\t\t})\r\n\t\t// TODO: update on ComponentWillReceiveProps\r\n\t\tthis.state = {\r\n\t\t\titems: [],\r\n\t\t\tpage: 0, //\r\n\t\t\tsearch: '', //\r\n\t\t\tsortProperties: sortProperties,\r\n\t\t\tfilterProperties: mapFilterProps({\r\n\t\t\t\tfilterProps: props.filterProperties,\r\n\t\t\t\tt: props.t,\r\n\t\t\t}),\r\n\t\t\tfilteredItems: [],\r\n\t\t\tfilterBy: '', //\r\n\t\t\tfilterByValues: [],\r\n\t\t\tfilterByValueFilter: '', //\r\n\t\t\tuiStateId: uiStateId,\r\n\t\t}\r\n\t}\r\n\r\n\tgoToPage(page) {\r\n\t\tthis.setState({ page: parseInt(page, 10) })\r\n\t}\r\n\r\n\thandleChange = (name, value) => {\r\n\t\tlet newStateValue = { [name]: value }\r\n\t\tif (name === 'search') newStateValue.page = 0\r\n\t\tif (name === 'filterBy') {\r\n\t\t\tnewStateValue.filterByValues = [{ label: 'ALL', value: '' }].concat(\r\n\t\t\t\tthis.props.filterProperties[value].values\r\n\t\t\t)\r\n\t\t\tnewStateValue.filterByValueFilter = ''\r\n\t\t}\r\n\t\tthis.setState(newStateValue)\r\n\t}\r\n\r\n\t// For changing redux state\r\n\thandleChangeRxState = (name, value) => {\r\n\t\tthis.props.actions.updateUi(name, value, this.state.uiStateId)\r\n\t}\r\n\r\n\tchangePageSize = (\r\n\t\tname,\r\n\t\t{ itemsLength, page, pages } = {},\r\n\t\tev,\r\n\t\tnewPageSize\r\n\t) => {\r\n\t\t/*\r\n    \tlet currentPageSize = this.props.pageSize\r\n    \tlet currentFirstIndex = page * currentPageSize // To have at least the first item on current page on the next page\r\n\t\tlet nextPage = Math.floor(currentFirstIndex / newPageSize)\r\n\t\t*/\r\n\t\tthis.props.actions.updateUi('pageSize', newPageSize, this.state.uiStateId)\r\n\t}\r\n\r\n\tsearch = ({ item, search, searchMatch }) => {\r\n\t\tconst regex = new RegExp(search, 'i')\r\n\t\tlet matchString = null\r\n\t\tif (typeof searchMatch === 'function') {\r\n\t\t\tmatchString = searchMatch(item)\r\n\t\t} else if (typeof searchMatch === 'string' && !!searchMatch) {\r\n\t\t\tmatchString = searchMatch\r\n\t\t} else {\r\n\t\t\tmatchString = (item.title || '') + (item.description || '')\r\n\t\t}\r\n\r\n\t\tconst match = regex.exec(matchString)\r\n\t\treturn !!match\r\n\t}\r\n\r\n\tfilterItems = ({\r\n\t\titems,\r\n\t\tsearch,\r\n\t\tsortProperty,\r\n\t\tsortOrder,\r\n\t\tpage,\r\n\t\tpageSize,\r\n\t\tsearchMatch,\r\n\t\tfilterBy,\r\n\t\tfilterArchived,\r\n\t}) => {\r\n\t\t// TODO: optimize filter\r\n\t\t// TODO: maybe filter deleted before this?\r\n\t\tlet filtered = (items || []).filter(i => {\r\n\t\t\tconst isItem = !!i && (i.id || i.ipfs)\r\n\t\t\tif (!isItem) return isItem\r\n\r\n\t\t\tif (\r\n\t\t\t\tfilterArchived !== '' &&\r\n\t\t\t\ti.archived !== undefined &&\r\n\t\t\t\tfilterArchived.toString() !== i.archived.toString()\r\n\t\t\t) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\tif (filterBy && filterBy.key && filterBy.value) {\r\n\t\t\t\tlet itemValue =\r\n\t\t\t\t\tfilterBy.key.split('.').reduce((o, p) => (o ? o[p] : 'noprop'), i) ||\r\n\t\t\t\t\t''\r\n\r\n\t\t\t\tlet passFilter = itemValue.toString() === filterBy.value.toString()\r\n\r\n\t\t\t\tif (!passFilter) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet hasSearch = !!search\r\n\t\t\tif (!hasSearch) return isItem\r\n\r\n\t\t\treturn this.search({ item: i, search, searchMatch })\r\n\t\t})\r\n\r\n\t\tif (sortProperty) {\r\n\t\t\tfiltered = filtered.sort((a, b) => {\r\n\t\t\t\tlet propA = a[sortProperty]\r\n\t\t\t\tlet propB = b[sortProperty]\r\n\r\n\t\t\t\tif (INT_STRING.test(propA) && INT_STRING.test(propB)) {\r\n\t\t\t\t\tpropA = bigNumberify(propA)\r\n\t\t\t\t\tpropB = bigNumberify(propB)\r\n\t\t\t\t\treturn (propA.lt(propB) ? -1 : propA.gt(propB) ? 1 : 0) * sortOrder\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (propA < propB ? -1 : propA > propB ? 1 : 0) * sortOrder\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tlet filteredLength = filtered.length\r\n\r\n\t\tlet maxPages = Math.ceil(filteredLength / pageSize)\r\n\r\n\t\tlet paged = filtered.slice(page * pageSize, page * pageSize + pageSize)\r\n\r\n\t\treturn {\r\n\t\t\titems: paged,\r\n\t\t\tpage: page,\r\n\t\t\tpages: maxPages,\r\n\t\t\titemsLength: filteredLength,\r\n\t\t\tpageSize: pageSize,\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet data = this.filterItems({\r\n\t\t\titems: this.props.items,\r\n\t\t\tsearch: this.state.search,\r\n\t\t\tsortProperty:\r\n\t\t\t\tthis.props.sortProperty || this.state.sortProperties[0].value,\r\n\t\t\tsortOrder: this.props.sortOrder || -1,\r\n\t\t\tpage: this.state.page,\r\n\t\t\tpageSize: PAGE_SIZE, // this.props.pageSize || 10,\r\n\t\t\tsearchMatch: this.props.searchMatch,\r\n\t\t\tfilterBy: {\r\n\t\t\t\tkey: this.state.filterBy,\r\n\t\t\t\tvalue: this.state.filterByValueFilter,\r\n\t\t\t},\r\n\t\t\tfilterArchived: this.props.filterArchived || 'false',\r\n\t\t})\r\n\r\n\t\tlet items = data.items\r\n\t\tlet renderItems\r\n\r\n\t\trenderItems = this.props.renderRows\r\n\r\n\t\tconst { t, classes } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Paper>\r\n\t\t\t\t<div className={classes.controlsRoot}>\r\n\t\t\t\t\t<div className={classes.controls}>\r\n\t\t\t\t\t\t<FormControl className={classnames(classes.flexItem)}>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor='search'>\r\n\t\t\t\t\t\t\t\t{t('LIST_CONTROL_LABEL_SEARCH')}\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tname='search'\r\n\t\t\t\t\t\t\t\tid='search'\r\n\t\t\t\t\t\t\t\tvalue={this.state.search}\r\n\t\t\t\t\t\t\t\tonChange={ev => this.handleChange('search', ev.target.value)}\r\n\t\t\t\t\t\t\t\tstartAdornment={\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position='start'>\r\n\t\t\t\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<div className={classnames(classes.flexRow, classes.flexItem)}>\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_SORT')}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChangeRxState.bind(this, 'sortProperty')}\r\n\t\t\t\t\t\t\t\tsource={this.state.sortProperties}\r\n\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\tthis.props.sortProperty || this.state.sortProperties[0].value\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thtmlId='sort-by-prop'\r\n\t\t\t\t\t\t\t\tname='sortProperty'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tcolor={this.props.sortOrder === 1 ? 'primary' : 'default'}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleChangeRxState.bind(this, 'sortOrder', 1)}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ArrowUpwardIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tcolor={this.props.sortOrder === -1 ? 'primary' : 'default'}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleChangeRxState.bind(this, 'sortOrder', -1)}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.rowButton}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ArrowDownwardIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* {this.props.filterProperties &&\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={classnames(classes.flexRow)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.flexItem)}\r\n\t\t\t\t\t\t\t\t\tauto\r\n\t\t\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_FILTER_BY')}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this, 'filterBy')}\r\n\t\t\t\t\t\t\t\t\tsource={this.state.filterProperties}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.filterBy !== null ? this.state.filterBy.toString() : ''}\r\n\t\t\t\t\t\t\t\t\thtmlId='filter-by-prop-dd'\r\n\t\t\t\t\t\t\t\t\tname='filterBy'\r\n\t\t\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.flexItem)}\r\n\t\t\t\t\t\t\t\t\tauto\r\n\t\t\t\t\t\t\t\t\tlabel={t('LIST_CONTROL_LABEL_FILTER_BY_VALUE')}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this, 'filterByValueFilter')}\r\n\t\t\t\t\t\t\t\t\tsource={mapSortProperties({ sortProps: this.state.filterByValues, t: this.props.t })}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.filterByValueFilter !== null ? this.state.filterByValueFilter.toString() : ''}\r\n\t\t\t\t\t\t\t\t\thtmlId='filter-by-value-dd'\r\n\t\t\t\t\t\t\t\t\tname='filterByValueFilter'\r\n\t\t\t\t\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\t\t\t\t\tdisabled={!this.state.filterBy}\r\n\t\t\t\t\t\t\t\t\thelperText={t('HELPER_TXT_FILTER_BY_VALUE')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t} */}\r\n\r\n\t\t\t\t\t\t{/* {this.props.archive &&\r\n\t\t\t\t\t\t\t<RadioGroup\r\n\t\t\t\t\t\t\t\tname='archived'\r\n\t\t\t\t\t\t\t\tvalue={typeof this.props.filterArchived === 'string' ? this.props.filterArchived.toString() : 'false'}\r\n\t\t\t\t\t\t\t\tonChange={(ev) => this.handleChangeRxState('filterArchived', ev.target.value)}\r\n\t\t\t\t\t\t\t\tclassName={classnames(classes.flexRow, classes.flexItem)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FormControlLabel value='false' control={<Radio color='primary' />} label={t('LABEL_ACTIVE')} />\r\n\t\t\t\t\t\t\t\t<FormControlLabel value='true' control={<Radio color='primary' />} label={t('LABEL_ARCHIVED')} />\r\n\t\t\t\t\t\t\t\t<FormControlLabel value='' control={<Radio color='primary' />} label={t('LABEL_ALL')} />\r\n\t\t\t\t\t\t\t</RadioGroup>\r\n\t\t\t\t\t\t} */}\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classnames(classes.controls, classes.bottomControls)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\tpage={data.page}\r\n\t\t\t\t\t\t\t\tpages={data.pages}\r\n\t\t\t\t\t\t\t\tpageSize={PAGE_SIZE || this.props.pageSize || 10}\r\n\t\t\t\t\t\t\t\titemsLength={data.itemsLength}\r\n\t\t\t\t\t\t\t\tgoToPage={this.goToPage.bind(this)}\r\n\t\t\t\t\t\t\t\tgoToLastPage={this.goToPage.bind(this, data.pages - 1)}\r\n\t\t\t\t\t\t\t\tgoToNextPage={this.goToPage.bind(this, data.page + 1)}\r\n\t\t\t\t\t\t\t\tgoToFirstPage={this.goToPage.bind(this, 0)}\r\n\t\t\t\t\t\t\t\tgoToPrevPage={this.goToPage.bind(this, data.page - 1)}\r\n\t\t\t\t\t\t\t\tchangePageSize={this.changePageSize.bind(this, 'pageSize', {\r\n\t\t\t\t\t\t\t\t\tpage: data.page,\r\n\t\t\t\t\t\t\t\t\tpages: data.pages,\r\n\t\t\t\t\t\t\t\t\titemsLength: data.itemsLength,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Divider />\r\n\t\t\t\t<div className={classnames(classes.listRoot)}>{renderItems(items)}</div>\r\n\t\t\t</Paper>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nListWithControls.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\trowsView: PropTypes.bool.isRequired,\r\n\titemRenderer: PropTypes.func,\r\n\tside: PropTypes.string.isRequired,\r\n\tobjModel: PropTypes.func,\r\n\tsortProperties: PropTypes.array.isRequired,\r\n\tfilterProperties: PropTypes.object,\r\n\tuiStateId: PropTypes.string.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst persist = state.persist\r\n\tconst memory = state.memory\r\n\r\n\t// TODO: A little hacky, maybe find a better way\r\n\t// Gets the last path in URL. ex: https://localhost:3000/dashboard/publisher/slots -> slots\r\n\tconst uiStateId = props.uiStateId || 'default'\r\n\treturn {\r\n\t\trowsView: !!persist.ui[props.viewModeId],\r\n\t\tpageSize: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['pageSize'] || 10\r\n\t\t\t: 10,\r\n\t\tsortProperty: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['sortProperty']\r\n\t\t\t: null,\r\n\t\tsortOrder: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['sortOrder'] || -1\r\n\t\t\t: -1,\r\n\t\tfilterArchived: persist.ui[uiStateId]\r\n\t\t\t? persist.ui[uiStateId]['filterArchived'] || false\r\n\t\t\t: false,\r\n\t\tside: memory.nav.side,\r\n\t\tsortProperties: props.sortProperties || [],\r\n\t\tfilterProperties: props.filterProperties,\r\n\t\tuiStateId: uiStateId,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(ListWithControls)))\r\n","import React, { Component } from 'react'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\n\r\nclass Rows extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tthis.state = {\r\n\t\t\t// TODO: maybe in the store?\r\n\t\t\tselected: [],\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\t// Reset selected\r\n\t\t// TODO: make better check because this will always  return true\r\n\t\tif (nextProps.rows !== this.props.rows) {\r\n\t\t\tthis.setState({ selected: [] })\r\n\t\t}\r\n\t}\r\n\r\n\thandleRowSelect = selected => {\r\n\t\tlet newSelected = selected.map(index => this.props.rows[index].id)\r\n\t\tthis.setState({ selected: newSelected })\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { side, rows, padding, itemType, size } = this.props\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table size={size || 'small'} padding={padding || 'default'}>\r\n\t\t\t\t\t{this.props.tableHeadRenderer({ selected: this.state.selected })}\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.map((u, i) => {\r\n\t\t\t\t\t\t\tlet to = `/dashboard/${side}/${itemType}/${u.id || u.ipfs}`\r\n\t\t\t\t\t\t\tlet selected = this.state.selected.indexOf(u.id) !== -1\r\n\t\t\t\t\t\t\treturn this.props.rowRenderer(u, i, { to, selected, itemType })\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Rows\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { Stepper } from 'react-step/lib/stepper'\r\nimport { withStepper } from 'react-step/lib/with-stepper'\r\nimport StepperMUI from '@material-ui/core/Stepper'\r\nimport MobileStepper from '@material-ui/core/MobileStepper'\r\nimport Step from '@material-ui/core/Step'\r\nimport StepLabel from '@material-ui/core/StepLabel'\r\nimport Button from '@material-ui/core/Button'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Translate from 'components/translate/Translate'\r\nimport { styles } from './styles'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\n// const MyStep = ({ page, active, index, children, theme, canAdvance, canFinish, canReverse, setPageIndex, canAdvanceToPage, currentPage, goToPage, ...other }) => {}\r\nconst StepperNav = ({ pages, currentPage, classes, ...other }) => {\r\n\tif (window.innerWidth <= 768) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<StepLabel className={classes.mobileStepLabel}>\r\n\t\t\t\t\t({currentPage + 1}/{pages.length}) {pages[currentPage].title}\r\n\t\t\t\t</StepLabel>\r\n\t\t\t\t<MobileStepper\r\n\t\t\t\t\tactiveStep={currentPage}\r\n\t\t\t\t\tsteps={pages.length}\r\n\t\t\t\t\tposition={'static'}\r\n\t\t\t\t\tvariant='progress'\r\n\t\t\t\t\tclassName={classes.mobileStepper}\r\n\t\t\t\t></MobileStepper>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<StepperMUI alternativeLabel activeStep={currentPage}>\r\n\t\t\t{pages.map((page, i) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Step key={page.title}>\r\n\t\t\t\t\t\t<StepLabel>{page.title}</StepLabel>\r\n\t\t\t\t\t</Step>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</StepperMUI>\r\n\t)\r\n}\r\n\r\nclass MaterialStepper extends React.Component {\r\n\t// onComplete() {\r\n\t//     // console.log('currPage', this.currPage)\r\n\t//     let props = this.props\r\n\t//     let page = props.pages[props.currentPage]\r\n\r\n\t//     // console.log('props.pages[props.currentPage]', page.component)\r\n\t// }\r\n\r\n\tgoToPage(nextStep) {\r\n\t\tlet canAdvance =\r\n\t\t\tnextStep > this.props.currentPage && this.canAdvanceNextToPage()\r\n\t\tlet canGoBack = nextStep < this.props.currentPage\r\n\r\n\t\tif (canAdvance || canGoBack) {\r\n\t\t\tthis.props.setPageIndex(nextStep)\r\n\t\t}\r\n\t}\r\n\r\n\tcanAdvanceNextToPage() {\r\n\t\t/* TODO: add check for optional steps that can be skipped\r\n\t\t */\r\n\t\tlet page = this.props.pages[this.props.currentPage]\r\n\t\tif (\r\n\t\t\tthis.props.canAdvance &&\r\n\t\t\t!Object.keys(this.props.validations[page.props.validateId] || {}).length\r\n\t\t) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tisValidPage() {\r\n\t\tlet page = this.props.pages[this.props.currentPage]\r\n\t\treturn !Object.keys(this.props.validations[page.props.validateId] || {})\r\n\t\t\t.length\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { pages, component, validations, currentPage, t, classes, ...props } = {\r\n\t\t\t...this.props,\r\n\t\t}\r\n\t\tlet page = pages[currentPage]\r\n\t\tlet Comp = page.component\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Paper>\r\n\t\t\t\t\t<StepperNav\r\n\t\t\t\t\t\tclassName={classes.stepperNav}\r\n\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\tpages={pages}\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\t\tgoToPage={this.goToPage.bind(this)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<Paper\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\troot: classes.pagePaper,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className={classes.pageContent}>{<Comp {...page.props} />}</div>\r\n\r\n\t\t\t\t\t<div className={classes.controls}>\r\n\t\t\t\t\t\t<div className={classes.left}>\r\n\t\t\t\t\t\t\t{props.canReverse ? (\r\n\t\t\t\t\t\t\t\t<Button onClick={() => props.setPageIndex(currentPage - 1)}>\r\n\t\t\t\t\t\t\t\t\t{t('BACK')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className={classes.right}>\r\n\t\t\t\t\t\t\t{/* <Button label='Cancel' onClick={this.cancel}/> */}\r\n\t\t\t\t\t\t\t{page.cancelBtn ? <page.cancelBtn /> : null}\r\n\t\t\t\t\t\t\t{this.canAdvanceNextToPage() && !page.completeBtn ? (\r\n\t\t\t\t\t\t\t\t<Button onClick={this.goToPage.bind(this, currentPage + 1)}>\r\n\t\t\t\t\t\t\t\t\t{t('CONTINUE')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : !page.completeBtn ? (\r\n\t\t\t\t\t\t\t\t<Button label='Continue' disabled>\r\n\t\t\t\t\t\t\t\t\t{t('CONTINUE')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t{page.completeBtn && this.isValidPage() ? (\r\n\t\t\t\t\t\t\t\t<page.completeBtn />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst WithMaterialStepper = withStepper(\r\n\twithStyles(styles)(Translate(MaterialStepper))\r\n)\r\n\r\nclass MyMaterialStepper extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Stepper pages={this.props.pages} style={{ display: 'block' }}>\r\n\t\t\t\t<WithMaterialStepper\r\n\t\t\t\t\titemType={this.props.itemType}\r\n\t\t\t\t\tvalidations={this.props.validations}\r\n\t\t\t\t/>\r\n\t\t\t</Stepper>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nMyMaterialStepper.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tpages: PropTypes.array.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tlet memory = state.memory\r\n\treturn {\r\n\t\tvalidations: memory.validations,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(MyMaterialStepper)\r\n","export const styles = {\r\n\troot: {\r\n\t\tcolor: 'purple',\r\n\t\t'&$active': {\r\n\t\t\tcolor: 'green',\r\n\t\t},\r\n\t},\r\n\tactive: {\r\n\t\tcolor: 'yellow',\r\n\t},\r\n\tpagePaper: {\r\n\t\tposition: 'absolute',\r\n\t\tbottom: 0,\r\n\t\tleft: 0,\r\n\t\tright: 0,\r\n\t\ttop: 115,\r\n\t},\r\n\tpageContent: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\tleft: 20,\r\n\t\tright: 20,\r\n\t\tbottom: 50,\r\n\t\tpadding: 20,\r\n\t\toverflowY: 'auto',\r\n\t\toverflowX: 'hidden',\r\n\t\tWebkitOverflowScrolling: 'touch',\r\n\t\t'@media(max-width:500px)': {\r\n\t\t\tpaddingLeft: 0,\r\n\t\t\tpaddingRight: 0,\r\n\t\t},\r\n\t},\r\n\tcontrols: {\r\n\t\tposition: 'absolute',\r\n\t\tbottom: 5,\r\n\t\tleft: 20,\r\n\t\tright: 20,\r\n\t},\r\n\tright: {\r\n\t\ttextAlign: 'right',\r\n\t\tdisplay: 'inline-block',\r\n\t\twidth: '50%',\r\n\t\t'@media(max-width:475px)': {\r\n\t\t\twidth: '86%',\r\n\t\t},\r\n\t},\r\n\tleft: {\r\n\t\tdisplay: 'inline-block',\r\n\t\ttextAlign: 'left',\r\n\t\twidth: '50%',\r\n\t\t'@media(max-width:475px)': {\r\n\t\t\twidth: '14%',\r\n\t\t},\r\n\t},\r\n\tmobileStepper: {\r\n\t\twidth: '100%',\r\n\t\t'& div': {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '10px',\r\n\t\t},\r\n\t},\r\n\tmobileStepLabel: {\r\n\t\t'& span': {\r\n\t\t\tfontSize: '24px',\r\n\t\t\tmargin: '14px auto',\r\n\t\t},\r\n\t\ttextAlign: 'center',\r\n\t\twidth: 'auto',\r\n\t},\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n// import { connect } from 'react-redux'\r\n// import { bindActionCreators } from 'redux'\r\n// import actions from 'actions'\r\nimport MaterialStepper from 'components/dashboard/forms/stepper/MaterialUiStepper'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nclass FormSteps extends Component {\r\n\tshouldComponentUpdate(nextProps) {\r\n\t\treturn JSON.stringify(this.props) !== JSON.stringify(nextProps)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pages = []\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tSaveBtn,\r\n\t\t\tCancelBtn,\r\n\t\t\tonSave,\r\n\t\t\tstepsId,\r\n\t\t\tstepsPages,\r\n\t\t\tstepsPreviewPage,\r\n\t\t\tvalidateIdBase,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\t\tconst cancelButton = () => (\r\n\t\t\t<CancelBtn {...rest} stepsId={stepsId} onSave={onSave} t={t} />\r\n\t\t)\r\n\t\tconst validateId = (validateIdBase || '') + '-' + stepsId\r\n\r\n\t\tstepsPages.forEach((page, index) => {\r\n\t\t\tpages.push({\r\n\t\t\t\ttitle: t(page.title),\r\n\t\t\t\tcancelBtn: cancelButton,\r\n\t\t\t\tcomponent: ValidItemHoc(page.page || page),\r\n\t\t\t\tprops: { ...this.props, stepsId, validateId: validateId + '-' + index },\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tpages.push({\r\n\t\t\ttitle: t(stepsPreviewPage.title || 'PREVIEW'),\r\n\t\t\tcompleteBtn: () => (\r\n\t\t\t\t<SaveBtn {...rest} stepsId={stepsId} onSave={onSave} t={t} />\r\n\t\t\t),\r\n\t\t\tcancelBtn: cancelButton,\r\n\t\t\tcomponent: ValidItemHoc(stepsPreviewPage.page || stepsPreviewPage),\r\n\t\t\tprops: {\r\n\t\t\t\t...this.props,\r\n\t\t\t\tvalidateId: validateId + '-' + stepsPages.length,\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t// <div style={{ textAlign: 'left' }}>\r\n\t\t\t<MaterialStepper pages={pages} />\r\n\t\t\t// </div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nFormSteps.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\titemPages: PropTypes.arrayOf(PropTypes.func),\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsPages: PropTypes.arrayOf(PropTypes.object),\r\n}\r\n\r\nexport default Translate(FormSteps)\r\n","import grey from '@material-ui/core/colors/grey'\r\n\r\nexport const styles = theme => {\r\n\tconst spacing = theme.spacing(3)\r\n\tconst fullHeight = Math.max(window.innerHeight - spacing, 400)\r\n\treturn {\r\n\t\tdialog: {\r\n\t\t\tminHeight: `${fullHeight}px`,\r\n\t\t\tminWidth: 1024,\r\n\t\t\tmaxWidth: 1080,\r\n\t\t\tbackgroundColor: grey[200], // TODO: color,\r\n\t\t\t// maxHeight: `${fullHeight}`,\r\n\t\t\t'@media(max-width:1080px)': {\r\n\t\t\t\tmaxWidth: '100%',\r\n\t\t\t\tminWidth: `calc(100vw - ${theme.spacing(2)}px)`,\r\n\t\t\t},\r\n\t\t\t'@media(max-height:823px)': {\r\n\t\t\t\tminHeight: `calc(${fullHeight} - ${theme.spacing(2)}px)`,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdialogTitle: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'space-between',\r\n\t\t\twordWrap: 'break-word',\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1 auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tpadding: 0,\r\n\t\t\tmargin: `0 ${spacing}px ${spacing}px ${spacing}px`,\r\n\t\t\t'&:first-child': {\r\n\t\t\t\tpaddingTop: spacing,\r\n\t\t\t},\r\n\t\t\toverflow: 'visible',\r\n\t\t\toverflowY: 'auto',\r\n\t\t},\r\n\t\tcontentBox: {\r\n\t\t\t// position: 'absolute',\r\n\t\t\t// top: 0,\r\n\t\t\t// left: 0,\r\n\t\t\t// bottom: 0,\r\n\t\t\t// right: 0,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t},\r\n\t\tpropRow: {\r\n\t\t\tmargin: '10px 0',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\tcontentBody: {\r\n\t\t\tflexGrow: 1,\r\n\t\t},\r\n\t\tcontentTopLoadingCircular: {\r\n\t\t\tflexShrink: 0,\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t\tcontentTopLoading: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tjustifyContent: 'center',\r\n\t\t\talignItems: 'center',\r\n\t\t\t'& > div': {\r\n\t\t\t\tpadding: theme.spacing(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\ttextBtn: {\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t\tbtnIconLeft: {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t\tleftCol: {\r\n\t\t\ttextTransform: 'uppercase',\r\n\t\t\t// color: var(--color-adex-neutral-contrast-lighter);\r\n\t\t\ttextAlign: 'right',\r\n\t\t\t[theme.breakpoints.down('sm')]: {\r\n\t\t\t\ttextAlign: 'left',\r\n\t\t\t},\r\n\t\t},\r\n\t\trightCol: {\r\n\t\t\ttextAlign: 'left',\r\n\t\t},\r\n\t\tprogressCircleCenter: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: 'calc(50% - 30px)',\r\n\t\t\ttop: 'calc(50% - 30px)',\r\n\t\t},\r\n\t\tfloating: {\r\n\t\t\tposition: 'fixed',\r\n\t\t\ttop: 86,\r\n\t\t\tright: 40,\r\n\t\t\tzIndex: theme.zIndex.appBar,\r\n\t\t},\r\n\t\tbreakLong: {\r\n\t\t\twordBreak: 'break-word',\r\n\t\t\toverflowWrap: 'break-word',\r\n\t\t\thyphens: 'auto',\r\n\t\t},\r\n\t\tdemoImg: {\r\n\t\t\ttop: 'auto',\r\n\t\t\tleft: 'auto',\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\twidth: '100px',\r\n\t\t\theight: 'auto',\r\n\t\t\tposition: 'absolute',\r\n\t\t},\r\n\t\tdemoBody: {\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tcontentStickyTop: {\r\n\t\t\tmarginBottom: '2rem',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Fragment, useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Button from '@material-ui/core/Button'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport classnames from 'classnames'\r\nimport Slide from '@material-ui/core/Slide'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { t } from 'selectors'\r\n\r\nconst textBtn = ({ label, className, classes, style, onClick, ...rest }) => {\r\n\treturn (\r\n\t\t<span\r\n\t\t\tclassName={classnames(classes.textBtn, className)}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t{' '}\r\n\t\t\t{label}{' '}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nconst TextBtn = withStyles(styles)(textBtn)\r\n\r\nconst Transition = props => {\r\n\treturn <Slide direction='up' {...props} />\r\n}\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport default function ItemHoc(Decorated) {\r\n\tfunction WithDialog(props) {\r\n\t\tconst {\r\n\t\t\ticonButton,\r\n\t\t\ttextButton,\r\n\t\t\tfabButton,\r\n\t\t\tvariant,\r\n\t\t\tfabVariant,\r\n\t\t\tcolor,\r\n\t\t\tsize,\r\n\t\t\tmini,\r\n\t\t\tbtnLabelArgs,\r\n\t\t\tbtnLabel,\r\n\t\t\tdisabled,\r\n\t\t\tclassName,\r\n\t\t\ticon,\r\n\t\t\ttitle,\r\n\t\t\tdialogActions,\r\n\t\t\tonClick,\r\n\t\t\tfullWidth,\r\n\t\t\t...rest\r\n\t\t} = props\r\n\r\n\t\tconst btnProps = {\r\n\t\t\tcolor,\r\n\t\t\tsize,\r\n\t\t\tmini,\r\n\t\t\tvariant,\r\n\t\t\tfullWidth,\r\n\t\t}\r\n\r\n\t\tconst classes = useStyles()\r\n\t\tconst [open, setOpen] = useState(false)\r\n\r\n\t\tconst handleToggle = async () => {\r\n\t\t\tconst { onBeforeOpen } = props\r\n\t\t\tif (typeof onBeforeOpen === 'function' && !open) {\r\n\t\t\t\tawait onBeforeOpen()\r\n\t\t\t}\r\n\r\n\t\t\tsetOpen(!open)\r\n\t\t}\r\n\r\n\t\tconst closeDialog = () => {\r\n\t\t\tsetOpen(false)\r\n\t\t}\r\n\r\n\t\tlet ButtonComponent = Button\r\n\r\n\t\tif (iconButton) {\r\n\t\t\tButtonComponent = IconButton\r\n\t\t} else if (textButton) {\r\n\t\t\tButtonComponent = TextBtn\r\n\t\t} else if (fabButton) {\r\n\t\t\tButtonComponent = Fab\r\n\t\t}\r\n\r\n\t\tconst btnLabelTranslated = t(btnLabel, { args: btnLabelArgs || [''] })\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<ButtonComponent\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\taria-label={btnLabelTranslated}\r\n\t\t\t\t\tlabel={btnLabelTranslated}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thandleToggle()\r\n\t\t\t\t\t\tif (onClick) onClick()\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t{...btnProps}\r\n\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t{ [classes.floating]: !!fabButton },\r\n\t\t\t\t\t\t{ [classes.first]: color === 'first' },\r\n\t\t\t\t\t\t{ [classes.second]: color === 'second' }\r\n\t\t\t\t\t)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t\t{!iconButton && btnLabelTranslated}\r\n\t\t\t\t</ButtonComponent>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\t// disableBackdropClick\r\n\t\t\t\t\t// disableEscapeKeyDown\r\n\t\t\t\t\t// maxWidth=\"xs\"\r\n\t\t\t\t\t// fullScreen\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tonClose={handleToggle}\r\n\t\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t\t\tclasses={{ paper: classes.dialog }}\r\n\t\t\t\t\t// onEscKeyDown={handleToggle}\r\n\t\t\t\t\t// onOverlayClick={handleToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle disableTypography>\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tvariant='subtitle1'\r\n\t\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\t\troot: classnames(classes.dialogTitle, classes.breakLong),\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(title)}\r\n\t\t\t\t\t\t\t<IconButton onClick={handleToggle}>\r\n\t\t\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</DialogTitle>\r\n\t\t\t\t\t<DialogContent classes={{ root: classes.content }}>\r\n\t\t\t\t\t\t<Decorated {...rest} closeDialog={closeDialog} />\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t{dialogActions && <DialogActions>{dialogActions}</DialogActions>}\r\n\t\t\t\t</Dialog>\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n\r\n\tWithDialog.propTypes = {\r\n\t\tbtnLabel: PropTypes.string.isRequired,\r\n\t\ttitle: PropTypes.string.isRequired,\r\n\t\tfloating: PropTypes.bool,\r\n\t\tonBeforeOpen: PropTypes.func,\r\n\t}\r\n\r\n\treturn WithDialog\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { AdUnit } from 'adex-models'\r\n\r\nexport default function NewAdUnitHoc(Decorated) {\r\n\tclass ItemForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tactive: false,\r\n\t\t\t\tsaved: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value, newValues) => {\r\n\t\t\tthis.props.actions.updateNewItem(\r\n\t\t\t\tthis.props.newItem,\r\n\t\t\t\tnewValues || { [prop]: value },\r\n\t\t\t\t'AdUnit',\r\n\t\t\t\tAdUnit\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tonSave = () => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsave = () => {\r\n\t\t\tconst { actions, newItem } = this.props\r\n\t\t\tactions.addUnit(newItem)\r\n\r\n\t\t\tthis.onSave()\r\n\t\t\tactions.resetNewItem('AdUnit')\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tthis.onSave()\r\n\t\t\tthis.props.actions.resetNewItem('AdUnit')\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { classes, ...rest } = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItemForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tnewItem: PropTypes.object.isRequired,\r\n\t\ttitle: PropTypes.string,\r\n\t\taddTo: PropTypes.object,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { memory } = state\r\n\t\treturn {\r\n\t\t\tnewItem: new AdUnit(memory.newItem['AdUnit']),\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(ItemForm)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { constants, schemas, Joi } from 'adex-models'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport { addUrlUtmTracking } from 'helpers/utmHelpers'\r\n\r\nconst { adUnitPost } = schemas\r\n\r\nconst AdTypes = constants.AdUnitsTypes.map(type => {\r\n\treturn {\r\n\t\tvalue: type,\r\n\t\tlabel: type.split('_')[1],\r\n\t}\r\n})\r\n\r\nclass AdUnitBasic extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tconst { newItem } = props\r\n\t\tthis.validateTitle(newItem.title, false)\r\n\t\tthis.validateDescription(newItem.description, false)\r\n\t\tthis.validateTargetUrl(newItem.targetUrl, false)\r\n\t\tthis.validateAndUpdateType(false, newItem.type)\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (\r\n\t\t\tprevProps.newItem.title !== this.props.newItem.title ||\r\n\t\t\tprevProps.newItem.type !== this.props.newItem.type ||\r\n\t\t\tprevProps.newItem.temp.addUtmLink !== this.props.newItem.temp.addUtmLink\r\n\t\t) {\r\n\t\t\tthis.addUtmParameters()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateTitle(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adUnitPost.title)\r\n\r\n\t\tthis.props.validate('title', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateDescription(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adUnitPost.description)\r\n\r\n\t\tthis.props.validate('description', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateTargetUrl(targetUrl, dirty) {\r\n\t\tconst result = Joi.validate(targetUrl, adUnitPost.targetUrl)\r\n\t\tthis.props.validate('targetUrl', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t\tif (!result.error) this.addUtmParameters(targetUrl)\r\n\t}\r\n\r\n\tvalidateAndUpdateType = (dirty, value) => {\r\n\t\tconst result = Joi.validate(value, adUnitPost.type)\r\n\t\tthis.props.handleChange('type', value)\r\n\t\tthis.props.validate('type', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\taddUtmParameters() {\r\n\t\tconst { handleChange, newItem } = this.props\r\n\t\tconst { targetUrl, title, type, temp } = newItem\r\n\t\tconst { addUtmLink } = temp\r\n\t\tif (!!targetUrl) {\r\n\t\t\tconst newTargetUrl = addUrlUtmTracking({\r\n\t\t\t\ttargetUrl,\r\n\t\t\t\tcampaign: title,\r\n\t\t\t\tcontent: type,\r\n\t\t\t\tremoveFromUrl: !addUtmLink,\r\n\t\t\t})\r\n\t\t\thandleChange('targetUrl', newTargetUrl)\r\n\t\t}\r\n\t}\r\n\r\n\thandleChangeAddUtmLink(ev) {\r\n\t\tconst { temp } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\t\t// Need this to keep the state if user get back\r\n\t\tnewTemp.addUtmLink = ev.target.checked\r\n\t\tthis.props.handleChange('temp', newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, newItem, invalidFields, handleChange } = this.props\r\n\t\tconst { targetUrl, type, title, description, temp } = newItem\r\n\t\tconst { addUtmLink } = temp\r\n\t\tconst errTitle = invalidFields['title']\r\n\t\tconst errDescription = invalidFields['description']\r\n\t\tconst errTargetUrl = invalidFields['targetUrl']\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('title', { isProp: true })}\r\n\t\t\t\t\t\t\tname='name'\r\n\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('title', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateTitle(title, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateTitle(title, false)}\r\n\t\t\t\t\t\t\terror={errTitle && !!errTitle.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTitle && !!errTitle.dirty\r\n\t\t\t\t\t\t\t\t\t? errTitle.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('TITLE_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tlabel={t('description', { isProp: true })}\r\n\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('description', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\t\tthis.validateDescription(description, true)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateDescription(description, false)}\r\n\t\t\t\t\t\t\terror={errDescription && !!errDescription.dirty}\r\n\t\t\t\t\t\t\tmaxLength={300}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrDescription && !!errDescription.dirty\r\n\t\t\t\t\t\t\t\t\t? errDescription.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('DESCRIPTION_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('targetUrl', { isProp: true })}\r\n\t\t\t\t\t\t\tvalue={targetUrl}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('targetUrl', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateTargetUrl(targetUrl, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateTargetUrl(targetUrl, false)}\r\n\t\t\t\t\t\t\terror={errTargetUrl && !!errTargetUrl.dirty}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTargetUrl && !!errTargetUrl.dirty ? errTargetUrl.errMsg : ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tchecked={addUtmLink}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => this.handleChangeAddUtmLink(ev)}\r\n\t\t\t\t\t\t\t\t\tvalue='checkedB'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={t('ADD_UTM_LINK')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={this.validateAndUpdateType.bind(this, true)}\r\n\t\t\t\t\t\t\tsource={AdTypes}\r\n\t\t\t\t\t\t\tvalue={type + ''}\r\n\t\t\t\t\t\t\tlabel={t('adType', { isProp: true })}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitBasic.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdUnitBasic = NewAdUnitHoc(AdUnitBasic)\r\n\r\nexport default Translate(NewAdUnitBasic)\r\n","import url from 'url'\r\nimport { UTM_PARAMS } from 'constants/misc'\r\n\r\nexport const addUrlUtmTracking = ({\r\n\ttargetUrl,\r\n\tcampaign,\r\n\tcontent,\r\n\tremoveFromUrl,\r\n}) => {\r\n\tif (!!targetUrl) {\r\n\t\tconst URL = url.parse(targetUrl, true)\r\n\t\tURL.search = null\r\n\r\n\t\tif (URL.protocol && URL.host) {\r\n\t\t\tconst newQuery = {}\r\n\t\t\tif (removeFromUrl) {\r\n\t\t\t\tfor (let [key, value] of Object.entries(URL.query)) {\r\n\t\t\t\t\tif (UTM_PARAMS[key] !== value) {\r\n\t\t\t\t\t\tnewQuery[key] = value\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tURL.query = newQuery\r\n\t\t\t} else {\r\n\t\t\t\tconst query = { ...UTM_PARAMS, ...URL.query }\r\n\r\n\t\t\t\tif (campaign) {\r\n\t\t\t\t\tquery['utm_campaign'] = campaign\r\n\t\t\t\t}\r\n\t\t\t\tif (content) {\r\n\t\t\t\t\tquery['utm_content'] = content\r\n\t\t\t\t}\r\n\t\t\t\tURL.query = query\r\n\t\t\t}\r\n\t\t\treturn url.format(URL)\r\n\t\t}\r\n\t}\r\n\r\n\treturn targetUrl\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport ImgForm from 'components/dashboard/forms/ImgForm'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ValidImageHoc from 'components/dashboard/forms/ValidImageHoc'\r\n\r\nconst getWidAndHightFromType = type => {\r\n\ttype = type || 'legacy_300x100'\r\n\tif (!type) {\r\n\t\treturn {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t}\r\n\t}\r\n\r\n\tconst sizes = type.split('_')[1].split('x')\r\n\treturn {\r\n\t\twidth: parseInt(sizes[0], 10),\r\n\t\theight: parseInt(sizes[1], 10),\r\n\t}\r\n}\r\n\r\nclass AdUnitMedia extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem, validate } = this.props\r\n\t\tconst { type, temp } = newItem\r\n\t\tconst { tempUrl } = temp\r\n\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\tif (tempUrl) {\r\n\t\t\tconst isValidMediaSize = temp.width === width && temp.height === height\r\n\r\n\t\t\tvalidate('temp', {\r\n\t\t\t\tisValid: isValidMediaSize,\r\n\t\t\t\terr: {\r\n\t\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t\t},\r\n\t\t\t\tdirty: true,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tvalidate('temp', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\thandleImgChange = (prop, img) => {\r\n\t\tconst { newItem, handleChange } = this.props\r\n\t\tconst newTemp = { ...newItem.temp, ...img }\r\n\t\thandleChange(prop, newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { newItem, t, validateMedia } = this.props\r\n\t\tconst { type, temp } = newItem\r\n\t\tconst errImg = this.props.invalidFields['temp']\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<ImgForm\r\n\t\t\t\t\t\t\tlabel={t('UNIT_BANNER_IMG_LABEL')}\r\n\t\t\t\t\t\t\timgSrc={temp.tempUrl || ''}\r\n\t\t\t\t\t\t\tmime={temp.mime || ''}\r\n\t\t\t\t\t\t\tonChange={validateMedia.bind(this, {\r\n\t\t\t\t\t\t\t\tpropsName: 'temp',\r\n\t\t\t\t\t\t\t\twidthTarget: width,\r\n\t\t\t\t\t\t\t\theightTarget: height,\r\n\t\t\t\t\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\t\t\t\t\texact: true,\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tonChange: this.handleImgChange,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tadditionalInfo={t('UNIT_BANNER_IMG_INFO', {\r\n\t\t\t\t\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\terrMsg={errImg ? errImg.errMsg : ''}\r\n\t\t\t\t\t\t\tsize={{\r\n\t\t\t\t\t\t\t\twidth: width,\r\n\t\t\t\t\t\t\t\theight: height,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitMedia.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tnewItem: PropTypes.object.isRequired,\r\n}\r\n\r\nconst NewAdUnitMedia = NewAdUnitHoc(ValidImageHoc(AdUnitMedia))\r\n\r\nexport default Translate(NewAdUnitMedia)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { translate } from 'services/translations/translations'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\nexport const renderInput = inputProps => {\r\n\tconst { InputProps, classes, ref, ...other } = inputProps\r\n\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\tInputProps={{\r\n\t\t\t\tinputRef: ref,\r\n\t\t\t\tclasses: {\r\n\t\t\t\t\troot: classes.inputRoot,\r\n\t\t\t\t},\r\n\t\t\t\t...InputProps,\r\n\t\t\t}}\r\n\t\t\t{...other}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const renderSuggestion = ({\r\n\tsuggestion,\r\n\tindex,\r\n\tstyle,\r\n\titemProps,\r\n\thighlightedIndex,\r\n\tselectedItem,\r\n\tshowSelected,\r\n}) => {\r\n\tconst isHighlighted = highlightedIndex === index\r\n\t// TODO: make it better\r\n\t// Note wo work with obj and array\r\n\tconst isSelected =\r\n\t\t((selectedItem || {}).value || selectedItem || '').indexOf(\r\n\t\t\tsuggestion.value\r\n\t\t) > -1\r\n\r\n\tif (!showSelected && isSelected) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={style}>\r\n\t\t\t<ListItem\r\n\t\t\t\tbutton\r\n\t\t\t\t{...itemProps}\r\n\t\t\t\tkey={suggestion.value || suggestion.label}\r\n\t\t\t\tselected={isHighlighted}\r\n\t\t\t\tcomponent='div'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tfontWeight: isSelected ? 500 : 400,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ListItemText primary={suggestion.label} />\r\n\t\t\t</ListItem>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst newSuggestion = inputValue => {\r\n\treturn {\r\n\t\tlabel: `${translate(\r\n\t\t\t'CREATE_TAG_LABEL'\r\n\t\t)} \"${inputValue.toLowerCase().trim()}\"`,\r\n\t\tvalue: inputValue.toLowerCase().trim(),\r\n\t}\r\n}\r\n\r\nrenderSuggestion.propTypes = {\r\n\thighlightedIndex: PropTypes.number,\r\n\tindex: PropTypes.number,\r\n\titemProps: PropTypes.object,\r\n\tselectedItem: PropTypes.string,\r\n\tsuggestion: PropTypes.shape({ label: PropTypes.string }).isRequired,\r\n}\r\n\r\nexport const getSuggestions = (\r\n\tinputValue = '',\r\n\tsource,\r\n\tallowCreate,\r\n\tvalidateCreation\r\n) => {\r\n\tif (!inputValue) {\r\n\t\treturn source\r\n\t} else {\r\n\t\tinputValue = inputValue.toLowerCase().trim()\r\n\r\n\t\tsource = source.filter(suggestion => {\r\n\t\t\treturn (\r\n\t\t\t\t!inputValue ||\r\n\t\t\t\tsuggestion.label\r\n\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t.trim()\r\n\t\t\t\t\t.indexOf(inputValue) !== -1\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\t// Making sure that an option to create a new item will exist when needed\r\n\t\tconst values = source.map(item => {\r\n\t\t\treturn item.value\r\n\t\t})\r\n\r\n\t\tif (\r\n\t\t\t!values.includes(inputValue) &&\r\n\t\t\tallowCreate &&\r\n\t\t\t(!validateCreation || validateCreation(inputValue))\r\n\t\t) {\r\n\t\t\tsource.push(newSuggestion(inputValue))\r\n\t\t}\r\n\r\n\t\treturn source\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport keycode from 'keycode'\r\nimport Downshift from 'downshift'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport { renderInput, getSuggestions, renderSuggestion } from './common'\r\n\r\nclass DownshiftMultiple extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tinputValue: '',\r\n\t\t\tselectedItem: props.value || [],\r\n\t\t}\r\n\t}\r\n\r\n\thandleKeyDown = event => {\r\n\t\tconst { inputValue, selectedItem } = this.state\r\n\t\tif (\r\n\t\t\tselectedItem.length &&\r\n\t\t\t!inputValue.length &&\r\n\t\t\tkeycode(event) === 'backspace'\r\n\t\t) {\r\n\t\t\tconst newItemValue = selectedItem.slice(0, selectedItem.length - 1)\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedItem: newItemValue,\r\n\t\t\t})\r\n\r\n\t\t\tthis.props.onChange(newItemValue)\r\n\t\t}\r\n\t}\r\n\r\n\thandleInputChange = event => {\r\n\t\tconst value = event.target.value.toLowerCase()\r\n\t\tthis.setState({ inputValue: value })\r\n\t}\r\n\r\n\thandleChange = item => {\r\n\t\tlet { selectedItem } = this.state\r\n\r\n\t\tif (selectedItem.indexOf(item.value) === -1) {\r\n\t\t\tselectedItem = [...selectedItem, item.value]\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tinputValue: '',\r\n\t\t\tselectedItem,\r\n\t\t})\r\n\r\n\t\tthis.props.onChange(selectedItem)\r\n\t}\r\n\r\n\thandleDelete = item => () => {\r\n\t\tconst selectedItem = [...this.state.selectedItem]\r\n\t\tselectedItem.splice(selectedItem.indexOf(item), 1)\r\n\r\n\t\tthis.setState({ selectedItem })\r\n\t\tthis.props.onChange(selectedItem)\r\n\t}\r\n\r\n\t/**\r\n\t * source {'propValue': 'propsLabel'} - skip one mapping to get the label for Chip\r\n\t */\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses,\r\n\t\t\tsource,\r\n\t\t\tlabel,\r\n\t\t\tid,\r\n\t\t\tplaceholder,\r\n\t\t\thelperText,\r\n\t\t\topenOnClick,\r\n\t\t\tallowCreate,\r\n\t\t\tvalidateCreation,\r\n\t\t} = this.props\r\n\t\tconst { inputValue, selectedItem } = this.state\r\n\t\tconst allValues = Object.keys(source).map(key => {\r\n\t\t\treturn { value: key, label: source[key] }\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<Downshift\r\n\t\t\t\tinputValue={inputValue}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tselectedItem={selectedItem}\r\n\t\t\t\t// defaultIsOpen={true}\r\n\t\t\t\titemToString={item => item.label}\r\n\t\t\t>\r\n\t\t\t\t{({\r\n\t\t\t\t\tgetInputProps,\r\n\t\t\t\t\tgetItemProps,\r\n\t\t\t\t\tisOpen,\r\n\t\t\t\t\tinputValue: inputValue2,\r\n\t\t\t\t\tselectedItem: selectedItem2,\r\n\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\ttoggleMenu,\r\n\t\t\t\t}) => (\r\n\t\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t\t{renderInput({\r\n\t\t\t\t\t\t\tfullWidth: true,\r\n\t\t\t\t\t\t\tclasses,\r\n\t\t\t\t\t\t\thelperText,\r\n\t\t\t\t\t\t\tlabel,\r\n\t\t\t\t\t\t\tInputProps: getInputProps({\r\n\t\t\t\t\t\t\t\tstartAdornment: selectedItem.map(item => (\r\n\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\t\t\t\t\t\tlabel={source[item]}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\tonDelete={this.handleDelete(item)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)),\r\n\t\t\t\t\t\t\t\tonChange: this.handleInputChange,\r\n\t\t\t\t\t\t\t\tonKeyDown: this.handleKeyDown,\r\n\t\t\t\t\t\t\t\tplaceholder,\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tonClick: () => openOnClick && toggleMenu(),\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{isOpen ? (\r\n\t\t\t\t\t\t\t<Paper className={classes.paper} square>\r\n\t\t\t\t\t\t\t\t//TODO: use FixedSizeList!\r\n\t\t\t\t\t\t\t\t{getSuggestions(\r\n\t\t\t\t\t\t\t\t\tinputValue2,\r\n\t\t\t\t\t\t\t\t\tallValues,\r\n\t\t\t\t\t\t\t\t\tallowCreate,\r\n\t\t\t\t\t\t\t\t\tvalidateCreation\r\n\t\t\t\t\t\t\t\t).map((suggestion, index) =>\r\n\t\t\t\t\t\t\t\t\trenderSuggestion({\r\n\t\t\t\t\t\t\t\t\t\tsuggestion,\r\n\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\titemProps: getItemProps({ item: suggestion }),\r\n\t\t\t\t\t\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\t\t\t\t\t\tselectedItem: selectedItem2,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Downshift>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nDownshiftMultiple.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default DownshiftMultiple\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Downshift from 'downshift'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { renderInput, getSuggestions, renderSuggestion } from './common'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport { FixedSizeList } from 'react-window'\r\nimport AutoSizer from 'react-virtualized-auto-sizer'\r\nclass DownshiftSingle extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.props.onInit()\r\n\t\tthis.state = {\r\n\t\t\tinputValue: '',\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = item => {\r\n\t\tconst selectedItem = item ? item.value || item.label : item\r\n\t\tthis.props.onChange(selectedItem)\r\n\t}\r\n\r\n\thandleInputChange = inputValue => {\r\n\t\tif (this.state.inputValue !== inputValue) this.setState({ inputValue })\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses,\r\n\t\t\tsource,\r\n\t\t\terror,\r\n\t\t\tlabel,\r\n\t\t\tid,\r\n\t\t\tplaceholder,\r\n\t\t\thelperText,\r\n\t\t\terrorText,\r\n\t\t\tshowSelected,\r\n\t\t\tvalue,\r\n\t\t\topenOnClick,\r\n\t\t\tallowCreate,\r\n\t\t\tvalidateCreation,\r\n\t\t} = this.props\r\n\t\tconst allValues = source //Object.keys(source).map(key => { return { value: key, label: source[key] } })\r\n\t\tconst suggestions = getSuggestions(\r\n\t\t\tthis.state.inputValue,\r\n\t\t\tallValues,\r\n\t\t\tallowCreate,\r\n\t\t\tvalidateCreation\r\n\t\t)\r\n\t\treturn (\r\n\t\t\t<Downshift\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\titemToString={item => (item || {}).label || item || ''}\r\n\t\t\t\tselectedItem={value}\r\n\t\t\t>\r\n\t\t\t\t{({\r\n\t\t\t\t\tgetInputProps,\r\n\t\t\t\t\tgetItemProps,\r\n\t\t\t\t\tisOpen,\r\n\t\t\t\t\tinputValue,\r\n\t\t\t\t\tselectedItem,\r\n\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\tclearSelection,\r\n\t\t\t\t\ttoggleMenu,\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tthis.handleInputChange(inputValue)\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t\t\t{renderInput({\r\n\t\t\t\t\t\t\t\tlabel,\r\n\t\t\t\t\t\t\t\tvalue: inputValue,\r\n\t\t\t\t\t\t\t\tfullWidth: true,\r\n\t\t\t\t\t\t\t\tclasses,\r\n\t\t\t\t\t\t\t\thelperText,\r\n\t\t\t\t\t\t\t\tInputProps: getInputProps({\r\n\t\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\t\tonClick: () => {\r\n\t\t\t\t\t\t\t\t\t\tif (openOnClick) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearSelection()\r\n\t\t\t\t\t\t\t\t\t\t\ttoggleMenu()\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror,\r\n\t\t\t\t\t\t\t\t\tplaceholder,\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{isOpen && suggestions.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<Paper className={classes.paper} square>\r\n\t\t\t\t\t\t\t\t\t<AutoSizer>\r\n\t\t\t\t\t\t\t\t\t\t{({ height, width }) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<FixedSizeList\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.paper}\r\n\t\t\t\t\t\t\t\t\t\t\t\theight={height}\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth={width}\r\n\t\t\t\t\t\t\t\t\t\t\t\titemSize={46}\r\n\t\t\t\t\t\t\t\t\t\t\t\titemCount={suggestions.length}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{({ index, style }) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trenderSuggestion({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestion: suggestions[index],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titemProps: getItemProps({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem: suggestions[index],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedItem,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSelected,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t</FixedSizeList>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</AutoSizer>\r\n\t\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t\t<FormHelperText error id='component-error-text'>\r\n\t\t\t\t\t\t\t\t\t{errorText}\r\n\t\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t</Downshift>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nDownshiftSingle.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default DownshiftSingle\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport DownshiftMultiple from './DownshiftMultiple'\r\nimport DownshiftSingle from './DownshiftSingle'\r\n\r\nfunction Autocomplete(props) {\r\n\tconst { classes, source, multiple, ...rest } = props\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{multiple ? (\r\n\t\t\t\t<DownshiftMultiple classes={classes} source={source} {...rest} />\r\n\t\t\t) : (\r\n\t\t\t\t<DownshiftSingle classes={classes} source={source} {...rest} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nAutocomplete.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default withStyles(styles)(Autocomplete)\r\n","export const styles = theme => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\theight: 250,\r\n\t},\r\n\tcontainer: {\r\n\t\tflexGrow: 1,\r\n\t\tposition: 'relative',\r\n\t},\r\n\tpaper: {\r\n\t\tposition: 'absolute',\r\n\t\tzIndex: 1,\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tleft: 0,\r\n\t\tright: 0,\r\n\t\toverflow: 'hidden',\r\n\t\theight: 150,\r\n\t\twidth: '100%',\r\n\t},\r\n\tchip: {\r\n\t\tmargin: `${theme.spacing(1) / 2}px ${theme.spacing(1) / 2}px`,\r\n\t},\r\n\tinputRoot: {\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n})\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Slider from '@material-ui/core/Slider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Autocomplete from 'components/common/autocomplete'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { translate } from 'services/translations/translations'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { SOURCES } from 'constants/targeting'\r\n\r\nconst styles = {\r\n\tslider: {\r\n\t\tpadding: '22px 0px',\r\n\t},\r\n\tmarkLabel: {\r\n\t\ttop: '30px',\r\n\t},\r\n}\r\nconst marks = [\r\n\t{\r\n\t\tvalue: 5,\r\n\t\tlabel: 'Low',\r\n\t},\r\n\t{\r\n\t\tvalue: 50,\r\n\t\tlabel: 'Medium',\r\n\t},\r\n\t{\r\n\t\tvalue: 95,\r\n\t\tlabel: 'High',\r\n\t},\r\n]\r\n\r\nconst SourcesSelect = Object.keys(SOURCES).map(key => {\r\n\treturn {\r\n\t\tvalue: {\r\n\t\t\tkey: key, // FOR DROPDOWN\r\n\t\t\tsource: key,\r\n\t\t\tcollection: SOURCES[key].collection,\r\n\t\t\ttarget: { tag: '', score: 1 },\r\n\t\t\tlabel: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\tplaceholder: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t},\r\n\t\tlabel: translate(`ADD_NEW_${key.toUpperCase()}_TARGET`),\r\n\t}\r\n})\r\n\r\nclass AdUnitTargeting extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tconst { targets } = props.newItem.temp || {}\r\n\t\tthis.state = {\r\n\t\t\ttargets: [...(targets || [])],\r\n\t\t}\r\n\t}\r\n\r\n\tupdateNewItemCollections(targets) {\r\n\t\tconst { newItem, handleChange } = this.props\r\n\t\tconst collections = [...targets].reduce(\r\n\t\t\t(all, tg) => {\r\n\t\t\t\tconst newCollection = all[tg.collection] || []\r\n\r\n\t\t\t\t// NOTE: just skip empty tags\r\n\t\t\t\tif (!!tg.target.tag) {\r\n\t\t\t\t\tnewCollection.push(tg.target)\r\n\t\t\t\t}\r\n\t\t\t\tall[tg.collection] = newCollection\r\n\t\t\t\treturn all\r\n\t\t\t},\r\n\t\t\t{ targeting: [], tags: [] }\r\n\t\t)\r\n\r\n\t\tconst { temp } = newItem\r\n\t\tconst newTemp = { ...temp }\r\n\r\n\t\t// Need this to keep the state if user get back\r\n\t\tnewTemp.targets = [...targets]\r\n\t\tcollections.temp = newTemp\r\n\r\n\t\thandleChange(null, null, collections)\r\n\t}\r\n\r\n\thandleTargetChange = (index, prop, newValue) => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...newTargets[index].target }\r\n\t\tnewTarget[prop] = newValue\r\n\t\tnewTargets[index] = { ...newTargets[index], target: newTarget }\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tnewTarget = target => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...target }\r\n\t\tnewTarget.key = newTargets.length\r\n\t\tnewTarget.target = { ...target.target }\r\n\t\tnewTargets.push(newTarget)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tremoveTarget = index => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tnewTargets.splice(index, 1)\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t\tthis.validateAutocomplete({\r\n\t\t\tid: `target-${index}`,\r\n\t\t\tisValid: true,\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAutocomplete = ({ id, isValid, dirty }) => {\r\n\t\tthis.props.validate(id, {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'TARGETING_REQUIRED' },\r\n\t\t\tdirty,\r\n\t\t})\r\n\t}\r\n\r\n\ttargetTag = ({\r\n\t\tsource,\r\n\t\tcollection,\r\n\t\tplaceholder,\r\n\t\tlabel,\r\n\t\tindex,\r\n\t\ttarget,\r\n\t\tt,\r\n\t\tclasses,\r\n\t\tinvalidFields,\r\n\t}) => {\r\n\t\tconst id = `target-${index}`\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\tdirection='auto'\r\n\t\t\t\t\t\topenOnClick\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\terror={invalidFields[id] && invalidFields[id].dirty}\r\n\t\t\t\t\t\terrorText={\r\n\t\t\t\t\t\t\tinvalidFields[id] && !!invalidFields[id].dirty\r\n\t\t\t\t\t\t\t\t? invalidFields[id].errMsg\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={newValue => {\r\n\t\t\t\t\t\t\tthis.handleTargetChange(index, 'tag', newValue, collection)\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: newValue,\r\n\t\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonInit={() =>\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: target.tag,\r\n\t\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// validate={validate}\r\n\t\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\tsource={source}\r\n\t\t\t\t\t\tvalue={target.tag}\r\n\t\t\t\t\t\tsuggestionMatch='anywhere'\r\n\t\t\t\t\t\tshowSuggestionsWhenValueIsSet={true}\r\n\t\t\t\t\t\tallowCreate={!source.length}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={11} md={5}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Typography id={`tbaget-score-${index}`}>\r\n\t\t\t\t\t\t\t{/*TODO: Translate target name*/}\r\n\t\t\t\t\t\t\t{t('TARGET_SCORE_LABEL', {\r\n\t\t\t\t\t\t\t\targs: [target.score],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\tclasses={{ root: classes.slider, markLabel: classes.markLabel }}\r\n\t\t\t\t\t\t\taria-labelledby={`target-score-${index}`}\r\n\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\tvalueLabelDisplay='auto'\r\n\t\t\t\t\t\t\tdisabled={!target.tag}\r\n\t\t\t\t\t\t\tvalue={target.score}\r\n\t\t\t\t\t\t\tmarks={marks}\r\n\t\t\t\t\t\t\tonChange={(ev, newValue) =>\r\n\t\t\t\t\t\t\t\tthis.handleTargetChange(index, 'score', newValue, collection)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item container xs={1} md={1} alignItems='center'>\r\n\t\t\t\t\t<IconButton onClick={() => this.removeTarget(index)}>\r\n\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\t// newItem,\r\n\t\t\tclasses,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\t\t// const { targeting, tags } = newItem\r\n\r\n\t\tconst { targets } = this.state\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t{[...targets].map(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t{ source, collection, label, placeholder, target = {} } = {},\r\n\t\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t\t) => (\r\n\t\t\t\t\t\t\t\t<this.targetTag\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tlabel={t(label)}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t(placeholder)}\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tsource={SOURCES[source].src}\r\n\t\t\t\t\t\t\t\t\tcollection={collection}\r\n\t\t\t\t\t\t\t\t\ttarget={target}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tvariant='filled'\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={target => {\r\n\t\t\t\t\t\t\t\tthis.newTarget({ ...target })\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsource={[...SourcesSelect]}\r\n\t\t\t\t\t\t\tvalue={''}\r\n\t\t\t\t\t\t\tlabel={t('NEW_TARGET')}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitTargeting.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdUnitTargeting = NewAdUnitHoc(withStyles(styles)(AdUnitTargeting))\r\n\r\nexport default Translate(NewAdUnitTargeting)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn'\r\nimport WcIcon from '@material-ui/icons/Wc'\r\nimport ChildCareIcon from '@material-ui/icons/ChildCare'\r\nimport CompareArrows from '@material-ui/icons/CompareArrows'\r\n\r\nconst targetIcon = {\r\n\tlocation: LocationOnIcon,\r\n\tgender: WcIcon,\r\n\tage: ChildCareIcon,\r\n}\r\n\r\nconst getTargetType = tag => {\r\n\tconst type = tag.split('_')[0] || 'tags'\r\n\treturn type\r\n}\r\n\r\nclass UnitTargets extends Component {\r\n\ttargetArrayValues = (target, type, t, index) => {\r\n\t\tconst TargetIcon = targetIcon[type] || CompareArrows\r\n\t\treturn (\r\n\t\t\t<span key={target.tag + target.score + index}>\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<TargetIcon />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\tprimary={t(target.tag, { isTarget: true })}\r\n\t\t\t\t\t\tsecondary={target.score}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ListItemSecondaryAction>{target.score}</ListItemSecondaryAction>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<Divider />\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n\r\n\tTargetsList = ({ targets = [], subHeader, t, ...rest }) => (\r\n\t\t<List\r\n\t\t\tdense\r\n\t\t\tsubheader={subHeader ? <ListSubheader caption={t(subHeader)} /> : null}\r\n\t\t>\r\n\t\t\t{targets.map(target => {\r\n\t\t\t\tconst type = getTargetType(target.tag)\r\n\t\t\t\treturn this.targetArrayValues(target, type, t)\r\n\t\t\t})}\r\n\t\t</List>\r\n\t)\r\n\r\n\trender() {\r\n\t\treturn <this.TargetsList {...this.props} />\r\n\t}\r\n}\r\n\r\nUnitTargets.propTypes = {\r\n\ttargets: PropTypes.array.isRequired,\r\n\tsubHeader: PropTypes.string,\r\n\tt: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default UnitTargets\r\n","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { CircularProgress } from '@material-ui/core'\r\nimport { styles } from './styles.js'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\n\r\n// TODO: fix responsive styles\r\nconst propRow = ({\r\n\tclasses,\r\n\tleft,\r\n\tright,\r\n\tclassName,\r\n\tclassNameLeft,\r\n\tclassNameRight,\r\n\tstyle = {},\r\n}) => (\r\n\t<Grid\r\n\t\titem\r\n\t\tcontainer\r\n\t\tspacing={2}\r\n\t\txs={12}\r\n\t\tclassName={classnames(className)}\r\n\t\tstyle={style}\r\n\t>\r\n\t\t<Grid\r\n\t\t\titem\r\n\t\t\txs={12}\r\n\t\t\tsm={4}\r\n\t\t\tlg={3}\r\n\t\t\tclassName={classnames(classes.leftCol, classes.uppercase, classNameLeft)}\r\n\t\t>\r\n\t\t\t{left}\r\n\t\t</Grid>\r\n\t\t<Grid\r\n\t\t\titem\r\n\t\t\txs={12}\r\n\t\t\tsm={8}\r\n\t\t\tlg={9}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tclasses.rightCol,\r\n\t\t\t\tclasses.breakLong,\r\n\t\t\t\tclassNameRight\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t{right}\r\n\t\t</Grid>\r\n\t</Grid>\r\n)\r\n\r\nconst contentBox = ({ classes, children, className }) => (\r\n\t<div className={classnames(classes.contentBox, className)}>{children}</div>\r\n)\r\n\r\nconst contentBody = ({ classes, children, className }) => (\r\n\t<div className={classnames(classes.contentBody, className)}>{children}</div>\r\n)\r\n\r\nconst contentStickyTop = ({ classes, children, className }) => (\r\n\t<div className={classnames(classes.contentStickyTop)}>{children}</div>\r\n)\r\n\r\nconst topLoading = ({ classes, msg, subMsg, className }) => (\r\n\t<div className={classnames(classes.contentTopLoading)}>\r\n\t\t<CircularProgress className={classes.contentTopLoadingCircular} size={50} />\r\n\t\t<div>\r\n\t\t\t<Typography component='div'> {msg} </Typography>\r\n\t\t\t{subMsg && (\r\n\t\t\t\t<Typography component='div'>\r\n\t\t\t\t\t<strong>{subMsg}</strong>\r\n\t\t\t\t</Typography>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t</div>\r\n)\r\n\r\nconst fullContentSpinner = ({ classes }) => (\r\n\t<CircularProgress\r\n\t\tclassName={classnames(classes.progressCircleCenter)}\r\n\t\tsize={50}\r\n\t/>\r\n)\r\n\r\nexport const PropRow = withStyles(styles)(propRow)\r\nexport const ContentBox = withStyles(styles)(contentBox)\r\nexport const ContentBody = withStyles(styles)(contentBody)\r\nexport const ContentStickyTop = withStyles(styles)(contentStickyTop)\r\nexport const TopLoading = withStyles(styles)(topLoading)\r\nexport const FullContentSpinner = withStyles(styles)(fullContentSpinner)\r\n","export const styles = theme => {\r\n\t// const spacing = theme.spacing(1)\r\n\treturn {\r\n\t\timgPreview: {\r\n\t\t\tmaxHeight: 225,\r\n\t\t\twidth: 'auto',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: 'auto',\r\n\t\t\tboxShadow: theme.shadows[2],\r\n\t\t},\r\n\t\timgPreviewWrapper: {\r\n\t\t\theight: 'max-content',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport NewAdUnitHoc from './NewAdUnitHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Img from 'components/common/img/Img'\r\nimport UnitTargets from 'components/dashboard/containers/UnitTargets'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n} from 'components/common/dialog/content'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from '../styles'\r\n\r\nclass AdUnitFormPreview extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.save = props.save\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, account, ...rest } = this.props\r\n\t\tconst { newItem, t } = rest\r\n\t\tconst { type, title, description, temp, targeting } = newItem\r\n\r\n\t\treturn (\r\n\t\t\t<ContentBox>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('owner', { isProp: true })}\r\n\t\t\t\t\t\tright={account.wallet.address}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow left={t('type', { isProp: true })} right={type} />\r\n\t\t\t\t\t<PropRow left={t('title', { isProp: true })} right={title} />\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('description', { isProp: true })}\r\n\t\t\t\t\t\tright={description}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('MEDIA')}\r\n\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\t\t\t\tclassName={classes.imgPreview}\r\n\t\t\t\t\t\t\t\tsrc={temp.tempUrl || ''}\r\n\t\t\t\t\t\t\t\talt={title}\r\n\t\t\t\t\t\t\t\tmediaMime={temp.mime}\r\n\t\t\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{targeting && (\r\n\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\tleft={t('targeting', { isProp: true })}\r\n\t\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\ttargets={targeting}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\t// subHeader={'TARGETING'}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{/* </Grid> */}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdUnitFormPreview.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewAdUnitFormPreview = NewAdUnitHoc(withStyles(styles)(AdUnitFormPreview))\r\nexport default connect(mapStateToProps)(Translate(NewAdUnitFormPreview))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { Campaign } from 'adex-models'\r\n\r\nexport default function NewCampaignHoc(Decorated) {\r\n\tclass ItemForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tactive: false,\r\n\t\t\t\tsaved: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value, newValues) => {\r\n\t\t\tthis.props.actions.updateNewItem(\r\n\t\t\t\tthis.props.newItem,\r\n\t\t\t\tnewValues || { [prop]: value },\r\n\t\t\t\t'Campaign',\r\n\t\t\t\tCampaign\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tonSave = () => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsave = async () => {\r\n\t\t\tconst { actions, newItem } = this.props\r\n\t\t\tconst { temp } = newItem\r\n\t\t\tconst newTemp = { ...temp }\r\n\t\t\tnewTemp.waitingAction = true\r\n\t\t\tthis.handleChange('temp', newTemp)\r\n\t\t\tawait actions.openCampaign({ campaign: newItem })\r\n\r\n\t\t\tnewTemp.waitingAction = false\r\n\t\t\tthis.handleChange('temp', newTemp)\r\n\t\t\tthis.onSave()\r\n\t\t\tactions.resetNewItem('Campaign')\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tthis.onSave()\r\n\t\t\tthis.props.actions.resetNewItem('Campaign')\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { classes, ...rest } = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItemForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tnewItem: PropTypes.object.isRequired,\r\n\t\ttitle: PropTypes.string,\r\n\t\taddTo: PropTypes.object,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist, memory } = state\r\n\r\n\t\tconst adUnits = persist.items['AdUnit'] || {}\r\n\t\tconst adUnitsArray = Array.from(Object.values(adUnits)) || []\r\n\t\treturn {\r\n\t\t\tnewItem: new Campaign(memory.newItem['Campaign']),\r\n\t\t\tadUnits,\r\n\t\t\tadUnitsArray,\r\n\t\t\tspinner: memory.spinners['opening-campaign'],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(ItemForm)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewCampaignHoc from './NewCampaignHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { ContentBody } from 'components/common/dialog/content'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport { AdUnit } from 'adex-models'\r\nimport { NewUnitDialog } from 'components/dashboard/forms/items/NewItems'\r\nimport { SORT_PROPERTIES_ITEMS, FILTER_PROPERTIES_ITEMS } from 'constants/misc'\r\n\r\nclass CampaignUnits extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tselected:\r\n\t\t\t\tprops.newItem.adUnits.reduce((selected, unit) => {\r\n\t\t\t\t\tselected[unit.ipfs] = true\r\n\t\t\t\t\treturn selected\r\n\t\t\t\t}, {}) || {},\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tthis.validateUnits(newItem.adUnits, true)\r\n\t}\r\n\r\n\tvalidateUnits(adUnits, dirty) {\r\n\t\tconst isValid = !!adUnits.length\r\n\t\tthis.props.validate('adUnits', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_ADUNITS_REQIURED' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\thandleSelect = (ipfs, checked) => {\r\n\t\tconst newSelected = { ...this.state.selected }\r\n\t\tconst { adUnits, handleChange } = this.props\r\n\r\n\t\tif (checked) {\r\n\t\t\tnewSelected[ipfs] = true\r\n\t\t} else {\r\n\t\t\tdelete newSelected[ipfs]\r\n\t\t}\r\n\r\n\t\tthis.setState({ selected: newSelected })\r\n\t\tconst units = Object.keys(newSelected).map(key => {\r\n\t\t\treturn adUnits[key]\r\n\t\t})\r\n\r\n\t\thandleChange('adUnits', units)\r\n\t\tthis.validateUnits(units, true)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { adUnitsArray, t } = this.props\r\n\t\tconst hasAdUnits = adUnitsArray && adUnitsArray.length\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tspacing={2}\r\n\t\t\t\t\tdirection={hasAdUnits ? null : 'column'}\r\n\t\t\t\t\talignItems={hasAdUnits ? null : 'center'}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t{hasAdUnits ? (\r\n\t\t\t\t\t\t\t\t<ItemsList\r\n\t\t\t\t\t\t\t\t\tobjModel={AdUnit}\r\n\t\t\t\t\t\t\t\t\tselectMode\r\n\t\t\t\t\t\t\t\t\tselectedItems={this.state.selected}\r\n\t\t\t\t\t\t\t\t\tonSelect={(unit, checked) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.handleSelect(unit, checked)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\titems={adUnitsArray}\r\n\t\t\t\t\t\t\t\t\tlistMode='rows'\r\n\t\t\t\t\t\t\t\t\titemType={'AdUnit'}\r\n\t\t\t\t\t\t\t\t\tviewModeId={'newCampaignAdUnits'}\r\n\t\t\t\t\t\t\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\t\tnoActions\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Grid container direction='column' alignItems='center'>\r\n\t\t\t\t\t\t\t\t\t<p>{t('ERR_CAMPAIGN_REQUIRES_UNITS')}</p>\r\n\t\t\t\t\t\t\t\t\t<NewUnitDialog\r\n\t\t\t\t\t\t\t\t\t\tvariant='extended'\r\n\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\tbtnLabel='NEW_UNIT'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaignUnits.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n\tadUnits: PropTypes.object.isRequired,\r\n\tadUnitsArray: PropTypes.array.isRequired,\r\n}\r\n\r\nconst NewCampaignUnits = NewCampaignHoc(CampaignUnits)\r\n\r\nexport default Translate(NewCampaignUnits)\r\n","import React, { Component } from 'react'\r\nimport { DateTimePicker as MuiDateTimePicker } from 'material-ui-pickers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CalendarIcon from '@material-ui/icons/DateRange'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\n\r\nconst CalendarIconAdor = ({\r\n\ticon = <CalendarIcon />,\r\n\ticonColor,\r\n\tonIconClick,\r\n}) => (\r\n\t<InputAdornment position='end'>\r\n\t\t<IconButton color={iconColor} onClick={onIconClick}>\r\n\t\t\t{icon}\r\n\t\t</IconButton>\r\n\t</InputAdornment>\r\n)\r\n\r\nexport class DateTimePicker extends Component {\r\n\trender() {\r\n\t\tconst { calendarIcon, icon, iconColor, onIconClick, ...rest } = this.props\r\n\t\treturn (\r\n\t\t\t<MuiDateTimePicker\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tdisabled: rest.disabled,\r\n\t\t\t\t\tendAdornment: calendarIcon ? (\r\n\t\t\t\t\t\t<CalendarIconAdor\r\n\t\t\t\t\t\t\ticon={icon}\r\n\t\t\t\t\t\t\ticonColor={iconColor}\r\n\t\t\t\t\t\t\tonIconClick={onIconClick}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : null,\r\n\t\t\t\t}}\r\n\t\t\t\t{...rest}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default DateTimePicker\r\n\r\nconst dateTimePickerStyled = ({ classes, calendarIcon, icon, ...rest }) => {\r\n\treturn (\r\n\t\t<DateTimePicker\r\n\t\t\tInputLabelProps={{\r\n\t\t\t\tclasses: {\r\n\t\t\t\t\troot: classes.datepickerContrastLabel,\r\n\t\t\t\t},\r\n\t\t\t\tFormLabelClasses: {\r\n\t\t\t\t\troot: classes.datepickerContrastLabel,\r\n\t\t\t\t\tfocused: classes.datepickerContrastLabelFocused,\r\n\t\t\t\t},\r\n\t\t\t}}\r\n\t\t\tInputProps={{\r\n\t\t\t\tdisabled: rest.disabled,\r\n\t\t\t\tclasses: {\r\n\t\t\t\t\troot: classes.datepickerContrastInput,\r\n\t\t\t\t\tunderline: classes.datepickerContrastUnderline,\r\n\t\t\t\t},\r\n\t\t\t\tendAdornment: calendarIcon ? <CalendarIconAdor icon={icon} /> : null,\r\n\t\t\t}}\r\n\t\t\t{...rest}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const DateTimePickerContrast = withStyles(styles)(dateTimePickerStyled)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport NewCampaignHoc from './NewCampaignHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport FormGroup from '@material-ui/core/FormGroup'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n// import Dropdown from 'components/common/dropdown'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport DateTimePicker from 'components/common/DateTimePicker'\r\nimport { utils } from 'ethers'\r\nimport { validations } from 'adex-models'\r\nimport MomentUtils from '@date-io/moment'\r\nimport { totalFeesFormatted } from 'services/smart-contracts/actions/core'\r\nconst moment = new MomentUtils()\r\n\r\nconst VALIDATOR_LEADER_URL = process.env.VALIDATOR_LEADER_URL\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\nconst VALIDATOR_LEADER_FEE = '0'\r\nconst VALIDATOR_FOLLOWER_URL = process.env.VALIDATOR_FOLLOWER_URL\r\nconst VALIDATOR_FOLLOWER_ID = process.env.VALIDATOR_FOLLOWER_ID\r\nconst VALIDATOR_FOLLOWER_FEE = '0'\r\n\r\nconst AdvPlatformValidators = {\r\n\t[VALIDATOR_LEADER_ID]: {\r\n\t\tid: VALIDATOR_LEADER_ID,\r\n\t\turl: VALIDATOR_LEADER_URL,\r\n\t\tfee: VALIDATOR_LEADER_FEE,\r\n\t},\r\n}\r\n\r\nconst PubPlatformValidators = {\r\n\t[VALIDATOR_FOLLOWER_ID]: {\r\n\t\tid: VALIDATOR_FOLLOWER_ID,\r\n\t\turl: VALIDATOR_FOLLOWER_URL,\r\n\t\tfee: VALIDATOR_FOLLOWER_FEE,\r\n\t},\r\n}\r\n\r\nconst VALIDATOR_SOURCES = [AdvPlatformValidators, PubPlatformValidators]\r\n\r\n// const AdvValidatorsSrc = Object.keys(AdvPlatformValidators).map(key => {\r\n// \tconst val = AdvPlatformValidators[key]\r\n// \treturn {\r\n// \t\tvalue: key,\r\n// \t\tlabel: `${val.url} - ${val.id}`,\r\n// \t}\r\n// })\r\n\r\n// const PubValidatorsSrc = Object.keys(PubPlatformValidators).map(key => {\r\n// \tconst val = PubPlatformValidators[key]\r\n// \treturn {\r\n// \t\tvalue: key,\r\n// \t\tlabel: `${val.url} - ${val.id}`,\r\n// \t}\r\n// })\r\n\r\nconst getTotalImpressions = ({ depositAmount, minPerImpression, t }) => {\r\n\tconst dep = parseFloat(depositAmount)\r\n\tconst min = parseFloat(minPerImpression)\r\n\tif (!dep) {\r\n\t\treturn t('DEPOSIT_NOT_SET')\r\n\t} else if (!min) {\r\n\t\treturn t('CPM_NOT_SET')\r\n\t} else {\r\n\t\tconst impressions = utils.commify(Math.floor((dep / min) * 1000))\r\n\t\treturn t('TOTAL_IMPRESSIONS', { args: [impressions] })\r\n\t}\r\n}\r\n\r\nconst validateCampaignDates = ({\r\n\tcreated = Date.now(),\r\n\twithdrawPeriodStart,\r\n\tactiveFrom,\r\n}) => {\r\n\tlet error = null\r\n\r\n\tif (withdrawPeriodStart && activeFrom && withdrawPeriodStart <= activeFrom) {\r\n\t\terror = { message: 'ERR_END_BEFORE_START', prop: 'withdrawPeriodStart' }\r\n\t} else if (withdrawPeriodStart && withdrawPeriodStart < created) {\r\n\t\terror = { message: 'ERR_END_BEFORE_NOW', prop: 'withdrawPeriodStart' }\r\n\t} else if (activeFrom && activeFrom < created) {\r\n\t\terror = { message: 'ERR_START_BEFORE_NOW', prop: 'activeFrom' }\r\n\t} else if (activeFrom && !withdrawPeriodStart) {\r\n\t\terror = { message: 'ERR_NO_END', prop: 'withdrawPeriodStart' }\r\n\t} else if (!(withdrawPeriodStart || activeFrom)) {\r\n\t\terror = { message: 'ERR_NO_DATE_SET', prop: 'withdrawPeriodStart' }\r\n\t}\r\n\r\n\treturn { error }\r\n}\r\n\r\nconst validateAmounts = ({\r\n\tmaxDeposit = 0,\r\n\tdepositAmount,\r\n\tminPerImpression,\r\n}) => {\r\n\tconst maxDep = parseFloat(maxDeposit)\r\n\tconst dep = parseFloat(depositAmount)\r\n\tconst min = parseFloat(minPerImpression)\r\n\r\n\tlet error = null\r\n\tif (dep && dep > maxDep) {\r\n\t\terror = {\r\n\t\t\tmessage: 'ERR_INSUFFICIENT_IDENTITY_BALANCE',\r\n\t\t\tprop: 'depositAmount',\r\n\t\t}\r\n\t}\r\n\tif (dep && dep < min) {\r\n\t\terror = { message: 'ERR_CPM_OVER_DEPOSIT', prop: 'minPerImpression' }\r\n\t}\r\n\tif (dep <= 0) {\r\n\t\terror = { message: 'ERR_ZERO_DEPOSIT', prop: 'depositAmount' }\r\n\t}\r\n\tif (min <= 0) {\r\n\t\terror = { message: 'ERR_ZERO_CPM', prop: 'minPerImpression' }\r\n\t}\r\n\r\n\treturn { error }\r\n}\r\n\r\nclass CampaignFinance extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tthis.validateAndUpdateValidator(false, 0, newItem.validators[0])\r\n\t\tthis.validateAndUpdateValidator(false, 1, newItem.validators[1])\r\n\t\tthis.validateAmount(\r\n\t\t\tnewItem.depositAmount,\r\n\t\t\t'depositAmount',\r\n\t\t\tfalse,\r\n\t\t\t'REQUIRED_FIELD'\r\n\t\t)\r\n\t\tthis.validateAmount(\r\n\t\t\tnewItem.minPerImpression,\r\n\t\t\t'minPerImpression',\r\n\t\t\tfalse,\r\n\t\t\t'REQUIRED_FIELD'\r\n\t\t)\r\n\t\tthis.handleDates('activeFrom', newItem.activeFrom, false)\r\n\t\tthis.handleDates('withdrawPeriodStart', newItem.withdrawPeriodStart, false)\r\n\t}\r\n\r\n\tvalidateAndUpdateValidator = (dirty, index, key = {}, update) => {\r\n\t\tconst { handleChange, newItem, validate } = this.props\r\n\t\tconst { validators } = newItem\r\n\t\tconst newValidators = [...validators]\r\n\t\tconst newValue = VALIDATOR_SOURCES[index][key.id || key]\r\n\r\n\t\tnewValidators[index] = newValue\r\n\r\n\t\tconst isValid =\r\n\t\t\t!!newValidators[0] &&\r\n\t\t\t!!newValidators[1] &&\r\n\t\t\t!!newValidators[0].id &&\r\n\t\t\t!!newValidators[0].url &&\r\n\t\t\t!!newValidators[1].id &&\r\n\t\t\t!!newValidators[1].url\r\n\r\n\t\t// TEMP - update like this to avoid changing the flow and other functions\r\n\t\t// <---\r\n\t\tif (!isValid) {\r\n\t\t\tconst tempValidators = [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: VALIDATOR_LEADER_ID,\r\n\t\t\t\t\turl: VALIDATOR_LEADER_URL,\r\n\t\t\t\t\tfee: VALIDATOR_LEADER_FEE,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: VALIDATOR_FOLLOWER_ID,\r\n\t\t\t\t\turl: VALIDATOR_FOLLOWER_URL,\r\n\t\t\t\t\tfee: VALIDATOR_FOLLOWER_FEE,\r\n\t\t\t\t},\r\n\t\t\t]\r\n\r\n\t\t\thandleChange('validators', tempValidators)\r\n\r\n\t\t\tvalidate('validators', {\r\n\t\t\t\tisValid: true,\r\n\t\t\t\terr: { msg: 'ERR_VALIDATORS' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// END TEMP --->\r\n\r\n\t\tif (update) {\r\n\t\t\thandleChange('validators', newValidators)\r\n\t\t}\r\n\r\n\t\tvalidate('validators', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_VALIDATORS' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAmount(value = '', prop, dirty, errMsg) {\r\n\t\tconst isValidNumber = validations.isNumberString(value)\r\n\t\tconst isValid = isValidNumber && utils.parseUnits(value, 18)\r\n\r\n\t\tif (!isValid) {\r\n\t\t\tthis.props.validate(prop, {\r\n\t\t\t\tisValid: isValid,\r\n\t\t\t\terr: { msg: errMsg || 'ERR_INVALID_AMOUNT' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tconst { newItem, account } = this.props\r\n\r\n\t\t\tconst { availableIdentityBalanceDai = 0 } = account.stats.formatted || {}\r\n\r\n\t\t\tconst depositAmount =\r\n\t\t\t\tprop === 'depositAmount' ? value : newItem.depositAmount\r\n\t\t\tconst minPerImpression =\r\n\t\t\t\tprop === 'minPerImpression' ? value : newItem.minPerImpression\r\n\t\t\tconst maxDeposit =\r\n\t\t\t\tparseFloat(availableIdentityBalanceDai) - parseFloat(totalFeesFormatted)\r\n\t\t\tconst result = validateAmounts({\r\n\t\t\t\tmaxDeposit,\r\n\t\t\t\tdepositAmount,\r\n\t\t\t\tminPerImpression,\r\n\t\t\t})\r\n\r\n\t\t\tthis.props.validate(prop, {\r\n\t\t\t\tisValid: !result.error,\r\n\t\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\thandleDates = (prop, value, dirty) => {\r\n\t\tconst { newItem, handleChange, validate } = this.props\r\n\t\tconst withdrawPeriodStart =\r\n\t\t\tprop === 'withdrawPeriodStart' ? value : newItem.withdrawPeriodStart\r\n\t\tconst activeFrom = prop === 'activeFrom' ? value : newItem.activeFrom\r\n\t\tconst result = validateCampaignDates({\r\n\t\t\twithdrawPeriodStart,\r\n\t\t\tactiveFrom,\r\n\t\t\tcreated: newItem.created,\r\n\t\t})\r\n\r\n\t\tvalidate('activeFrom', {\r\n\t\t\tisValid: !(result.error && result.error.prop === 'activeFrom'),\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\r\n\t\tvalidate('withdrawPeriodStart', {\r\n\t\t\tisValid: !(result.error && result.error.prop === 'withdrawPeriodStart'),\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\r\n\t\tif (value) {\r\n\t\t\thandleChange(prop, value)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { handleChange, newItem, t, invalidFields, account } = this.props\r\n\t\tconst {\r\n\t\t\tvalidators,\r\n\t\t\tdepositAmount,\r\n\t\t\tminPerImpression,\r\n\t\t\t// depositAsset,\r\n\t\t\tactiveFrom,\r\n\t\t\twithdrawPeriodStart,\r\n\t\t\tminTargetingScore,\r\n\t\t} = newItem\r\n\r\n\t\tconst { availableIdentityBalanceDai = 0 } = account.stats.formatted || {}\r\n\r\n\t\tconst from = activeFrom || undefined\r\n\t\tconst to = withdrawPeriodStart || undefined\r\n\t\tconst now = moment.date().valueOf()\r\n\r\n\t\tconst errDepAmnt = invalidFields['depositAmount']\r\n\t\tconst errMin = invalidFields['minPerImpression']\r\n\t\tconst errFrom = invalidFields['activeFrom']\r\n\t\tconst errTo = invalidFields['withdrawPeriodStart']\r\n\r\n\t\tconst impressions = !(errDepAmnt || errMin)\r\n\t\t\t? getTotalImpressions({ depositAmount, minPerImpression, t })\r\n\t\t\t: ''\r\n\r\n\t\tconst leader = validators[0] || {}\r\n\t\tconst follower = validators[1] || {}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t{/* <Grid item xs={12}> */}\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t{/* <Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={value =>\r\n\t\t\t\t\t\t\t\tthis.validateAndUpdateValidator(true, 0, value, true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsource={AdvValidatorsSrc}\r\n\t\t\t\t\t\t\tvalue={(validators[0] || {}).id + ''}\r\n\t\t\t\t\t\t\tlabel={t('ADV_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\thtmlId='leader-validator-dd'\r\n\t\t\t\t\t\t\tname='leader-validator'\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<FormControl fullWidth disabled>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor='leader-validator'>\r\n\t\t\t\t\t\t\t\t{t('ADV_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Input id='leader-validator' value={leader.url || ''} />\r\n\t\t\t\t\t\t\t<FormHelperText>{leader.id}</FormHelperText>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{/* <Grid item xs={12}> */}\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t{/* <Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={value =>\r\n\t\t\t\t\t\t\t\tthis.validateAndUpdateValidator(true, 1, value, true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsource={PubValidatorsSrc}\r\n\t\t\t\t\t\t\tvalue={(validators[1] || {}).id + ''}\r\n\t\t\t\t\t\t\tlabel={t('PUB_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\thtmlId='follower-validator-dd'\r\n\t\t\t\t\t\t\tname='follower-validator'\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<FormControl fullWidth disabled>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor='follower-validator'>\r\n\t\t\t\t\t\t\t\t{t('PUB_PLATFORM_VALIDATOR')}\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Input id='follower-validator' value={follower.url || ''} />\r\n\t\t\t\t\t\t\t<FormHelperText>{follower.id}</FormHelperText>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('DEPOSIT_AMOUNT_LABEL', {\r\n\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\tparseFloat(availableIdentityBalanceDai) -\r\n\t\t\t\t\t\t\t\t\t\tparseFloat(totalFeesFormatted)\r\n\t\t\t\t\t\t\t\t\t).toFixed(2),\r\n\t\t\t\t\t\t\t\t\t'SAI',\r\n\t\t\t\t\t\t\t\t\ttotalFeesFormatted,\r\n\t\t\t\t\t\t\t\t\t'SAI',\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tname='depositAmount'\r\n\t\t\t\t\t\t\tvalue={depositAmount}\r\n\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\tthis.validateAmount(ev.target.value, 'depositAmount', true)\r\n\t\t\t\t\t\t\t\thandleChange('depositAmount', ev.target.value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\terror={errDepAmnt && !!errDepAmnt.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrDepAmnt && !!errDepAmnt.dirty\r\n\t\t\t\t\t\t\t\t\t? errDepAmnt.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('DEPOSIT_AMOUNT_HELPER_TXT', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [totalFeesFormatted, 'SAI'],\r\n\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('CPM_LABEL', { args: [impressions] })}\r\n\t\t\t\t\t\t\tname='minPerImpression'\r\n\t\t\t\t\t\t\tvalue={minPerImpression}\r\n\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\tthis.validateAmount(ev.target.value, 'minPerImpression', true)\r\n\t\t\t\t\t\t\t\thandleChange('minPerImpression', ev.target.value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\terror={errMin && !!errMin.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrMin && !!errMin.dirty ? errMin.errMsg : t('CPM_HELPER_TXT')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<DateTimePicker\r\n\t\t\t\t\t\t\temptyLabel={t('SET_CAMPAIGN_START')}\r\n\t\t\t\t\t\t\tdisablePast\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tcalendarIcon\r\n\t\t\t\t\t\t\tlabel={t('CAMPAIGN_STARTS')}\r\n\t\t\t\t\t\t\tminDate={now}\r\n\t\t\t\t\t\t\tmaxDate={to}\r\n\t\t\t\t\t\t\tonChange={val => {\r\n\t\t\t\t\t\t\t\tthis.handleDates('activeFrom', val.valueOf(), true)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tvalue={from || null}\r\n\t\t\t\t\t\t\terror={errFrom && !!errFrom.dirty}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrFrom && !!errFrom.dirty\r\n\t\t\t\t\t\t\t\t\t? errFrom.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('CAMPAIGN_STARTS_FROM_HELPER_TXT')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<DateTimePicker\r\n\t\t\t\t\t\t\temptyLabel={t('SET_CAMPAIGN_END')}\r\n\t\t\t\t\t\t\tdisablePast\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tcalendarIcon\r\n\t\t\t\t\t\t\tlabel={t('CAMPAIGN_ENDS')}\r\n\t\t\t\t\t\t\tminDate={from || now}\r\n\t\t\t\t\t\t\tonChange={val =>\r\n\t\t\t\t\t\t\t\tthis.handleDates('withdrawPeriodStart', val.valueOf(), true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={to || null}\r\n\t\t\t\t\t\t\terror={errTo && !!errTo.dirty}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTo && !!errTo.dirty\r\n\t\t\t\t\t\t\t\t\t? errTo.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('CAMPAIGN_ENDS_HELPER_TXT')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={6}>\r\n\t\t\t\t\t\t<FormGroup row>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tchecked={!!minTargetingScore}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\t\t\t\t\thandleChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'minTargetingScore',\r\n\t\t\t\t\t\t\t\t\t\t\t\tev.target.checked ? 1 : null\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvalue='minTargetingScore'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel={t('CAMPAIGN_MIN_TARGETING')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaignFinance.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewCampaignFinance = NewCampaignHoc(CampaignFinance)\r\n\r\nexport default connect(mapStateToProps)(Translate(NewCampaignFinance))\r\n","export const styles = theme => {\r\n\treturn {\r\n\t\tdatepickerContrastInput: {\r\n\t\t\tcolor: theme.palette.common.white,\r\n\t\t},\r\n\t\tdatepickerContrastLabel: {\r\n\t\t\tcolor: theme.palette.common.white,\r\n\t\t\t'&$datepickerContrastLabelFocused': {\r\n\t\t\t\tcolor: theme.palette.common.white,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdatepickerContrastLabelFocused: {},\r\n\t\tdatepickerContrastUnderline: {\r\n\t\t\t'&:after': {\r\n\t\t\t\t// borderBottomColor: theme.palette.common.white,\r\n\t\t\t\tborder: '0 !important',\r\n\t\t\t},\r\n\t\t\t'&:before': {\r\n\t\t\t\tborder: '0 !important',\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { TopLoading } from 'components/common/dialog/content'\r\n\r\nexport const WalletAction = ({ t, authType }) => {\r\n\tlet msg = ''\r\n\tlet subMsg\r\n\tswitch (authType) {\r\n\t\tcase AUTH_TYPES.METAMASK.name:\r\n\t\t\tmsg = 'METAMASK_WAITING_ACTION'\r\n\t\t\tsubMsg = 'METAMASK_WAITING_ACTION_INFO'\r\n\t\t\tbreak\r\n\t\tcase AUTH_TYPES.TREZOR.name:\r\n\t\t\tmsg = 'TREZOR_WAITING_ACTION'\r\n\t\t\tbreak\r\n\t\tcase AUTH_TYPES.LEDGER.name:\r\n\t\t\tmsg = 'LEDGER_WAITING_ACTION'\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tmsg = 'WAITING_FOR_USER_ACTION'\r\n\t\t\tbreak\r\n\t}\r\n\r\n\treturn <TopLoading msg={t(msg)} subMsg={t(subMsg)} />\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport NewCampaignHoc from './NewCampaignHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport { WalletAction } from 'components/dashboard/forms/FormsCommon'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n} from 'components/common/dialog/content'\r\nimport { AdUnit } from 'adex-models'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from '../styles'\r\nimport { formatDateTime } from 'helpers/formatters'\r\n\r\nclass CampaignFormPreview extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.save = props.save\r\n\t}\r\n\r\n\tAdUnitsTable = ({ items }) => {\r\n\t\treturn (\r\n\t\t\t<Grid item sm={12}>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<ItemsList\r\n\t\t\t\t\t\tobjModel={AdUnit}\r\n\t\t\t\t\t\titems={items}\r\n\t\t\t\t\t\tlistMode\r\n\t\t\t\t\t\titemType={'AdUnit'}\r\n\t\t\t\t\t\tnoControls\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tnoActions\r\n\t\t\t\t\t\tsortProperties={[]}\r\n\t\t\t\t\t\tviewModeId={'newCampaignAdUnitsPreview'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { account, newItem, t } = this.props\r\n\t\tconst {\r\n\t\t\t// targeting,\r\n\t\t\tadUnits,\r\n\t\t\tvalidators,\r\n\t\t\tdepositAmount,\r\n\t\t\tminPerImpression,\r\n\t\t\t// maxPerImpression,\r\n\t\t\t// depositAsset,\r\n\t\t\twithdrawPeriodStart,\r\n\t\t\tactiveFrom,\r\n\t\t\tminTargetingScore,\r\n\t\t\t// nonce\r\n\t\t} = newItem\r\n\r\n\t\treturn (\r\n\t\t\t<ContentBox>\r\n\t\t\t\t{newItem.temp.waitingAction ? (\r\n\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t<WalletAction t={t} authType={account.wallet.authType} />\r\n\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('owner', { isProp: true })}\r\n\t\t\t\t\t\tright={account.identity.address}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* <PropRow\r\n\t\t\t\t\t\tleft={t('targeting', { isProp: true })}\r\n\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\ttargets={targeting}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t// subHeader={'TARGETING'}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('adUnits', { isProp: true })}\r\n\t\t\t\t\t\tright={<this.AdUnitsTable items={adUnits} />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('validators', { isProp: true })}\r\n\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{validators.map(val => (\r\n\t\t\t\t\t\t\t\t\t<div key={val.id}>{`${val.url} - ${val.id}`}</div>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('depositAmount', { isProp: true })}\r\n\t\t\t\t\t\tright={depositAmount + ' SAI'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('CPM', { isProp: true })}\r\n\t\t\t\t\t\tright={minPerImpression + ' SAI'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* <PropRow\r\n\t\t\t\t\t\tleft={t('maxPerImpression', { isProp: true })}\r\n\t\t\t\t\t\tright={maxPerImpression}\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('activeFrom', { isProp: true })}\r\n\t\t\t\t\t\tright={formatDateTime(activeFrom)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('withdrawPeriodStart', { isProp: true })}\r\n\t\t\t\t\t\tright={formatDateTime(withdrawPeriodStart)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{minTargetingScore && <PropRow right={t('CAMPAIGN_MIN_TARGETING')} />}\r\n\t\t\t\t\t{/* <PropRow\r\n\t\t\t\t\t\tleft={t('created', { isProp: true })}\r\n\t\t\t\t\t\tright={formatDateTime(created)}\r\n\t\t\t\t\t/> */}\r\n\r\n\t\t\t\t\t{/* </Grid> */}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaignFormPreview.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewCampaignFormPreview = NewCampaignHoc(\r\n\twithStyles(styles)(CampaignFormPreview)\r\n)\r\nexport default connect(mapStateToProps)(Translate(NewCampaignFormPreview))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { AdSlot } from 'adex-models'\r\n\r\nexport default function NewAdUnitHoc(Decorated) {\r\n\tclass ItemForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tactive: false,\r\n\t\t\t\tsaved: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value, newValues) => {\r\n\t\t\tthis.props.actions.updateNewItem(\r\n\t\t\t\tthis.props.newItem,\r\n\t\t\t\tnewValues || { [prop]: value },\r\n\t\t\t\t'AdSlot',\r\n\t\t\t\tAdSlot\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tonSave = () => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsave = () => {\r\n\t\t\tconst { actions, newItem } = this.props\r\n\r\n\t\t\tactions.addSlot(newItem)\r\n\r\n\t\t\tthis.onSave()\r\n\t\t\tactions.resetNewItem('AdSlot')\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tthis.onSave()\r\n\t\t\tthis.props.actions.resetNewItem('AdSlot')\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { classes, ...rest } = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tItemForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tnewItem: PropTypes.object.isRequired,\r\n\t\ttitle: PropTypes.string,\r\n\t\taddTo: PropTypes.object,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { memory } = state\r\n\t\treturn {\r\n\t\t\tnewItem: new AdSlot(memory.newItem['AdSlot']),\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(ItemForm)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { utils } from 'ethers'\r\nimport { validations, constants, schemas, Joi } from 'adex-models'\r\n\r\nconst { adSlotPost } = schemas\r\n\r\nconst AdTypes = constants.AdUnitsTypes.map(type => {\r\n\treturn {\r\n\t\tvalue: type,\r\n\t\tlabel: type.split('_')[1],\r\n\t}\r\n})\r\n\r\nclass AdSlotBasic extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tthis.validateTitle(newItem.title, false)\r\n\t\tthis.validateDescription(newItem.description, false)\r\n\t\tthis.validateAndUpdateType(false, newItem.type)\r\n\t}\r\n\r\n\tvalidateTitle(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adSlotPost.title)\r\n\r\n\t\tthis.props.validate('title', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateDescription(name, dirty, errMsg) {\r\n\t\tconst result = Joi.validate(name, adSlotPost.description)\r\n\r\n\t\tthis.props.validate('description', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAndUpdateType = (dirty, value) => {\r\n\t\tconst result = Joi.validate(value, adSlotPost.type)\r\n\r\n\t\tthis.props.handleChange('type', value)\r\n\t\tthis.props.validate('type', {\r\n\t\t\tisValid: !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAmount(value = '', prop, dirty, errMsg) {\r\n\t\tconst isValidNumber = validations.isNumberString(value)\r\n\t\tconst isValid = isValidNumber && utils.parseUnits(value, 18)\r\n\r\n\t\tthis.props.validate(prop, {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: errMsg || 'ERR_INVALID_AMOUNT' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tupdateMinPerImpression(value = '') {\r\n\t\tconst { temp } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\t\tnewTemp.minPerImpression = value\r\n\r\n\t\tthis.props.handleChange('temp', newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tnewItem,\r\n\t\t\tinvalidFields,\r\n\t\t\thandleChange,\r\n\t\t\t// nameHelperTxt,\r\n\t\t\t// descriptionHelperTxt\r\n\t\t} = this.props\r\n\t\tconst { type, title, description, temp } = newItem\r\n\t\tconst { minPerImpression } = temp\r\n\t\tconst errTitle = invalidFields['title']\r\n\t\tconst errDescription = invalidFields['description']\r\n\t\tconst errMin = invalidFields['minPerImpression']\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={'Ad Slot ' + t('title', { isProp: true })}\r\n\t\t\t\t\t\t\tname='name'\r\n\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('title', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateTitle(title, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateTitle(title, false)}\r\n\t\t\t\t\t\t\terror={errTitle && !!errTitle.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrTitle && !!errTitle.dirty\r\n\t\t\t\t\t\t\t\t\t? errTitle.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('TITLE_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tlabel={t('description', { isProp: true })}\r\n\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('description', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateDescription(description, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateDescription(description, false)}\r\n\t\t\t\t\t\t\terror={errDescription && !!errDescription.dirty}\r\n\t\t\t\t\t\t\tmaxLength={300}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrDescription && !!errDescription.dirty\r\n\t\t\t\t\t\t\t\t\t? errDescription.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('DESCRIPTION_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={this.validateAndUpdateType.bind(this, true)}\r\n\t\t\t\t\t\t\tsource={AdTypes}\r\n\t\t\t\t\t\t\tvalue={type + ''}\r\n\t\t\t\t\t\t\tlabel={t('adType', { isProp: true })}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12} md={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('MIN_CPM_SLOT_LABEL', { args: ['SAI'] })}\r\n\t\t\t\t\t\t\tname='minPerImpression'\r\n\t\t\t\t\t\t\tvalue={minPerImpression}\r\n\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\tthis.validateAmount(ev.target.value, 'minPerImpression', true)\r\n\t\t\t\t\t\t\t\tthis.updateMinPerImpression(ev.target.value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\terror={errMin && !!errMin.dirty}\r\n\t\t\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrMin && !!errMin.dirty\r\n\t\t\t\t\t\t\t\t\t? errMin.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('SLOT_MIN_CPM_HELPER')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotBasic.propTypes = {\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdSlotBasic = NewAdSlotHoc(AdSlotBasic)\r\n\r\nexport default Translate(NewAdSlotBasic)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport ImgForm from 'components/dashboard/forms/ImgForm'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport ValidImageHoc from 'components/dashboard/forms/ValidImageHoc'\r\nimport Collapse from '@material-ui/core/Collapse'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport { schemas, Joi } from 'adex-models'\r\n\r\nconst { adUnitPost } = schemas\r\n\r\nconst getWidAndHightFromType = type => {\r\n\ttype = type || 'legacy_300x250'\r\n\tif (!type) {\r\n\t\treturn {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t}\r\n\t}\r\n\r\n\tconst sizes = type.split('_')[1].split('x')\r\n\treturn {\r\n\t\twidth: parseInt(sizes[0], 10),\r\n\t\theight: parseInt(sizes[1], 10),\r\n\t}\r\n}\r\n\r\nclass AdSlotMedia extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { newItem } = this.props\r\n\t\tconst { temp, targetUrl } = newItem\r\n\t\tconst { useFallback } = temp\r\n\r\n\t\tif (useFallback) {\r\n\t\t\tthis.validateImage(useFallback)\r\n\t\t\tthis.validateFallbackUrl(targetUrl, true, useFallback)\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateImage = useFallback => {\r\n\t\tconst { newItem, validate } = this.props\r\n\t\tconst { type, temp } = newItem\r\n\t\tconst { tempUrl } = temp\r\n\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\tconst isValidMediaSize =\r\n\t\t\t!useFallback ||\r\n\t\t\t(tempUrl &&\r\n\t\t\t\t// TODO: validate ration not exact\r\n\t\t\t\ttemp.width === width &&\r\n\t\t\t\ttemp.height === height)\r\n\r\n\t\tvalidate('temp', {\r\n\t\t\tisValid: isValidMediaSize,\r\n\t\t\terr: {\r\n\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t},\r\n\t\t\tdirty: true,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateFallbackUrl = (targetUrl, dirty, useFallback) => {\r\n\t\tconst result = Joi.validate(targetUrl, adUnitPost.targetUrl)\r\n\t\tthis.props.validate('targetUrl', {\r\n\t\t\tisValid: !useFallback || !result.error,\r\n\t\t\terr: { msg: result.error ? result.error.message : '' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\thandleFallbackChange = useFallback => {\r\n\t\tconst { temp, targetUrl } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\t\tnewTemp.useFallback = useFallback\r\n\r\n\t\tthis.props.handleChange('temp', newTemp)\r\n\t\tthis.validateFallbackUrl(targetUrl, null, useFallback)\r\n\t\tthis.validateImage(useFallback)\r\n\t}\r\n\r\n\thandleImgChange = (prop, img) => {\r\n\t\tconst { newItem, handleChange } = this.props\r\n\t\tconst newTemp = { ...newItem.temp, ...img }\r\n\t\thandleChange(prop, newTemp)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tnewItem,\r\n\t\t\tt,\r\n\t\t\tvalidateMedia,\r\n\t\t\tinvalidFields,\r\n\t\t\thandleChange,\r\n\t\t} = this.props\r\n\t\tconst { targetUrl, type, temp } = newItem\r\n\t\tconst useFallback = temp.useFallback || false\r\n\t\tconst errImg = this.props.invalidFields['temp']\r\n\t\tconst errFallbackUrl = invalidFields['targetUrl']\r\n\t\tconst { width, height } = getWidAndHightFromType(type)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\t\tchecked={useFallback}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => this.handleFallbackChange(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={t('USE_FALLBACK_DATA')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormHelperText>{t('USE_FALLBACK_DATA_INFO')}</FormHelperText>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Collapse in={useFallback}>\r\n\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\tlabel={t('targetUrl', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\tvalue={targetUrl}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => handleChange('targetUrl', ev.target.value)}\r\n\t\t\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\t\t\tthis.validateFallbackUrl(targetUrl, true, useFallback)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\t\t\tthis.validateFallbackUrl(targetUrl, false, useFallback)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\terror={errFallbackUrl && !!errFallbackUrl.dirty}\r\n\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\terrFallbackUrl && !!errFallbackUrl.dirty\r\n\t\t\t\t\t\t\t\t\t\t\t? errFallbackUrl.errMsg\r\n\t\t\t\t\t\t\t\t\t\t\t: t('FALLBACKTARGETURL_HELPER')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t\t\t<ImgForm\r\n\t\t\t\t\t\t\t\t\tlabel={t('SLOT_FALLBACK_MEDIA_LABEL')}\r\n\t\t\t\t\t\t\t\t\timgSrc={temp.tempUrl || ''}\r\n\t\t\t\t\t\t\t\t\tonChange={validateMedia.bind(this, {\r\n\t\t\t\t\t\t\t\t\t\tpropsName: 'temp',\r\n\t\t\t\t\t\t\t\t\t\twidthTarget: width,\r\n\t\t\t\t\t\t\t\t\t\theightTarget: height,\r\n\t\t\t\t\t\t\t\t\t\tmsg: 'ERR_IMG_SIZE_EXACT',\r\n\t\t\t\t\t\t\t\t\t\texact: true,\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tonChange: this.handleImgChange,\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tadditionalInfo={t('SLOT_FALLBACK_MEDIA_INFO', {\r\n\t\t\t\t\t\t\t\t\t\targs: [width, height, 'px'],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\terrMsg={errImg ? errImg.errMsg : ''}\r\n\t\t\t\t\t\t\t\t\tsize={{\r\n\t\t\t\t\t\t\t\t\t\twidth: width,\r\n\t\t\t\t\t\t\t\t\t\theight: height,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Collapse>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotMedia.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tnewItem: PropTypes.object.isRequired,\r\n}\r\n\r\nconst NewAdSlotMedia = NewAdSlotHoc(ValidImageHoc(AdSlotMedia))\r\n\r\nexport default Translate(NewAdSlotMedia)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Slider from '@material-ui/core/Slider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Autocomplete from 'components/common/autocomplete'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { constants } from 'adex-models'\r\nimport { translate } from 'services/translations/translations'\r\nimport { withStyles } from '@material-ui/core/styles'\r\n\r\nconst autocompleteTagsSingleSelect = () => {\r\n\treturn constants.PredefinedTags.map(tag => {\r\n\t\treturn {\r\n\t\t\tlabel: tag._id,\r\n\t\t\tvalue: tag._id,\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst AcTags = autocompleteTagsSingleSelect()\r\n\r\nconst SOURCES = {\r\n\ttags: { src: AcTags, collection: 'tags' },\r\n\tcustom: { src: [], collection: 'tags' },\r\n}\r\n\r\nconst styles = {\r\n\tslider: {\r\n\t\tpadding: '22px 0px',\r\n\t},\r\n\tmarkLabel: {\r\n\t\ttop: '30px',\r\n\t},\r\n}\r\nconst marks = [\r\n\t{\r\n\t\tvalue: 5,\r\n\t\tlabel: 'Low',\r\n\t},\r\n\t{\r\n\t\tvalue: 50,\r\n\t\tlabel: 'Medium',\r\n\t},\r\n\t{\r\n\t\tvalue: 95,\r\n\t\tlabel: 'High',\r\n\t},\r\n]\r\n\r\nconst SourcesSelect = Object.keys(SOURCES).map(key => {\r\n\treturn {\r\n\t\tvalue: {\r\n\t\t\tkey: key, // FOR DROPDOWN\r\n\t\t\tsource: key,\r\n\t\t\tcollection: SOURCES[key].collection,\r\n\t\t\ttarget: { tag: '', score: 1 },\r\n\t\t\tlabel: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t\tplaceholder: translate(`TARGET_LABEL_${key.toUpperCase()}`),\r\n\t\t},\r\n\t\tlabel: translate(`ADD_NEW_${key.toUpperCase()}_TARGET`),\r\n\t}\r\n})\r\n\r\nclass AdSlotTargeting extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tconst { targets } = props.newItem.temp || {}\r\n\t\tthis.state = {\r\n\t\t\ttargets: targets || [],\r\n\t\t}\r\n\t}\r\n\r\n\tupdateNewItemCollections(targets) {\r\n\t\tconst collections = [...targets].reduce(\r\n\t\t\t(all, tg) => {\r\n\t\t\t\tconst newCollection = all[tg.collection] || []\r\n\t\t\t\t// NOTE: just skip empty tags\r\n\t\t\t\tif (!!tg.target.tag) {\r\n\t\t\t\t\tnewCollection.push(tg.target)\r\n\t\t\t\t}\r\n\t\t\t\tall[tg.collection] = newCollection\r\n\t\t\t\treturn all\r\n\t\t\t},\r\n\t\t\t{ targeting: [], tags: [] }\r\n\t\t)\r\n\r\n\t\tconst { temp } = this.props.newItem\r\n\t\tconst newTemp = { ...temp }\r\n\r\n\t\t// Need this to keep the state if user get back\r\n\t\tnewTemp.targets = [...targets]\r\n\t\tcollections.temp = newTemp\r\n\r\n\t\tthis.props.handleChange(null, null, collections)\r\n\t}\r\n\r\n\thandleTargetChange = (index, prop, newValue) => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...newTargets[index].target }\r\n\t\tnewTarget[prop] = newValue\r\n\t\tnewTargets[index] = { ...newTargets[index], target: newTarget }\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tnewTarget = target => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tconst newTarget = { ...target }\r\n\t\tnewTarget.key = newTargets.length\r\n\t\tnewTarget.target = { ...target.target }\r\n\t\tnewTargets.push(newTarget)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t}\r\n\r\n\tremoveTarget = index => {\r\n\t\tconst newTargets = [...this.state.targets]\r\n\t\tnewTargets.splice(index, 1)\r\n\t\tthis.updateNewItemCollections(newTargets)\r\n\t\tthis.setState({ targets: newTargets })\r\n\t\tthis.validateAutocomplete({\r\n\t\t\tid: `target-${index}`,\r\n\t\t\tisValid: true,\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateAutocomplete = ({ id, isValid, dirty }) => {\r\n\t\tthis.props.validate(id, {\r\n\t\t\tisValid,\r\n\t\t\terr: { msg: 'TARGETING_REQUIRED' },\r\n\t\t\tdirty,\r\n\t\t})\r\n\t}\r\n\r\n\ttargetTag = ({\r\n\t\tsource,\r\n\t\tcollection,\r\n\t\tplaceholder,\r\n\t\tlabel,\r\n\t\tindex,\r\n\t\ttarget,\r\n\t\tt,\r\n\t\tclasses,\r\n\t\tinvalidFields,\r\n\t}) => {\r\n\t\tconst id = `target-${index}`\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\tdirection='auto'\r\n\t\t\t\t\t\topenOnClick\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\terror={invalidFields[id] && invalidFields[id].dirty}\r\n\t\t\t\t\t\terrorText={\r\n\t\t\t\t\t\t\tinvalidFields[id] && !!invalidFields[id].dirty\r\n\t\t\t\t\t\t\t\t? invalidFields[id].errMsg\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={newValue => {\r\n\t\t\t\t\t\t\tthis.handleTargetChange(index, 'tag', newValue, collection)\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: newValue,\r\n\t\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonInit={() =>\r\n\t\t\t\t\t\t\tthis.validateAutocomplete({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tisValid: target.tag,\r\n\t\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// validate={validate}\r\n\t\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\tsource={source}\r\n\t\t\t\t\t\tvalue={target.tag}\r\n\t\t\t\t\t\tsuggestionMatch='anywhere'\r\n\t\t\t\t\t\tshowSuggestionsWhenValueIsSet={true}\r\n\t\t\t\t\t\tallowCreate={!source.length}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={11} md={5}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Typography id={`target-score-${index}`}>\r\n\t\t\t\t\t\t\t{/*TODO: Translate target name*/}\r\n\t\t\t\t\t\t\t{t('TARGET_SCORE_LABEL', {\r\n\t\t\t\t\t\t\t\targs: [target.score],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\tclasses={{ root: classes.slider, markLabel: classes.markLabel }}\r\n\t\t\t\t\t\t\taria-labelledby={`target-score-${index}`}\r\n\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\tvalueLabelDisplay='auto'\r\n\t\t\t\t\t\t\tdisabled={!target.tag}\r\n\t\t\t\t\t\t\tvalue={target.score}\r\n\t\t\t\t\t\t\tmarks={marks}\r\n\t\t\t\t\t\t\tonChange={(ev, newValue) =>\r\n\t\t\t\t\t\t\t\tthis.handleTargetChange(index, 'score', newValue, collection)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item container xs={1} md={1} alignItems='center'>\r\n\t\t\t\t\t<IconButton onClick={() => this.removeTarget(index)}>\r\n\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\t// newItem,\r\n\t\t\tclasses,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\t\t// const { targeting, tags } = newItem\r\n\r\n\t\tconst { targets } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t{[...targets].map(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t{ source, collection, label, placeholder, target = {} } = {},\r\n\t\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t\t) => (\r\n\t\t\t\t\t\t\t\t<this.targetTag\r\n\t\t\t\t\t\t\t\t\tkey={index} // TODO\r\n\t\t\t\t\t\t\t\t\tlabel={t(label)}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t(placeholder)}\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tsource={SOURCES[source].src}\r\n\t\t\t\t\t\t\t\t\tcollection={collection}\r\n\t\t\t\t\t\t\t\t\ttarget={target}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tvariant='filled'\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={target => {\r\n\t\t\t\t\t\t\t\tthis.newTarget({ ...target })\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsource={[...SourcesSelect]}\r\n\t\t\t\t\t\t\tvalue={''}\r\n\t\t\t\t\t\t\tlabel={t('NEW_TARGET')}\r\n\t\t\t\t\t\t\thtmlId='ad-type-dd'\r\n\t\t\t\t\t\t\tname='adType'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotTargeting.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tdescriptionHelperTxt: PropTypes.string,\r\n\tnameHelperTxt: PropTypes.string,\r\n}\r\n\r\nconst NewAdSlotTargeting = NewAdSlotHoc(withStyles(styles)(AdSlotTargeting))\r\n\r\nexport default Translate(NewAdSlotTargeting)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport NewAdSlotHoc from './NewAdSlotHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Img from 'components/common/img/Img'\r\nimport UnitTargets from 'components/dashboard/containers/UnitTargets'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n} from 'components/common/dialog/content'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from '../styles'\r\n\r\nconst SlotFallback = ({ img, targetUrl, t, classes }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<PropRow\r\n\t\t\t\tleft={t('SLOT_FALLBACK_IMG_LABEL')}\r\n\t\t\t\tright={\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\timg: classes.imgPreview,\r\n\t\t\t\t\t\t\twrapper: classes.imgPreviewWrapper,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsrc={img.tempUrl || ''}\r\n\t\t\t\t\t\talt={targetUrl}\r\n\t\t\t\t\t\tmediaMime={img.mime}\r\n\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<PropRow\r\n\t\t\t\tleft={t('fallbackAdUrl', { isProp: true })}\r\n\t\t\t\tright={\r\n\t\t\t\t\t<Anchor href={targetUrl} target='_blank'>\r\n\t\t\t\t\t\t{targetUrl}\r\n\t\t\t\t\t</Anchor>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nclass AdSlotPreview extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.save = props.save\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, account, ...rest } = this.props\r\n\t\tconst { newItem, t } = rest\r\n\t\tconst { type, title, description, temp, tags, targetUrl } = newItem\r\n\t\tconst { minPerImpression } = temp\r\n\r\n\t\treturn (\r\n\t\t\t<ContentBox>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('owner', { isProp: true })}\r\n\t\t\t\t\t\tright={account.wallet.address}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow left={t('type', { isProp: true })} right={type} />\r\n\t\t\t\t\t<PropRow left={t('title', { isProp: true })} right={title} />\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('description', { isProp: true })}\r\n\t\t\t\t\t\tright={description}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\tleft={t('MIN_CPM_SLOT_LABEL')}\r\n\t\t\t\t\t\tright={minPerImpression + ' SAI'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{temp.useFallback && (\r\n\t\t\t\t\t\t<SlotFallback\r\n\t\t\t\t\t\t\timg={temp}\r\n\t\t\t\t\t\t\ttargetUrl={targetUrl}\r\n\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{/* </Grid> */}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t{tags && (\r\n\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\tleft={t('tags', { isProp: true })}\r\n\t\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\ttargets={tags}\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\t// subHeader={'TARGETING'}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAdSlotPreview.propTypes = {\r\n\taccount: PropTypes.object.isRequired,\r\n\tnewItem: PropTypes.object.isRequired,\r\n\ttitle: PropTypes.string,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nconst NewAdSlotPreview = NewAdSlotHoc(withStyles(styles)(AdSlotPreview))\r\nexport default connect(mapStateToProps)(Translate(NewAdSlotPreview))\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport FormSteps from 'components/dashboard/forms/FormSteps'\r\nimport WithDialog from 'components/common/dialog/WithDialog'\r\nimport { AdUnit, AdSlot, Campaign } from 'adex-models'\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport NewAdUnitHoc from './AdUnit/NewAdUnitHoc'\r\nimport AdUnitBasic from './AdUnit/AdUnitBasic'\r\nimport AdUnitMedia from './AdUnit/AdUnitMedia'\r\nimport AdUnitTargeting from './AdUnit/AdUnitTargeting'\r\nimport AdUnitFormPreview from './AdUnit/AdUnitFormPreview'\r\nimport NewCampaignHoc from './Campaign/NewCampaignHoc'\r\nimport CampaignUnits from './Campaign/CampaignUnits'\r\n// import CampaignTargeting from './Campaign/CampaignTargeting'\r\nimport CampaignFinance from './Campaign/CampaignFinance'\r\nimport CampaignFormPreview from './Campaign/CampaignFormPreview'\r\nimport NewAdSlotHoc from './AdSlot/NewAdSlotHoc'\r\nimport AdSlotBasic from './AdSlot/AdSlotBasic'\r\nimport AdSlotMedia from './AdSlot/AdSlotMedia'\r\nimport AdSlotTargeting from './AdSlot/AdSlotTargeting'\r\nimport AdSlotPreview from './AdSlot/AdSlotPreview'\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty'\r\n\r\nconst SaveBtn = ({ newItem, t, save, ...rest }) => {\r\n\treturn (\r\n\t\t<Button color='primary' onClick={save}>\r\n\t\t\t{/*TODO: withStyles */}\r\n\t\t\t<SaveIcon style={{ marginRight: 8 }} />\r\n\t\t\t{t('SAVE')}\r\n\t\t</Button>\r\n\t)\r\n}\r\n\r\nconst SendBtn = ({ saveBtnLabel, saveBtnIcon, newItem, t, save, ...rest }) => {\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tcolor='primary'\r\n\t\t\tonClick={save}\r\n\t\t\tdisabled={newItem.temp.waitingAction}\r\n\t\t>\r\n\t\t\t{newItem.temp.waitingAction ? (\r\n\t\t\t\t<HourglassEmptyIcon />\r\n\t\t\t) : (\r\n\t\t\t\tsaveBtnIcon || <SaveIcon style={{ marginRight: 8 }} />\r\n\t\t\t)}\r\n\t\t\t{t(saveBtnLabel || 'OPEN_CAMPAIGN')}\r\n\t\t</Button>\r\n\t)\r\n}\r\n\r\nconst SaveBtnWithAdUnit = NewAdUnitHoc(SaveBtn)\r\nconst SaveBtnWithCampaign = NewCampaignHoc(SendBtn)\r\nconst SaveBtnWithAdSlot = NewAdSlotHoc(SaveBtn)\r\n\r\nconst CancelBtn = ({ ...props }) => {\r\n\treturn <Button onClick={props.cancel}>{props.t('CANCEL')}</Button>\r\n}\r\n\r\nconst CancelBtnWithItem = NewAdUnitHoc(CancelBtn)\r\nconst CancelBtnWithCampaign = NewCampaignHoc(CancelBtn)\r\nconst CancelBtnWithAdSlot = NewAdSlotHoc(CancelBtn)\r\n\r\nconst dialogCommon = {\r\n\tdarkerBackground: true,\r\n\ticon: <AddIcon />,\r\n}\r\n\r\n// Ad unit\r\nexport const NewUnitSteps = props => (\r\n\t<FormSteps\r\n\t\t{...props}\r\n\t\tSaveBtn={SaveBtnWithAdUnit}\r\n\t\tCancelBtn={CancelBtnWithItem}\r\n\t\tvalidateIdBase={'new-AdUnit-'}\r\n\t\titemType={'AdUnit'}\r\n\t\tstepsId={'new-adunit-'}\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'UNIT_BASIC_STEP', page: AdUnitBasic },\r\n\t\t\t{ title: 'UNIT_MEDIA_STEP', page: AdUnitMedia },\r\n\t\t\t{ title: 'UNIT_TARGETS_STEP', page: AdUnitTargeting },\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_SAVE_ITEM',\r\n\t\t\tpage: AdUnitFormPreview,\r\n\t\t}}\r\n\t\timgLabel='UNIT_BANNER_IMG_LABEL'\r\n\t\tnoDefaultImg\r\n\t\titemModel={AdUnit}\r\n\t/>\r\n)\r\n\r\nconst NewUnitStepsWithDialog = WithDialog(NewUnitSteps)\r\n\r\nexport const NewUnitDialog = props => (\r\n\t<NewUnitStepsWithDialog\r\n\t\t{...props}\r\n\t\t{...dialogCommon}\r\n\t\tbtnLabel='NEW_UNIT'\r\n\t\ttitle='CREATE_NEW_UNIT'\r\n\t/>\r\n)\r\n\r\nconst copyProps = {\r\n\tdarkerBackground: true,\r\n\ticon: <FileCopyIcon />,\r\n}\r\n\r\nexport const NewCloneUnitDialog = props => (\r\n\t<NewUnitStepsWithDialog {...props} {...copyProps} title='CLONE_AD_UNIT' />\r\n)\r\n\r\n// Campaign\r\nexport const NewCampaignSteps = props => (\r\n\t<FormSteps\r\n\t\t{...props}\r\n\t\tSaveBtn={SaveBtnWithCampaign}\r\n\t\tCancelBtn={CancelBtnWithCampaign}\r\n\t\tvalidateIdBase={'new-Campaign-'}\r\n\t\titemType={'Campaign'}\r\n\t\tstepsId={'new-campaign-'}\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'CAMPAIGN_UNITS_STEP', page: CampaignUnits },\r\n\t\t\t// NOTE: Only at ad units at the moment\r\n\t\t\t// { title: 'CAMPAIGN_TARGETING_STEP', page: CampaignTargeting },\r\n\t\t\t{ title: 'CAMPAIGN_FINANCE_STEP', page: CampaignFinance },\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_SAVE_ITEM',\r\n\t\t\tpage: CampaignFormPreview,\r\n\t\t}}\r\n\t\titemModel={Campaign}\r\n\t\timgAdditionalInfo='CAMPAIGN_IMG_ADDITIONAL_INFO'\r\n\t/>\r\n)\r\n\r\nconst NewCampaignStepsWithDialog = WithDialog(NewCampaignSteps)\r\n\r\nexport const NewCampaignDialog = props => (\r\n\t<NewCampaignStepsWithDialog\r\n\t\t{...props}\r\n\t\t{...dialogCommon}\r\n\t\tbtnLabel='NEW_CAMPAIGN'\r\n\t\ttitle='CREATE_NEW_CAMPAIGN'\r\n\t/>\r\n)\r\n\r\n// Ad slot\r\nexport const NewSlotSteps = props => (\r\n\t<FormSteps\r\n\t\t{...props}\r\n\t\tSaveBtn={SaveBtnWithAdSlot}\r\n\t\tCancelBtn={CancelBtnWithAdSlot}\r\n\t\tvalidateIdBase={'new-AdUnit-'}\r\n\t\titemType={'AdSlot'}\r\n\t\tstepsId={'new-slot-'}\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'SLOT_BASIC_STEP', page: AdSlotBasic },\r\n\t\t\t{ title: 'SLOT_PASSBACK_STEP', page: AdSlotMedia },\r\n\t\t\t{ title: 'SLOT_TAGS_STEP', page: AdSlotTargeting },\r\n\t\t]}\r\n\t\tstepsPreviewPage={{ title: 'PREVIEW_AND_SAVE_ITEM', page: AdSlotPreview }}\r\n\t\timgLabel='SLOT_AVATAR_IMG_LABEL'\r\n\t\timgAdditionalInfo='SLOT_AVATAR_IMG_INFO'\r\n\t\tdescriptionHelperTxt='SLOT_DESCRIPTION_HELPER'\r\n\t\titemModel={AdSlot}\r\n\t/>\r\n)\r\n\r\nconst NewSlotStepsWithDialog = WithDialog(NewSlotSteps)\r\n\r\nexport const NewSlotDialog = props => (\r\n\t<NewSlotStepsWithDialog\r\n\t\t{...props}\r\n\t\t{...dialogCommon}\r\n\t\tbtnLabel='NEW_SLOT'\r\n\t\ttitle='CREATE_NEW_SLOT'\r\n\t/>\r\n)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ListWithControls from 'components/dashboard/containers/Lists/ListWithControls'\r\nimport classnames from 'classnames'\r\nimport TableCellMui from '@material-ui/core/TableCell'\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Button from '@material-ui/core/Button'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n// import IconButton from '@material-ui/core/IconButton'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport Img from 'components/common/img/Img'\r\nimport Rows from 'components/dashboard/collection/Rows'\r\nimport Translate from 'components/translate/Translate'\r\n// import DeleteIcon from '@material-ui/icons/Delete'\r\n// import { FileCopy } from '@material-ui/icons'\r\n// import ArchiveIcon from '@material-ui/icons/Archive'\r\n// import UnarchiveIcon from '@material-ui/icons/Unarchive'\r\n// import RemoveCircleOutlineIcon from '@material-ui/icons/RemoveCircleOutline'\r\n// import AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { formatDateTime, formatTokenAmount } from 'helpers/formatters'\r\nimport { bigNumberify } from 'ethers/utils'\r\n// import { NewUnitDialog } from 'components/dashboard/forms/items/NewItems'\r\nimport { NewCloneUnitDialog } from '../../forms/items/NewItems'\r\nimport { AdUnit } from 'adex-models'\r\n\r\nconst TableCell = ({ children, ...rest }) => (\r\n\t<TableCellMui {...rest}>{!!children && children}</TableCellMui>\r\n)\r\n\r\nconst RRTableCell = withReactRouterLink(TableCell)\r\nconst RRButton = withReactRouterLink(Button)\r\n\r\nclass ItemsList extends Component {\r\n\trenderTableHead = ({ selected }) => {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tselectedItems,\r\n\t\t\tselectMode,\r\n\t\t\tnoActions,\r\n\t\t\t// itemType\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<TableHead>\r\n\t\t\t\t<TableRow>\r\n\t\t\t\t\t{selectMode && (\r\n\t\t\t\t\t\t<TableCell>{Object.keys(selectedItems).length || ''}</TableCell>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<TableCell> {t('PROP_MEDIA')}</TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_TITLE')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_TYPE')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_CREATED')} </TableCell>\r\n\r\n\t\t\t\t\t{!noActions && <TableCell> {t('ACTIONS')} </TableCell>}\r\n\t\t\t\t</TableRow>\r\n\t\t\t</TableHead>\r\n\t\t)\r\n\t}\r\n\r\n\trenderCampaignTableHead = ({ selected }) => {\r\n\t\tconst { t, selectedItems, selectMode, noActions } = this.props\r\n\t\treturn (\r\n\t\t\t<TableHead>\r\n\t\t\t\t<TableRow>\r\n\t\t\t\t\t{selectMode && (\r\n\t\t\t\t\t\t<TableCell>{Object.keys(selectedItems).length || ''}</TableCell>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<TableCell> {t('PROP_MEDIA')}</TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_STATUS')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_DEPOSIT')} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_DISTRIBUTED', { args: ['%'] })} </TableCell>\r\n\t\t\t\t\t<TableCell> {t('PROP_CPM')} </TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{/* {t('PROP_CREATED')}/ <br /> */}\r\n\t\t\t\t\t\t{t('PROP_STARTS')}/ <br />\r\n\t\t\t\t\t\t{t('PROP_ENDS')}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t{!noActions && <TableCell> {t('ACTIONS')} </TableCell>}\r\n\t\t\t\t</TableRow>\r\n\t\t\t</TableHead>\r\n\t\t)\r\n\t}\r\n\r\n\trenderTableRow = (item, index, { to, selected }) => {\r\n\t\tconst {\r\n\t\t\t// t,\r\n\t\t\tclasses,\r\n\t\t\tselectMode,\r\n\t\t\tselectedItems,\r\n\t\t\tonSelect,\r\n\t\t\tnoActions,\r\n\t\t} = this.props\r\n\t\t// const ImagCell = noActions ? TableCell : RRTableCell\r\n\r\n\t\treturn (\r\n\t\t\t<TableRow key={item.ipfs || index} selected={selectedItems[item.ipfs]}>\r\n\t\t\t\t{selectMode && (\r\n\t\t\t\t\t<TableCell padding='checkbox'>\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t// indeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\t\tchecked={!!selectedItems[item.ipfs]}\r\n\t\t\t\t\t\t\tonChange={event => {\r\n\t\t\t\t\t\t\t\tonSelect(item.ipfs, event.target.checked)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tfullScreenOnClick={true}\r\n\t\t\t\t\t\tclassName={classnames(classes.cellImg)}\r\n\t\t\t\t\t\tsrc={item.mediaUrl || item.fallbackMediaiUrl || ''}\r\n\t\t\t\t\t\talt={item.title}\r\n\t\t\t\t\t\tmediaMime={item.mediaMime}\r\n\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<RRTableCell\r\n\t\t\t\t\t// className={tableTheme.link}\r\n\t\t\t\t\tto={to}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item.title}\r\n\t\t\t\t</RRTableCell>\r\n\t\t\t\t<TableCell> {item.type} </TableCell>\r\n\t\t\t\t<TableCell> {formatDateTime(item.created)} </TableCell>\r\n\t\t\t\t{!noActions && this.renderActions({ item, to })}\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\trenderCampaignTableRow = (item, index, { to, selected }) => {\r\n\t\tconst {\r\n\t\t\tselectMode,\r\n\t\t\tselectedItems,\r\n\t\t\tonSelect,\r\n\t\t\tnoActions,\r\n\t\t\tclasses,\r\n\t\t} = this.props\r\n\r\n\t\tconst status = item.status || {}\r\n\t\tconst firstUnit = item.adUnits[0] || {}\r\n\t\tconst mediaUrl = firstUnit.mediaUrl || ''\r\n\t\tconst mediaMime = firstUnit.mediaMime || ''\r\n\r\n\t\treturn (\r\n\t\t\t<TableRow key={item.ipfs || index} selected={selectedItems[item.ipfs]}>\r\n\t\t\t\t{selectMode && (\r\n\t\t\t\t\t<TableCell padding='checkbox'>\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t// indeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\t\tchecked={!!selectedItems[item.ipfs]}\r\n\t\t\t\t\t\t\tonChange={event => {\r\n\t\t\t\t\t\t\t\tonSelect(item.ipfs, event.target.checked)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tfullScreenOnClick={true}\r\n\t\t\t\t\t\tclassName={classnames(classes.cellImg)}\r\n\t\t\t\t\t\tsrc={mediaUrl}\r\n\t\t\t\t\t\talt={item.title}\r\n\t\t\t\t\t\tmediaMime={mediaMime}\r\n\t\t\t\t\t\tallowVideo\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell> {status.name} </TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{formatTokenAmount(item.depositAmount, 18, true)} SAI{' '}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{((status.fundsDistributedRatio || 0) / 10).toFixed(2)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{formatTokenAmount(\r\n\t\t\t\t\t\tbigNumberify(item.minPerImpression).mul(1000),\r\n\t\t\t\t\t\t18,\r\n\t\t\t\t\t\ttrue\r\n\t\t\t\t\t)}{' '}\r\n\t\t\t\t\tSAI\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{/* {formatDateTime(item.created)} <br /> */}\r\n\t\t\t\t\t{formatDateTime(item.activeFrom)} <br />\r\n\t\t\t\t\t{formatDateTime(item.withdrawPeriodStart)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{!noActions && this.renderActions({ item, to })}\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\trenderActions = ({ item, to }) => {\r\n\t\tconst { t, actions, itemType } = this.props\r\n\t\t// const itemName = item.title\r\n\t\t// const itemTypeName = t(itemType, { isProp: true })\r\n\r\n\t\treturn (\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\ttitle={t('LABEL_VIEW')}\r\n\t\t\t\t\t// placement='top'\r\n\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t>\r\n\t\t\t\t\t<RRButton to={to} variant='contained' color='primary'>\r\n\t\t\t\t\t\t{t('LABEL_VIEW')}\r\n\t\t\t\t\t</RRButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t{itemType === 'AdUnit' ? (\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\ttitle={t('TOOLTIP_CLONE')}\r\n\t\t\t\t\t\t// placement='top'\r\n\t\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<NewCloneUnitDialog\r\n\t\t\t\t\t\t\t\tonBeforeOpen={() =>\r\n\t\t\t\t\t\t\t\t\tactions.cloneItem({ item, itemType, objModel: AdUnit })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ticonButton\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{/* {!item.archived &&\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\ttitle={t('TOOLTIP_ARCHIVE')}\r\n\t\t\t\t\t\t// placement='top'\r\n\t\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t// label={t('ARCHIVE')}\r\n\t\t\t\t\t\t\t// className={RTButtonTheme.danger}\r\n\t\t\t\t\t\t\tonClick={actions.confirmAction.bind(this,\r\n\t\t\t\t\t\t\t\tactions.archiveItem.bind(this, { item: item, authSig: account.wallet.authSig }),\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tconfirmLabel: t('CONFIRM_YES'),\r\n\t\t\t\t\t\t\t\t\tcancelLabel: t('CONFIRM_NO'),\r\n\t\t\t\t\t\t\t\t\ttext: t('ARCHIVE_ITEM', { args: [itemTypeName, itemName] }),\r\n\t\t\t\t\t\t\t\t\ttitle: t('CONFIRM_SURE')\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ArchiveIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t}\r\n\t\t\t\t{item.archived &&\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\ttitle={t('TOOLTIP_UNARCHIVE')}\r\n\t\t\t\t\t\tenterDelay={1000}\r\n\t\t\t\t\t// placement='top'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tdisabled={isDemo}\r\n\t\t\t\t\t\t\t// label={t('UNARCHIVE')}\r\n\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\tonClick={actions.confirmAction.bind(this,\r\n\t\t\t\t\t\t\t\tactions.unarchiveItem.bind(this, { item: item, authSig: account.wallet.authSig }),\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tconfirmLabel: t('CONFIRM_YES'),\r\n\t\t\t\t\t\t\t\t\tcancelLabel: t('CONFIRM_NO'),\r\n\t\t\t\t\t\t\t\t\ttext: t('UNARCHIVE_ITEM', { args: [itemType, itemName] }),\r\n\t\t\t\t\t\t\t\t\ttitle: t('CONFIRM_SURE')\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<UnarchiveIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t} */}\r\n\t\t\t</TableCell>\r\n\t\t)\r\n\t}\r\n\r\n\trenderRows = items => {\r\n\t\tconst { itemType, side, padding } = this.props\r\n\t\treturn (\r\n\t\t\t<Rows\r\n\t\t\t\tpadding={padding}\r\n\t\t\t\tside={side}\r\n\t\t\t\trows={items}\r\n\t\t\t\titemType={itemType}\r\n\t\t\t\trowRenderer={\r\n\t\t\t\t\titemType === 'Campaign'\r\n\t\t\t\t\t\t? this.renderCampaignTableRow\r\n\t\t\t\t\t\t: this.renderTableRow\r\n\t\t\t\t}\r\n\t\t\t\ttableHeadRenderer={\r\n\t\t\t\t\titemType === 'Campaign'\r\n\t\t\t\t\t\t? this.renderCampaignTableHead\r\n\t\t\t\t\t\t: this.renderTableHead\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { items, viewModeId, side, noControls, classes, ...rest } = this.props\r\n\r\n\t\tif (noControls) {\r\n\t\t\treturn this.renderRows(items)\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<ListWithControls\r\n\t\t\t\t{...rest}\r\n\t\t\t\titems={items}\r\n\t\t\t\tviewModeId={viewModeId}\r\n\t\t\t\tarchive\r\n\t\t\t\trenderRows={this.renderRows}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nItemsList.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titems: PropTypes.array.isRequired,\r\n\tviewModeId: PropTypes.string.isRequired,\r\n\theader: PropTypes.string,\r\n\tobjModel: PropTypes.func.isRequired,\r\n\titemType: PropTypes.string.isRequired,\r\n\tsortProperties: PropTypes.array.isRequired,\r\n\tselectedItems: PropTypes.object,\r\n\tselectMode: PropTypes.bool,\r\n\tonSelect: PropTypes.func,\r\n\tnoControls: PropTypes.bool,\r\n\tnoActions: PropTypes.bool,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst memory = state.memory\r\n\treturn {\r\n\t\tside: memory.nav.side,\r\n\t\tselectedItems: props.selectedItems || {},\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(ItemsList)))\r\n","export const styles = () => {\r\n\treturn {\r\n\t\tcellImg: {\r\n\t\t\twidth: 'auto',\r\n\t\t\theight: 'auto',\r\n\t\t\tmaxHeight: 70,\r\n\t\t\tmaxWidth: 180,\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t}\r\n}\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\tconst aspect = '56.25%'\r\n\r\n\treturn {\r\n\t\tcard: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\twidth: 320,\r\n\t\t\tdisplay: 'block',\r\n\t\t\tposition: 'relative',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\t'@media(max-width:380px)': {\r\n\t\t\t\tmargin: 0,\r\n\t\t\t\tmarginBottom: spacing,\r\n\t\t\t},\r\n\t\t},\r\n\t\tmediaRoot: {\r\n\t\t\theight: 0,\r\n\t\t\tpaddingTop: aspect, // 16:9\r\n\t\t\tposition: 'relative',\r\n\t\t\toverflow: 'hidden',\r\n\t\t},\r\n\t\timg: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tmargin: 'auto',\r\n\t\t\t// minWidth: '50%',\r\n\t\t\t// minHeight: '50%',\r\n\t\t\theight: 'auto',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\twidth: 'auto',\r\n\t\t\tmaxHeight: '100%',\r\n\t\t},\r\n\t\tbasicInfo: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'start',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t},\r\n\t\tbuttonRight: {\r\n\t\t\tmarginLeft: spacing,\r\n\t\t},\r\n\t\terror: {\r\n\t\t\tcolor: theme.palette.error.main,\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t},\r\n\t\teditIcon: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tmarginTop: `calc(56.25% - ${40 + spacing}px)`,\r\n\t\t\ttop: 0,\r\n\t\t\tright: spacing,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport CardMedia from '@material-ui/core/CardMedia'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Button from '@material-ui/core/Button'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport Img from 'components/common/img/Img'\r\nimport { validUrl } from 'helpers/validators'\r\nimport ValidItemHoc from 'components/dashboard/forms/ValidItemHoc'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n// import { utils } from 'ethers'\r\nimport { formatDateTime, formatTokenAmount } from 'helpers/formatters'\r\nimport { bigNumberify } from 'ethers/utils'\r\nimport { contracts } from 'services/smart-contracts/contractsCfg'\r\nimport { validations } from 'adex-models'\r\nimport { utils } from 'ethers'\r\n\r\nconst { DAI } = contracts\r\n\r\nconst FallbackAdData = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\tisDemo,\r\n\tactiveFields,\r\n\tsetActiveFields,\r\n\tvalidate,\r\n\tinvalidFields,\r\n\ttoggleFallbackImgEdit,\r\n\thandleChange,\r\n\t...rest\r\n}) => {\r\n\tconst errFallbackAdUrl = invalidFields['fallbackAdUrl']\r\n\r\n\treturn (\r\n\t\t<Card className={classes.card} raised={false}>\r\n\t\t\t<CardMedia classes={{ root: classes.mediaRoot }} src=''>\r\n\t\t\t\t<Img\r\n\t\t\t\t\tallowFullscreen={true}\r\n\t\t\t\t\tclassName={classes.img}\r\n\t\t\t\t\tsrc={item.fallbackMediaUrl}\r\n\t\t\t\t\talt={item.fallbackTargetUrl}\r\n\t\t\t\t\tstyle={{ cursor: 'pointer' }}\r\n\t\t\t\t/>\r\n\t\t\t</CardMedia>\r\n\t\t\t{/* <Fab\r\n\t\t\t\tmini\r\n\t\t\t\tcolor='secondary'\r\n\t\t\t\tonClick={toggleFallbackImgEdit}\r\n\t\t\t\tclassName={classes.editIcon}\r\n\t\t\t\tdisabled={isDemo}\r\n\t\t\t>\r\n\t\t\t\t<EditIcon />\r\n\t\t\t</Fab> */}\r\n\t\t\t<CardContent>\r\n\t\t\t\t{activeFields.fallbackTargetUrl ? (\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t// required\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tlabel={t('fallbackTargetUrl', { isProp: true })}\r\n\t\t\t\t\t\tvalue={item.fallbackTargetUrl || ''}\r\n\t\t\t\t\t\tonChange={ev => handleChange('fallbackTargetUrl', ev.target.value)}\r\n\t\t\t\t\t\t// maxLength={1024}\r\n\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\tsetActiveFields('fallbackTargetUrl', false)\r\n\t\t\t\t\t\t\tvalidate('fallbackTargetUrl', {\r\n\t\t\t\t\t\t\t\tisValid:\r\n\t\t\t\t\t\t\t\t\t!item.fallbackTargetUrl || validUrl(item.fallbackTargetUrl),\r\n\t\t\t\t\t\t\t\terr: { msg: 'ERR_INVALID_URL' },\r\n\t\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\trest.validate('fallbackTargetUrl', {\r\n\t\t\t\t\t\t\t\tisValid:\r\n\t\t\t\t\t\t\t\t\t!item.fallbackTargetUrl || validUrl(item.fallbackTargetUrl),\r\n\t\t\t\t\t\t\t\terr: { msg: 'ERR_INVALID_URL' },\r\n\t\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\terrFallbackAdUrl && !!errFallbackAdUrl.dirty ? (\r\n\t\t\t\t\t\t\t\t<span> {errFallbackAdUrl.errMsg} </span>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t!errFallbackAdUrl || !errFallbackAdUrl.dirty ? (\r\n\t\t\t\t\t\t\t\t<div>{t('SLOT_FALLBACK_AD_URL_DESCRIPTION')}</div>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{item.fallbackTargetUrl ? (\r\n\t\t\t\t\t\t\t\t<Anchor href={item.fallbackTargetUrl} target='_blank'>\r\n\t\t\t\t\t\t\t\t\t{item.fallbackTargetUrl}\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<span style={{ opacity: 0.3 }}>\r\n\t\t\t\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t\t\t\t{t('NO_FALLBACK_URL_YET')}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{/* <span>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t// disabled={!canEditImg}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\trest.setActiveFields('fallbackTargetUrl', true)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</span> */}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{errFallbackAdUrl && !!errFallbackAdUrl.dirty ? (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<span className={classes.error}>\r\n\t\t\t\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t\t\t\t{errFallbackAdUrl.errMsg}{' '}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</CardContent>\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nconst ValidatedFallbackAdData = ValidItemHoc(FallbackAdData)\r\n\r\nconst updateItemTemp = ({ prop = '', value = '', item = {} } = {}) => {\r\n\tconst { temp } = item\r\n\tconst newTemp = { ...temp }\r\n\tnewTemp[prop] = value\r\n\r\n\treturn newTemp\r\n}\r\n\r\nconst validateAmount = (value = '', prop, dirty, errMsg, validate) => {\r\n\tconst isValidNumber = validations.isNumberString(value)\r\n\tconst isValid = isValidNumber && utils.parseUnits(value, 18)\r\n\r\n\tvalidate(prop, {\r\n\t\tisValid: isValid,\r\n\t\terr: { msg: errMsg || 'ERR_INVALID_AMOUNT' },\r\n\t\tdirty: dirty,\r\n\t})\r\n}\r\n\r\nconst SlotMinCPM = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\tisDemo,\r\n\tactiveFields,\r\n\tsetActiveFields,\r\n\tvalidate,\r\n\tinvalidFields,\r\n\ttoggleFallbackImgEdit,\r\n\thandleChange,\r\n\t...rest\r\n}) => {\r\n\tconst errMin = invalidFields['minPerImpression']\r\n\tconst minCPM = formatTokenAmount(\r\n\t\tbigNumberify((item.minPerImpression || {})[DAI.address] || '0').mul(1000),\r\n\t\t18,\r\n\t\ttrue\r\n\t)\r\n\r\n\tconst minPerImpression =\r\n\t\titem.temp.minPerImpression !== undefined\r\n\t\t\t? item.temp.minPerImpression\r\n\t\t\t: minCPM\r\n\r\n\treturn (\r\n\t\t<FormControl\r\n\t\t\tfullWidth\r\n\t\t\tclassName={classes.textField}\r\n\t\t\tmargin='dense'\r\n\t\t\terror={!!errMin}\r\n\t\t>\r\n\t\t\t<InputLabel>{t('MIN_CPM_SLOT_LABEL', { args: ['SAI'] })}</InputLabel>\r\n\t\t\t<Input\r\n\t\t\t\tfullWidth\r\n\t\t\t\tautoFocus\r\n\t\t\t\ttype='text'\r\n\t\t\t\tname={'minPerImpression'}\r\n\t\t\t\tvalue={minPerImpression || ''}\r\n\t\t\t\tonChange={ev => {\r\n\t\t\t\t\tvalidateAmount(\r\n\t\t\t\t\t\tev.target.value,\r\n\t\t\t\t\t\t'minPerImpression',\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t'',\r\n\t\t\t\t\t\tvalidate\r\n\t\t\t\t\t)\r\n\t\t\t\t\thandleChange(\r\n\t\t\t\t\t\t'temp',\r\n\t\t\t\t\t\tupdateItemTemp({\r\n\t\t\t\t\t\t\tprop: 'minPerImpression',\r\n\t\t\t\t\t\t\tvalue: ev.target.value,\r\n\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tmaxLength={1024}\r\n\t\t\t\tonBlur={ev => {\r\n\t\t\t\t\tsetActiveFields('minPerImpression', false)\r\n\t\t\t\t}}\r\n\t\t\t\tdisabled={!activeFields.minPerImpression}\r\n\t\t\t\tendAdornment={\r\n\t\t\t\t\t<InputAdornment position='end'>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\tdisabled={activeFields['minPerImpression'] || isDemo}\r\n\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\tclassName={classes.buttonRight}\r\n\t\t\t\t\t\t\tonClick={ev => setActiveFields('minPerImpression', true)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\r\n\t\t\t<FormHelperText>\r\n\t\t\t\t{errMin && !!errMin.errMsg\r\n\t\t\t\t\t? t(errMin.errMsg, { args: errMin.errMsgArgs })\r\n\t\t\t\t\t: t('SLOT_MIN_CPM_HELPER')}\r\n\t\t\t</FormHelperText>\r\n\t\t</FormControl>\r\n\t)\r\n}\r\n\r\nconst ValidatedSlotMinCPM = ValidItemHoc(SlotMinCPM)\r\n\r\nconst MediaCard = ({\r\n\tclasses,\r\n\tmediaUrl,\r\n\tmediaMime,\r\n\ttitle,\r\n\tcanEditImg,\r\n\ttoggleImgEdit,\r\n\turl,\r\n}) => (\r\n\t<Card className={classes.card} raised={false}>\r\n\t\t<CardMedia classes={{ root: classes.mediaRoot }}>\r\n\t\t\t<Img\r\n\t\t\t\tallowFullscreen={true}\r\n\t\t\t\tsrc={mediaUrl}\r\n\t\t\t\talt={title}\r\n\t\t\t\tclassName={classes.img}\r\n\t\t\t\tmediaMime={mediaMime}\r\n\t\t\t\tallowVideo\r\n\t\t\t/>\r\n\t\t</CardMedia>\r\n\t\t{canEditImg && (\r\n\t\t\t<Button\r\n\t\t\t\tvariant='fab'\r\n\t\t\t\tmini\r\n\t\t\t\tcolor='secondary'\r\n\t\t\t\tonClick={toggleImgEdit}\r\n\t\t\t\tclassName={classes.editIcon}\r\n\t\t\t>\r\n\t\t\t\t<EditIcon />\r\n\t\t\t</Button>\r\n\t\t)}\r\n\r\n\t\t{url && (\r\n\t\t\t<CardContent>\r\n\t\t\t\t<Anchor href={url} target='_blank'>\r\n\t\t\t\t\t{url}\r\n\t\t\t\t</Anchor>\r\n\t\t\t</CardContent>\r\n\t\t)}\r\n\t</Card>\r\n)\r\n\r\nconst basicProps = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\titemType,\r\n\tactiveFields,\r\n\t...rest\r\n}) => {\r\n\tconst mediaUrl = item.mediaUrl\r\n\tconst mediaMime = item.mediaMime\r\n\r\n\treturn (\r\n\t\t<Grid container spacing={2}>\r\n\t\t\t<Grid item xs={12} sm={12} md={12} lg={7}>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12} sm={5} md={5} lg={5}>\r\n\t\t\t\t\t\t{itemType === 'AdSlot' ? (\r\n\t\t\t\t\t\t\t<ValidatedFallbackAdData\r\n\t\t\t\t\t\t\t\tvalidateId={item._id}\r\n\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\tactiveFields={activeFields}\r\n\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<MediaCard\r\n\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\tmediaUrl={mediaUrl}\r\n\t\t\t\t\t\t\t\tmediaMime={mediaMime}\r\n\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\ttoggleImgEdit={rest.toggleImgEdit}\r\n\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} sm={7} md={7} lg={7}>\r\n\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t{itemType === 'AdSlot' && (\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<ValidatedSlotMinCPM\r\n\t\t\t\t\t\t\t\t\t\tvalidateId={item._id}\r\n\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\t\t\tactiveFields={activeFields}\r\n\t\t\t\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\tvalue={item.type}\r\n\t\t\t\t\t\t\t\t\tlabel={t('type', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t{Array.isArray(item.tags) && (\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\tvalue={item.tags\r\n\t\t\t\t\t\t\t\t\t\t\t.map(tag => `\"${tag.tag}(${tag.score})\"`)\r\n\t\t\t\t\t\t\t\t\t\t\t.join(',\\n')}\r\n\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\tt('tags', { isProp: true }) + ` (${item.tags.length})`\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\trows={7}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={12} sm={12} md={12} lg={5}>\r\n\t\t\t\t{rightComponent}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport const BasicProps = withStyles(styles)(basicProps)\r\n\r\nconst campaignProps = ({\r\n\titem,\r\n\tt,\r\n\trightComponent,\r\n\turl,\r\n\tclasses,\r\n\tcanEditImg,\r\n\titemType,\r\n\t...rest\r\n}) => {\r\n\tconst mediaUrl = item.mediaUrl\r\n\tconst status = item.status || {}\r\n\t// console.log('item', item)\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={8}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className={classes.basicInfo}>\r\n\t\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12} sm={5} md={5} lg={5}>\r\n\t\t\t\t\t\t\t\t\t<MediaCard\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tmediaUrl={mediaUrl}\r\n\t\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\t\tcanEditImg={canEditImg}\r\n\t\t\t\t\t\t\t\t\t\ttoggleImgEdit={rest.toggleImgEdit}\r\n\t\t\t\t\t\t\t\t\t\turl={url}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12} sm={7} md={7} lg={7}>\r\n\t\t\t\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={6}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('id', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={formatDateTime(item.created)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('created', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={formatDateTime(item.activeFrom)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('activeFrom', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={formatDateTime(item.withdrawPeriodStart)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('withdrawPeriodStart', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={12} md={6}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={status.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('status', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(status.fundsDistributedRatio || 0) / 10\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('PROP_DISTRIBUTED', { args: ['%'] })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatTokenAmount(item.depositAmount, 18) + ' SAI'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('depositAmount', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatTokenAmount(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbigNumberify(item.minPerImpression).mul(1000),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t18,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + ' SAI'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t('CPM', { isProp: true })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} sm={12} md={12} lg={4}>\r\n\t\t\t\t\t{rightComponent}\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n// ((status.fundsDistributedRatio || 0) / 10).toFixed(2)\r\nexport const CampaignProps = withStyles(styles)(campaignProps)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ItemHoc from 'components/dashboard/containers/ItemHoc'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport Translate from 'components/translate/Translate'\r\nimport Button from '@material-ui/core/Button'\r\nimport { AdUnit as AdUnitModel, Campaign as CampaignModel } from 'adex-models'\r\nimport { SORT_PROPERTIES_ITEMS, FILTER_PROPERTIES_ITEMS } from 'constants/misc'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { CampaignProps } from 'components/dashboard/containers/ItemCommon'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\n// import UnitTargets from 'components/dashboard/containers/UnitTargets'\r\n\r\nconst VIEW_MODE = 'campaignRowsView'\r\n\r\nexport class Campaign extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tthis.state = {\r\n\t\t\ttabIndex: 0,\r\n\t\t\tstatistics: {},\r\n\t\t}\r\n\t}\r\n\r\n\t// componentDidMount = () => {\r\n\t// \tthis.props.actions.updateCampaignState({ campaign: this.props.item })\r\n\t// \t// this.props.actions.updateCampaignStatistics({ campaign: this.props.item })\r\n\t// }\r\n\r\n\thandleTabChange = (event, index) => {\r\n\t\tthis.setState({ tabIndex: index })\r\n\t}\r\n\r\n\tCampaignActions = ({ campaign, actions, t }) => {\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\tonClick={() => actions.closeCampaign({ campaign })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('BTN_CLOSE_CAMPAIGN')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\t// classes,\r\n\t\t\titem,\r\n\t\t\t// setActiveFields,\r\n\t\t\t// handleChange,\r\n\t\t\t// activeFields,\r\n\t\t\t// isDemo,\r\n\t\t\tactions,\r\n\t\t\t// ...rest\r\n\t\t} = this.props\r\n\t\tconst { tabIndex } = this.state\r\n\r\n\t\tconst units = item.spec.adUnits\r\n\t\tconst campaign = new CampaignModel(item)\r\n\r\n\t\tconst balances =\r\n\t\t\tcampaign.status && campaign.status.lastApprovedBalances\r\n\t\t\t\t? campaign.status.lastApprovedBalances\r\n\t\t\t\t: {}\r\n\r\n\t\tconst status = (campaign.status || {}).name\r\n\t\tconst leader = campaign.spec.validators[0]\r\n\t\tconst follower = campaign.spec.validators[1]\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<CampaignProps\r\n\t\t\t\t\titem={campaign}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t\trightComponent={\r\n\t\t\t\t\t\t// <UnitTargets\r\n\t\t\t\t\t\t// \t{...rest}\r\n\t\t\t\t\t\t// \ttargets={campaign.targeting}\r\n\t\t\t\t\t\t// \tt={t}\r\n\t\t\t\t\t\t// \tsubHeader={t('CAMPAIGN_TARGETING')}\r\n\t\t\t\t\t\t// />\r\n\t\t\t\t\t\t(status === 'Ready' ||\r\n\t\t\t\t\t\t\tstatus === 'Active' ||\r\n\t\t\t\t\t\t\tstatus === 'Withdraw' ||\r\n\t\t\t\t\t\t\tstatus === 'Unhealthy') && (\r\n\t\t\t\t\t\t\t<this.CampaignActions\r\n\t\t\t\t\t\t\t\tcampaign={campaign}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\tactions={actions}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<AppBar position='static' color='default'>\r\n\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\tvalue={tabIndex}\r\n\t\t\t\t\t\t\tonChange={this.handleTabChange}\r\n\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\tscrollButtons='off'\r\n\t\t\t\t\t\t\tindicatorColor='primary'\r\n\t\t\t\t\t\t\ttextColor='primary'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Tab label={t('STATE')} />\r\n\t\t\t\t\t\t\t<Tab label={t('CAMPAIGN_UNITS')} />\r\n\t\t\t\t\t\t\t<Tab label={t('VALIDATORS')} />\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<div style={{ marginTop: 10 }}>\r\n\t\t\t\t\t\t{tabIndex === 0 && (\r\n\t\t\t\t\t\t\t<List\r\n\t\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\t\t<ListSubheader component='div'>{t('BALANCES')}</ListSubheader>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{Object.keys(balances).map(key => (\r\n\t\t\t\t\t\t\t\t\t<ListItem key={key}>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\t\t\tprimary={formatTokenAmount(balances[key]) + ' SAI'}\r\n\t\t\t\t\t\t\t\t\t\t\tsecondary={key}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{tabIndex === 1 && (\r\n\t\t\t\t\t\t\t<ItemsList\r\n\t\t\t\t\t\t\t\tremoveFromItem\r\n\t\t\t\t\t\t\t\titems={units}\r\n\t\t\t\t\t\t\t\tviewModeId={VIEW_MODE}\r\n\t\t\t\t\t\t\t\titemType='AdUnit'\r\n\t\t\t\t\t\t\t\tobjModel={AdUnitModel}\r\n\t\t\t\t\t\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\t\t\t\t\t\tuiStateId='campaign-units'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{tabIndex === 2 && (\r\n\t\t\t\t\t\t\t<List>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${leader.url}/channel/${campaign.id}/status`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('LEADER_STATUS')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${leader.url}/channel/${campaign.id}/last-approved?withHeartbeat=true`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('LEADER_LAST_APPROVED')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${follower.url}/channel/${campaign.id}/status`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('FOLLOWER_STATUS')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref={`${follower.url}/channel/${campaign.id}/last-approved?withHeartbeat=true`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItem button>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={t('FOLLOWER_LAST_APPROVED')} />\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nCampaign.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tunits: PropTypes.object.isRequired,\r\n\trowsView: PropTypes.bool.isRequired,\r\n\titem: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\t// let memory = state.memory\r\n\treturn {\r\n\t\tunits: persist.items['AdUnit'],\r\n\t\trowsView: !!persist.ui[VIEW_MODE],\r\n\t\tobjModel: CampaignModel,\r\n\t\titemType: 'Campaign',\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst CampaignItem = ItemHoc(withStyles(styles)(Campaign))\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(CampaignItem))\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tflex: {\r\n\t\t\tflex: 1,\r\n\t\t},\r\n\t\tappBar: {\r\n\t\t\tmarginTop: spacing * 2,\r\n\t\t\tmarginBottom: spacing,\r\n\t\t},\r\n\t\tdatepicker: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tmarginLeft: 0,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path d='M86.891,94.026 C86.593,95.583 84.640,96.840 83.475,97.808 C81.232,99.674 79.396,104.487 76.012,102.152 C71.905,99.319 69.555,102.487 66.477,103.167 C65.253,103.437 64.708,104.537 64.674,105.797 C64.598,108.535 62.881,109.216 60.527,109.179 C58.468,109.146 56.408,109.135 54.350,109.186 C51.427,109.259 48.991,108.824 49.175,105.026 C49.228,103.939 48.418,103.481 47.510,103.115 C45.715,102.391 43.911,101.676 42.179,100.820 C41.019,100.246 40.260,100.626 39.450,101.415 C37.489,103.324 35.656,102.985 33.877,101.081 C32.562,99.672 31.247,98.242 29.781,97.000 C28.673,96.060 27.835,95.091 27.494,94.069 C22.614,94.095 8.911,94.275 6.707,93.925 C3.748,93.456 1.658,91.566 1.080,88.468 C0.825,87.103 0.798,85.681 0.797,84.285 C0.781,59.822 0.775,35.358 0.792,10.895 C0.798,2.714 2.728,0.818 10.992,0.815 C41.709,0.804 72.426,0.803 103.143,0.810 C111.421,0.811 113.281,2.678 113.282,10.917 C113.286,35.508 113.296,60.100 113.278,84.691 C114.298,96.459 103.016,94.247 86.891,94.026 ZM32.262,90.401 C32.137,90.710 31.934,91.031 31.678,91.234 C31.113,91.681 30.794,92.097 30.633,92.495 C30.633,92.530 30.645,92.550 30.644,92.586 C30.634,92.838 30.591,93.042 30.529,93.219 C30.611,93.939 31.215,94.614 32.059,95.310 C33.105,96.173 33.981,97.243 34.919,98.234 C36.052,99.431 37.092,100.165 38.566,98.516 C39.445,97.532 40.766,97.446 42.072,97.985 C44.590,99.022 47.138,99.984 49.658,101.015 C51.169,101.634 52.013,102.737 52.003,104.443 C51.996,105.569 52.310,106.492 53.719,106.485 C55.893,106.474 58.068,106.460 60.241,106.503 C61.258,106.523 61.545,106.009 61.798,105.108 C62.667,102.013 70.839,97.030 73.935,97.791 C75.078,98.073 76.074,98.952 77.889,99.986 C78.633,99.034 79.392,97.750 80.443,96.785 C82.384,95.001 84.959,93.598 82.071,90.514 C81.378,89.775 81.775,88.502 82.125,87.530 C82.778,85.719 83.468,83.916 84.250,82.157 C85.214,79.987 85.955,77.503 89.141,77.752 C89.588,77.787 90.209,77.693 90.229,77.167 C90.328,74.547 90.472,71.917 90.337,69.304 C90.239,67.417 88.403,68.135 87.335,67.811 C85.508,67.257 85.101,65.621 84.399,64.248 C83.727,62.936 83.324,61.488 82.754,60.121 C81.854,57.962 80.961,55.844 83.149,53.862 C83.657,53.402 84.043,52.699 83.400,52.055 C81.627,50.278 79.951,48.358 77.967,46.848 C76.304,45.583 75.545,47.974 74.218,48.329 C73.894,48.416 73.443,48.642 73.250,48.511 C69.388,45.887 62.832,47.162 61.695,40.563 C61.629,40.182 61.207,39.572 60.933,39.563 C58.421,39.475 55.889,39.322 53.394,39.543 C51.417,39.719 52.313,41.752 51.753,42.873 C51.500,43.379 51.229,44.209 50.861,44.272 C46.430,45.025 42.940,50.944 37.592,46.743 C37.363,46.563 36.871,46.484 36.619,46.605 C34.194,47.762 32.733,50.027 30.922,51.851 C29.518,53.265 31.386,54.163 32.114,55.221 C32.740,56.129 32.572,57.207 32.159,58.186 C31.232,60.386 30.206,62.545 29.330,64.764 C28.613,66.579 27.641,67.955 25.475,67.997 C23.775,68.031 23.442,69.165 23.451,70.566 C23.461,72.167 23.468,73.769 23.458,75.371 C23.449,76.778 23.790,77.605 25.506,77.863 C28.500,78.312 33.382,87.639 32.262,90.401 ZM102.610,3.886 C73.555,3.885 44.500,3.884 15.445,3.887 C3.678,3.889 3.796,3.894 3.780,15.603 C3.775,19.207 4.855,20.474 8.576,20.435 C24.758,20.263 40.944,20.361 57.128,20.360 C71.910,20.360 86.693,20.364 101.475,20.359 C110.248,20.357 110.248,20.351 110.245,11.460 C110.243,4.471 109.656,3.887 102.610,3.886 ZM106.486,23.180 C90.044,23.224 73.602,23.204 57.160,23.203 C40.718,23.202 24.275,23.279 7.834,23.133 C4.785,23.106 3.799,24.074 3.811,27.029 C3.887,46.396 3.819,65.764 3.880,85.131 C3.895,89.813 5.146,90.889 9.871,90.953 C11.237,90.971 24.236,90.982 28.073,90.998 C28.283,90.705 28.536,90.407 28.845,90.103 C30.255,88.717 28.918,87.726 28.517,86.769 C27.370,84.030 26.982,81.288 22.883,80.103 C18.463,78.826 21.133,73.722 20.582,70.327 C20.253,68.306 20.746,65.689 22.839,65.567 C28.461,65.239 27.481,60.268 29.330,57.322 C29.655,56.805 29.205,56.231 28.797,55.809 C26.149,53.076 27.478,50.959 29.784,48.899 C31.138,47.691 32.339,46.314 33.636,45.041 C35.392,43.317 37.165,42.030 39.403,44.474 C40.126,45.264 41.188,45.438 42.243,44.887 C45.091,43.399 49.479,43.919 49.506,38.777 C49.512,37.582 51.195,36.509 52.964,36.583 C55.476,36.689 57.999,36.687 60.511,36.579 C63.013,36.472 64.248,37.537 64.706,40.013 C65.351,43.495 72.159,46.174 75.053,44.089 C76.439,43.091 77.650,42.578 78.992,43.856 C81.387,46.136 83.744,48.457 86.046,50.830 C86.485,51.282 86.593,52.056 86.859,52.693 C86.711,53.170 86.705,53.728 86.423,54.014 C82.817,57.673 86.542,60.632 87.375,63.837 C87.651,64.899 88.583,65.405 89.788,65.315 C92.411,65.117 93.136,66.788 93.193,68.975 C93.248,71.032 93.162,73.093 93.229,75.149 C93.325,78.106 93.222,80.812 89.122,80.679 C88.080,80.645 87.434,81.586 87.205,82.413 C86.426,85.236 83.898,87.698 85.659,91.003 C88.793,90.966 103.593,91.006 105.406,90.947 C108.603,90.843 110.270,89.341 110.263,85.955 C110.216,66.078 110.183,46.200 110.300,26.324 C110.318,23.239 108.749,23.174 106.486,23.180 ZM29.773,14.357 C28.417,14.194 27.457,13.770 27.473,12.270 C27.489,10.806 28.094,9.665 29.606,9.652 C30.990,9.641 31.944,10.550 32.068,12.041 C32.212,13.773 30.960,14.098 29.773,14.357 ZM21.115,14.302 C19.829,14.330 18.512,14.014 18.482,12.266 C18.455,10.747 19.375,9.812 20.720,9.656 C22.272,9.476 22.930,10.608 23.072,12.024 C23.198,13.465 22.410,14.273 21.115,14.302 ZM11.778,14.322 C10.595,14.199 9.463,13.513 9.544,12.215 C9.635,10.753 10.657,9.652 12.192,9.641 C13.747,9.631 14.083,10.981 14.344,12.066 C14.151,13.747 13.213,14.472 11.778,14.322 ZM57.002,55.432 C66.449,55.272 74.393,63.383 74.417,72.914 C74.440,82.540 66.723,90.298 57.086,90.336 C47.279,90.375 39.942,82.875 39.751,72.950 C39.551,62.532 48.194,55.580 57.002,55.432 ZM70.496,77.650 C70.905,76.512 71.827,74.963 69.847,74.639 C68.184,74.366 65.588,73.529 65.376,76.458 C65.160,79.436 63.743,81.984 62.811,85.765 C67.105,83.891 69.230,81.173 70.496,77.650 ZM65.489,70.106 C65.829,72.353 68.212,71.155 69.696,71.309 C70.870,71.432 71.276,70.540 70.953,69.544 C69.658,65.542 67.641,62.122 62.778,60.190 C63.680,63.912 65.003,66.892 65.489,70.106 ZM52.759,80.331 C52.801,80.450 52.853,80.567 52.914,80.677 C54.194,82.970 53.818,87.226 57.140,87.029 C59.949,86.862 60.313,83.038 61.170,80.458 C63.097,74.652 62.986,74.457 57.053,74.457 C50.997,74.457 50.792,74.738 52.759,80.331 ZM53.717,71.375 C54.731,71.349 55.745,71.370 56.759,71.365 C57.900,71.365 59.042,71.328 60.181,71.374 C61.939,71.444 62.485,70.510 62.081,68.986 C61.308,66.068 60.760,63.074 59.191,60.412 C57.594,57.703 55.999,58.304 54.769,60.553 C53.314,63.213 52.433,66.134 51.727,69.092 C51.321,70.798 52.118,71.415 53.717,71.375 ZM51.300,85.233 C50.576,83.414 49.943,82.161 49.588,80.834 C49.229,79.493 49.165,78.075 48.934,76.697 C48.515,74.184 46.605,74.421 44.804,74.516 C43.579,74.580 43.031,75.146 43.140,76.485 C43.406,79.737 47.159,84.094 51.300,85.233 ZM45.348,71.399 C46.892,71.311 48.150,71.611 48.574,70.059 C49.305,67.379 49.504,64.589 50.595,61.962 C51.056,60.852 50.092,60.538 49.000,61.222 C46.305,62.910 44.662,65.390 43.490,68.245 C42.562,70.509 43.157,71.698 45.348,71.399 Z' />\r\n\t</g>,\r\n\r\n\t'AdexPublisher',\r\n\t'0 0 114 110'\r\n)\r\n","import React from 'react'\r\nimport createSvgIconCustom from './createSvgIconCustom'\r\n\r\nexport default createSvgIconCustom(\r\n\t<g>\r\n\t\t<path d='M106.734,40.051 C105.039,40.089 103.342,40.061 101.646,40.059 C100.192,40.057 98.737,40.038 97.284,40.063 C96.153,40.083 95.774,39.347 95.784,38.444 C95.793,37.622 96.397,37.178 97.235,37.176 C100.386,37.167 103.536,37.161 106.686,37.175 C107.497,37.179 108.234,37.651 108.275,38.380 C108.325,39.250 107.777,40.028 106.734,40.051 ZM98.119,19.072 C97.536,19.630 96.934,20.404 95.998,19.549 C95.197,18.818 95.313,17.971 95.943,17.303 C98.242,14.867 100.591,12.477 102.976,10.124 C103.238,9.865 103.999,9.751 104.266,9.941 C104.704,10.251 104.927,10.865 105.237,11.345 C104.895,11.981 104.713,12.613 104.307,13.024 C102.279,15.074 100.204,17.078 98.119,19.072 ZM96.759,57.341 C97.886,57.190 105.012,64.344 105.054,65.796 C104.895,67.197 103.734,67.365 102.820,66.551 C100.393,64.390 98.088,62.076 95.898,59.674 C95.075,58.772 95.138,57.558 96.759,57.341 ZM81.020,51.185 C78.929,52.359 78.158,53.675 78.228,56.059 C78.404,62.022 78.286,67.993 78.298,73.962 C78.300,75.076 78.366,76.240 77.208,76.852 C75.795,77.600 75.267,76.151 74.584,75.512 C64.533,66.099 52.013,61.626 39.210,57.699 C39.094,57.664 38.971,57.645 38.850,57.636 C36.403,57.463 33.106,54.526 31.961,56.530 C30.593,58.923 31.832,62.735 33.116,65.558 C35.268,70.290 37.873,74.821 40.410,79.370 C42.114,82.427 43.106,85.589 42.671,89.105 C42.307,92.055 40.717,93.796 37.645,93.819 C32.649,93.855 27.649,93.930 22.659,93.751 C19.758,93.647 17.751,92.155 16.850,89.142 C13.795,78.918 10.606,68.735 7.471,58.535 C6.825,56.434 6.097,54.544 4.003,53.222 C1.691,51.761 1.044,49.161 1.029,46.506 C0.998,41.147 0.907,35.784 1.058,30.430 C1.215,24.841 4.155,22.064 9.829,21.939 C13.726,21.853 17.631,22.040 21.525,21.895 C41.631,21.143 59.881,15.561 74.760,1.279 C75.417,0.649 76.137,-0.190 77.296,0.369 C78.412,0.907 78.284,1.916 78.283,2.885 C78.281,6.173 78.282,9.462 78.285,12.750 C78.288,13.968 78.338,15.189 78.279,16.404 C78.061,20.885 78.389,24.327 83.056,27.522 C91.119,33.043 89.569,46.383 81.020,51.185 ZM36.700,78.405 C36.637,78.413 36.582,78.442 36.517,78.442 L16.485,78.442 C16.853,79.579 17.208,80.719 17.591,81.850 C17.663,82.063 17.718,82.242 17.785,82.445 L36.406,82.445 C37.599,81.377 37.779,79.511 36.700,78.405 ZM29.907,90.826 C32.339,90.826 34.771,90.792 37.202,90.837 C39.171,90.873 39.652,89.628 39.763,88.032 C39.878,86.383 39.063,85.869 37.986,85.629 L18.775,85.629 C20.507,91.531 20.105,90.813 29.907,90.826 ZM28.025,26.177 C27.523,24.656 26.356,24.809 25.057,24.810 C20.065,24.813 15.072,24.771 10.080,24.822 C5.857,24.865 3.908,26.853 3.866,31.145 C3.818,36.134 3.812,41.125 3.867,46.115 C3.907,49.829 5.920,52.140 9.596,52.266 C14.948,52.449 20.310,52.314 25.667,52.335 C27.330,52.342 28.088,51.626 28.039,49.903 C27.964,47.228 27.984,29.451 28.043,26.775 C28.047,26.589 28.036,26.384 28.025,26.177 ZM29.430,63.402 C29.022,61.630 28.552,59.841 28.439,58.038 C28.302,55.837 27.332,55.211 25.212,55.301 C21.450,55.460 17.676,55.342 13.906,55.349 C9.696,55.358 9.513,55.567 10.746,59.650 C11.337,61.607 11.920,63.566 12.503,65.525 L28.885,65.525 C29.615,65.125 29.658,64.389 29.430,63.402 ZM13.456,68.709 C14.110,70.895 14.772,73.080 15.452,75.258 L34.556,75.258 C34.656,75.148 33.101,72.367 32.952,72.040 C32.307,70.624 31.712,69.166 30.314,68.709 L13.456,68.709 ZM75.279,9.722 C75.278,8.668 75.583,7.527 74.563,6.282 C70.844,8.844 67.328,11.749 63.288,13.846 C54.399,18.459 44.999,21.574 35.229,23.680 C33.563,24.040 31.705,24.121 30.873,26.034 C30.869,26.335 30.855,26.635 30.861,26.906 C30.921,29.582 30.938,47.359 30.871,50.034 C30.827,51.783 31.574,52.948 33.257,53.136 C36.441,53.492 39.376,54.704 42.379,55.626 C52.818,58.831 62.909,62.857 71.900,69.223 C72.773,69.841 73.559,71.214 74.582,70.744 C75.847,70.163 75.268,68.563 75.270,67.414 C75.303,48.183 75.300,28.953 75.279,9.722 ZM80.617,29.153 C80.049,28.784 79.506,27.986 78.728,28.480 C78.023,28.928 78.311,29.798 78.303,30.488 C78.274,33.151 78.292,35.814 78.294,38.478 C78.294,41.383 78.301,44.289 78.291,47.194 C78.286,48.605 78.612,49.326 80.173,48.403 C86.657,44.571 86.938,33.261 80.617,29.153 Z' />\r\n\t</g>,\r\n\t'AdexAdvertiser',\r\n\t'0 0 109 94'\r\n)\r\n","import React, { Component } from 'react'\r\nimport PublisherLogo from 'components/common/icons/AdexPublisher'\r\nimport AdvertiserLogo from 'components/common/icons/AdexAdvertiser'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport Translate from 'components/translate/Translate'\r\nimport classnames from 'classnames'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nconst SideBox = ({\r\n\tsalePoints = [],\r\n\tlinkTitle,\r\n\ticon,\r\n\ttitle,\r\n\tdisabled,\r\n\tclasses,\r\n\t...other\r\n}) => (\r\n\t<div\r\n\t\t{...other}\r\n\t\tclassName={classnames(classes.sideBox, { [classes.disabled]: disabled })}\r\n\t>\r\n\t\t<div className={classes.icon}>{icon}</div>\r\n\t\t<h2>{title}</h2>\r\n\t\t<ul className={classes.salePoints}>\r\n\t\t\t{salePoints.map(function(point, key) {\r\n\t\t\t\treturn <li key={key}> {point} </li>\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t</div>\r\n)\r\n\r\nconst RRSideBox = withReactRouterLink(SideBox)\r\n\r\nclass SideSelect extends Component {\r\n\trender() {\r\n\t\tlet { t, classes } = this.props\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\topen={true}\r\n\t\t\t\tclasses={{ paper: classes.dialogPaper }}\r\n\t\t\t\tBackdropProps={{\r\n\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\troot: classes.backdrop,\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t\tfullWidth\r\n\t\t\t\tmaxWidth='sm'\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle>{t('CHOOSE_SIDE')}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<RRSideBox\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\ttitle={t('ADVERTISER')}\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<AdvertiserLogo\r\n\t\t\t\t\t\t\t\tstyle={{ width: 110, height: 110 }}\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsalePoints={[\r\n\t\t\t\t\t\t\tt('SALE_POINT_ADV_1'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_ADV_2'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_ADV_3'),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tto='/dashboard/advertiser'\r\n\t\t\t\t\t\tlinkTitle={t('GO_ADVERTISER')}\r\n\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<RRSideBox\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\ttitle={t('PUBLISHER')}\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<PublisherLogo\r\n\t\t\t\t\t\t\t\tstyle={{ width: 110, height: 110 }}\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsalePoints={[\r\n\t\t\t\t\t\t\tt('SALE_POINT_PUB_1'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_PUB_2'),\r\n\t\t\t\t\t\t\tt('SALE_POINT_PUB_3'),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tto='/dashboard/publisher'\r\n\t\t\t\t\t\tlinkTitle={t('GO_PUBLISHER')}\r\n\t\t\t\t\t\t// disabled\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Translate(withStyles(styles)(SideSelect))\r\n","export const styles = () => {\r\n\treturn {\r\n\t\tbackdrop: {\r\n\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n\t\t},\r\n\t\tsideBox: {\r\n\t\t\tdisplay: 'inline-block',\r\n\t\t\twidth: '50%',\r\n\t\t\theight: 'auto',\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tverticalAlign: 'top',\r\n\t\t\topacity: 0.7,\r\n\t\t\t'&:hover:not(.disabled)': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t\topacity: 1,\r\n\t\t\t},\r\n\t\t\t'&.disabled': {\r\n\t\t\t\topacity: 0.3,\r\n\t\t\t},\r\n\t\t\t'@media(max-width:425px)': {\r\n\t\t\t\twidth: '100%',\r\n\t\t\t},\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\twidth: 110,\r\n\t\t\theight: 110,\r\n\t\t\tmargin: 'auto',\r\n\t\t},\r\n\t\tsalePoints: {\r\n\t\t\tpadding: 0,\r\n\t\t\t'& li': {\r\n\t\t\t\tdisplay: 'block',\r\n\t\t\t\tlistStyle: 'none',\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nfunction arrowGenerator(color) {\r\n\treturn {\r\n\t\t'&[x-placement*=\"bottom\"] $arrow': {\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tmarginTop: '-0.95em',\r\n\t\t\twidth: '2em',\r\n\t\t\theight: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '0 1em 1em 1em',\r\n\t\t\t\tborderColor: `transparent transparent ${color} transparent`,\r\n\t\t\t},\r\n\t\t},\r\n\t\t'&[x-placement*=\"top\"] $arrow': {\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tmarginBottom: '-0.95em',\r\n\t\t\twidth: '2em',\r\n\t\t\theight: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '1em 1em 0 1em',\r\n\t\t\t\tborderColor: `${color} transparent transparent transparent`,\r\n\t\t\t},\r\n\t\t},\r\n\t\t'&[x-placement*=\"right\"] $arrow': {\r\n\t\t\tleft: 0,\r\n\t\t\tmarginLeft: '-0.95em',\r\n\t\t\theight: '2em',\r\n\t\t\twidth: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '1em 1em 1em 0',\r\n\t\t\t\tborderColor: `transparent ${color} transparent transparent`,\r\n\t\t\t},\r\n\t\t},\r\n\t\t'&[x-placement*=\"left\"] $arrow': {\r\n\t\t\tright: 0,\r\n\t\t\tmarginRight: '-0.95em',\r\n\t\t\theight: '2em',\r\n\t\t\twidth: '1em',\r\n\t\t\t'&::before': {\r\n\t\t\t\tborderWidth: '1em 0 1em 1em',\r\n\t\t\t\tborderColor: `transparent transparent transparent ${color}`,\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport const LightTooltip = withStyles(theme => ({\r\n\ttooltip: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\t\tboxShadow: theme.shadows[1],\r\n\t\tfontSize: 11,\r\n\t},\r\n}))(Tooltip)\r\n\r\nconst useStylesArrow = makeStyles(theme => ({\r\n\ttooltip: {\r\n\t\tposition: 'relative',\r\n\t\tbackgroundColor: theme.palette.common.black,\r\n\t},\r\n\tpopper: arrowGenerator(theme.palette.common.black),\r\n\tarrow: {\r\n\t\tposition: 'absolute',\r\n\t\tfontSize: 6,\r\n\t\t'&::before': {\r\n\t\t\tcontent: '\"\"',\r\n\t\t\tmargin: 'auto',\r\n\t\t\tdisplay: 'block',\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\tborderStyle: 'solid',\r\n\t\t},\r\n\t},\r\n}))\r\n\r\nexport function ArrowTooltip(props) {\r\n\tconst { arrow, ...classes } = useStylesArrow()\r\n\tconst [arrowRef, setArrowRef] = React.useState(null)\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\tclasses={classes}\r\n\t\t\tPopperProps={{\r\n\t\t\t\tpopperOptions: {\r\n\t\t\t\t\tmodifiers: {\r\n\t\t\t\t\t\tarrow: {\r\n\t\t\t\t\t\t\tenabled: Boolean(arrowRef),\r\n\t\t\t\t\t\t\telement: arrowRef,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t}}\r\n\t\t\t{...props}\r\n\t\t\ttitle={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t{props.title}\r\n\t\t\t\t\t<span className={arrow} ref={setArrowRef} />\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nArrowTooltip.propTypes = {\r\n\ttitle: PropTypes.node,\r\n}\r\n\r\nexport const HtmlTooltip = withStyles(theme => ({\r\n\ttooltip: {\r\n\t\tbackgroundColor: '#f5f5f9',\r\n\t\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\t\tmaxWidth: 220,\r\n\t\tfontSize: theme.typography.pxToRem(12),\r\n\t\tborder: '1px solid #dadde9',\r\n\t},\r\n}))(Tooltip)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport classnames from 'classnames'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\nimport { ArrowTooltip } from 'components/common/tooltips'\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\troot: {\r\n\t\t\tposition: 'relative',\r\n\t\t\tbackgroundColor: ({ bgColor = '' }) =>\r\n\t\t\t\t(theme.palette[bgColor] || {}).main || theme.palette.background.default,\r\n\t\t\tcolor: ({ bgColor = '' }) =>\r\n\t\t\t\t(theme.palette[bgColor] || {}).contrastText ||\r\n\t\t\t\ttheme.palette.text.primary,\r\n\t\t},\r\n\t\tinfoCard: {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tflexGrow: 1,\r\n\t\t},\r\n\t\tlinkCard: {\r\n\t\t\t'&:hover, &:focus': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t},\r\n\t\t},\r\n\t\tprogress: {\r\n\t\t\tbottom: 0,\r\n\t\t\tposition: 'absolute',\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t}\r\n})\r\n\r\nconst StatsCard = props => {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tsubtitle,\r\n\t\tlinkCard,\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t\tbgColor,\r\n\t\tloading,\r\n\t\texplain,\r\n\t} = props\r\n\r\n\tconst classes = useStyles({ bgColor })\r\n\r\n\treturn (\r\n\t\t<Card\r\n\t\t\t// raised\r\n\t\t\tclassName={classnames(classes.root, classes.infoCard, {\r\n\t\t\t\t[classes.linkCard]: !!linkCard,\r\n\t\t\t})}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t<CardContent>\r\n\t\t\t\t{title && (\r\n\t\t\t\t\t<Typography variant='h5' noWrap>\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t)}\r\n\t\t\t\t{subtitle && (\r\n\t\t\t\t\t<Typography component='p' noWrap>\r\n\t\t\t\t\t\t{subtitle}{' '}\r\n\t\t\t\t\t\t{explain && (\r\n\t\t\t\t\t\t\t<ArrowTooltip\r\n\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\t<Typography component='p' variant='caption'>\r\n\t\t\t\t\t\t\t\t\t\t{explain}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<InfoIcon style={{ fontSize: 12 }}></InfoIcon>\r\n\t\t\t\t\t\t\t</ArrowTooltip>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t)}\r\n\t\t\t\t{children}\r\n\t\t\t</CardContent>\r\n\t\t\t{loading && <LinearProgress className={classes.progress} />}\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nStatsCard.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tsubtitle: PropTypes.string,\r\n\tlinkCard: PropTypes.bool,\r\n}\r\n\r\nexport default StatsCard\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\r\n\treturn {\r\n\t\tinfoStatsContainer: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tjustifyContent: 'stretch',\r\n\t\t\theight: '100%',\r\n\t\t},\r\n\t\tinfoCard: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tflexGrow: 1,\r\n\t\t},\r\n\t\tlinkCard: {\r\n\t\t\t'&:hover, &:focus': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t},\r\n\t\t},\r\n\t\tdashboardCardBody: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tpadding: spacing,\r\n\t\t\twidth: `calc(100% - ${spacing * 2}px)`,\r\n\t\t},\r\n\t}\r\n}\r\n","import Helper from 'helpers/miscHelpers'\r\nimport { defaults } from 'react-chartjs-2'\r\nimport merge from 'lodash.merge'\r\n\r\n// export const CHARTS_COLORS = ['#0277BD', '#03A9F4', '#00E676', '#FFAB00', '#FF5722', '#616161']\r\n// Eddie colors\r\nexport const CHARTS_COLORS = [\r\n\t'#00BAFF',\r\n\t'#7EDBFF',\r\n\t'#FF9FA8',\r\n\t'#14DC9C',\r\n\t'#61FFB2',\r\n\t'#ABFFE5',\r\n]\r\n\r\nexport let CHARTS_COMMON_OPTIONS = {\r\n\tresponsive: true,\r\n\ttooltips: {\r\n\t\tmode: 'label',\r\n\t\tcornerRadius: 2,\r\n\t\tbackgroundColor: Helper.hexToRgbaColorString('#616161', 0.9),\r\n\t},\r\n}\r\n\r\nexport const hexColorsToRgbaArray = (colors, alpha) => {\r\n\treturn colors.map(color => {\r\n\t\treturn Helper.hexToRgbaColorString(color, alpha)\r\n\t})\r\n}\r\n\r\nmerge(defaults, { global: CHARTS_COMMON_OPTIONS })\r\n","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Line, Chart } from 'react-chartjs-2'\r\nimport { CHARTS_COLORS } from 'components/dashboard/charts/options'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { selectStatsChartData } from 'selectors'\r\n\r\nconst commonDsProps = {\r\n\tfill: false,\r\n\tlineTension: 0.3,\r\n\tborderWidth: 0,\r\n\tpointRadius: 3,\r\n\tpointHitRadius: 10,\r\n}\r\n\r\nexport const SimpleStatistics = ({\r\n\tside,\r\n\ttimeframe = '',\r\n\teventType,\r\n\toptions = {},\r\n\tt,\r\n\txLabel = 'TIMEFRAME',\r\n\ty1Label = 'DATA1',\r\n\ty2Label = 'DATA2',\r\n\ty1Color = CHARTS_COLORS[1],\r\n\ty2Color = CHARTS_COLORS[2],\r\n}) => {\r\n\tconst payouts = useSelector(state =>\r\n\t\tselectStatsChartData(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType,\r\n\t\t\tmetric: 'eventPayouts',\r\n\t\t\tnoLastOne: true,\r\n\t\t})\r\n\t)\r\n\r\n\tconst counts = useSelector(state =>\r\n\t\tselectStatsChartData(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t\teventType,\r\n\t\t\tmetric: 'eventCounts',\r\n\t\t\tnoLastOne: true,\r\n\t\t})\r\n\t)\r\n\r\n\t// Vertical line / crosshair\r\n\tuseEffect(() => {\r\n\t\tChart.pluginService.register({\r\n\t\t\tafterDraw: function(chart) {\r\n\t\t\t\tif (chart.tooltip._active && chart.tooltip._active.length) {\r\n\t\t\t\t\tconst activePoint = chart.controller.tooltip._active[0]\r\n\t\t\t\t\tconst ctx = chart.ctx\r\n\t\t\t\t\tconst x = activePoint.tooltipPosition().x\r\n\t\t\t\t\tconst topY = chart.scales['y-axis-1'].top\r\n\t\t\t\t\tconst bottomY = chart.scales['y-axis-1'].bottom\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(x, topY)\r\n\t\t\t\t\tctx.lineTo(x, bottomY)\r\n\t\t\t\t\tctx.lineWidth = 1 // line width\r\n\t\t\t\t\tctx.setLineDash([1, 5])\r\n\t\t\t\t\tctx.strokeStyle = '#C0C0C0' // color of the vertical line\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t})\r\n\t})\r\n\r\n\tconst chartData = {\r\n\t\tlabels: payouts.labels,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\t\t...commonDsProps,\r\n\t\t\t\tbackgroundColor: Helper.hexToRgbaColorString(y1Color, 0.5),\r\n\t\t\t\tborderColor: Helper.hexToRgbaColorString(y1Color, 1),\r\n\t\t\t\tlabel: y1Label,\r\n\t\t\t\tdata: payouts.datasets,\r\n\t\t\t\tyAxisID: 'y-axis-1',\r\n\t\t\t\tpointBackgroundColor: 'transparent',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t...commonDsProps,\r\n\t\t\t\tbackgroundColor: Helper.hexToRgbaColorString(y2Color, 0.5),\r\n\t\t\t\tborderColor: Helper.hexToRgbaColorString(y2Color, 1),\r\n\t\t\t\tlabel: y2Label,\r\n\t\t\t\tdata: counts.datasets,\r\n\t\t\t\tyAxisID: 'y-axis-2',\r\n\t\t\t},\r\n\t\t],\r\n\t}\r\n\r\n\tconst linesOptions = {\r\n\t\tresponsive: true,\r\n\t\t// This and fixed height are used for proper mobile display of the chart\r\n\t\tmaintainAspectRatio: false,\r\n\t\ttitle: {\r\n\t\t\tdisplay: true,\r\n\t\t\ttext: options.title,\r\n\t\t},\r\n\t\ttooltips: {\r\n\t\t\tbackgroundColor: 'black',\r\n\t\t\tmode: 'index',\r\n\t\t\tintersect: false,\r\n\t\t\tcallbacks: {\r\n\t\t\t\tlabel: function(t, d) {\r\n\t\t\t\t\t// This adds currency DAI to y1Label in the tooltips\r\n\t\t\t\t\tvar xLabel = d.datasets[t.datasetIndex].label\r\n\t\t\t\t\tvar yLabel = xLabel === y1Label ? `${t.yLabel} SAI` : t.yLabel\r\n\t\t\t\t\treturn `${xLabel}: ${yLabel}`\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thover: {\r\n\t\t\tmode: 'index',\r\n\t\t\tintersect: false,\r\n\t\t},\r\n\t\tscales: {\r\n\t\t\txAxes: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tlabelString: t(xLabel || 'TIMEFRAME'),\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tyAxes: [\r\n\t\t\t\t{\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tlabelString: y1Label,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: 'y-axis-1',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance\r\n\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\tposition: 'right',\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tlabelString: y2Label,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: 'y-axis-2',\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t\tprecision: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// grid line settings\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdrawOnChartArea: false, // only want the grid lines for one axis to show up\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t}\r\n\r\n\treturn <Line height={500} data={chartData} options={linesOptions} />\r\n}\r\n","import { createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles'\r\nimport lime from '@material-ui/core/colors/lime'\r\nimport deepOrange from '@material-ui/core/colors/deepOrange'\r\nimport amber from '@material-ui/core/colors/amber'\r\nimport grey from '@material-ui/core/colors/grey'\r\n\r\nconst WHITE = '#fff'\r\nexport const PRIMARY = '#1B75BC'\r\nexport const SECONDARY = '#FFAC00'\r\nexport const ALEX_GREY = '#3f3e3e'\r\nexport const ACCENT_ONE = '#57467B'\r\nexport const ACCENT_TWO = '#7CB4B8'\r\n\r\nconst palette = {\r\n\tprimary: { main: PRIMARY, contrastText: WHITE },\r\n\tsecondary: { main: SECONDARY, contrastText: WHITE },\r\n\taccentOne: { main: ACCENT_ONE, contrastText: WHITE },\r\n\taccentTwo: { main: ACCENT_TWO, contrastText: ALEX_GREY },\r\n\tgrey: { main: ALEX_GREY, contrastText: WHITE },\r\n\terror: deepOrange,\r\n\twarning: amber,\r\n\tfirst: lime,\r\n\tcontrastThreshold: 3,\r\n\ttonalOffset: 0.2,\r\n\ttext: grey,\r\n}\r\n\r\nconst theme = createMuiTheme({\r\n\ttypography: {\r\n\t\tfontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n\t\tfontSize: 13,\r\n\t},\r\n\tpalette: { ...palette },\r\n\toverrides: {\r\n\t\tMuiButton: {\r\n\t\t\troot: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t},\r\n\t\t\toutlined: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiTableCell: {\r\n\t\t\thead: {\r\n\t\t\t\twhiteSpace: 'nowrap',\r\n\t\t\t},\r\n\t\t\troot: {\r\n\t\t\t\twhiteSpace: 'nowrap',\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiPaper: {\r\n\t\t\trounded: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiTooltip: {\r\n\t\t\ttooltip: { borderRadius: 0 },\r\n\t\t},\r\n\t\t// MuiStepIcon: {\r\n\t\t//     root: {\r\n\t\t//         color: 'yellow',\r\n\t\t//         '&$active': {\r\n\t\t//             color: 'orange'\r\n\t\t//         }\r\n\t\t//     },\r\n\t\t//     active: {\r\n\t\t//         color: 'yellow'\r\n\t\t//     }\r\n\t\t// }\r\n\t},\r\n})\r\n\r\nexport const themeMUI = responsiveFontSizes(theme, {\r\n\toptions: ['xs', 'sm', 'md', 'lg', 'xl'],\r\n\tfactor: 3,\r\n})\r\n","import React, { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { SimpleStatistics } from 'components/dashboard/charts/simplified'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { translate } from 'services/translations/translations'\r\nimport { VALIDATOR_ANALYTICS_TIMEFRAMES } from 'constants/misc'\r\nimport StatsCard from './StatsCard'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { PRIMARY, ACCENT_ONE, ACCENT_TWO } from 'components/App/themeMUi'\r\nimport { styles } from './styles'\r\nimport { formatNumberWithCommas } from 'helpers/formatters'\r\nimport {\r\n\tt,\r\n\tselectTotalImpressions,\r\n\tselectTotalMoney,\r\n\tselectAverageCPM,\r\n} from 'selectors'\r\n\r\nconst timeFrames = VALIDATOR_ANALYTICS_TIMEFRAMES.map(tf => {\r\n\tconst translated = { ...tf }\r\n\ttranslated.label = translate(tf.label)\r\n\treturn translated\r\n})\r\n\r\nconst metrics = {\r\n\tpublisher: [\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_REVENUE'),\r\n\t\t\tvalue: 'eventPayouts',\r\n\t\t\tcolor: ACCENT_TWO,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_IMPRESSIONS'),\r\n\t\t\tvalue: 'eventCounts',\r\n\t\t\tcolor: PRIMARY,\r\n\t\t},\r\n\t],\r\n\tadvertiser: [\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_SPEND'),\r\n\t\t\tvalue: 'eventPayouts',\r\n\t\t\tcolor: ACCENT_ONE,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: translate('LABEL_IMPRESSIONS'),\r\n\t\t\tvalue: 'eventCounts',\r\n\t\t\tcolor: PRIMARY,\r\n\t\t},\r\n\t],\r\n}\r\n\r\nconst timeHints = {\r\n\thour: 'SHOWING_LAST_HOUR',\r\n\tday: 'SHOWING_LAST_24_HOURS',\r\n\tweek: 'SHOWING_LAST_7_DAYS',\r\n}\r\n\r\nexport function BasicStats({ side }) {\r\n\tconst [timeframe, setTimeframe] = useState(timeFrames[1].value)\r\n\tconst useStyles = makeStyles(styles)\r\n\tconst classes = useStyles()\r\n\r\n\tconst totalImpressions = useSelector(state =>\r\n\t\tselectTotalImpressions(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t})\r\n\t)\r\n\r\n\tconst totalMoney = useSelector(state =>\r\n\t\tselectTotalMoney(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t})\r\n\t)\r\n\r\n\tconst averageCPM = useSelector(state =>\r\n\t\tselectAverageCPM(state, {\r\n\t\t\tside,\r\n\t\t\ttimeframe,\r\n\t\t})\r\n\t)\r\n\r\n\tconst loadingImpressions = totalImpressions === null\r\n\tconst loadingMoney = totalMoney === null\r\n\tconst loadingCPM = averageCPM === null\r\n\r\n\treturn (\r\n\t\t<Grid container spacing={2}>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<div className={classes.infoStatsContainer}>\r\n\t\t\t\t\t<StatsCard>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tlabel={t('SELECT_TIMEFRAME')}\r\n\t\t\t\t\t\t\thelperText={t(timeHints[timeframe])}\r\n\t\t\t\t\t\t\tonChange={val => setTimeframe(val)}\r\n\t\t\t\t\t\t\tsource={timeFrames}\r\n\t\t\t\t\t\t\tvalue={timeframe}\r\n\t\t\t\t\t\t\thtmlId='timeframe-select'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</StatsCard>\r\n\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\tbgColor='primary'\r\n\t\t\t\t\t\tsubtitle={t('LABEL_TOTAL_IMPRESSIONS')}\r\n\t\t\t\t\t\tloading={loadingImpressions}\r\n\t\t\t\t\t\ttitle={`${formatNumberWithCommas(totalImpressions || 0)}`}\r\n\t\t\t\t\t\texplain={t('EXPLAIN_TOTAL_IMPRESSIONS')}\r\n\t\t\t\t\t></StatsCard>\r\n\t\t\t\t\t{side === 'advertiser' && (\r\n\t\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\t\tbgColor='accentOne'\r\n\t\t\t\t\t\t\tsubtitle={t('LABEL_TOTAL_SPENT')}\r\n\t\t\t\t\t\t\texplain={t('EXPLAIN_TOTAL_SPENT')}\r\n\t\t\t\t\t\t\ttitle={`~ ${formatNumberWithCommas(\r\n\t\t\t\t\t\t\t\tparseFloat(totalMoney || 0).toFixed(2)\r\n\t\t\t\t\t\t\t)} SAI`}\r\n\t\t\t\t\t\t\tloading={loadingMoney}\r\n\t\t\t\t\t\t></StatsCard>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{side === 'publisher' && (\r\n\t\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\t\tbgColor='accentTwo'\r\n\t\t\t\t\t\t\tsubtitle={t('LABEL_TOTAL_REVENUE')}\r\n\t\t\t\t\t\t\texplain={t('EXPLAIN_TOTAL_REVENUE')}\r\n\t\t\t\t\t\t\ttitle={`~ ${formatNumberWithCommas(\r\n\t\t\t\t\t\t\t\tparseFloat(totalMoney || 0).toFixed(2)\r\n\t\t\t\t\t\t\t)} SAI`}\r\n\t\t\t\t\t\t\tloading={loadingMoney}\r\n\t\t\t\t\t\t></StatsCard>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<StatsCard\r\n\t\t\t\t\t\tbgColor='grey'\r\n\t\t\t\t\t\tsubtitle={t('LABEL_AVG_CPM')}\r\n\t\t\t\t\t\texplain={t('EXPLAIN_AVG_CPM')}\r\n\t\t\t\t\t\tloading={loadingCPM}\r\n\t\t\t\t\t\ttitle={`~ ${formatNumberWithCommas(\r\n\t\t\t\t\t\t\tparseFloat(averageCPM || 0).toFixed(2)\r\n\t\t\t\t\t\t)} SAI / CPM`}\r\n\t\t\t\t\t></StatsCard>\r\n\t\t\t\t</div>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<SimpleStatistics\r\n\t\t\t\t\tside={side}\r\n\t\t\t\t\ttimeframe={timeframe}\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\ttitle: t(timeFrames.find(a => a.value === timeframe).label),\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ty1Label={metrics[side][0].label}\r\n\t\t\t\t\ty1Color={metrics[side][0].color}\r\n\t\t\t\t\ty2Label={metrics[side][1].label}\r\n\t\t\t\t\ty2Color={metrics[side][1].color}\r\n\t\t\t\t\teventType={'IMPRESSION'}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { execute, updateNav } from 'actions'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport classnames from 'classnames'\r\nimport SideSelect from 'components/signin/side-select/SideSelect'\r\nimport StatsCard from './StatsCard'\r\nimport { styles } from './styles'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { BasicStats } from './BasicStats'\r\nimport { push } from 'connected-react-router'\r\nimport { t, selectSide, selectAccount } from 'selectors'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport function DashboardStats(props) {\r\n\tconst side = useSelector(selectSide)\r\n\tconst account = useSelector(selectAccount)\r\n\tconst classes = useStyles()\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('navTitle', t('DASHBOARD')))\r\n\t}, [])\r\n\r\n\tconst goToAccount = () => {\r\n\t\texecute(push('/dashboard/' + side + '/account'))\r\n\t}\r\n\r\n\tconst InfoStats = () => {\r\n\t\tconst formatted = account.stats.formatted || {}\r\n\t\tconst {\r\n\t\t\tidentityBalanceDai,\r\n\t\t\toutstandingBalanceDai,\r\n\t\t\tavailableIdentityBalanceDai,\r\n\t\t} = formatted\r\n\t\treturn (\r\n\t\t\t<div className={classes.infoStatsContainer}>\r\n\t\t\t\t<StatsCard\r\n\t\t\t\t\tlinkCard\r\n\t\t\t\t\tonClick={goToAccount}\r\n\t\t\t\t\tsubtitle={t('IDENTITY_DAI_BALANCE_AVAILABLE_INFO', {\r\n\t\t\t\t\t\targs: [identityBalanceDai || 0, outstandingBalanceDai || 0],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tloading={\r\n\t\t\t\t\t\t(!identityBalanceDai && identityBalanceDai !== 0) ||\r\n\t\t\t\t\t\t(!outstandingBalanceDai && outstandingBalanceDai !== 0) ||\r\n\t\t\t\t\t\t(!availableIdentityBalanceDai && availableIdentityBalanceDai !== 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttitle={`${availableIdentityBalanceDai || 0} SAI`}\r\n\t\t\t\t></StatsCard>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn side !== 'advertiser' && side !== 'publisher' ? (\r\n\t\t<SideSelect active={true} />\r\n\t) : (\r\n\t\t<div>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={12} lg={12} xs={12}>\r\n\t\t\t\t\t<Card className={classnames(classes.dashboardCardBody)}>\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<BasicStats side={side} />\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={12} lg={6}>\r\n\t\t\t\t\t<InfoStats />\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DashboardStats\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ItemHoc from 'components/dashboard/containers/ItemHoc'\r\nimport { AdUnit } from 'adex-models'\r\nimport UnitTargets from 'components/dashboard/containers/UnitTargets'\r\nimport Translate from 'components/translate/Translate'\r\nimport { BasicProps } from 'components/dashboard/containers/ItemCommon'\r\n\r\nexport class Unit extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tcloseDialog: false,\r\n\t\t}\r\n\t}\r\n\t// shouldComponentUpdate(nextProps, nextState) {\r\n\t//     let diffProps = JSON.stringify(this.props) !== JSON.stringify(nextProps)\r\n\t//     let diffState = JSON.stringify(this.state) !== JSON.stringify(nextState)\r\n\t//     return diffProps || diffState\r\n\t// }\r\n\trender() {\r\n\t\tconst { item, t, ...rest } = this.props\r\n\r\n\t\tif (!item) return <h1>Unit '404'</h1>\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<BasicProps\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t\turl={item.adUrl}\r\n\t\t\t\t\trightComponent={\r\n\t\t\t\t\t\t<UnitTargets\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\ttargets={item.targeting}\r\n\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\tsubHeader={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nUnit.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titem: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\treturn {\r\n\t\tobjModel: AdUnit,\r\n\t\titemType: 'AdUnit',\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst UnitItem = ItemHoc(Unit)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(UnitItem))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { AdSlot } from 'adex-models'\r\nimport copy from 'copy-to-clipboard'\r\nimport ItemHoc from 'components/dashboard/containers/ItemHoc'\r\nimport { BasicProps } from 'components/dashboard/containers/ItemCommon'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CopyIcon from '@material-ui/icons/FileCopy'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { contracts } from 'services/smart-contracts/contractsCfg'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport url from 'url'\r\n\r\nconst ADVIEW_URL = process.env.ADVIEW_URL\r\nconst adviewUrl = url.parse(ADVIEW_URL)\r\nconst origin = `${adviewUrl.protocol}//${adviewUrl.host}`\r\n\r\nconst AUTO_HIDE_STRING = `window.addEventListener('message', function(ev) { \r\n\t\tif (ev.data.hasOwnProperty('adexHeight') && ('${origin}' === ev.origin)) {\r\n\t\t\tfor (let f of document.getElementsByTagName('iframe')) {\t\r\n\t\t\t\tif (f.contentWindow === ev.source) {\r\n\t\t\t\t\tf.height = ev.data.adexHeight;\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t}\r\n\t}, false)`\r\n\r\nconst { DAI } = contracts\r\n\r\n// const ADEX_MARKET_HOST = process.env.ADEX_MARKET_HOST\r\n\r\nconst IntegrationCode = ({ t, account, slot = {}, classes, onCopy }) => {\r\n\tconst { id, type, tags, fallbackUnit } = slot\r\n\tconst identityAddr = account.identity.address\r\n\r\n\tlet sizes = type.split('_')[1].split('x')\r\n\tsizes = {\r\n\t\twidth: sizes[0],\r\n\t\theight: sizes[1],\r\n\t}\r\n\r\n\tconst options = {\r\n\t\tpublisherAddr: identityAddr,\r\n\t\twhitelistedToken: DAI.address,\r\n\t\twhitelistedType: type,\r\n\t\trandomize: true,\r\n\t\ttargeting: tags || [],\r\n\t\t// marketURL: ADEX_MARKET_HOST,\r\n\t\twidth: sizes.width,\r\n\t\theight: sizes.height,\r\n\t\tminPerImpression: '0',\r\n\t\tminTargetingScore: '0',\r\n\t\tfallbackUnit,\r\n\t\tmarketSlot: id,\r\n\t}\r\n\r\n\tlet query = encodeURIComponent(JSON.stringify({ options }))\r\n\r\n\tlet src = ADVIEW_URL + query\r\n\r\n\tlet iframeStr =\r\n\t\t`<iframe\\n` +\r\n\t\t`\tsrc=\"${src}\"\\n` +\r\n\t\t`\twidth=\"${sizes.width}\"\\n` +\r\n\t\t`\theight=\"${sizes.height}\"\\n` +\r\n\t\t`\tscrolling=\"no\"\\n` +\r\n\t\t`\tframeborder=\"0\"\\n` +\r\n\t\t`\tstyle=\"border: 0;\"\\n` +\r\n\t\t`\tonload=\"${AUTO_HIDE_STRING}\"\\n` +\r\n\t\t`></iframe>`\r\n\r\n\t// TODO: Add copy to clipboard and tooltip or description how to use it\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className={classes.integrationLabel}>\r\n\t\t\t\t{t('INTEGRATION_CODE')}\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tcopy(iframeStr)\r\n\t\t\t\t\t\tonCopy && onCopy()\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<CopyIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</div>\r\n\t\t\t<Paper>\r\n\t\t\t\t<pre className={classes.integrationCode}>{iframeStr}</pre>\r\n\t\t\t</Paper>\r\n\t\t\t{process.env.NODE_ENV !== 'production' && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div className={classes.integrationLabel}> {t('AD_PREVIEW')}</div>\r\n\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: iframeStr }} />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport class Slot extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\teditFallbackImg: false,\r\n\t\t\ttabIndex: 0,\r\n\t\t}\r\n\t\tthis.tabsFocus = React.createRef()\r\n\t}\r\n\r\n\thandleFallbackImgUpdateToggle = () => {\r\n\t\tconst active = this.state.editFallbackImg\r\n\t\tthis.setState({ editFallbackImg: !active })\r\n\t}\r\n\r\n\thandleTabChange = (event, index) => {\r\n\t\tthis.setState({ tabIndex: index }, () => {\r\n\t\t\tif (this.tabsFocus.current) {\r\n\t\t\t\tthis.tabsFocus.current.scrollIntoView({\r\n\t\t\t\t\tbehavior: 'smooth',\r\n\t\t\t\t\tblock: 'start',\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, classes, isDemo, item, account, itemType, ...rest } = this.props\r\n\t\tconst { tabIndex } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<BasicProps\r\n\t\t\t\t\titem={item}\r\n\t\t\t\t\titemType={itemType}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t\turl={item.adUrl}\r\n\t\t\t\t\tcanEditImg={!isDemo}\r\n\t\t\t\t\trightComponent={null}\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<AppBar position='static' color='default'>\r\n\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\tvalue={tabIndex}\r\n\t\t\t\t\t\t\tonChange={this.handleTabChange.bind(this)}\r\n\t\t\t\t\t\t\tref={this.tabsFocus}\r\n\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\tscrollButtons='off'\r\n\t\t\t\t\t\t\tindicatorColor='primary'\r\n\t\t\t\t\t\t\ttextColor='primary'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Tab label={t('STATISTICS')} />\r\n\t\t\t\t\t\t\t<Tab label={t('INTEGRATION')} />\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<div style={{ marginTop: 10 }}>\r\n\t\t\t\t\t\t{tabIndex === 0 && null}\r\n\t\t\t\t\t\t{tabIndex === 1 && (\r\n\t\t\t\t\t\t\t<IntegrationCode\r\n\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\taccount={account}\r\n\t\t\t\t\t\t\t\tslot={item}\r\n\t\t\t\t\t\t\t\tonCopy={() =>\r\n\t\t\t\t\t\t\t\t\tthis.props.actions.addToast({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'accept',\r\n\t\t\t\t\t\t\t\t\t\taction: 'X',\r\n\t\t\t\t\t\t\t\t\t\tlabel: t('COPIED_TO_CLIPBOARD'),\r\n\t\t\t\t\t\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSlot.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\titem: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\t// let memory = state.memory\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t\tobjModel: AdSlot,\r\n\t\titemType: 'AdSlot',\r\n\t\t// NOTE: maybe not the best way but pass props to the HOC here\r\n\t\tupdateImgInfoLabel: 'SLOT_AVATAR_IMG_INFO',\r\n\t\tupdateImgLabel: 'SLOT_AVATAR_IMG_LABEL',\r\n\t\tupdateImgErrMsg: 'ERR_IMG_SIZE_MAX',\r\n\t\tupdateImgExact: true,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst SlotItem = ItemHoc(withStyles(styles)(Slot))\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(SlotItem)\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tintegrationLabel: {\r\n\t\t\tmarginBottom: spacing,\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'space-between',\r\n\t\t},\r\n\t\tintegrationCode: {\r\n\t\t\twhiteSpace: 'pre-wrap',\r\n\t\t\twordBreak: 'break-word',\r\n\t\t\tpadding: spacing,\r\n\t\t\tmargin: 0,\r\n\t\t\talignSelf: 'flex-start',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ItemsList from 'components/dashboard/containers/ItemsList'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nclass Items extends Component {\r\n\tcomponentWillMount() {\r\n\t\tthis.props.actions.updateNav('navTitle', this.props.header)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, itemType, ...rest } = this.props\r\n\t\tconst items = Array.from(Object.values(this.props.items || {})) || []\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{!!this.props.newItemBtn && <this.props.newItemBtn />}\r\n\r\n\t\t\t\t<ItemsList\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\titemType={itemType}\r\n\t\t\t\t\titems={items}\r\n\t\t\t\t\tviewModeId={this.props.viewModeId}\r\n\t\t\t\t\tarchive\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nItems.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\titems: PropTypes.object.isRequired,\r\n\tviewModeId: PropTypes.string.isRequired,\r\n\theader: PropTypes.string.isRequired,\r\n\tobjModel: PropTypes.func.isRequired,\r\n\titemType: PropTypes.string.isRequired,\r\n\tsortProperties: PropTypes.array.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst { persist, memory } = state\r\n\treturn {\r\n\t\titems: persist.items[props.itemType] || [],\r\n\t\tside: memory.nav.side,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(Items))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\nimport Helper from 'helpers/miscHelpers'\r\n// import { exchange as ExchangeConstants } from 'adex-constants'\r\n\r\n// const { TX_STATUS } = ExchangeConstants\r\n\r\nexport default function NewTransactionHoc(Decorated) {\r\n\t// TODO: make it common for bids and items\r\n\tclass TransactionHoc extends Component {\r\n\t\tcomponentWillMount() {\r\n\t\t\t// console.log('TransactionHoc')\r\n\t\t}\r\n\r\n\t\thandleChange = (name, value) => {\r\n\t\t\tconst { actions, txId } = this.props\r\n\t\t\tactions.updateNewTransaction({ tx: txId, key: name, value: value })\r\n\t\t}\r\n\r\n\t\t// addTx = (tx) => {\r\n\t\t//     let txData = { ...tx }\r\n\t\t//     txData.status = TX_STATUS.Pending.id\r\n\t\t//     txData.sendingTime = Date.now()\r\n\t\t//     this.props.actions.addWeb3Transaction({ trans: txData, addr: this.props.account._addr })\r\n\t\t// }\r\n\r\n\t\tonSave = (err, tx, manyTxs) => {\r\n\t\t\tconst { closeDialog } = this.props\r\n\r\n\t\t\tif (closeDialog) {\r\n\t\t\t\tcloseDialog()\r\n\t\t\t}\r\n\r\n\t\t\tthis.resetTransaction()\r\n\t\t}\r\n\r\n\t\tresetTransaction = () => {\r\n\t\t\tconst { actions, txId } = this.props\r\n\t\t\tactions.resetNewTransaction({ tx: txId })\r\n\t\t}\r\n\r\n\t\thandleSaveRes = ({ err, res }) => {\r\n\t\t\tconst { t, actions } = this.props\r\n\t\t\t// const areManyTxs = Array.isArray(res)\r\n\r\n\t\t\tif (err) {\r\n\t\t\t\tactions.addToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: t('ERR_TRANSACTION', { args: [Helper.getErrMsg(err)] }),\r\n\t\t\t\t\ttimeout: 50000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.onSave(err, res, Array.isArray(res))\r\n\t\t}\r\n\r\n\t\tsave = () => {\r\n\t\t\tthis.handleChange('waitingForWalletAction', true)\r\n\t\t\tthis.props\r\n\t\t\t\t.saveFn({\r\n\t\t\t\t\tacc: this.props.account,\r\n\t\t\t\t\ttransaction: this.props.transaction,\r\n\t\t\t\t})\r\n\t\t\t\t.then((res = {}) => {\r\n\t\t\t\t\tconsole.log('res on save', res)\r\n\r\n\t\t\t\t\tconst txs = res.txResults || res\r\n\t\t\t\t\tconst err = res.err || null\r\n\r\n\t\t\t\t\tthis.handleSaveRes({ err: err, res: txs })\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error = {}) => {\r\n\t\t\t\t\tconsole.log('err on save', error)\r\n\t\t\t\t\tconst res = error.txResults || null\r\n\t\t\t\t\tconst err = error.err || error\r\n\r\n\t\t\t\t\tthis.handleSaveRes({ err: err, res: res })\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\t// TODO: take a look at onSave if change something\r\n\t\t\tthis.onSave(null, null)\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tlet transaction = this.props.transaction || {}\r\n\t\t\tlet props = this.props\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\ttransaction={transaction}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tresetTransaction={this.resetTransaction}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tTransactionHoc.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tlabel: PropTypes.string,\r\n\t\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\r\n\t\t\t.isRequired,\r\n\t\ttransaction: PropTypes.object.isRequired,\r\n\t\taccount: PropTypes.object.isRequired,\r\n\t\tsaveFn: PropTypes.func,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist, memory } = state\r\n\t\tconst txId = props.stepsId\r\n\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t\ttransaction: memory.newTransactions[txId] || {},\r\n\t\t\ttxId: txId,\r\n\t\t\tspinner: memory.spinners[txId],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(TransactionHoc))\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\n// import Translate from 'components/translate/Translate'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport { validateNumber } from 'helpers/validators'\r\nimport { InputLoading } from 'components/common/spinners/'\r\n\r\nclass WithdrawFromIdentity extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { validate, transaction } = this.props\r\n\t\t// If nothing entered will validate\r\n\t\tif (!transaction.withdrawAmount) {\r\n\t\t\tvalidate('withdrawAmount', {\r\n\t\t\t\tisValid: true,\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (!transaction.withdrawTo) {\r\n\t\t\tvalidate('withdrawTo', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateAmount = (numStr, dirty) => {\r\n\t\tlet isValid = validateNumber(numStr)\r\n\t\tlet msg = 'ERR_INVALID_AMOUNT_VALUE'\r\n\t\tlet errMsgArgs = []\r\n\t\tlet amount = parseFloat(numStr)\r\n\t\tif (isValid && amount > parseFloat(this.props.identityAvailable)) {\r\n\t\t\tisValid = false\r\n\t\t\tmsg = 'ERR_MAX_AMOUNT_TO_WITHDRAW'\r\n\t\t\terrMsgArgs = [this.props.identityAvailable, 'SAI']\r\n\t\t}\r\n\r\n\t\tthis.props.validate('withdrawAmount', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: msg, args: errMsgArgs },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tvalidate,\r\n\t\t\ttransaction,\r\n\t\t\tt,\r\n\t\t\tinvalidFields,\r\n\t\t\tidentityAvailable,\r\n\t\t\thandleChange,\r\n\t\t\twithdrawToSpinner,\r\n\t\t} = this.props\r\n\t\tconst { withdrawTo, withdrawAmount } = transaction || {}\r\n\t\tconst errAmount = invalidFields['withdrawAmount']\r\n\t\tconst errAddr = invalidFields['withdrawTo']\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{t('EXCHANGE_CURRENT_DAI_BALANCE_AVAILABLE_ON_IDENTITY')}{' '}\r\n\t\t\t\t\t{identityAvailable}{' '}\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tdisabled={withdrawToSpinner}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('WITHDRAW_TO')}\r\n\t\t\t\t\tname='withdrawTo'\r\n\t\t\t\t\tvalue={withdrawTo || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawTo', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errAddr && !!errAddr.dirty}\r\n\t\t\t\t\thelperText={errAddr && !!errAddr.dirty ? errAddr.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{withdrawToSpinner ? <InputLoading /> : null}\r\n\t\t\t\t<TextField\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel={t('TOKENS_TO_WITHDRAW')}\r\n\t\t\t\t\tname='withdrawAmount'\r\n\t\t\t\t\tvalue={withdrawAmount || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawAmount', ev.target.value)}\r\n\t\t\t\t\tonBlur={() => this.validateAmount(withdrawAmount, true)}\r\n\t\t\t\t\tonFocus={() => this.validateAmount(withdrawAmount, false)}\r\n\t\t\t\t\terror={errAmount && !!errAmount.dirty}\r\n\t\t\t\t\thelperText={\r\n\t\t\t\t\t\terrAmount && !!errAmount.dirty\r\n\t\t\t\t\t\t\t? errAmount.errMsg\r\n\t\t\t\t\t\t\t: t('MAX_AMOUNT_TO_WITHDRAW', {\r\n\t\t\t\t\t\t\t\t\targs: [identityAvailable, 'SAI'],\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nWithdrawFromIdentity.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttxId: txId,\r\n\t\twithdrawToSpinner: memory.spinners['withdrawTo'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst WithdrawFromIdentityForm = NewTransactionHoc(WithdrawFromIdentity)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(WithdrawFromIdentityForm)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\n// import Translate from 'components/translate/Translate'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport { validateNumber } from 'helpers/validators'\r\nimport { InputLoading } from 'components/common/spinners/'\r\n\r\nclass WithdrawAnyTokenFromIdentity extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { validate, transaction } = this.props\r\n\t\t// If nothing entered will validate\r\n\t\tif (!transaction.withdrawAmount) {\r\n\t\t\tvalidate('withdrawAmount', {\r\n\t\t\t\tisValid: true,\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (!transaction.withdrawTo) {\r\n\t\t\tvalidate('withdrawTo', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateAmount = (numStr, dirty) => {\r\n\t\tlet isValid = validateNumber(numStr)\r\n\t\tlet msg = 'ERR_INVALID_AMOUNT_VALUE'\r\n\t\tlet errMsgArgs = []\r\n\t\tlet amount = parseFloat(numStr)\r\n\t\tif (isValid && amount > parseFloat(this.props.identityAvailable)) {\r\n\t\t\tisValid = false\r\n\t\t\tmsg = 'ERR_MAX_AMOUNT_TO_WITHDRAW'\r\n\t\t\terrMsgArgs = [this.props.identityAvailable, 'SAI']\r\n\t\t}\r\n\r\n\t\tthis.props.validate('withdrawAmount', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: msg, args: errMsgArgs },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tvalidate,\r\n\t\t\ttransaction,\r\n\t\t\tt,\r\n\t\t\tinvalidFields,\r\n\t\t\thandleChange,\r\n\t\t\twithdrawToSpinner,\r\n\t\t\tbalanceAnySpinner,\r\n\t\t} = this.props\r\n\t\tconst { withdrawTo, withdrawAmount, tokenAddress, tokenBalance } =\r\n\t\t\ttransaction || {}\r\n\t\tconst errAmount = invalidFields['withdrawAmount']\r\n\t\tconst errAddr = invalidFields['withdrawTo']\r\n\t\tconst errToken = invalidFields['tokenAddress']\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{t('TOKENS_BALANCE_AVAILABLE_ON_IDENTITY')} {tokenBalance}{' '}\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tdisabled={balanceAnySpinner}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('WITHDRAW_TOKEN_ADDRESS')}\r\n\t\t\t\t\tname='tokenAddress'\r\n\t\t\t\t\tvalue={tokenAddress || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('tokenAddress', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: tokenAddress,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'tokenAddress',\r\n\t\t\t\t\t\t\tsetBalance: bal => handleChange('tokenBalance', bal),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: tokenAddress,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'tokenAddress',\r\n\t\t\t\t\t\t\tsetBalance: bal => handleChange('tokenBalance', bal),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errToken && !!errToken.dirty}\r\n\t\t\t\t\thelperText={errToken && !!errToken.dirty ? errToken.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{balanceAnySpinner ? <InputLoading /> : null}\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tdisabled={withdrawToSpinner}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('WITHDRAW_TO')}\r\n\t\t\t\t\tname='withdrawTo'\r\n\t\t\t\t\tvalue={withdrawTo || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawTo', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: withdrawTo,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'withdrawTo',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errAddr && !!errAddr.dirty}\r\n\t\t\t\t\thelperText={errAddr && !!errAddr.dirty ? errAddr.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{withdrawToSpinner ? <InputLoading /> : null}\r\n\t\t\t\t<TextField\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel={t('TOKENS_TO_WITHDRAW')}\r\n\t\t\t\t\tname='withdrawAmount'\r\n\t\t\t\t\tvalue={withdrawAmount || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('withdrawAmount', ev.target.value)}\r\n\t\t\t\t\tonBlur={() => this.validateAmount(withdrawAmount, true)}\r\n\t\t\t\t\tonFocus={() => this.validateAmount(withdrawAmount, false)}\r\n\t\t\t\t\terror={errAmount && !!errAmount.dirty}\r\n\t\t\t\t\thelperText={\r\n\t\t\t\t\t\terrAmount && !!errAmount.dirty\r\n\t\t\t\t\t\t\t? errAmount.errMsg\r\n\t\t\t\t\t\t\t: t('MAX_AMOUNT_TO_WITHDRAW', {\r\n\t\t\t\t\t\t\t\t\targs: [tokenBalance],\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nWithdrawAnyTokenFromIdentity.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttxId: txId,\r\n\t\twithdrawToSpinner: memory.spinners['withdrawTo'],\r\n\t\tbalanceAnySpinner: memory.spinners['tokenAddress'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst WithdrawAnyTokenFromIdentityForm = NewTransactionHoc(\r\n\tWithdrawAnyTokenFromIdentity\r\n)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(WithdrawAnyTokenFromIdentityForm)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\n// import Translate from 'components/translate/Translate'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dropdown from 'components/common/dropdown'\r\nimport { constants } from 'adex-models'\r\nimport { InputLoading } from 'components/common/spinners/'\r\n\r\nconst { IdentityPrivilegeLevel } = constants\r\n\r\nconst PRIV_LEVELS_SRC = Object.keys(IdentityPrivilegeLevel).map(key => {\r\n\treturn {\r\n\t\tvalue: IdentityPrivilegeLevel[key],\r\n\t\tlabel: key,\r\n\t}\r\n})\r\n\r\nclass SeAddressPrivilege extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { transaction, validate } = this.props\r\n\t\tif (!transaction.withdrawAmount) {\r\n\t\t\tvalidate('setAddr', {\r\n\t\t\t\tisValid: false,\r\n\t\t\t\terr: { msg: 'ERR_REQUIRED_FIELD' },\r\n\t\t\t\tdirty: false,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\ttransaction,\r\n\t\t\tt,\r\n\t\t\tinvalidFields,\r\n\t\t\tidentityAvailable,\r\n\t\t\thandleChange,\r\n\t\t\tsetAddrSpinner,\r\n\t\t\tvalidate,\r\n\t\t} = this.props\r\n\t\tconst { setAddr, privLevel } = transaction || {}\r\n\t\t// const errAmount = invalidFields['withdrawAmount']\r\n\t\tconst errAddr = invalidFields['setAddr']\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\t{t('SET_IDENTITY_PRIVILEGE_MAIN_INFO')} {identityAvailable}{' '}\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel={t('ADDR_TO_SET_PRIV_LEVEL')}\r\n\t\t\t\t\tname='setAddr'\r\n\t\t\t\t\tvalue={setAddr || ''}\r\n\t\t\t\t\tonChange={ev => handleChange('setAddr', ev.target.value)}\r\n\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: setAddr,\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'setAddr',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\tactions.validateAddress({\r\n\t\t\t\t\t\t\taddr: setAddr,\r\n\t\t\t\t\t\t\tdirty: false,\r\n\t\t\t\t\t\t\tvalidate,\r\n\t\t\t\t\t\t\tname: 'setAddr',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror={errAddr && !!errAddr.dirty}\r\n\t\t\t\t\thelperText={errAddr && !!errAddr.dirty ? errAddr.errMsg : ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{setAddrSpinner ? <InputLoading /> : null}\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel={t('SELECT_PRIV_LEVEL')}\r\n\t\t\t\t\thelperText={t('SELECT_PRIV_LEVEL_HELPER_TXT')}\r\n\t\t\t\t\tonChange={val => handleChange('privLevel', val)}\r\n\t\t\t\t\tsource={PRIV_LEVELS_SRC}\r\n\t\t\t\t\tvalue={typeof privLevel === 'number' ? privLevel : ''}\r\n\t\t\t\t\thtmlId='label-privLevel'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSeAddressPrivilege.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\t// const persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttxId: txId,\r\n\t\tsetAddrSpinner: memory.spinners['setAddr'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst SeAddressPrivilegeForm = NewTransactionHoc(SeAddressPrivilege)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(SeAddressPrivilegeForm)\r\n","import React from 'react'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport { PropRow } from 'components/common/dialog/content'\r\nimport { constants } from 'adex-models'\r\n\r\nconst privilegesNames = constants.valueToKey(constants.IdentityPrivilegeLevel)\r\n\r\nexport const IdentityWithdrawPreview = ({\r\n\tt,\r\n\twithdrawTo,\r\n\tclasses,\r\n\tfees,\r\n\twithdrawAmount,\r\n}) => (\r\n\t<div>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawTo'\r\n\t\t\tleft={t('withdrawTo', { isProp: true })}\r\n\t\t\tright={(withdrawTo || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawAmount'\r\n\t\t\tleft={t('withdrawAmount', { isProp: true })}\r\n\t\t\tright={\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\tsecondary={t('AMOUNT_WITHDRAW_INFO', {\r\n\t\t\t\t\t\targs: [fees.fees, 'SAI', fees.toGet, 'SAI'],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tprimary={withdrawAmount + ' SAI'}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t/>\r\n\t</div>\r\n)\r\n\r\nexport const SetPrivilegePreview = ({\r\n\tt,\r\n\tsetAddr,\r\n\tclasses,\r\n\tfees,\r\n\tprivLevel,\r\n}) => (\r\n\t<div>\r\n\t\t<PropRow\r\n\t\t\tkey='setAddr'\r\n\t\t\tleft={t('setAddr', { isProp: true })}\r\n\t\t\tright={(setAddr || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='privLevel'\r\n\t\t\tleft={t('privLevel', { isProp: true })}\r\n\t\t\tright={\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\tsecondary={t('PRIV_LEVEL_INFO_AND_FEES', {\r\n\t\t\t\t\t\targs: [fees.fees, 'SAI'],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tprimary={privilegesNames[privLevel]}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t/>\r\n\t</div>\r\n)\r\n\r\nexport const IdentityWithdrawAnyPreview = ({\r\n\tt,\r\n\twithdrawTo,\r\n\ttokenAddress,\r\n\tclasses,\r\n\tfees,\r\n\twithdrawAmount,\r\n}) => (\r\n\t<div>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawTo'\r\n\t\t\tleft={t('withdrawTo', { isProp: true })}\r\n\t\t\tright={(withdrawTo || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='tokenAddress'\r\n\t\t\tleft={t('tokenAddress', { isProp: true })}\r\n\t\t\tright={(tokenAddress || '').toString()}\r\n\t\t/>\r\n\t\t<PropRow\r\n\t\t\tkey='withdrawAmount'\r\n\t\t\tleft={t('withdrawAmount', { isProp: true })}\r\n\t\t\tright={\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\tsecondary={t('AMOUNT_WITHDRAW_INFO', {\r\n\t\t\t\t\t\targs: [fees.fees, '', fees.toGet, ''],\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tprimary={withdrawAmount + ' '}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t/>\r\n\t</div>\r\n)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport NewTransactionHoc from './TransactionHoc'\r\nimport ErrorIcon from '@material-ui/icons/Error'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\n// import { DEFAULT_GAS_PRICE } from 'services/smart-contracts/constants'\r\nimport { WalletAction } from 'components/dashboard/forms/FormsCommon'\r\nimport {\r\n\tPropRow,\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tFullContentSpinner,\r\n} from 'components/common/dialog/content'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport {\r\n\tIdentityWithdrawPreview,\r\n\tSetPrivilegePreview,\r\n\tIdentityWithdrawAnyPreview,\r\n} from './previews'\r\n\r\nclass TransactionPreview extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context)\r\n\r\n\t\tthis.state = {\r\n\t\t\tgas: null,\r\n\t\t\tfees: null,\r\n\t\t\terrors: [],\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {\r\n\t\t\tgetFeesFn,\r\n\t\t\tactions,\r\n\t\t\thandleChange,\r\n\t\t\tidentityAvailable,\r\n\t\t\ttransaction,\r\n\t\t\ttxId,\r\n\t\t\tt,\r\n\t\t\taccount,\r\n\t\t} = this.props\r\n\t\tif (getFeesFn && Object.keys(transaction).length) {\r\n\t\t\tactions.updateSpinner(txId, true)\r\n\t\t\tgetFeesFn({ account, transaction })\r\n\t\t\t\t.then(fees => {\r\n\t\t\t\t\thandleChange('fees', fees)\r\n\t\t\t\t\tthis.setState({ fees: fees })\r\n\t\t\t\t\tactions.updateSpinner(txId, false)\r\n\r\n\t\t\t\t\tif (parseFloat(fees.fees || 0) > parseFloat(identityAvailable)) {\r\n\t\t\t\t\t\thandleChange('errors', [\r\n\t\t\t\t\t\t\tt('INSUFFICIENT_BALANCE_FOR_FEES', {\r\n\t\t\t\t\t\t\t\targs: [identityAvailable, 'SAI', fees.fees, 'SAI'],\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\tactions.updateSpinner(txId, false)\r\n\t\t\t\t\thandleChange('errors', [Helper.getErrMsg(err)])\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\ttransaction = {},\r\n\t\t\tt,\r\n\t\t\tclasses,\r\n\t\t\taccount,\r\n\t\t\tpreviewWarnMsgs,\r\n\t\t\tspinner,\r\n\t\t\tstepsId,\r\n\t\t} = this.props\r\n\t\tconst errors = transaction.errors || []\r\n\t\tconst {\r\n\t\t\twithdrawTo,\r\n\t\t\twithdrawAmount,\r\n\t\t\tsetAddr,\r\n\t\t\tprivLevel,\r\n\t\t\ttokenAddress,\r\n\t\t\tfees = {},\r\n\t\t} = transaction\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{spinner ? (\r\n\t\t\t\t\t<FullContentSpinner />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ContentBox>\r\n\t\t\t\t\t\t{transaction.waitingForWalletAction ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<WalletAction t={t} authType={account.wallet.authType} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t{errors.length\r\n\t\t\t\t\t\t\t\t? errors.map((err, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameLeft={classes.error}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameRight={classes.error}\r\n\t\t\t\t\t\t\t\t\t\t\tleft={<ErrorIcon />}\r\n\t\t\t\t\t\t\t\t\t\t\tright={err}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t{previewWarnMsgs\r\n\t\t\t\t\t\t\t\t? previewWarnMsgs.map((msg, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<PropRow\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameLeft={classes.warning}\r\n\t\t\t\t\t\t\t\t\t\t\tclassNameRight={classes.warning}\r\n\t\t\t\t\t\t\t\t\t\t\tleft={<WarningIcon />}\r\n\t\t\t\t\t\t\t\t\t\t\tright={t(msg.msg, { args: msg.args })}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t{stepsId === 'withdrawFromIdentity' && (\r\n\t\t\t\t\t\t\t\t<IdentityWithdrawPreview\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\twithdrawTo={withdrawTo}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\tfees={fees}\r\n\t\t\t\t\t\t\t\t\twithdrawAmount={withdrawAmount}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{stepsId === 'setIdentityPrivilege' && (\r\n\t\t\t\t\t\t\t\t<SetPrivilegePreview\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\tsetAddr={setAddr}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\tfees={fees}\r\n\t\t\t\t\t\t\t\t\tprivLevel={privLevel}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{stepsId === 'withdrawAnyFromIdentity' && (\r\n\t\t\t\t\t\t\t\t<IdentityWithdrawAnyPreview\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\twithdrawTo={withdrawTo}\r\n\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\tfees={fees}\r\n\t\t\t\t\t\t\t\t\twithdrawAmount={withdrawAmount}\r\n\t\t\t\t\t\t\t\t\ttokenAddress={tokenAddress}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</ContentBox>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nTransactionPreview.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tlabel: PropTypes.string,\r\n\ttxId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\tstepsId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\ttransaction: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tpreviewMsgs: PropTypes.array,\r\n\testimateGasFn: PropTypes.func,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tconst persist = state.persist\r\n\tconst memory = state.memory\r\n\tconst txId = props.stepsId\r\n\treturn {\r\n\t\ttransaction: memory.newTransactions[txId] || {},\r\n\t\ttxId: txId,\r\n\t\tspinner: memory.spinners[txId],\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst TransactionPreviewForm = NewTransactionHoc(TransactionPreview)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(withStyles(styles)(TransactionPreviewForm))\r\n","export const styles = theme => {\r\n\t// const spacing = theme.spacing(1)\r\n\treturn {\r\n\t\terror: {\r\n\t\t\tcolor: theme.palette.error.main,\r\n\t\t},\r\n\t\twarning: {\r\n\t\t\tcolor: theme.palette.warning.A700,\r\n\t\t},\r\n\t\tcentralSpinner: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: 'calc(50% - 20px)',\r\n\t\t\ttop: ' calc(50% - 20px)',\r\n\t\t},\r\n\t\timgPreview: {\r\n\t\t\theight: 120,\r\n\t\t\twidth: 'auto',\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\tboxShadow: theme.shadows[2],\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport WithdrawFromExchangePage from './WithdrawFromIdentity'\r\nimport WithdrawAnyTokenFromIdentityPage from './WithdrawAnyTokenFromIdentity'\r\nimport SeAddressPrivilege from './SeAddressPrivilege'\r\nimport TransactionPreview from './TransactionPreview'\r\nimport Button from '@material-ui/core/Button'\r\nimport TransactionHoc from './TransactionHoc'\r\nimport FormSteps from 'components/dashboard/forms/FormSteps'\r\nimport WithDialog from 'components/common/dialog/WithDialog'\r\n// import SaveIcon from '@material-ui/icons/Save'\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty'\r\nimport {\r\n\twithdrawFromIdentity,\r\n\tsetIdentityPrivilege,\r\n} from 'services/smart-contracts/actions/identity'\r\nimport { addrIdentityPrivilege, identityWithdraw, execute } from 'actions'\r\n\r\nconst FormStepsWithDialog = WithDialog(FormSteps)\r\n\r\nconst SaveBtn = ({\r\n\tsave,\r\n\tsaveBtnLabel,\r\n\tsaveBtnIcon,\r\n\tt,\r\n\ttransaction,\r\n\twaitingForWalletAction,\r\n\tspinner,\r\n\t...other\r\n}) => {\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tcolor='primary'\r\n\t\t\tonClick={save}\r\n\t\t\tdisabled={\r\n\t\t\t\t(!!transaction.errors && !!transaction.errors.length) ||\r\n\t\t\t\t!!transaction.waitingForWalletAction ||\r\n\t\t\t\t!!spinner\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{transaction.waitingForWalletAction ? (\r\n\t\t\t\t<HourglassEmptyIcon />\r\n\t\t\t) : (\r\n\t\t\t\tsaveBtnIcon || ''\r\n\t\t\t)}\r\n\t\t\t{t(saveBtnLabel || 'DO_IT')}\r\n\t\t</Button>\r\n\t)\r\n}\r\n\r\nconst CancelBtn = ({ cancel, cancelBtnLabel, t, ...other }) => {\r\n\treturn <Button onClick={cancel}>{t(cancelBtnLabel || 'CANCEL')}</Button>\r\n}\r\n\r\nconst SaveBtnWithTransaction = TransactionHoc(SaveBtn)\r\nconst CancelBtnWithTransaction = TransactionHoc(CancelBtn)\r\n\r\nconst txCommon = {\r\n\tSaveBtn: SaveBtnWithTransaction,\r\n\tCancelBtn: CancelBtnWithTransaction,\r\n\tvalidateIdBase: 'tx-',\r\n\tdarkerBackground: true,\r\n}\r\n\r\nexport const WithdrawTokenFromIdentity = props => (\r\n\t<FormStepsWithDialog\r\n\t\t{...props}\r\n\t\tbtnLabel='ACCOUNT_WITHDRAW_FROM_IDENTITY_BTN'\r\n\t\tsaveBtnLabel='ACCOUNT_WITHDRAW_FROM_IDENTITY_SAVE_BTN'\r\n\t\ttitle='ACCOUNT_WITHDRAW_FROM_IDENTITY_TITLE'\r\n\t\tstepsId='withdrawFromIdentity'\r\n\t\t{...txCommon}\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'ACCOUNT_WITHDRAW_FROM_IDENTITY_STEP',\r\n\t\t\t\tpage: WithdrawFromExchangePage,\r\n\t\t\t},\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_MAKE_TR',\r\n\t\t\tpage: TransactionPreview,\r\n\t\t}}\r\n\t\tsaveFn={({ transaction } = {}) => {\r\n\t\t\treturn execute(\r\n\t\t\t\tidentityWithdraw({\r\n\t\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\t\twithdrawTo: transaction.withdrawTo,\r\n\t\t\t\t\ttokenAddr: transaction.tokenAddress,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}}\r\n\t\tgetFeesFn={({ transaction, account } = {}) => {\r\n\t\t\treturn withdrawFromIdentity({\r\n\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\tgetFeesOnly: true,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\t\t}}\r\n\t/>\r\n)\r\n\r\nexport const SetIdentityPrivilege = props => (\r\n\t<FormStepsWithDialog\r\n\t\t{...props}\r\n\t\tbtnLabel='ACCOUNT_SET_IDENTITY_PRIVILEGE_BTN'\r\n\t\tsaveBtnLabel='ACCOUNT_SET_IDENTITY_PRIVILEGE_SAVE_BTN'\r\n\t\ttitle='ACCOUNT_SET_IDENTITY_PRIVILEGE_TITLE'\r\n\t\tstepsId='setIdentityPrivilege'\r\n\t\t{...txCommon}\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'ACCOUNT_SET_IDENTITY_PRIVILEGE_STEP',\r\n\t\t\t\tpage: SeAddressPrivilege,\r\n\t\t\t},\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_MAKE_TR',\r\n\t\t\tpage: TransactionPreview,\r\n\t\t}}\r\n\t\tsaveFn={({ transaction } = {}) => {\r\n\t\t\treturn execute(\r\n\t\t\t\taddrIdentityPrivilege({\r\n\t\t\t\t\tprivLevel: transaction.privLevel,\r\n\t\t\t\t\tsetAddr: transaction.setAddr,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}}\r\n\t\tgetFeesFn={({ transaction } = {}) => {\r\n\t\t\treturn setIdentityPrivilege({\r\n\t\t\t\tprivLevel: transaction.privLevel,\r\n\t\t\t\tsetAddr: transaction.setAddr,\r\n\t\t\t\tgetFeesOnly: true,\r\n\t\t\t})\r\n\t\t}}\r\n\t/>\r\n)\r\n\r\nexport const WithdrawAnyTokenFromIdentity = props => (\r\n\t<FormStepsWithDialog\r\n\t\t{...props}\r\n\t\tbtnLabel='ACCOUNT_WITHDRAW_ANY_FROM_IDENTITY_BTN'\r\n\t\tsaveBtnLabel='ACCOUNT_WITHDRAW_FROM_IDENTITY_SAVE_BTN'\r\n\t\ttitle='ACCOUNT_WITHDRAW_FROM_IDENTITY_TITLE'\r\n\t\tstepsId='withdrawAnyFromIdentity'\r\n\t\t{...txCommon}\r\n\t\tstepsPages={[\r\n\t\t\t{\r\n\t\t\t\ttitle: 'ACCOUNT_WITHDRAW_FROM_IDENTITY_STEP',\r\n\t\t\t\tpage: WithdrawAnyTokenFromIdentityPage,\r\n\t\t\t},\r\n\t\t]}\r\n\t\tstepsPreviewPage={{\r\n\t\t\ttitle: 'PREVIEW_AND_MAKE_TR',\r\n\t\t\tpage: TransactionPreview,\r\n\t\t}}\r\n\t\tsaveFn={({ transaction } = {}) => {\r\n\t\t\treturn execute(\r\n\t\t\t\tidentityWithdraw({\r\n\t\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\t\twithdrawTo: transaction.withdrawTo,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}}\r\n\t\tgetFeesFn={({ transaction, account } = {}) => {\r\n\t\t\treturn withdrawFromIdentity({\r\n\t\t\t\tamountToWithdraw: transaction.withdrawAmount,\r\n\t\t\t\tgetFeesOnly: true,\r\n\t\t\t\taccount,\r\n\t\t\t})\r\n\t\t}}\r\n\t/>\r\n)\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tactionBtn: {\r\n\t\t\tmargin: spacing,\r\n\t\t},\r\n\t\taddress: {\r\n\t\t\twordWrap: 'break-word',\r\n\t\t\twordBreak: 'break-all',\r\n\t\t},\r\n\t\tadvancedList: {\r\n\t\t\twidth: '100%',\r\n\t\t},\r\n\t\ticonBtnLeft: {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { useSelector } from 'react-redux'\r\nimport { updateNav, addToast, execute } from 'actions'\r\nimport copy from 'copy-to-clipboard'\r\nimport Translate from 'components/translate/Translate'\r\nimport {\r\n\tWithdrawTokenFromIdentity,\r\n\tWithdrawAnyTokenFromIdentity,\r\n\tSetIdentityPrivilege,\r\n} from 'components/dashboard/forms/web3/transactions'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListDivider from '@material-ui/core/Divider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Button from '@material-ui/core/Button'\r\nimport Box from '@material-ui/core/Box'\r\nimport CopyIcon from '@material-ui/icons/FileCopy'\r\nimport DownloadIcon from '@material-ui/icons/SaveAlt'\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport { styles } from './styles.js'\r\nimport { getRecoveryWalletData } from 'services/wallet/wallet'\r\nimport { LoadingSection } from 'components/common/spinners'\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard'\r\nimport { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\r\nimport { selectAccount } from 'selectors'\r\nimport { formatAddress } from 'helpers/formatters'\r\n\r\n// const RRButton = withReactRouterLink(Button)\r\n\r\nconst VALIDATOR_LEADER_URL = process.env.VALIDATOR_LEADER_URL\r\nconst VALIDATOR_LEADER_ID = process.env.VALIDATOR_LEADER_ID\r\nconst VALIDATOR_FOLLOWER_URL = process.env.VALIDATOR_FOLLOWER_URL\r\nconst VALIDATOR_FOLLOWER_ID = process.env.VALIDATOR_FOLLOWER_ID\r\n\r\nfunction AccountInfo({ t }) {\r\n\tconst account = useSelector(selectAccount)\r\n\r\n\tconst localWalletDownloadHref = () => {\r\n\t\tconst { email, password, authType } = account.wallet\r\n\t\tconst obj = getRecoveryWalletData({ email, password, authType })\r\n\t\tif (!obj || !obj.wallet) {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\tconst data =\r\n\t\t\t'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj))\r\n\t\treturn data\r\n\t}\r\n\r\n\tconst walletJsonData = localWalletDownloadHref()\r\n\tconst [expanded, setExpanded] = useState(false)\r\n\tconst useStyles = makeStyles(styles)\r\n\tconst classes = useStyles()\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('navTitle', t('ACCOUNT')))\r\n\t}, [t])\r\n\r\n\tconst displayRampWidget = () => {\r\n\t\tconst widget = new RampInstantSDK({\r\n\t\t\thostAppName: 'AdExNetwork',\r\n\t\t\thostLogoUrl: 'https://www.adex.network/img/Adex-logo@2x.png',\r\n\t\t\tvariant: 'auto',\r\n\t\t\tswapAsset: 'SAI',\r\n\t\t\tuserAddress: account.identity.address,\r\n\t\t})\r\n\t\twidget.domNodes.overlay.style.zIndex = 1000\r\n\t\twidget.show()\r\n\t}\r\n\r\n\tconst handleExpandChange = () => {\r\n\t\tsetExpanded(!expanded)\r\n\t}\r\n\r\n\tconst { grantType } = account.settings\r\n\tconst formatted = account.stats.formatted || {}\r\n\tconst {\r\n\t\twalletAddress,\r\n\t\twalletAuthType = '',\r\n\t\twalletPrivileges = '',\r\n\t\tidentityAddress,\r\n\t\tidentityBalanceDai,\r\n\t\tavailableIdentityBalanceDai,\r\n\t\toutstandingBalanceDai,\r\n\t} = formatted\r\n\tconst { authType, email } = account.wallet\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List>\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tflexGrow='3'\r\n\t\t\t\t\t\t\tmr={1}\r\n\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\tjustifyContent='start'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\tprimary={identityAddress}\r\n\t\t\t\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t\t\t\taccount._authType === 'demo'\r\n\t\t\t\t\t\t\t\t\t\t? t('DEMO_ACCOUNT_IDENTITY_ADDRESS')\r\n\t\t\t\t\t\t\t\t\t\t: t('IDENTITY_ETH_ADDR')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tcopy(identityAddress)\r\n\t\t\t\t\t\t\t\t\texecute(\r\n\t\t\t\t\t\t\t\t\t\taddToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'accept',\r\n\t\t\t\t\t\t\t\t\t\t\taction: 'X',\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: t('COPIED_TO_CLIPBOARD'),\r\n\t\t\t\t\t\t\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CopyIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListDivider />\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tflexGrow='3'\r\n\t\t\t\t\t\t\tmr={1}\r\n\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\tjustifyContent='start'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\tprimary={formatAddress(walletAddress)}\r\n\t\t\t\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t\t\t\taccount.authType === 'demo'\r\n\t\t\t\t\t\t\t\t\t\t? t('DEMO_ACCOUNT_WALLET_ADDRESS', {\r\n\t\t\t\t\t\t\t\t\t\t\t\targs: [walletAuthType, walletPrivileges],\r\n\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t: t('WALLET_INFO_LABEL', {\r\n\t\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twalletAuthType.replace(/^\\w/, chr => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn chr.toUpperCase()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twalletPrivileges || ' - ',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tauthType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{walletJsonData && (\r\n\t\t\t\t\t\t\t\t<Box py={1} flexGrow='1'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='download-wallet-json'>\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\tid='download-wallet-json'\r\n\t\t\t\t\t\t\t\t\t\t\thref={localWalletDownloadHref()}\r\n\t\t\t\t\t\t\t\t\t\t\tdownload={`adex-account-data-${email}.json`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button size='small' variant='contained' fullWidth>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DownloadIcon className={classes.iconBtnLeft} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{t('BACKUP_LOCAL_WALLET')}\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListDivider />\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box pr={1} flexGrow='8'>\r\n\t\t\t\t\t\t\t<LoadingSection\r\n\t\t\t\t\t\t\t\tloading={!identityBalanceDai && identityBalanceDai !== 0}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tprimary={`${availableIdentityBalanceDai || 0} SAI`}\r\n\t\t\t\t\t\t\t\t\tsecondary={t('IDENTITY_DAI_BALANCE_AVAILABLE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\targs: [identityBalanceDai || 0, outstandingBalanceDai || 0],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingSection>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box flexGrow='1'>\r\n\t\t\t\t\t\t\t<Box py={1}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\taria-label='delete'\r\n\t\t\t\t\t\t\t\t\tonClick={() => displayRampWidget()}\r\n\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<CreditCardIcon className={classes.iconBtnLeft} />\r\n\t\t\t\t\t\t\t\t\t{t('TOP_UP_IDENTITY_GBP')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t{grantType !== 'advertiser' && (\r\n\t\t\t\t\t\t\t\t<Box py={1}>\r\n\t\t\t\t\t\t\t\t\t<WithdrawTokenFromIdentity\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\tidentityAvailable={availableIdentityBalanceDai}\r\n\t\t\t\t\t\t\t\t\t\tidentityAvailableRaw={availableIdentityBalanceDai}\r\n\t\t\t\t\t\t\t\t\t\ttoken='SAI'\r\n\t\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListDivider />\r\n\t\t\t\t<ExpansionPanel expanded={expanded} onChange={handleExpandChange}>\r\n\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\r\n\t\t\t\t\t\taria-controls='panel1bh-content'\r\n\t\t\t\t\t\tid='panel1bh-header'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography className={classes.heading}>\r\n\t\t\t\t\t\t\t{t('ACCOUNT_ADVANCED_INFO_AND_ACTIONS')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t<List classes={{ root: classes.advancedList }}>\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Box pr={1} flexGrow='8'>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\t\t\t\tsecondary={''}\r\n\t\t\t\t\t\t\t\t\t\t\tprimary={t('MANAGE_IDENTITY')}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t<Box py={1} flexGrow='1'>\r\n\t\t\t\t\t\t\t\t\t\t<SetIdentityPrivilege\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\t\t\tidentityAvailable={availableIdentityBalanceDai}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\t\tprimary={t('VALIDATOR_LEADER_ID', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_LEADER_ID],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tsecondary={t('VALIDATOR_LEADER_URL', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_LEADER_URL],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tclassName={classes.address}\r\n\t\t\t\t\t\t\t\t\tprimary={t('VALIDATOR_FOLLOWER_ID', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_FOLLOWER_ID],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tsecondary={t('VALIDATOR_FOLLOWER_URL', {\r\n\t\t\t\t\t\t\t\t\t\targs: [VALIDATOR_FOLLOWER_URL],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t<ListDivider />\r\n\t\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\t\t\tflexWrap={'wrap'}\r\n\t\t\t\t\t\t\t\t\tflex='1'\r\n\t\t\t\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Box flexGrow='1'>\r\n\t\t\t\t\t\t\t\t\t\t<Box py={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t<WithdrawAnyTokenFromIdentity\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t</List>\r\n\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t</ExpansionPanel>\r\n\t\t\t</List>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nAccountInfo.propTypes = {\r\n\tt: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Translate(AccountInfo)\r\n","import React, { useState, useEffect } from 'react'\r\nimport SideNav from './SideNav'\r\nimport TopBar from './TopBar'\r\nimport { Route, Switch } from 'react-router'\r\nimport Campaign from 'components/dashboard/containers/Campaign'\r\nimport DashboardStats from 'components/dashboard/containers/DashboardStats'\r\nimport Unit from 'components/dashboard/containers/Unit'\r\nimport Slot from 'components/dashboard/containers/Slot'\r\nimport Items from 'components/dashboard/containers/Items'\r\n// import Transactions from 'components/dashboard/containers/Transactions'\r\nimport {\r\n\tAdUnit as AdUnitModel,\r\n\tAdSlot as AdSlotModel,\r\n\tCampaign as CampaignModel,\r\n} from 'adex-models'\r\nimport Account from 'components/dashboard/account/AccountInfo'\r\nimport {\r\n\tNewUnitDialog,\r\n\tNewCampaignDialog,\r\n\tNewSlotDialog,\r\n} from 'components/dashboard/forms/items/NewItems'\r\nimport campaignsLoop from 'services/store-data/campaigns'\r\nimport statsLoop from 'services/store-data/account'\r\nimport analyticsLoop from 'services/store-data/analytics'\r\nimport {\r\n\tSORT_PROPERTIES_ITEMS,\r\n\tFILTER_PROPERTIES_ITEMS,\r\n\tFILTER_PROPERTIES_CAMPAIGN,\r\n\tSORT_PROPERTIES_CAMPAIGN,\r\n} from 'constants/misc'\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport PageNotFound from 'components/page_not_found/PageNotFound'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport {\r\n\tupdateNav,\r\n\tgetAllItems,\r\n\tupdateAccountSettings,\r\n\tupdateAccountAnalytics,\r\n\texecute,\r\n} from 'actions'\r\nimport { t } from 'selectors'\r\n\r\nconst Campaigns = () => (\r\n\t<>\r\n\t\t<NewCampaignDialog\r\n\t\t\tfabButton\r\n\t\t\tvariant='extended'\r\n\t\t\taccent\r\n\t\t\tcolor='secondary'\r\n\t\t\tbtnLabel='NEW_CAMPAIGN'\r\n\t\t/>\r\n\t\t<Items\r\n\t\t\theader={t('ALL_CAMPAIGNS')}\r\n\t\t\tviewModeId='rowsViewCampaigns'\r\n\t\t\titemType={'Campaign'}\r\n\t\t\tobjModel={CampaignModel}\r\n\t\t\tsortProperties={SORT_PROPERTIES_CAMPAIGN}\r\n\t\t\tuiStateId='campaigns'\r\n\t\t\tfilterProperties={FILTER_PROPERTIES_CAMPAIGN}\r\n\t\t/>\r\n\t</>\r\n)\r\n\r\nconst AdUnits = () => (\r\n\t<>\r\n\t\t<NewUnitDialog\r\n\t\t\tfabButton\r\n\t\t\tvariant='extended'\r\n\t\t\tcolor='secondary'\r\n\t\t\tbtnLabel='NEW_UNIT'\r\n\t\t/>\r\n\t\t<Items\r\n\t\t\theader={t('ALL_UNITS')}\r\n\t\t\tviewModeId='rowsViewUnits'\r\n\t\t\titemType={'AdUnit'}\r\n\t\t\tobjModel={AdUnitModel}\r\n\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\tuiStateId='units'\r\n\t\t/>\r\n\t</>\r\n)\r\n\r\nconst AdSlots = () => (\r\n\t<>\r\n\t\t<NewSlotDialog\r\n\t\t\tfabButton\r\n\t\t\tvariant='extended'\r\n\t\t\taccent\r\n\t\t\tcolor='secondary'\r\n\t\t\tbtnLabel='NEW_SLOT'\r\n\t\t/>\r\n\t\t<Items\r\n\t\t\theader={t('ALL_SLOTS')}\r\n\t\t\tviewModeId='rowsViewSlots'\r\n\t\t\titemType={'AdSlot'}\r\n\t\t\tobjModel={AdSlotModel}\r\n\t\t\tsortProperties={SORT_PROPERTIES_ITEMS}\r\n\t\t\tfilterProperties={FILTER_PROPERTIES_ITEMS}\r\n\t\t\tuiStateId='slots'\r\n\t\t/>\r\n\t</>\r\n)\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nfunction Dashboard(props) {\r\n\tconst [mobileOpen, setMobileOpen] = useState(false)\r\n\r\n\tconst { match } = props\r\n\tconst { side } = match.params\r\n\tconst classes = useStyles()\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('side', side))\r\n\t\texecute(getAllItems())\r\n\t\texecute(updateAccountSettings())\r\n\t\texecute(updateAccountAnalytics())\r\n\t\tanalyticsLoop.start()\r\n\t\tcampaignsLoop.start()\r\n\t\tstatsLoop.start()\r\n\r\n\t\treturn () => {\r\n\t\t\tcampaignsLoop.stop()\r\n\t\t\tstatsLoop.stop()\r\n\t\t}\r\n\t}, [side])\r\n\r\n\tuseEffect(() => {}, [match, mobileOpen])\r\n\tuseEffect(() => {\r\n\t\texecute(updateNav('side', side))\r\n\t}, [side])\r\n\r\n\tconst handleDrawerToggle = () => {\r\n\t\tsetMobileOpen(!mobileOpen)\r\n\t}\r\n\r\n\tconst drawer = <SideNav side={side} />\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<TopBar\r\n\t\t\t\tside={side}\r\n\t\t\t\topen={mobileOpen}\r\n\t\t\t\thandleDrawerToggle={handleDrawerToggle}\r\n\t\t\t/>\r\n\t\t\t<Hidden mdUp>\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tvariant='temporary'\r\n\t\t\t\t\tanchor='left'\r\n\t\t\t\t\topen={mobileOpen}\r\n\t\t\t\t\tonClose={handleDrawerToggle}\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tModalProps={{\r\n\t\t\t\t\t\tkeepMounted: true, // Better open performance on mobile.\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{drawer}\r\n\t\t\t\t</Drawer>\r\n\t\t\t</Hidden>\r\n\t\t\t<Hidden smDown implementation='css'>\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tvariant='permanent'\r\n\t\t\t\t\topen\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{drawer}\r\n\t\t\t\t</Drawer>\r\n\t\t\t</Hidden>\r\n\r\n\t\t\t<main className={classes.content}>\r\n\t\t\t\t<div className={classes.contentInner}>\r\n\t\t\t\t\t<div className={classes.toolbar} />\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/campaigns'\r\n\t\t\t\t\t\t\tcomponent={Campaigns}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/units'\r\n\t\t\t\t\t\t\tcomponent={AdUnits}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/Campaign/:itemId'\r\n\t\t\t\t\t\t\tcomponent={props => <Campaign {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/advertiser/AdUnit/:itemId'\r\n\t\t\t\t\t\t\tcomponent={props => <Unit {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/publisher/slots'\r\n\t\t\t\t\t\t\tcomponent={AdSlots}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/publisher/AdSlot/:itemId'\r\n\t\t\t\t\t\t\tcomponent={props => <Slot {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath={'/dashboard/:side/account'}\r\n\t\t\t\t\t\t\tcomponent={props => <Account {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{/* <Route\r\n\t\t\t\t\t\t\t\tauth={this.props.auth}\r\n\t\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\t\tpath={'/dashboard/:side/transactions'}\r\n\t\t\t\t\t\t\t\tcomponent={props => <Transactions {...props} />}\r\n\t\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath='/dashboard/:side'\r\n\t\t\t\t\t\t\tcomponent={props => <DashboardStats {...props} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route component={props => <PageNotFound {...props} />} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dashboard\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\troot: {\r\n\t\t\t// flexGrow: 1,\r\n\t\t\theight: '100vh',\r\n\t\t},\r\n\t\tsigninContainer: {\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tminHeight: '100vh',\r\n\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\tbackgroundSize: 'cover',\r\n\t\t\tbackgroundPosition: 'center',\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tcontainer: {\r\n\t\t\theight: '100vh',\r\n\t\t\tflexGrow: '1',\r\n\t\t},\r\n\t\tactions: {\r\n\t\t\tbackgroundImage: `url(${require('resources/home-wallpaper.jpg')})`,\r\n\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\tbackgroundSize: 'cover',\r\n\t\t\tbackgroundPosition: 'center',\r\n\t\t},\r\n\t\tbuttons: {\r\n\t\t\tbackgroundColor: theme.palette.grey[200],\r\n\t\t},\r\n\t\tadxVersion: {\r\n\t\t\t// position: 'absolute',\r\n\t\t\t// left: spacing,\r\n\t\t\t// bottom: spacing\r\n\t\t},\r\n\t\tadexLogoTop: {\r\n\t\t\ttextAlign: 'center',\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\t// marginTop: '1.5vh',\r\n\t\t\t// width: '17.92vh',\r\n\t\t\t// height: '6vh',\r\n\t\t\theight: '2rem',\r\n\t\t},\r\n\t\tdialogPaper: {\r\n\t\t\theight: '80vh',\r\n\t\t\tmargin: spacing * 2,\r\n\t\t},\r\n\t\tnoBg: {\r\n\t\t\tbackground: 0,\r\n\t\t\tboxShadow: 'none',\r\n\t\t\toverflow: 'visible',\r\n\t\t},\r\n\t\tbackdrop: {\r\n\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1 auto',\r\n\t\t\t// position: 'relative',\r\n\t\t\tjustifyContent: 'center',\r\n\t\t\tpadding: 24,\r\n\t\t\t// margin: `${spacing}px ${spacing}px ${spacing}px ${spacing}px`,\r\n\t\t\t// '&:first-child': {\r\n\t\t\t// \tpaddingTop: spacing,\r\n\t\t\t// },\r\n\t\t\t// overflow: 'visible',\r\n\t\t\t// maxHeight: '100vh'\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport Button from '@material-ui/core/Button'\r\nimport Box from '@material-ui/core/Box'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport Translate from 'components/translate/Translate'\r\nimport { Typography } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getAuthLogo } from 'helpers/logosHelpers'\r\nimport Img from 'components/common/img/Img'\r\nimport classnames from 'classnames'\r\nimport { getAllWallets } from 'services/wallet/wallet'\r\nimport { execute, initIdentity, confirmAction } from 'actions'\r\nimport { selectAuth, selectAccount } from 'selectors'\r\nimport { logOut } from 'services/store-data/auth'\r\nimport { formatAddress } from 'helpers/formatters'\r\nimport { push } from 'connected-react-router'\r\nimport { t } from 'selectors'\r\n\r\nconst RRButton = withReactRouterLink(Button)\r\n\r\nconst AuthSelect = ({ t, classes }) => {\r\n\tconst [wallets, setWallets] = useState([])\r\n\tconst [hasLegacyWallets, setHasLegacyWallets] = useState(false)\r\n\r\n\tconst auth = useSelector(selectAuth)\r\n\tconst account = useSelector(selectAccount)\r\n\tconst { wallet } = account || {}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst allWallets = getAllWallets()\r\n\t\tconst wallets = allWallets.filter(\r\n\t\t\tw => w.authType !== 'legacy' && w.name !== wallet.email\r\n\t\t)\r\n\t\tconst hasLegacy = allWallets.length > wallets\r\n\r\n\t\tsetWallets(wallets)\r\n\t\tsetHasLegacyWallets(hasLegacy)\r\n\t}, [wallet])\r\n\r\n\tconst goTo = (to, confirmLogout, onConfirm) => {\r\n\t\tconst toExecute = () => {\r\n\t\t\tlogOut()\r\n\t\t\texecute(push(to))\r\n\t\t\tif (onConfirm && typeof onConfirm === 'function') {\r\n\t\t\t\tonConfirm()\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (auth && confirmLogout) {\r\n\t\t\texecute(\r\n\t\t\t\tconfirmAction(toExecute, null, {\r\n\t\t\t\t\tconfirmLabel: t('CONTINUE_NEW_AUTH'),\r\n\t\t\t\t\tcancelLabel: t('KEEP_MY_SESSION'),\r\n\t\t\t\t\ttitle: t('CONFIR_DIALOG_NEW_AUTH_TITLE'),\r\n\t\t\t\t\ttext: t('CONFIR_DIALOG_NEW_AUTH_TEXT', {\r\n\t\t\t\t\t\targs: [wallet.authType, wallet.address],\r\n\t\t\t\t\t}),\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\ttoExecute()\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tdisplay='flex'\r\n\t\t\tflexDirection='column'\r\n\t\t\talignItems='stretch'\r\n\t\t\tjustifyContent='space-between'\r\n\t\t>\r\n\t\t\t<Box p={2} alignItems='center'>\r\n\t\t\t\t<Typography align='center' variant='subtitle1' display='block'>\r\n\t\t\t\t\t{t('SIGN_UP_IN_SELECT')}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\t\t\t{auth && (\r\n\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t<RRButton\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tto='/side-select'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tcolor='default'\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('CONTINUE_AS', {\r\n\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\twallet.email || formatAddress(wallet.address),\r\n\t\t\t\t\t\t\t\twallet.authType,\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</RRButton>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t\t{wallets.map(w => (\r\n\t\t\t\t<Box key={w.name} m={1}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tgoTo('/login/quick', true, () =>\r\n\t\t\t\t\t\t\t\texecute(initIdentity({ email: w.name, authType: w.authType }))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('SIGN_IN_TO', { args: [w.name] })}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t))}\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tto='/identity/grant'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\tonClick={() => goTo('/identity/grant', true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t('CREATE_GRANT_ACCOUNT')}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{/* {hasLegacyWallets && ( */}\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\tonClick={() => goTo('/login/grant', true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t('LOGIN_GRANT_ACCOUNT')}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{/* )} */}\r\n\t\t\t{/* <Box m={1}>\r\n\t\t\t\t<RRButton\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tto='/identity/quick'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t('CREATE_QUICK_ACCOUNT')}\r\n\t\t\t\t</RRButton>\r\n\t\t\t</Box> */}\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classnames(classes.metamaskBtn, classes.limitedWidthBtn)}\r\n\t\t\t\t\tonClick={() => goTo('/login/full?metamask', true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tsrc={getAuthLogo('metamask')}\r\n\t\t\t\t\t\talt={t('AUTH_WITH_METAMASK')}\r\n\t\t\t\t\t\tclassName={classes.btnLogo}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{t('METAMASK')}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<Box m={1}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='default'\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tclassName={classes.trezorBtn}\r\n\t\t\t\t\tonClick={() => goTo('/login/full?trezor', true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Img\r\n\t\t\t\t\t\tsrc={getAuthLogo('trezor')}\r\n\t\t\t\t\t\talt={t('AUTH_WITH_TREZOR')}\r\n\t\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t\tclasses.btnLogo,\r\n\t\t\t\t\t\t\tclasses.btnLogoNoTxt,\r\n\t\t\t\t\t\t\tclasses.limitedWidthBtn\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* {t('TREZOR')} */}\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{/* <Box m={1}>\r\n\t\t\t\t<RRButton\r\n\t\t\t\t\tvariant='link'\r\n\t\t\t\t\tto='/recover/quick'\r\n\t\t\t\t\tsize='large'\r\n\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\tclassName={classes.limitedWidthBtn}\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t>\r\n\t\t\t\t\t{t('RECOVER_QUICK_ACCOUNT')}\r\n\t\t\t\t</RRButton>\r\n\t\t\t</Box> */}\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default Translate(withStyles(styles)(AuthSelect))\r\n","export const styles = theme => {\r\n\treturn {\r\n\t\tactions: {\r\n\t\t\tjustifyContent: 'center',\r\n\t\t},\r\n\t\tlimitedWidthBtn: {\r\n\t\t\twordBreak: 'break-word',\r\n\t\t\ttextAlign: 'center',\r\n\t\t},\r\n\t\tbtnLogo: {\r\n\t\t\theight: '2rem',\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t\tbtnLogoNoTxt: {\r\n\t\t\tmarginRight: 0,\r\n\t\t},\r\n\t\tmetamaskBtn: {\r\n\t\t\tbackgroundColor: theme.palette.grey[800],\r\n\t\t\tcolor: theme.palette.common.white,\r\n\t\t},\r\n\t\ttrezorBtn: {\r\n\t\t\tbackgroundColor: theme.palette.common.white,\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Box from '@material-ui/core/Box'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport packageJson from './../../../package.json'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport AuthSelect from 'components/signin/auth-select/AuthSelect'\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown'\r\nimport { t } from 'selectors'\r\nimport { Typography } from '@material-ui/core'\r\n\r\nexport default function ConnectHoc(Decorated) {\r\n\tfunction Connect({ classes, ...rest }) {\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tclassName={classes.container}\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\talignItems='stretch'\r\n\t\t\t\t\t// spacing={2}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid className={classes.actions} item xs={12} md={7} lg={8} xl={9}>\r\n\t\t\t\t\t\t<Box width={1} height={1} p={4}>\r\n\t\t\t\t\t\t\t<Box width={1} height={1} position='relative'>\r\n\t\t\t\t\t\t\t\t<Decorated t={t} {...rest} />\r\n\t\t\t\t\t\t\t\t<Hidden mdUp>\r\n\t\t\t\t\t\t\t\t\t<Box display='flex' justifyContent='center'>\r\n\t\t\t\t\t\t\t\t\t\t<ArrowDropDownIcon color='primary' fontSize='large' />\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Hidden>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} md={5} lg={4} xl={3}>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\tflexDirection='column'\r\n\t\t\t\t\t\t\talignItems='stretch'\r\n\t\t\t\t\t\t\tjustifyContent='space-between'\r\n\t\t\t\t\t\t\tstyle={{ height: '100%' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Box p={4} alignItems='center'>\r\n\t\t\t\t\t\t\t\t<Typography align='center' variant='h3'>\r\n\t\t\t\t\t\t\t\t\t{t('SIGN_UP_IN')}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t\t\t\t<AuthSelect {...rest} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\tp={2}\r\n\t\t\t\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\t\t\t\tflexDirection='column'\r\n\t\t\t\t\t\t\t\talignItems='center'\r\n\t\t\t\t\t\t\t\tflexWrap='wrap'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\tclassName={classes.adxLink}\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\thref='https://medium.com/adex-network-tips-and-tricks'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('HELP')}\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t<small className={classes.adxVersion}>\r\n\t\t\t\t\t\t\t\t\t{`v.${packageJson.version}-beta`}\r\n\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn withStyles(styles)(Connect)\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions, { execute } from 'actions'\r\nimport { push } from 'connected-react-router'\r\n\r\nexport default function IdentityHoc(Decorated) {\r\n\tclass IdentityForm extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.save = this.save.bind(this)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tready: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleChange = (prop, value) => {\r\n\t\t\tthis.props.actions.updateIdentity(prop, value)\r\n\t\t}\r\n\r\n\t\tcomponentDidUpdate = () => {\r\n\t\t\tconst { account } = this.props\r\n\t\t\tif (account.wallet.authSig) {\r\n\t\t\t\texecute(push('/side-select'))\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsave = async () => {\r\n\t\t\tconst { identity, actions } = this.props\r\n\t\t\tconst {\r\n\t\t\t\twallet,\r\n\t\t\t\temail,\r\n\t\t\t\tidentityData,\r\n\t\t\t\tidentityTxData,\r\n\t\t\t\tdeleteLegacyKey,\r\n\t\t\t\tregisterAccount,\r\n\t\t\t} = identity\r\n\r\n\t\t\tconst newWallet = { ...wallet }\r\n\r\n\t\t\tif (registerAccount) {\r\n\t\t\t\tawait actions.registerAccount({\r\n\t\t\t\t\towner: newWallet.address,\r\n\t\t\t\t\tidentityTxData,\r\n\t\t\t\t\temail,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tactions.createSession({\r\n\t\t\t\tidentity: identityData,\r\n\t\t\t\twallet: newWallet,\r\n\t\t\t\temail,\r\n\t\t\t\tregisterExpected: !identityData,\r\n\t\t\t\tdeleteLegacyKey,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tcancel = () => {\r\n\t\t\tconst { resetIdentity } = this.props.actions\r\n\t\t\tresetIdentity()\r\n\t\t\texecute(push('/'))\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst { identity, spinner, waitingExpected, ...rest } = this.props\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tidentity={identity}\r\n\t\t\t\t\tsave={this.save}\r\n\t\t\t\t\thandleChange={this.handleChange}\r\n\t\t\t\t\tcancel={this.cancel}\r\n\t\t\t\t\twaiting={spinner}\r\n\t\t\t\t\twaitingExpected={waitingExpected}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tIdentityForm.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\taccount: PropTypes.object.isRequired,\r\n\t\tidentity: PropTypes.object.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\tconst { persist, memory } = state\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t\tidentity: memory.identity,\r\n\t\t\tspinner: memory.spinners['creating-session'],\r\n\t\t\twaitingExpected: memory.spinners['getting-expected-identity'],\r\n\t\t\twaitingUpload: memory.spinners['uploading-account-data'],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(IdentityForm)\r\n}\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\tsigninContainer: {\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tminHeight: '100vh',\r\n\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\tbackgroundSize: 'cover',\r\n\t\t\tbackgroundPosition: 'center',\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tcontainer: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t},\r\n\t\tadxVersion: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tleft: spacing,\r\n\t\t\tbottom: spacing,\r\n\t\t},\r\n\t\tadexLogoTop: {\r\n\t\t\ttextAlign: 'center',\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\tmarginTop: '1.5vh',\r\n\t\t\twidth: '17.92vh',\r\n\t\t\theight: '6vh',\r\n\t\t},\r\n\t\tformControl: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t},\r\n\t\tbuttonProgressWrapper: {\r\n\t\t\tmargin: spacing,\r\n\t\t\tposition: 'relative',\r\n\t\t},\r\n\t\tbuttonProgress: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: '50%',\r\n\t\t\tleft: '50%',\r\n\t\t\tmarginTop: -12,\r\n\t\t\tmarginLeft: -12,\r\n\t\t},\r\n\t\tinfoPaper: {\r\n\t\t\t...theme.mixins.gutters(),\r\n\t\t\tpaddingTop: spacing * 2,\r\n\t\t\tpaddingBottom: spacing * 2,\r\n\t\t},\r\n\t\tinput: {\r\n\t\t\tdisplay: 'none',\r\n\t\t},\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Translate from 'components/translate/Translate'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport { validEmail, validQuickAccountCoupon } from 'helpers/validators'\r\nimport { checkAccessCode } from 'services/adex-relayer/actions'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nconst ACCESS_CODE_CHECK = process.env.ACCESS_CODE_CHECK === 'true'\r\n\r\nclass IdentityContractAddressEthDeploy extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { email, emailCheck, code } = this.props.identity\r\n\r\n\t\tthis.validateIdentity()\r\n\t\tthis.validateEmail(email, false)\r\n\t\tthis.validateEmailCheck(emailCheck, false)\r\n\t\tACCESS_CODE_CHECK && this.validateCode(code, false)\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst currIdentity = this.props.identity.identityData\r\n\t\tif (\r\n\t\t\t!!currIdentity &&\r\n\t\t\tcurrIdentity.address !== (prevProps.identity.identityData || {}).address\r\n\t\t) {\r\n\t\t\tthis.validateIdentity()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateIdentity = () => {\r\n\t\tconst { validate, identity } = this.props\r\n\t\tconst { identityData } = identity\r\n\r\n\t\tvalidate('identityData', {\r\n\t\t\tisValid: !!identityData,\r\n\t\t\terr: { msg: 'ERR_IDENTITY_NOT_GENERATED' },\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateEmail(email, dirty) {\r\n\t\tconst isValid = validEmail(email)\r\n\t\tthis.props.validate('email', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateEmailCheck(emailCheck, email, dirty) {\r\n\t\tconst isValid = !!emailCheck && !!email && emailCheck === email\r\n\t\tthis.props.validate('emailCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateCode(code, dirty) {\r\n\t\tconst isValidFormat = validQuickAccountCoupon(code)\r\n\r\n\t\tif (!isValidFormat) {\r\n\t\t\tthis.props.validate('code', {\r\n\t\t\t\tisValid: isValidFormat,\r\n\t\t\t\terr: { msg: 'ERR_ACCESS_CODE_FORMAT' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.setState({ waitingCheck: true }, () => {\r\n\t\t\t\tcheckAccessCode({ code })\r\n\t\t\t\t\t.then((cpn = {}) => {\r\n\t\t\t\t\t\tconst isValid = cpn.exist === true && cpn.used === false\r\n\t\t\t\t\t\tlet msg = ''\r\n\t\t\t\t\t\tif (cpn.exist === false) {\r\n\t\t\t\t\t\t\tmsg = 'ERR_ACCESS_CODE_NOT_EXIST'\r\n\t\t\t\t\t\t} else if (cpn.used === true) {\r\n\t\t\t\t\t\t\tmsg = 'ERR_ACCESS_CODE_USED'\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.props.validate('code', {\r\n\t\t\t\t\t\t\tisValid: isValid,\r\n\t\t\t\t\t\t\terr: { msg: msg },\r\n\t\t\t\t\t\t\tdirty: dirty,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.props.validate('code', {\r\n\t\t\t\t\t\t\tisValid: false,\r\n\t\t\t\t\t\t\terr: { msg: 'ERR_ACCESS_CODE_NETWORK' },\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tgetIdentityContractData = async () => {\r\n\t\tconst { actions, identity } = this.props\r\n\t\tconst { wallet, email } = identity\r\n\t\tactions.getRegisterExpectedIdentity({\r\n\t\t\towner: wallet.address,\r\n\t\t\tmail: email,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tidentity,\r\n\t\t\thandleChange,\r\n\t\t\tinvalidFields,\r\n\t\t\twaitingExpected,\r\n\t\t\tclasses,\r\n\t\t} = this.props\r\n\t\tconst { identityData } = identity\r\n\t\t// Errors\r\n\t\tconst { email, emailCheck, code } = invalidFields\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t{ACCESS_CODE_CHECK && (\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography paragraph variant='body1'>\r\n\t\t\t\t\t\t\t\t{t('ACCESS_CODE_INFO')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{ACCESS_CODE_CHECK && (\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tlabel={t('code', { isProp: true })}\r\n\t\t\t\t\t\t\t\tname='code'\r\n\t\t\t\t\t\t\t\tvalue={identity.code || ''}\r\n\t\t\t\t\t\t\t\tonChange={ev => handleChange('code', ev.target.value)}\r\n\t\t\t\t\t\t\t\tonBlur={() => this.validateCode(identity.code, true)}\r\n\t\t\t\t\t\t\t\tonFocus={() => this.validateCode(identity.code, false)}\r\n\t\t\t\t\t\t\t\terror={code && !!code.dirty}\r\n\t\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\tcode && !!code.dirty ? code.errMsg : t('ENTER_VALID_CODE')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Typography paragraph variant='body1'>\r\n\t\t\t\t\t\t\t{t('GENERATE_FULL_IDENTITY_INFO_EMAIL')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('email', { isProp: true })}\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tvalue={identity.email || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('email', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateEmail(identity.email, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateEmail(identity.email, false)}\r\n\t\t\t\t\t\t\terror={email && !!email.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temail && !!email.dirty ? email.errMsg : t('ENTER_VALID_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('emailCheck', { isProp: true })}\r\n\t\t\t\t\t\t\tname='emailCheck'\r\n\t\t\t\t\t\t\tvalue={identity.emailCheck || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('emailCheck', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={emailCheck && !!emailCheck.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temailCheck && !!emailCheck.dirty\r\n\t\t\t\t\t\t\t\t\t? emailCheck.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('ENTER_SAME_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Typography paragraph variant='body1'>\r\n\t\t\t\t\t\t\t{t('GENERATE_FULL_IDENTITY_INFO_ADDRESS')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t{!(identityData || {}).address ? (\r\n\t\t\t\t\t\t\t<span className={classes.buttonProgressWrapper}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\tonClick={this.getIdentityContractData}\r\n\t\t\t\t\t\t\t\t\tdisabled={waitingExpected}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('GENERATE_IDENTITY_ADDRESS')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t{waitingExpected && (\r\n\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Typography paragraph variant='subtitle2' color='primary'>\r\n\t\t\t\t\t\t\t\t\t{t('IDENTITY_CONTRACT_IS', { args: [identityData.address] })}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nIdentityContractAddressEthDeploy.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n\tidentity: PropTypes.object.isRequired,\r\n\thandleChange: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tinvalidFields: PropTypes.object.isRequired,\r\n\tvalidate: PropTypes.func.isRequired,\r\n}\r\n\r\nconst IdentityContractAddressStep = IdentityHoc(\r\n\tIdentityContractAddressEthDeploy\r\n)\r\nexport default Translate(withStyles(styles)(IdentityContractAddressStep))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nexport default function NewItemHoc(Decorated) {\r\n\tclass ValidItemHoc extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\r\n\t\t\tthis.state = {\r\n\t\t\t\tinvalidFields: {},\r\n\t\t\t}\r\n\r\n\t\t\tthis.validate = this.validate.bind(this)\r\n\t\t}\r\n\r\n\t\tcomponentWillReceiveProps(nextProps) {\r\n\t\t\tthis.setState({ invalidFields: nextProps.validations || {} })\r\n\t\t}\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t\tthis.setState({ invalidFields: this.props.validations || {} })\r\n\t\t}\r\n\r\n\t\tvalidate = (\r\n\t\t\tkey,\r\n\t\t\t{ isValid, err = { msg: '', args: [] }, dirty = false, removeAll = false }\r\n\t\t) => {\r\n\t\t\tif (!isValid) {\r\n\t\t\t\tlet errors = {}\r\n\t\t\t\terrors[key] = {\r\n\t\t\t\t\terrMsg: this.props.t(err.msg, { args: err.args }),\r\n\t\t\t\t\tdirty: dirty,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.props.actions.updateValidationErrors(this.props.validateId, errors)\r\n\t\t\t} else if (removeAll) {\r\n\t\t\t\tthis.props.actions.resetValidationErrors(this.props.validateId)\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.actions.resetValidationErrors(this.props.validateId, key)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tconst props = this.props\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tvalidate={this.validate}\r\n\t\t\t\t\tinvalidFields={this.state.invalidFields}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tValidItemHoc.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t\tvalidateId: PropTypes.string.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state, props) {\r\n\t\t// let persist = state.persist\r\n\t\tlet memory = state.memory\r\n\t\treturn {\r\n\t\t\tvalidations: memory.validations[props.validateId],\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(ValidItemHoc))\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport Translate from 'components/translate/Translate'\r\nimport IdentityHoc from '../IdentityHoc'\r\nimport ValidItemHoc from 'components/common/stepper/ValidItemHoc'\r\n\r\nexport default function AuthHoc(Decorated) {\r\n\tclass Auth extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props)\r\n\t\t\tthis.state = {\r\n\t\t\t\tmethod: '',\r\n\t\t\t\tsideSelect: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateWallet = ({\r\n\t\t\taddress,\r\n\t\t\tauthType,\r\n\t\t\thdWalletAddrPath,\r\n\t\t\thdWalletAddrIdx,\r\n\t\t\tpath,\r\n\t\t\tchainId,\r\n\t\t\tsignType,\r\n\t\t\tbalanceEth,\r\n\t\t\tbalanceDai,\r\n\t\t}) => {\r\n\t\t\tconst wallet = {\r\n\t\t\t\taddress,\r\n\t\t\t\tauthType,\r\n\t\t\t\thdWalletAddrPath,\r\n\t\t\t\thdWalletAddrIdx,\r\n\t\t\t\tpath,\r\n\t\t\t\tchainId,\r\n\t\t\t\tsignType,\r\n\t\t\t\tbalanceEth,\r\n\t\t\t\tbalanceDai,\r\n\t\t\t}\r\n\r\n\t\t\tthis.props.handleChange('identityContractOwner', address)\r\n\t\t\tthis.props.handleChange('wallet', wallet)\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\treturn (\r\n\t\t\t\t<Decorated\r\n\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t// updateAcc={this.updateAcc}\r\n\t\t\t\t\tupdateWallet={this.updateWallet}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tAuth.propTypes = {\r\n\t\tactions: PropTypes.object.isRequired,\r\n\t}\r\n\r\n\tfunction mapStateToProps(state) {\r\n\t\tlet persist = state.persist\r\n\t\t// let memory = state.memory\r\n\t\treturn {\r\n\t\t\taccount: persist.account,\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapDispatchToProps(dispatch) {\r\n\t\treturn {\r\n\t\t\tactions: bindActionCreators(actions, dispatch),\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(\r\n\t\tmapStateToProps,\r\n\t\tmapDispatchToProps\r\n\t)(Translate(ValidItemHoc(IdentityHoc(Auth))))\r\n}\r\n","export const styles = theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\treturn {\r\n\t\taddrListItem: {\r\n\t\t\t'&:hover': {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t},\r\n\t\t},\r\n\t\taddrInfo: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexWrap: 'wrap',\r\n\t\t\tflexGrow: 1,\r\n\t\t\tpaddingTop: spacing,\r\n\t\t\twhiteSpace: 'normal',\r\n\t\t\t'& strong': {\r\n\t\t\t\tmarginRight: spacing * 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\taddrInfoLabel: {\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t\tfontWeight: 'bold',\r\n\t\t},\r\n\t\tdialogPaper: {\r\n\t\t\theight: '80vh',\r\n\t\t\tmargin: spacing * 2,\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\tflex: '1 1 auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tpadding: 0,\r\n\t\t\tmargin: `0 ${spacing}px ${spacing}px ${spacing}px`,\r\n\t\t\t'&:first-child': {\r\n\t\t\t\tpaddingTop: spacing,\r\n\t\t\t},\r\n\t\t\toverflow: 'visible',\r\n\t\t},\r\n\t\ttabsContainer: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexGrow: 1,\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tmargin: spacing,\r\n\t\t\t// marginTop: spacing * 2,\r\n\t\t\t// position: 'absolute',\r\n\t\t\t// top: 70,\r\n\t\t\t// left: 0,\r\n\t\t\t// right: 0,\r\n\t\t\t// bottom: 0\r\n\t\t},\r\n\t\tbackdrop: {\r\n\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n\t\t},\r\n\t\ttabLogo: {\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\theight: spacing * 4,\r\n\t\t\tmaxHeight: '100%',\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t\ttabLabel: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'row',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'center',\r\n\t\t},\r\n\t\tdlBtnImg: {\r\n\t\t\tmaxWidth: '100%',\r\n\t\t\tmaxHeight: spacing * 9,\r\n\t\t\twidth: 'auto',\r\n\t\t\theight: 'auto',\r\n\t\t},\r\n\t\tleftBtnIcon: {\r\n\t\t\tmarginRight: spacing,\r\n\t\t},\r\n\t\tadexLogoTop: {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: '-6vh',\r\n\t\t\tleft: 0,\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\twidth: '12.8vh',\r\n\t\t\theight: '5vh',\r\n\t\t},\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { utils } from 'ethers'\r\n\r\nexport const addrItem = ({ stats, t, classes }) => {\r\n\tconst { balanceEth, balanceDai, address } = stats\r\n\r\n\treturn (\r\n\t\t<ListItemText\r\n\t\t\tprimary={address}\r\n\t\t\tsecondary={\r\n\t\t\t\t<span className={classes.addrInfo}>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<span> ETH </span>\r\n\t\t\t\t\t\t<strong> {utils.formatEther(balanceEth)} </strong>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<span> SAI </span>\r\n\t\t\t\t\t\t<strong> {utils.formatEther(balanceDai)} </strong>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const AddrItem = withStyles(styles)(addrItem)\r\n","import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Translate from 'components/translate/Translate'\r\nimport METAMASK_DL_IMG from 'resources/download-metamask.png'\r\nimport METAMASK_IMG from 'resources/metamask.png'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport Img from 'components/common/img/Img'\r\nimport AuthHoc from './AuthHoc'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { AddrItem } from './AuthCommon'\r\nimport { addToast, execute } from 'actions'\r\nimport {\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tTopLoading,\r\n} from 'components/common/dialog/content'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getEthers, getEthereumProvider } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\nimport { getAddressBalances } from 'services/smart-contracts/actions/stats'\r\nimport Box from '@material-ui/core/Box'\r\n\r\nfunction AuthMetamask(props) {\r\n\tconst [installingMetamask, setInstallingMetamask] = useState(false)\r\n\tconst [address, setAddress] = useState(null)\r\n\tconst [stats, setStats] = useState(null)\r\n\tconst [waitingMetamaskAction, setWaitingMetamaskAction] = useState(false)\r\n\tconst [waitingAddrsData, setWaitingAddrsData] = useState(false)\r\n\tconst { t, classes } = props\r\n\tconst isOpera =\r\n\t\t!!window.opr || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0\r\n\tconst [isMetamaskEthereumProvider, setIsMetamaskEthereumProvider] = useState(\r\n\t\tfalse\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst setEth = async () => {\r\n\t\t\tconst ethereumProvider = await getEthereumProvider()\r\n\t\t\tsetIsMetamaskEthereumProvider(\r\n\t\t\t\tethereumProvider === AUTH_TYPES.METAMASK.name\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tsetEth()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (installingMetamask) {\r\n\t\t\t// Refreshes page after user comes back\r\n\t\t\t// from installing Metamask\r\n\t\t\twindow.onfocus = () => {\r\n\t\t\t\twindow.location.reload()\r\n\t\t\t\tsetInstallingMetamask(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [installingMetamask])\r\n\r\n\tconst checkMetamask = async () => {\r\n\t\tsetWaitingAddrsData(true)\r\n\t\ttry {\r\n\t\t\tconst authType = AUTH_TYPES.METAMASK.name\r\n\t\t\tconst { provider } = await getEthers(authType)\r\n\t\t\tconst wallet = {\r\n\t\t\t\tauthType: authType,\r\n\t\t\t}\r\n\r\n\t\t\tconst metamaskSigner = await getSigner({ wallet, provider })\r\n\t\t\tconst address = await metamaskSigner.getAddress()\r\n\t\t\tconst stats = await getAddressBalances({\r\n\t\t\t\taddress: { address },\r\n\t\t\t\tauthType,\r\n\t\t\t})\r\n\t\t\tsetAddress(address)\r\n\t\t\tsetStats(stats)\r\n\t\t\tsetWaitingAddrsData(false)\r\n\r\n\t\t\tprops.updateWallet({\r\n\t\t\t\taddress,\r\n\t\t\t\tauthType: AUTH_TYPES.METAMASK.name,\r\n\t\t\t\tbalanceEth: stats.balanceEth,\r\n\t\t\t\tbalanceDai: stats.balanceDai,\r\n\t\t\t\tsignType: AUTH_TYPES.METAMASK.signType,\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Error: catch', err)\r\n\t\t\tsetWaitingMetamaskAction(false)\r\n\t\t\tsetWaitingAddrsData(false)\r\n\t\t\texecute(\r\n\t\t\t\taddToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: t('ERR_AUTH_METAMASK', {\r\n\t\t\t\t\t\targs: [Helper.getErrMsg(err)],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t{waitingMetamaskAction ? (\r\n\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t<TopLoading msg={t('METAMASK_WAITING_ACTION')} />\r\n\t\t\t\t</ContentStickyTop>\r\n\t\t\t) : waitingAddrsData ? (\r\n\t\t\t\t<TopLoading msg={t('METAMASK_WAITING_ADDR_INFO')} />\r\n\t\t\t) : null}\r\n\t\t\t<ContentBody>\r\n\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t{t('METAMASK_INFO')}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tdisplay='flex'\r\n\t\t\t\t\tflexDirection='column'\r\n\t\t\t\t\talignItems='center'\r\n\t\t\t\t\tjustifyContent='center'\r\n\t\t\t\t\twidth={1}\r\n\t\t\t\t>\r\n\t\t\t\t\t{!isMetamaskEthereumProvider ? (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t__html: t('METAMASK_BASIC_USAGE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisOpera\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'https://chrome.google.com/webstore/detail/nkbihfbeogaeaoehlefnkodbefgpgknn'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://metamask.io/'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thttps://metamask.io/\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\thref={\r\n\t\t\t\t\t\t\t\t\t\tisOpera\r\n\t\t\t\t\t\t\t\t\t\t\t? 'https://chrome.google.com/webstore/detail/nkbihfbeogaeaoehlefnkodbefgpgknn'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'https://metamask.io/'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\tonClick={() => setInstallingMetamask(true)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\tsrc={METAMASK_DL_IMG}\r\n\t\t\t\t\t\t\t\t\t\talt={'Downlad metamask'}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\tsrc={METAMASK_IMG}\r\n\t\t\t\t\t\t\t\talt={'Downlad metamask'}\r\n\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{address ? (\r\n\t\t\t\t\t\t<div className={classes.metamaskLAbel}>\r\n\t\t\t\t\t\t\t{stats ? (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Typography paragraph variant='subheading' color='primary'>\r\n\t\t\t\t\t\t\t\t\t\t{t('METAMASK_CONTINUE_TO_NEXT_STEP')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<AddrItem stats={stats} t={t} addr={address} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tt('AUTH_WITH_METAMASK_LABEL', { args: [address] })\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : isMetamaskEthereumProvider ? (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={checkMetamask}\r\n\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\tdisabled={waitingAddrsData}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('AUTH_CONNECT_WITH_METAMASK')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Box>\r\n\t\t\t</ContentBody>\r\n\t\t</ContentBox>\r\n\t)\r\n}\r\n\r\nAuthMetamask.propTypes = {\r\n\tupdateWallet: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Translate(AuthHoc(withStyles(styles)(AuthMetamask)))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Translate from 'components/translate/Translate'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport Img from 'components/common/img/Img'\r\nimport Button from '@material-ui/core/Button'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport AuthHoc from './AuthHoc'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { AddrItem } from './AuthCommon'\r\nimport {\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tTopLoading,\r\n} from 'components/common/dialog/content'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport TREZOR_DL_IMG from 'resources/trezor-logo-h.png'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\nimport { getAddressBalances } from 'services/smart-contracts/actions/stats'\r\n\r\nclass AuthTrezor extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tmethod: '',\r\n\t\t\tsideSelect: false,\r\n\t\t\taddresses: [],\r\n\t\t\twaitingTrezorAction: false,\r\n\t\t\twaitingAddrsData: false,\r\n\t\t\tselectedAddress: null,\r\n\t\t\thdPath: '',\r\n\t\t}\r\n\t}\r\n\r\n\tconnectTrezor = async () => {\r\n\t\tthis.setState({ waitingTrezorAction: true }, async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { provider } = await getEthers(AUTH_TYPES.TREZOR.name)\r\n\r\n\t\t\t\tconst wallet = {\r\n\t\t\t\t\tauthType: AUTH_TYPES.TREZOR.name,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst trezorSigner = await getSigner({ provider, wallet })\r\n\r\n\t\t\t\tconst addresses = await trezorSigner.getAddresses({ from: 0, to: 19 })\r\n\r\n\t\t\t\tconst allAddressesData = addresses.payload.map(address =>\r\n\t\t\t\t\tgetAddressBalances({ address, authType: AUTH_TYPES.TREZOR.name })\r\n\t\t\t\t)\r\n\r\n\t\t\t\tthis.setState({ waitingAddrsData: true }, async () => {\r\n\t\t\t\t\tconst results = await Promise.all(allAddressesData)\r\n\r\n\t\t\t\t\tconsole.log('result', results)\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\thdPath: trezorSigner.path,\r\n\t\t\t\t\t\taddresses: results,\r\n\t\t\t\t\t\twaitingAddrsData: false,\r\n\t\t\t\t\t\twaitingTrezorAction: false,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Error: catch', err)\r\n\t\t\t\tthis.setState({ waitingTrezorAction: false, waitingAddrsData: false })\r\n\t\t\t\tthis.props.actions.addToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: this.props.t('ERR_AUTH_TREZOR', {\r\n\t\t\t\t\t\targs: [Helper.getErrMsg(err)],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tAddressSelect = ({ addresses, waitingTrezorAction, t, classes, ...rest }) => {\r\n\t\treturn (\r\n\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t{waitingTrezorAction ? (\r\n\t\t\t\t\t\t<TopLoading msg={t('TREZOR_WAITING_ACTION')} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tt('SELECT_ADDR_TREZOR')\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{addresses.map((res, index) => (\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tclasses={{ root: classes.addrListItem }}\r\n\t\t\t\t\t\t\t\tkey={res.address}\r\n\t\t\t\t\t\t\t\tonClick={() => this.onAddrSelect(res, index)}\r\n\t\t\t\t\t\t\t\tselected={this.state.selectedAddress === res.address}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<AddrItem stats={res} t={t} address={res.address} />\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n\r\n\tonAddrSelect = (addrData, hdWalletAddrIdx) => {\r\n\t\tconst { address, path, balanceEth, balanceDai } = addrData\r\n\t\tthis.props.updateWallet({\r\n\t\t\taddress,\r\n\t\t\tauthType: AUTH_TYPES.TREZOR.name,\r\n\t\t\tpath,\r\n\t\t\tbalanceEth,\r\n\t\t\tbalanceDai,\r\n\t\t\thdWalletAddrPath: this.state.hdPath,\r\n\t\t\thdWalletAddrIdx,\r\n\t\t\tsignType: AUTH_TYPES.TREZOR.signType,\r\n\t\t})\r\n\r\n\t\tthis.setState({ selectedAddress: address })\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { t, classes } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.state.addresses.length ? (\r\n\t\t\t\t\t<this.AddressSelect\r\n\t\t\t\t\t\twaitingTrezorAction={this.state.waitingTrezorAction}\r\n\t\t\t\t\t\taddresses={this.state.addresses}\r\n\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t\t\t{this.state.waitingAddrsData ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('TREZOR_WAITING_ADDRS_INFO')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : this.state.waitingTrezorAction ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('TREZOR_WAITING_ACTION')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t\t{t('TREZOR_INFO')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t__html: t('TREZOR_BASIC_USAGE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor href='https://trezor.io/' target='_blank'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTREZOR Wallet\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref='https://wallet.trezor.io/#/bridge'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTREZOR Bridge\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<Anchor href='https://trezor.io' target='_blank'>\r\n\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\tsrc={TREZOR_DL_IMG}\r\n\t\t\t\t\t\t\t\t\t\talt={'https://trezor.io'}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t{!this.state.waitingAddrsData && !this.state.waitingTrezorAction && (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={this.connectTrezor}\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('CONNECT_WITH_TREZOR')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</ContentBox>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAuthTrezor.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tupdateWallet: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Translate(AuthHoc(withStyles(styles)(AuthTrezor)))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Button from '@material-ui/core/Button'\r\nimport Translate from 'components/translate/Translate'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport Img from 'components/common/img/Img'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { getAddressBalances } from 'services/smart-contracts/actions/stats'\r\nimport AuthHoc from './AuthHoc'\r\nimport Helper from 'helpers/miscHelpers'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\nimport { AddrItem } from './AuthCommon'\r\nimport {\r\n\tContentBox,\r\n\tContentBody,\r\n\tContentStickyTop,\r\n\tTopLoading,\r\n} from 'components/common/dialog/content'\r\nimport LEDGER_DL_IMG from 'resources/ledger_logo_header.png'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getEthers } from 'services/smart-contracts/ethers'\r\nimport { getSigner } from 'services/smart-contracts/actions/ethers'\r\n\r\nclass AuthLedger extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tmethod: '',\r\n\t\t\tsideSelect: false,\r\n\t\t\taddresses: [],\r\n\t\t\twaitingLedgerAction: false,\r\n\t\t\twaitingAddrsData: false,\r\n\t\t\tselectedAddress: null,\r\n\t\t\thdPath: '',\r\n\t\t}\r\n\t}\r\n\r\n\tconnectLedger = async () => {\r\n\t\tthis.setState({ waitingLedgerAction: true }, async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { provider } = await getEthers(AUTH_TYPES.LEDGER.name)\r\n\r\n\t\t\t\tconst wallet = {\r\n\t\t\t\t\tauthType: AUTH_TYPES.LEDGER.name,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst ledgerSigner = await getSigner({ wallet, provider })\r\n\t\t\t\tconst addresses = await ledgerSigner.getAddresses({ from: 0, to: 19 })\r\n\r\n\t\t\t\tconst allAddressesData = addresses.map(address =>\r\n\t\t\t\t\tgetAddressBalances({ address, authType: AUTH_TYPES.LEDGER.name })\r\n\t\t\t\t)\r\n\r\n\t\t\t\tthis.setState({ waitingAddrsData: true }, async () => {\r\n\t\t\t\t\tconst results = await Promise.all(allAddressesData)\r\n\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\thdPath: ledgerSigner.path,\r\n\t\t\t\t\t\taddresses: results,\r\n\t\t\t\t\t\twaitingAddrsData: false,\r\n\t\t\t\t\t\twaitingLedgerAction: false,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Error: catch', err)\r\n\t\t\t\tthis.setState({ waitingLedgerAction: false, waitingAddrsData: false })\r\n\t\t\t\tthis.props.actions.addToast({\r\n\t\t\t\t\ttype: 'cancel',\r\n\t\t\t\t\taction: 'X',\r\n\t\t\t\t\tlabel: this.props.t('ERR_AUTH_LEDGER', {\r\n\t\t\t\t\t\targs: [Helper.getErrMsg(err)],\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttimeout: 5000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tAddressSelect = ({ addresses, waitingLedgerAction, t, classes, ...rest }) => {\r\n\t\treturn (\r\n\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t{waitingLedgerAction ? (\r\n\t\t\t\t\t\t<TopLoading msg={t('LEDGER_WAITING_ACTION')} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tt('SELECT_ADDR_LEDGER')\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t<ContentBody>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{addresses.map((res, index) => (\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tclasses={{ root: classes.addrListItem }}\r\n\t\t\t\t\t\t\t\tkey={res.address}\r\n\t\t\t\t\t\t\t\tonClick={() => this.onAddrSelect(res, index)}\r\n\t\t\t\t\t\t\t\tselected={this.state.selectedAddress === res.address}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<AddrItem stats={res} t={t} />\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</ContentBody>\r\n\t\t\t</ContentBox>\r\n\t\t)\r\n\t}\r\n\r\n\tonAddrSelect = (addrData, hdWalletAddrIdx) => {\r\n\t\tconst { address, path, balanceEth, balanceDai } = addrData\r\n\r\n\t\tthis.props.updateWallet({\r\n\t\t\taddress,\r\n\t\t\tauthType: AUTH_TYPES.LEDGER.name,\r\n\t\t\tpath,\r\n\t\t\tbalanceEth,\r\n\t\t\tbalanceDai,\r\n\t\t\thdWalletAddrPath: this.state.hdPath,\r\n\t\t\thdWalletAddrIdx,\r\n\t\t\tsignType: AUTH_TYPES.LEDGER.signType,\r\n\t\t})\r\n\r\n\t\tthis.setState({ selectedAddress: address })\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { t, classes } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.state.addresses.length ? (\r\n\t\t\t\t\t<this.AddressSelect\r\n\t\t\t\t\t\twaitingLedgerAction={this.state.waitingLedgerAction}\r\n\t\t\t\t\t\taddresses={this.state.addresses}\r\n\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ContentBox className={classes.tabBox}>\r\n\t\t\t\t\t\t{this.state.waitingAddrsData ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('LEDGER_WAITING_ADDRS_INFO')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : this.state.waitingLedgerAction ? (\r\n\t\t\t\t\t\t\t<ContentStickyTop>\r\n\t\t\t\t\t\t\t\t<TopLoading msg={t('LEDGER_WAITING_ACTION')} />\r\n\t\t\t\t\t\t\t</ContentStickyTop>\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t<ContentBody>\r\n\t\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t\t{t('LEDGER_INFO')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t__html: t('LEDGER_BASIC_USAGE_INFO', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref='https://www.ledgerwallet.com/'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLEDGER\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography paragraph>\r\n\t\t\t\t\t\t\t\t<Anchor href='https://www.ledgerwallet.com/' target='_blank'>\r\n\t\t\t\t\t\t\t\t\t<Img\r\n\t\t\t\t\t\t\t\t\t\tsrc={LEDGER_DL_IMG}\r\n\t\t\t\t\t\t\t\t\t\talt={'https://www.ledgerwallet.com/'}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dlBtnImg}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t{!this.state.waitingAddrsData && !this.state.waitingLedgerAction && (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={this.connectLedger}\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('CONNECT_WITH_LEDGER')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ContentBody>\r\n\t\t\t\t\t</ContentBox>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAuthLedger.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tupdateWallet: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tclasses: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Translate(AuthHoc(withStyles(styles)(AuthLedger)))\r\n","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { useSelector } from 'react-redux'\r\nimport { selectLocation } from 'selectors'\r\nimport AuthMetamask from './AuthMetamask'\r\nimport AuthTrezor from './AuthTrezor'\r\nimport AuthLedger from './AuthLedger'\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\tconst spacing = theme.spacing(1)\r\n\r\n\treturn {\r\n\t\ttabsContainer: {\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexGrow: 1,\r\n\t\t\toverflowY: 'auto',\r\n\t\t\tposition: 'relative',\r\n\t\t\tmargin: spacing,\r\n\t\t},\r\n\t}\r\n})\r\n\r\nfunction AuthMethod() {\r\n\tconst classes = useStyles()\r\n\tconst location = useSelector(selectLocation) || {}\r\n\tconst { search } = location\r\n\r\n\treturn (\r\n\t\t<Grid container spacing={2} direction='row' alignContent='flex-start'>\r\n\t\t\t<Grid item xs={12} className={classes.tabsContainer}>\r\n\t\t\t\t{search === '?metamask' && <AuthMetamask />}\r\n\t\t\t\t{search === '?trezor' && <AuthTrezor />}\r\n\t\t\t\t{search === '?ledger' && <AuthLedger />}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default AuthMethod\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport AuthMethod from 'components/signin/identity/ownerAuth/AuthMethod'\r\nimport Translate from 'components/translate/Translate'\r\n\r\nclass IdentityContractAddress extends Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.validateContractOwner()\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst currOwner = this.props.identity.identityContractOwner\r\n\t\tif (!!currOwner && currOwner !== prevProps.identity.identityContractOwner) {\r\n\t\t\tthis.validateContractOwner()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateContractOwner = () => {\r\n\t\tconst { validate, identity } = this.props\r\n\t\tconst { identityContractOwner } = identity\r\n\r\n\t\tvalidate('identityContractOwner', {\r\n\t\t\tisValid: !!identityContractOwner,\r\n\t\t\terr: { msg: 'ERR_NO_IDENTITY_CONTRACT_OWNER' },\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <AuthMethod {...this.props} />\r\n\t}\r\n}\r\n\r\nIdentityContractAddress.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { persist } = state\r\n\treturn {\r\n\t\taccount: persist.account,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst IdentityContractAddressStep = IdentityHoc(IdentityContractAddress)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(IdentityContractAddressStep))\r\n","import React, { Component } from 'react'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Translate from 'components/translate/Translate'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Anchor from 'components/common/anchor/anchor'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport {\r\n\tvalidEmail,\r\n\tvalidPassword,\r\n\tvalidQuickAccountCoupon,\r\n} from 'helpers/validators'\r\nimport { checkCoupon } from 'services/adex-relayer/actions'\r\n\r\nconst TOS_LINK = 'https://www.adex.network/tos/'\r\n\r\nclass GrantInfo extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst {\r\n\t\t\temail,\r\n\t\t\temailCheck,\r\n\t\t\tpassword,\r\n\t\t\tpasswordCheck,\r\n\t\t\tcoupon,\r\n\t\t\ttosCheck,\r\n\t\t} = this.props.identity\r\n\r\n\t\tthis.validateEmail(email, false)\r\n\t\tthis.validateEmailCheck(emailCheck, false)\r\n\t\tthis.validatePassword(password, false)\r\n\t\tthis.validatePasswordCheck(passwordCheck, false)\r\n\t\tthis.validateCoupon(coupon, false)\r\n\t\tthis.validateTOS(tosCheck, false)\r\n\t}\r\n\r\n\tvalidateEmail(email, dirty) {\r\n\t\tconst isValid = validEmail(email)\r\n\t\tthis.props.validate('email', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateEmailCheck(emailCheck, email, dirty) {\r\n\t\tconst isValid = !!emailCheck && !!email && emailCheck === email\r\n\t\tthis.props.validate('emailCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidatePassword(password, dirty) {\r\n\t\tconst isValid = validPassword(password)\r\n\t\tthis.props.validate('password', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_PASSWORD' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidatePasswordCheck(passwordCheck, password, dirty) {\r\n\t\tconst isValid = !!passwordCheck && !!password && passwordCheck === password\r\n\t\tthis.props.validate('passwordCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_PASSWORD_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateCoupon(coupon, dirty) {\r\n\t\tconst isValidFormat = validQuickAccountCoupon(coupon)\r\n\r\n\t\tif (!isValidFormat) {\r\n\t\t\tthis.props.validate('coupon', {\r\n\t\t\t\tisValid: isValidFormat,\r\n\t\t\t\terr: { msg: 'ERR_COUPON_FORMAT' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.setState({ waitingCheck: true }, () => {\r\n\t\t\t\tcheckCoupon({ coupon })\r\n\t\t\t\t\t.then((cpn = {}) => {\r\n\t\t\t\t\t\tconst isValid = cpn.exist === true && cpn.used === false\r\n\t\t\t\t\t\tlet msg = ''\r\n\t\t\t\t\t\tif (cpn.exist === false) {\r\n\t\t\t\t\t\t\tmsg = 'ERR_COUPON_NOT_EXIST'\r\n\t\t\t\t\t\t} else if (cpn.used === true) {\r\n\t\t\t\t\t\t\tmsg = 'ERR_COUPON_USED'\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.props.validate('coupon', {\r\n\t\t\t\t\t\t\tisValid: isValid,\r\n\t\t\t\t\t\t\terr: { msg: msg },\r\n\t\t\t\t\t\t\tdirty: dirty,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.props.validate('coupon', {\r\n\t\t\t\t\t\t\tisValid: false,\r\n\t\t\t\t\t\t\terr: { msg: 'ERR_COUPON_NETWORK' },\r\n\t\t\t\t\t\t\tdirty: true,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateTOS(accepted, dirty) {\r\n\t\tthis.props.validate('tosCheck', {\r\n\t\t\tisValid: !!accepted,\r\n\t\t\terr: { msg: 'ERR_TOS_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\ttosCheck(checked) {\r\n\t\tthis.props.handleChange('tosCheck', checked)\r\n\t\tthis.validateTOS(checked, true)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, identity, handleChange, invalidFields } = this.props\r\n\t\t// Errors\r\n\t\tconst {\r\n\t\t\tcoupon,\r\n\t\t\temail,\r\n\t\t\temailCheck,\r\n\t\t\tpassword,\r\n\t\t\tpasswordCheck,\r\n\t\t\ttosCheck,\r\n\t\t} = invalidFields\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('coupon', { isProp: true })}\r\n\t\t\t\t\t\t\tname='coupon'\r\n\t\t\t\t\t\t\tvalue={identity.coupon || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('coupon', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateCoupon(identity.coupon, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateCoupon(identity.coupon, false)}\r\n\t\t\t\t\t\t\terror={coupon && !!coupon.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\tcoupon && !!coupon.dirty\r\n\t\t\t\t\t\t\t\t\t? coupon.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('ENTER_VALID_COUPON')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('email', { isProp: true })}\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tvalue={identity.email || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('email', ev.target.value.trim())}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateEmail(identity.email, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateEmail(identity.email, false)}\r\n\t\t\t\t\t\t\terror={email && !!email.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temail && !!email.dirty ? email.errMsg : t('ENTER_VALID_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('emailCheck', { isProp: true })}\r\n\t\t\t\t\t\t\tname='emailCheck'\r\n\t\t\t\t\t\t\tvalue={identity.emailCheck || ''}\r\n\t\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\t\thandleChange('emailCheck', ev.target.value.trim())\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={emailCheck && !!emailCheck.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temailCheck && !!emailCheck.dirty\r\n\t\t\t\t\t\t\t\t\t? emailCheck.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('ENTER_SAME_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('password', { isProp: true })}\r\n\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\tvalue={identity.password || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('password', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validatePassword(identity.password, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validatePassword(identity.password, false)}\r\n\t\t\t\t\t\t\terror={password && !!password.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\tpassword && !!password.dirty\r\n\t\t\t\t\t\t\t\t\t? password.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('PASSWORD_RULES')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('passwordCheck', { isProp: true })}\r\n\t\t\t\t\t\t\tname='passwordCheck'\r\n\t\t\t\t\t\t\tvalue={identity.passwordCheck || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('passwordCheck', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\tthis.validatePasswordCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.passwordCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.password,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\tthis.validatePasswordCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.passwordCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.password,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={passwordCheck && !!passwordCheck.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\tpasswordCheck && !!passwordCheck.dirty\r\n\t\t\t\t\t\t\t\t\t? passwordCheck.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('PASSWORD_CHECK_RULES')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\terror={tosCheck && tosCheck.dirty}\r\n\t\t\t\t\t\t\tcomponent='fieldset'\r\n\t\t\t\t\t\t\t// className={classes.formControl}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tchecked={!!identity.tosCheck}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ev => this.tosCheck(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t\t\tvalue='tosCheck'\r\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{t('ACCEPT_TOS_CHECK')}\r\n\t\t\t\t\t\t\t\t\t\t<Anchor href={TOS_LINK} target='_blank'>\r\n\t\t\t\t\t\t\t\t\t\t\t{` ${t('TOS_CHECK')}`}\r\n\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{tosCheck && !!tosCheck.dirty && (\r\n\t\t\t\t\t\t\t\t<FormHelperText>{tosCheck.errMsg}</FormHelperText>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst IdentityGrantInfoStep = IdentityHoc(GrantInfo)\r\nexport default Translate(withStyles(styles)(IdentityGrantInfoStep))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { createLocalWallet } from 'services/wallet/wallet'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\n\r\nclass GrantDeploy extends Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.validateIdentity()\r\n\t\tif (!this.props.identity.identityAddr) {\r\n\t\t\tthis.initLocalWallet()\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst currIdentity = this.props.identity.identityAddr\r\n\t\tif (!!currIdentity && currIdentity !== prevProps.identity.identityAddr) {\r\n\t\t\tthis.validateIdentity()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateIdentity = () => {\r\n\t\tconst { validate, identity } = this.props\r\n\t\tconst { identityAddr } = identity\r\n\r\n\t\tvalidate('identityAddr', {\r\n\t\t\tisValid: !!identityAddr,\r\n\t\t\terr: { msg: 'ERR_IDENTITY_NOT_GENERATED' },\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tinitLocalWallet = () => {\r\n\t\tconst { handleChange, identity } = this.props\r\n\t\tconst { email, password } = identity\r\n\r\n\t\tconst walletData = createLocalWallet({\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\tauthType: AUTH_TYPES.GRANT.name,\r\n\t\t})\r\n\r\n\t\twalletData.email = email\r\n\t\twalletData.password = password\r\n\r\n\t\thandleChange('wallet', walletData)\r\n\t\thandleChange('walletAddr', walletData.address)\r\n\t}\r\n\r\n\tgetIdentity = () => {\r\n\t\tconst { identity, actions } = this.props\r\n\t\tconst { email, password, coupon, walletAddr, wallet } = identity\r\n\t\tconst { authType } = wallet\r\n\r\n\t\tactions.getGrantAccount({\r\n\t\t\twalletAddr,\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\tcoupon,\r\n\t\t\tauthType,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, identity, classes, waitingGrant } = this.props\r\n\t\tconst { walletAddr, identityAddr, grantAmount } = identity\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t{t('GRANT_WALLET_ADDRESS')}\r\n\t\t\t\t\t\t\t{' ' + walletAddr}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography paragraph variant='body2'>\r\n\t\t\t\t\t\t\t{t('GRANT_WALLET_ADDRESS_INFO')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t\t{!!identityAddr ? (\r\n\t\t\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t\t\t{t('IDENTITY_ADDRESS_INFO', {\r\n\t\t\t\t\t\t\t\t\t\targs: [identityAddr, grantAmount],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t\t\t\t{t('IDENTITY_ADDRESS_INFO_1')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<span className={classes.buttonProgressWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.getIdentity}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={waitingGrant}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{t('GET_GRANT_IDENTITY')}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t{waitingGrant && (\r\n\t\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nGrantDeploy.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { memory } = state\r\n\r\n\treturn {\r\n\t\twaitingGrant: memory.spinners['getting-grant-identity'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst IdentityGrantDeployStep = IdentityHoc(GrantDeploy)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(IdentityGrantDeployStep)))\r\n","import React, { Component } from 'react'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getLocalWallet, migrateLegacyWallet } from 'services/wallet/wallet'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\n\r\nclass GrantLogin extends Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.validateWallet(false)\r\n\t}\r\n\r\n\tvalidateWallet = dirty => {\r\n\t\tconst { identity, handleChange, validate } = this.props\r\n\t\tconst { email, password } = identity\r\n\r\n\t\tlet wallet = {}\r\n\r\n\t\tif (email && password) {\r\n\t\t\tconst walletData = getLocalWallet({\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t})\r\n\r\n\t\t\tif (!!walletData && walletData.data) {\r\n\t\t\t\twallet = { ...walletData.data }\r\n\t\t\t\twallet.email = email\r\n\t\t\t\twallet.password = password\r\n\t\t\t\twallet.authType = AUTH_TYPES.GRANT.name\r\n\t\t\t\twallet.identity = {\r\n\t\t\t\t\taddress: walletData.identity,\r\n\t\t\t\t\tprivileges: walletData.identityPrivileges,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmigrateLegacyWallet({ email, password })\r\n\t\t\t\thandleChange('deleteLegacyKey', true)\r\n\t\t\t\thandleChange('identityAddr', walletData.identity)\r\n\t\t\t}\r\n\r\n\t\t\thandleChange('wallet', wallet)\r\n\t\t\thandleChange('walletAddr', wallet.address)\r\n\t\t\thandleChange('identityData', wallet.identity)\r\n\t\t}\r\n\r\n\t\tvalidate('wallet', {\r\n\t\t\tisValid: !!wallet.address,\r\n\t\t\terr: { msg: 'ERR_LOCAL_WALLET_LOGIN' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tidentity,\r\n\t\t\thandleChange,\r\n\t\t\tinvalidFields,\r\n\t\t\tclasses,\r\n\t\t\tactions,\r\n\t\t} = this.props\r\n\t\t// Errors\r\n\t\tconst { wallet } = invalidFields\r\n\t\treturn (\r\n\t\t\t// <div>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={2}\r\n\t\t\t\t// direction='row'\r\n\t\t\t\talignContent='space-between'\r\n\t\t\t\talignItems='center'\r\n\t\t\t>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant='body2' color='primary' gutterBottom>\r\n\t\t\t\t\t\t\t\t{t('GRANT_LOGIN_INFO')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tlabel={t('email', { isProp: true })}\r\n\t\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\t\tvalue={identity.email || ''}\r\n\t\t\t\t\t\t\t\tonChange={ev => handleChange('email', ev.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tlabel={t('password', { isProp: true })}\r\n\t\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\t\tvalue={identity.password || ''}\r\n\t\t\t\t\t\t\t\tonChange={ev => handleChange('password', ev.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t{wallet && !!wallet.dirty && (\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<Typography variant='body2' color='error' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{wallet.errMsg}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t{!!identity.walletAddr && (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='body1'>\r\n\t\t\t\t\t\t\t\t\t\t{t('GRANT_WALLET_ADDRESS', { args: [identity.walletAddr] })}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t\t{t('GRANT_IDENTITY_ADDRESS', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [identity.identityAddr],\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tonClick={() => this.validateWallet(true)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t('CHECK_GRANT_IDENTITY')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\taccept='text/json'\r\n\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\tid='contained-button-file'\r\n\t\t\t\t\t\ttype='file'\r\n\t\t\t\t\t\tonChange={actions.onUploadLocalWallet}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label htmlFor='contained-button-file'>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t// variant=\"contained\"\r\n\t\t\t\t\t\t\tcomponent='span'\r\n\t\t\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('UPLOAD_ACCOUNT_DATA_JSON')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t// </div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst IdentityGrantLoginStep = IdentityHoc(GrantLogin)\r\nexport default Translate(withStyles(styles)(IdentityGrantLoginStep))\r\n","import React, { Component } from 'react'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Translate from 'components/translate/Translate'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { validEmail, validPassword } from 'helpers/validators'\r\n\r\nclass GrantInfo extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst {\r\n\t\t\temail,\r\n\t\t\temailCheck,\r\n\t\t\tpassword,\r\n\t\t\tpasswordCheck,\r\n\t\t\ttosCheck,\r\n\t\t} = this.props.identity\r\n\r\n\t\tthis.validateEmail(email, false)\r\n\t\tthis.validateEmailCheck(emailCheck, false)\r\n\t\tthis.validatePassword(password, false)\r\n\t\tthis.validatePasswordCheck(passwordCheck, false)\r\n\t\tthis.validateTOS(tosCheck, false)\r\n\t}\r\n\r\n\tvalidateEmail(email, dirty) {\r\n\t\tconst isValid = validEmail(email)\r\n\t\tthis.props.validate('email', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateEmailCheck(emailCheck, email, dirty) {\r\n\t\tconst isValid = !!emailCheck && !!email && emailCheck === email\r\n\t\tthis.props.validate('emailCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_EMAIL_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidatePassword(password, dirty) {\r\n\t\tconst isValid = validPassword(password)\r\n\t\tthis.props.validate('password', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_PASSWORD' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidatePasswordCheck(passwordCheck, password, dirty) {\r\n\t\tconst isValid = !!passwordCheck && !!password && passwordCheck === password\r\n\t\tthis.props.validate('passwordCheck', {\r\n\t\t\tisValid: isValid,\r\n\t\t\terr: { msg: 'ERR_PASSWORD_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\tvalidateTOS(accepted, dirty) {\r\n\t\tthis.props.validate('tosCheck', {\r\n\t\t\tisValid: !!accepted,\r\n\t\t\terr: { msg: 'ERR_TOS_CHECK' },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\ttosCheck(checked) {\r\n\t\tthis.props.handleChange('tosCheck', checked)\r\n\t\tthis.validateTOS(checked, true)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, identity, handleChange, invalidFields } = this.props\r\n\t\t// Errors\r\n\t\tconst {\r\n\t\t\temail,\r\n\t\t\temailCheck,\r\n\t\t\tpassword,\r\n\t\t\tpasswordCheck,\r\n\t\t\ttosCheck,\r\n\t\t} = invalidFields\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('email', { isProp: true })}\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tvalue={identity.email || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('email', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validateEmail(identity.email, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validateEmail(identity.email, false)}\r\n\t\t\t\t\t\t\terror={email && !!email.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temail && !!email.dirty ? email.errMsg : t('ENTER_VALID_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('emailCheck', { isProp: true })}\r\n\t\t\t\t\t\t\tname='emailCheck'\r\n\t\t\t\t\t\t\tvalue={identity.emailCheck || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('emailCheck', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\tthis.validateEmailCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.emailCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.email,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={emailCheck && !!emailCheck.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\temailCheck && !!emailCheck.dirty\r\n\t\t\t\t\t\t\t\t\t? emailCheck.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('ENTER_SAME_EMAIL')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('password', { isProp: true })}\r\n\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\tvalue={identity.password || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('password', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() => this.validatePassword(identity.password, true)}\r\n\t\t\t\t\t\t\tonFocus={() => this.validatePassword(identity.password, false)}\r\n\t\t\t\t\t\t\terror={password && !!password.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\tpassword && !!password.dirty\r\n\t\t\t\t\t\t\t\t\t? password.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('PASSWORD_RULES')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t('passwordCheck', { isProp: true })}\r\n\t\t\t\t\t\t\tname='passwordCheck'\r\n\t\t\t\t\t\t\tvalue={identity.passwordCheck || ''}\r\n\t\t\t\t\t\t\tonChange={ev => handleChange('passwordCheck', ev.target.value)}\r\n\t\t\t\t\t\t\tonBlur={() =>\r\n\t\t\t\t\t\t\t\tthis.validatePasswordCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.passwordCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.password,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonFocus={() =>\r\n\t\t\t\t\t\t\t\tthis.validatePasswordCheck(\r\n\t\t\t\t\t\t\t\t\tidentity.passwordCheck,\r\n\t\t\t\t\t\t\t\t\tidentity.password,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={passwordCheck && !!passwordCheck.dirty}\r\n\t\t\t\t\t\t\tmaxLength={128}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\tpasswordCheck && !!passwordCheck.dirty\r\n\t\t\t\t\t\t\t\t\t? passwordCheck.errMsg\r\n\t\t\t\t\t\t\t\t\t: t('PASSWORD_CHECK_RULES')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\terror={tosCheck && tosCheck.dirty}\r\n\t\t\t\t\t\t\tcomponent='fieldset'\r\n\t\t\t\t\t\t\t// className={classes.formControl}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tchecked={!!identity.tosCheck}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ev => this.tosCheck(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t\t\tvalue='tosCheck'\r\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel={t('TOS_CHECK')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{tosCheck && !!tosCheck.dirty && (\r\n\t\t\t\t\t\t\t\t<FormHelperText>{tosCheck.errMsg}</FormHelperText>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst IdentityGrantInfoStep = IdentityHoc(GrantInfo)\r\nexport default Translate(withStyles(styles)(IdentityGrantInfoStep))\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { createLocalWallet } from 'services/wallet/wallet'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { AUTH_TYPES } from 'constants/misc'\r\n\r\nclass QuickDeploy extends Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.validateIdentity()\r\n\t\tif (!this.props.identity.identityAddr) {\r\n\t\t\tthis.initLocalWallet()\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst currIdentity = this.props.identity.identityAddr\r\n\t\tif (!!currIdentity && currIdentity !== prevProps.identity.identityAddr) {\r\n\t\t\tthis.validateIdentity()\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateIdentity = () => {\r\n\t\tconst { validate, identity } = this.props\r\n\t\tconst { identityAddr } = identity\r\n\r\n\t\tvalidate('identityAddr', {\r\n\t\t\tisValid: !!identityAddr,\r\n\t\t\terr: { msg: 'ERR_IDENTITY_NOT_GENERATED' },\r\n\t\t\tdirty: false,\r\n\t\t})\r\n\t}\r\n\r\n\tinitLocalWallet = () => {\r\n\t\tconst { handleChange, identity, actions } = this.props\r\n\t\tconst { email, password } = identity\r\n\r\n\t\tconst walletData = createLocalWallet({\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\tauthType: AUTH_TYPES.QUICK.name,\r\n\t\t})\r\n\r\n\t\twalletData.email = email\r\n\t\twalletData.password = password\r\n\r\n\t\tconst walletAddr = walletData.address\r\n\r\n\t\tactions.getIdentityTxData({\r\n\t\t\towner: walletAddr,\r\n\t\t\tprivLevel: 3,\r\n\t\t})\r\n\r\n\t\thandleChange('wallet', walletData)\r\n\t\thandleChange('walletAddr', walletAddr)\r\n\t\thandleChange('registerAccount', true)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t, identity, classes, waitingQuick } = this.props\r\n\t\tconst { walletAddr, identityAddr } = identity\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item sm={12}>\r\n\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t{t('QUICK_WALLET_ADDRESS')}\r\n\t\t\t\t\t\t\t{' ' + walletAddr}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography paragraph variant='body2'>\r\n\t\t\t\t\t\t\t{t('QUICK_WALLET_ADDRESS_INFO')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography paragraph variant='subheading'>\r\n\t\t\t\t\t\t\t{t('IDENTITY_ADDRESS_INFO', {\r\n\t\t\t\t\t\t\t\targs: [identityAddr],\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nQuickDeploy.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\taccount: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst { memory } = state\r\n\r\n\treturn {\r\n\t\twaitingQuick: memory.spinners['getting-quick-identity'],\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nconst IdentityQuickDeployStep = IdentityHoc(QuickDeploy)\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(IdentityQuickDeployStep)))\r\n","import React, { Component } from 'react'\r\nimport { withReactRouterLink } from 'components/common/rr_hoc/RRHoc.js'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { getLocalWallet } from 'services/wallet/wallet'\r\n\r\nconst RRButton = withReactRouterLink(Button)\r\n\r\nclass QuickLogin extends Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.validateWallet(false)\r\n\t}\r\n\r\n\tvalidateWallet = dirty => {\r\n\t\tconst { identity, handleChange, validate } = this.props\r\n\t\tconst { password, email, authType } = identity\r\n\t\tif (!email) {\r\n\t\t}\r\n\r\n\t\tlet wallet = {}\r\n\t\tlet error = null\r\n\r\n\t\ttry {\r\n\t\t\tif (email && password) {\r\n\t\t\t\tconst walletData = getLocalWallet({\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tauthType,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (!!walletData && walletData.data) {\r\n\t\t\t\t\twallet = { ...walletData.data }\r\n\t\t\t\t\twallet.email = email\r\n\t\t\t\t\twallet.password = password\r\n\t\t\t\t\twallet.authType = authType\r\n\t\t\t\t\twallet.identity = {\r\n\t\t\t\t\t\taddress: walletData.identity,\r\n\t\t\t\t\t\tprivileges: walletData.identityPrivileges,\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thandleChange('identityAddr', walletData.identity)\r\n\t\t\t\t}\r\n\r\n\t\t\t\thandleChange('wallet', wallet)\r\n\t\t\t\thandleChange('walletAddr', wallet.address)\r\n\t\t\t\thandleChange('identityData', wallet.identity)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err)\r\n\t\t\terror = err && err.message ? err.message : err\r\n\t\t}\r\n\r\n\t\tvalidate('wallet', {\r\n\t\t\tisValid: !!wallet.address,\r\n\t\t\terr: { msg: 'ERR_QUICK_WALLET_LOGIN', args: [error] },\r\n\t\t\tdirty: dirty,\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tt,\r\n\t\t\tidentity,\r\n\t\t\thandleChange,\r\n\t\t\tinvalidFields,\r\n\t\t\t// classes,\r\n\t\t\t// actions\r\n\t\t} = this.props\r\n\t\t// Errors\r\n\t\tconst { wallet } = invalidFields\r\n\r\n\t\tif (!identity.email) {\r\n\t\t\treturn <RRButton to='/'>{'Email error'}</RRButton>\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t// <div>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={2}\r\n\t\t\t\t// direction='row'\r\n\t\t\t\talignContent='space-between'\r\n\t\t\t\talignItems='center'\r\n\t\t\t>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant='body2' color='primary' gutterBottom>\r\n\t\t\t\t\t\t\t\t{t('QUICK_LOGIN_INFO', { args: [identity.email] })}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tlabel={t('password', { isProp: true })}\r\n\t\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\t\tvalue={identity.password || ''}\r\n\t\t\t\t\t\t\t\tonChange={ev => handleChange('password', ev.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t{wallet && !!wallet.dirty && (\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<Typography variant='body2' color='error' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{wallet.errMsg}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t{!!identity.walletAddr && (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='body1'>\r\n\t\t\t\t\t\t\t\t\t\t{t('QUICK_WALLET_ADDRESS', { args: [identity.walletAddr] })}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t\t\t\t\t{t('QUICK_IDENTITY_ADDRESS', {\r\n\t\t\t\t\t\t\t\t\t\t\targs: [identity.identityAddr],\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tonClick={() => this.validateWallet(true)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t('CHECK_QUICK_IDENTITY')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t// </div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst IdentityQuickLoginStep = IdentityHoc(QuickLogin)\r\nexport default Translate(withStyles(styles)(IdentityQuickLoginStep))\r\n","import React, { Component } from 'react'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Button from '@material-ui/core/Button'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nclass QuickRecover extends Component {\r\n\tcomponentDidMount() {}\r\n\r\n\trender() {\r\n\t\tconst { t, classes, actions } = this.props\r\n\t\treturn (\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={2}\r\n\t\t\t\talignContent='space-between'\r\n\t\t\t\talignItems='center'\r\n\t\t\t>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\taccept='text/json'\r\n\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\tid='contained-button-file'\r\n\t\t\t\t\t\ttype='file'\r\n\t\t\t\t\t\tonChange={actions.onUploadLocalWallet}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label htmlFor='contained-button-file'>\r\n\t\t\t\t\t\t<Button component='span' className={classes.button}>\r\n\t\t\t\t\t\t\t{t('UPLOAD_ACCOUNT_DATA_JSON')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst IdentityQuickRecoverStep = IdentityHoc(QuickRecover)\r\nexport default Translate(withStyles(styles)(IdentityQuickRecoverStep))\r\n","import React, { useEffect, useCallback } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { bigNumberify } from 'ethers/utils'\r\nimport { formatTokenAmount } from 'helpers/formatters'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\nimport { execute, ownerIdentities as updateOwnerIdentities } from 'actions'\r\nimport { selectSpinnerById, t } from 'selectors'\r\n\r\nimport Dropdown from 'components/common/dropdown'\r\n\r\nconst getIdentitiesForDropdown = (ownerIdentities = [], t) =>\r\n\townerIdentities.map(id => {\r\n\t\treturn {\r\n\t\t\tvalue: id.identity + '-' + id.privLevel,\r\n\t\t\tlabel: t('IDENTITY_OPTION_DATA', {\r\n\t\t\t\targs: [\r\n\t\t\t\t\tid.identity,\r\n\t\t\t\t\tid.privLevel,\r\n\t\t\t\t\tformatTokenAmount(bigNumberify(id.balanceDAI).toString(), 18, true),\r\n\t\t\t\t\t'SAI',\r\n\t\t\t\t],\r\n\t\t\t}),\r\n\t\t}\r\n\t})\r\n\r\nfunction FullLogin(props) {\r\n\tconst { identity, handleChange, validate } = props\r\n\tconst { wallet, ownerIdentities, identityContractAddress } = identity\r\n\tconst { address } = wallet\r\n\tconst spinner = useSelector(state =>\r\n\t\tselectSpinnerById(state, 'getting-owner-identities')\r\n\t)\r\n\r\n\tconst validateIdentity = useCallback(\r\n\t\tdirty => {\r\n\t\t\tconst identityDataSplit = (identityContractAddress || '').split('-')\r\n\t\t\tconst identityData = {\r\n\t\t\t\taddress: identityDataSplit[0],\r\n\t\t\t\tprivileges: parseInt(identityDataSplit[1] || 0),\r\n\t\t\t}\r\n\r\n\t\t\thandleChange('wallet', wallet)\r\n\t\t\thandleChange('walletAddr', address)\r\n\t\t\thandleChange('identityData', identityData)\r\n\r\n\t\t\tvalidate('identityContractAddress', {\r\n\t\t\t\tisValid: !!identityData.address,\r\n\t\t\t\terr: { msg: 'ERR_LOCAL_WALLET_LOGIN' },\r\n\t\t\t\tdirty: dirty,\r\n\t\t\t})\r\n\t\t},\r\n\t\t[identityContractAddress, handleChange, wallet, address, validate]\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(updateOwnerIdentities({ owner: address }))\r\n\t\tvalidateIdentity(false)\r\n\t\t// We need it just once on mount\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tvalidateIdentity(true)\r\n\t}, [identity.identityContractAddress, validateIdentity])\r\n\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tcontainer\r\n\t\t\tspacing={2}\r\n\t\t\t// direction='row'\r\n\t\t\talignContent='space-between'\r\n\t\t\talignItems='center'\r\n\t\t>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Typography variant='body2' color='primary' gutterBottom>\r\n\t\t\t\t\t\t\t{t('FULL_LOGIN_INFO')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tlabel={t('SELECT_IDENTITY')}\r\n\t\t\t\t\t\t\thelperText={t('SELECT_IDENTITY_INFO')}\r\n\t\t\t\t\t\t\tonChange={val => handleChange('identityContractAddress', val)}\r\n\t\t\t\t\t\t\tsource={getIdentitiesForDropdown(ownerIdentities, t)}\r\n\t\t\t\t\t\t\tvalue={identityContractAddress || ''}\r\n\t\t\t\t\t\t\thtmlId='label-identityContractAddress'\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tloading={!!spinner}\r\n\t\t\t\t\t\t\tnoSrcLabel={t('NO_IDENTITIES_FOR_ADDR', { args: [address] })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nconst IdentityFullLoginStep = IdentityHoc(FullLogin)\r\nexport default withStyles(styles)(IdentityFullLoginStep)\r\n","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Box from '@material-ui/core/Box'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport FullLogin from './FullLogin'\r\nimport IdentityContractAddressEthDeploy from './IdentityContractAddressEthDeploy'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbutton: {\r\n\t\theight: '50%',\r\n\t\tminHeight: theme.spacing(4),\r\n\t},\r\n\tcontainer: {},\r\n}))\r\n\r\nexport function ExternalConnect({ t, ...rest }) {\r\n\tconst classes = useStyles()\r\n\tconst [connectType, setConnectType] = useState('')\r\n\r\n\treturn (\r\n\t\t<Grid container alignItems='stretch' className={classes.buttons}>\r\n\t\t\t<Grid\r\n\t\t\t\titem\r\n\t\t\t\tcontainer\r\n\t\t\t\tdirection='column'\r\n\t\t\t\talignItems='stretch'\r\n\t\t\t\tjustify='space-evenly'\r\n\t\t\t>\r\n\t\t\t\t{connectType !== 'create' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Typography variant='h5' gutterBottom>\r\n\t\t\t\t\t\t\t\t{t('SELECT_EXISTING_IDENTITY')}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<FullLogin {...rest} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\t// alignItems='stretch'\r\n\t\t\t\t\t\t\tclassName={classes.buttons}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<Button onClick={() => setConnectType('create')}>\r\n\t\t\t\t\t\t\t\t\t{t('CREATE_NEW_IDENTITY_LINK')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{connectType === 'create' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Typography variant='h5' gutterBottom>\r\n\t\t\t\t\t\t\t{t('CREATE_NEW_IDENTITY')}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<IdentityContractAddressEthDeploy {...rest} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n","export const styles = {\r\n\troot: {\r\n\t\tcolor: 'purple',\r\n\t\t'&$active': {\r\n\t\t\tcolor: 'green',\r\n\t\t},\r\n\t},\r\n\tactive: {\r\n\t\tcolor: 'yellow',\r\n\t},\r\n\tstepperWrapper: {\r\n\t\t// display: 'flex',\r\n\t\tposition: 'absolute',\r\n\t\tbottom: 0,\r\n\t\tleft: 0,\r\n\t\tright: 0,\r\n\t\ttop: 0,\r\n\t},\r\n\tpagePaper: {\r\n\t\tposition: 'absolute',\r\n\t\tbottom: 0,\r\n\t\tleft: 0,\r\n\t\tright: 0,\r\n\t\ttop: 115,\r\n\t},\r\n\tpageContent: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\tleft: 20,\r\n\t\tright: 20,\r\n\t\tbottom: 50,\r\n\t\tpadding: 20,\r\n\t\toverflowY: 'auto',\r\n\t\toverflowX: 'hidden',\r\n\t\tdisplay: 'flex',\r\n\t\tWebkitOverflowScrolling: 'touch',\r\n\t\t'@media(max-width:500px)': {\r\n\t\t\tpaddingLeft: 0,\r\n\t\t\tpaddingRight: 0,\r\n\t\t},\r\n\t},\r\n\tcontrols: {\r\n\t\tposition: 'absolute',\r\n\t\tbottom: 5,\r\n\t\tleft: 20,\r\n\t\tright: 20,\r\n\t},\r\n\tright: {\r\n\t\ttextAlign: 'right',\r\n\t\tdisplay: 'inline-block',\r\n\t\twidth: '50%',\r\n\t\t'@media(max-width:475px)': {\r\n\t\t\twidth: '86%',\r\n\t\t},\r\n\t},\r\n\tleft: {\r\n\t\tdisplay: 'inline-block',\r\n\t\ttextAlign: 'left',\r\n\t\twidth: '50%',\r\n\t\t'@media(max-width:475px)': {\r\n\t\t\twidth: '14%',\r\n\t\t},\r\n\t},\r\n\tmobileStepper: {\r\n\t\twidth: '100%',\r\n\t\t'& div': {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '10px',\r\n\t\t},\r\n\t},\r\n\tmobileStepLabel: {\r\n\t\t'& span': {\r\n\t\t\tfontSize: '24px',\r\n\t\t\tmargin: '14px auto',\r\n\t\t},\r\n\t\ttextAlign: 'center',\r\n\t\twidth: 'auto',\r\n\t},\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport { Stepper } from 'react-step/lib/stepper'\r\nimport { withStepper } from 'react-step/lib/with-stepper'\r\nimport StepperMUI from '@material-ui/core/Stepper'\r\nimport MobileStepper from '@material-ui/core/MobileStepper'\r\nimport Step from '@material-ui/core/Step'\r\nimport StepLabel from '@material-ui/core/StepLabel'\r\nimport Button from '@material-ui/core/Button'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Translate from 'components/translate/Translate'\r\nimport { styles } from './styles'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\n// const MyStep = ({ page, active, index, children, theme, canAdvance, canFinish, canReverse, setPageIndex, canAdvanceToPage, currentPage, goToPage, ...other }) => {}\r\nconst StepperNav = ({ pages, currentPage, classes, ...other }) => {\r\n\tif (window.innerWidth <= 768) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<StepLabel className={classes.mobileStepLabel}>\r\n\t\t\t\t\t({currentPage + 1}/{pages.length}) {pages[currentPage].title}\r\n\t\t\t\t</StepLabel>\r\n\t\t\t\t<MobileStepper\r\n\t\t\t\t\tactiveStep={currentPage}\r\n\t\t\t\t\tsteps={pages.length}\r\n\t\t\t\t\tposition={'static'}\r\n\t\t\t\t\tvariant='progress'\r\n\t\t\t\t\tclassName={classes.mobileStepper}\r\n\t\t\t\t></MobileStepper>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<StepperMUI alternativeLabel activeStep={currentPage}>\r\n\t\t\t{pages.map((page, i) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Step key={page.title}>\r\n\t\t\t\t\t\t<StepLabel>{page.title}</StepLabel>\r\n\t\t\t\t\t</Step>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</StepperMUI>\r\n\t)\r\n}\r\n\r\nclass MaterialStepper extends React.Component {\r\n\t// onComplete() {\r\n\t//     // console.log('currPage', this.currPage)\r\n\t//     let props = this.props\r\n\t//     let page = props.pages[props.currentPage]\r\n\r\n\t//     // console.log('props.pages[props.currentPage]', page.component)\r\n\t// }\r\n\r\n\tgoToPage(nextStep) {\r\n\t\tlet canAdvance =\r\n\t\t\tnextStep > this.props.currentPage && this.canAdvanceNextToPage()\r\n\t\tlet canGoBack = nextStep < this.props.currentPage\r\n\r\n\t\tif (canAdvance || canGoBack) {\r\n\t\t\tthis.props.setPageIndex(nextStep)\r\n\t\t}\r\n\t}\r\n\r\n\tcanAdvanceNextToPage() {\r\n\t\t/* TODO: add check for optional steps that can be skipped\r\n\t\t */\r\n\t\tlet page = this.props.pages[this.props.currentPage]\r\n\t\tif (\r\n\t\t\tthis.props.canAdvance &&\r\n\t\t\t!Object.keys(this.props.validations[page.props.validateId] || {}).length\r\n\t\t) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tisValidPage() {\r\n\t\tlet page = this.props.pages[this.props.currentPage]\r\n\t\treturn !Object.keys(this.props.validations[page.props.validateId] || {})\r\n\t\t\t.length\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { pages, component, validations, currentPage, t, classes, ...props } = {\r\n\t\t\t...this.props,\r\n\t\t}\r\n\t\tlet page = pages[currentPage]\r\n\t\tlet Comp = page.component\r\n\r\n\t\treturn (\r\n\t\t\t<div className={classes.stepperWrapper}>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\troot: classes.stepperNav,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<StepperNav\r\n\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\tpages={pages}\r\n\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\t\tgoToPage={this.goToPage.bind(this)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<Paper\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\troot: classes.pagePaper,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className={classes.pageContent}>{<Comp {...page.props} />}</div>\r\n\r\n\t\t\t\t\t<div className={classes.controls}>\r\n\t\t\t\t\t\t<div className={classes.left}>\r\n\t\t\t\t\t\t\t{props.canReverse &&\r\n\t\t\t\t\t\t\t!(page.disableBtnsIfValid && this.isValidPage()) ? (\r\n\t\t\t\t\t\t\t\t<Button onClick={() => props.setPageIndex(currentPage - 1)}>\r\n\t\t\t\t\t\t\t\t\t{t('BACK')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className={classes.right}>\r\n\t\t\t\t\t\t\t{/* <Button label='Cancel' onClick={this.cancel}/> */}\r\n\t\t\t\t\t\t\t{page.cancelBtn &&\r\n\t\t\t\t\t\t\t!(page.disableBtnsIfValid && this.isValidPage()) ? (\r\n\t\t\t\t\t\t\t\t<page.cancelBtn />\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t{this.canAdvanceNextToPage() && !page.completeBtn ? (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\tonClick={this.goToPage.bind(this, currentPage + 1)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t('CONTINUE')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : !page.completeBtn ? (\r\n\t\t\t\t\t\t\t\t<Button label='Continue' disabled>\r\n\t\t\t\t\t\t\t\t\t{t('CONTINUE')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t{page.completeBtn && this.isValidPage() ? (\r\n\t\t\t\t\t\t\t\t<page.completeBtn />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst WithMaterialStepper = withStepper(\r\n\twithStyles(styles)(Translate(MaterialStepper))\r\n)\r\n\r\nclass MyMaterialStepper extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Stepper pages={this.props.pages} style={{ display: 'block' }}>\r\n\t\t\t\t<WithMaterialStepper\r\n\t\t\t\t\titemType={this.props.itemType}\r\n\t\t\t\t\tvalidations={this.props.validations}\r\n\t\t\t\t/>\r\n\t\t\t</Stepper>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nMyMaterialStepper.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n\tpages: PropTypes.array.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n\tlet memory = state.memory\r\n\treturn {\r\n\t\tvalidations: memory.validations,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(MyMaterialStepper)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport actions from 'actions'\r\nimport ValidItemHoc from 'components/common/stepper/ValidItemHoc'\r\nimport MaterialStepper from 'components/common/stepper/MaterialUiStepper'\r\nimport Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nclass IdentitySteps extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tpages: this.mapPages(),\r\n\t\t}\r\n\r\n\t\t// TODO: Check if it is possible to need state update\r\n\t}\r\n\r\n\tmapPages = () => {\r\n\t\tconst {\r\n\t\t\tGoBtn,\r\n\t\t\tCancelBtn,\r\n\t\t\tt,\r\n\t\t\tonSave,\r\n\t\t\tstepsId,\r\n\t\t\tstepsPages = [],\r\n\t\t\tstepsPreviewPage,\r\n\t\t\tvalidateIdBase,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\r\n\t\tconst cancelButton = () => (\r\n\t\t\t<CancelBtn {...rest} stepsId={stepsId} onSave={onSave} t={t} />\r\n\t\t)\r\n\r\n\t\tconst validateId = (validateIdBase || '') + '-' + stepsId\r\n\r\n\t\tconst pages = stepsPages.map((page, index) => {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: t(page.title),\r\n\t\t\t\tcancelBtn: cancelButton,\r\n\t\t\t\tcomponent: ValidItemHoc(page.page),\r\n\t\t\t\tdisableBtnsIfValid: page.disableBtnsIfValid,\r\n\t\t\t\tprops: { ...this.props, validateId: validateId + '-' + index },\r\n\t\t\t\tcompleteBtn: page.final\r\n\t\t\t\t\t? () => <GoBtn {...rest} stepsId={stepsId} onSave={onSave} t={t} />\r\n\t\t\t\t\t: undefined,\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn pages\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <MaterialStepper pages={this.state.pages} />\r\n\t}\r\n}\r\n\r\nIdentitySteps.propTypes = {\r\n\tactions: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps() {\r\n\t// const persist = state.persist\r\n\t// const memory = state.memory\r\n\treturn {\r\n\t\t// account: persist.account\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tactions: bindActionCreators(actions, dispatch),\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Translate(withStyles(styles)(IdentitySteps)))\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport IdentityHoc from './IdentityHoc'\r\nimport IdentityContractAddressEthDeploy from './IdentityContractAddressEthDeploy'\r\n// import IdentityContractAddressEthTransaction from './IdentityContractAddressEthTransaction'\r\nimport IdentityContractOwner from './IdentityContractOwner'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport GrantInfo from './GrantInfo'\r\nimport GrantDeploy from './GrantDeploy'\r\nimport GrantLogin from './GrantLogin'\r\nimport QuickInfo from './QuickInfo'\r\nimport QuickDeploy from './QuickDeploy'\r\nimport QuickLogin from './QuickLogin'\r\nimport QuickRecover from './QuickRecover'\r\n// import FullLogin from './FullLogin'\r\nimport { ExternalConnect } from './ExternalWalletConnect'\r\nimport IdentitySteps from './IdentitySteps'\r\n// import Translate from 'components/translate/Translate'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { styles } from './styles'\r\n\r\nconst GoBtn = ({ waiting, save, t, classes, ...rest }) => {\r\n\treturn (\r\n\t\t<span className={classes.buttonProgressWrapper}>\r\n\t\t\t<Button color='primary' onClick={save} disabled={waiting}>\r\n\t\t\t\t{t('LETS_GO')}\r\n\t\t\t</Button>\r\n\t\t\t{waiting && (\r\n\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t)}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nconst GoBtnWithIdentity = withStyles(styles)(IdentityHoc(GoBtn))\r\n\r\nconst CancelBtn = ({ ...props }) => {\r\n\treturn <Button onClick={props.cancel}>{props.t('CANCEL')}</Button>\r\n}\r\n\r\nconst CancelBtnWithIdentity = IdentityHoc(CancelBtn)\r\n\r\nconst common = {\r\n\tGoBtn: GoBtnWithIdentity,\r\n\tCancelBtn: CancelBtnWithIdentity,\r\n\tvalidateIdBase: 'identity-',\r\n}\r\n\r\nexport const CreateGrantIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='grant-identity-create'\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'GRANT_INFO', page: GrantInfo },\r\n\t\t\t{\r\n\t\t\t\ttitle: 'GRANT_DEPLOY',\r\n\t\t\t\tpage: GrantDeploy,\r\n\t\t\t\tfinal: true,\r\n\t\t\t\tdisableBtnsIfValid: true,\r\n\t\t\t},\r\n\t\t]}\r\n\t/>\r\n)\r\n\r\nexport const LoginGrantIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='grant-identity-login'\r\n\t\tstepsPages={[{ title: 'GRANT_LOGIN', page: GrantLogin, final: true }]}\r\n\t/>\r\n)\r\n\r\nexport const CreteFullIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='full-identity-create'\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'SET_IDENTITY_OWNER_ADDRESS', page: IdentityContractOwner },\r\n\t\t\t{\r\n\t\t\t\ttitle: 'GENERATE_IDENTITY_CONTRACT_ADDRESS',\r\n\t\t\t\tpage: IdentityContractAddressEthDeploy,\r\n\t\t\t\tfinal: true,\r\n\t\t\t},\r\n\t\t\t// { title: 'DEPLOY_IDENTITY_CONTRACT_ADDRESS', page: IdentityContractAddressEthTransaction, final: true }\r\n\t\t]}\r\n\t/>\r\n)\r\n\r\nexport const LoginStandardIdentity = props => {\r\n\treturn (\r\n\t\t<IdentitySteps\r\n\t\t\t{...props}\r\n\t\t\t{...common}\r\n\t\t\tstepsId='full-identity-login'\r\n\t\t\tstepsPages={[\r\n\t\t\t\t{ title: 'SET_IDENTITY_OWNER_ADDRESS', page: IdentityContractOwner },\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'CONNECT_STANDARD_IDENTITY',\r\n\t\t\t\t\tpage: ExternalConnect,\r\n\t\t\t\t\tfinal: true,\r\n\t\t\t\t},\r\n\t\t\t]}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport const CreateQuickIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='quick-identity-create'\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'QUICK_INFO', page: QuickInfo },\r\n\t\t\t{ title: 'QUICK_DEPLOY', page: QuickDeploy, final: true },\r\n\t\t]}\r\n\t/>\r\n)\r\n\r\nexport const LoginQuickIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='quick-identity-login'\r\n\t\tstepsPages={[{ title: 'QUICK_LOGIN', page: QuickLogin, final: true }]}\r\n\t/>\r\n)\r\n\r\nexport const RecoverQuickIdentity = props => (\r\n\t<IdentitySteps\r\n\t\t{...props}\r\n\t\t{...common}\r\n\t\tstepsId='quick-identity-recover'\r\n\t\tstepsPages={[\r\n\t\t\t{ title: 'QUICK_RECOVER_DATA', page: QuickRecover },\r\n\t\t\t{ title: 'QUICK_LOGIN', page: QuickLogin, final: true },\r\n\t\t]}\r\n\t/>\r\n)\r\n\r\nexport const DemoIdentity = props => (\r\n\t<IdentitySteps {...props} {...common} stepsPages={[]} />\r\n)\r\n","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Box from '@material-ui/core/Box'\r\nimport Logo from 'components/common/icons/AdexIconTxt'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport SNT_VITALIK_BUTERIN_RIDES_EDDIE_WHILE_PUMPING_IT_UP from 'resources/eddie/eddie-14.png'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\ttextAlign: 'center',\r\n\t},\r\n\tvitalik: {\r\n\t\tbackgroundImage: `url(${SNT_VITALIK_BUTERIN_RIDES_EDDIE_WHILE_PUMPING_IT_UP})`,\r\n\t\tbackgroundPosition: 'center',\r\n\t\tbackgroundRepeat: 'no-repeat',\r\n\t\tbackgroundSize: 'contain',\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxWidth: theme.breakpoints.values.md,\r\n\t\tmargin: 'auto',\r\n\t},\r\n\tlogo: {\r\n\t\theight: '3rem',\r\n\t\twidth: '100%',\r\n\t},\r\n}))\r\n\r\nexport default function Home({ t, ...rest }) {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<Box width={1} height={1} className={classes.root} alignItems='center'>\r\n\t\t\t<Box\r\n\t\t\t\theight={1}\r\n\t\t\t\tdisplay='flex'\r\n\t\t\t\tflexDirection='column'\r\n\t\t\t\talignItems='center'\r\n\t\t\t\tjustifyContent='center'\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\tclassName={classes.container}\r\n\t\t\t>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Logo className={classes.logo} />\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Typography variant='h2' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS_INFO_1')}\r\n\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS_INFO_2')}\r\n\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t<Typography variant='body1' gutterBottom>\r\n\t\t\t\t\t\t{t('FUTURE_OF_THE_ADS_INFO_3')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t<Typography variant='h6' component='h6' gutterBottom>\r\n\t\t\t\t\t\t{t('GET_IN_TOUCH')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box\r\n\t\t\t\t\theight='30%'\r\n\t\t\t\t\tposition='relative'\r\n\t\t\t\t\tclassName={classes.vitalik}\r\n\t\t\t\t\talignSelf='stretch'\r\n\t\t\t\t></Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tdialog: {\r\n\t\theight: '100vh',\r\n\t\twidth: theme.maxWidth || 1200,\r\n\t\tmaxWidth: '100%',\r\n\t},\r\n}))\r\n\r\nexport default function DialogHoc(Decorated) {\r\n\tfunction JustDialog({ ...rest }) {\r\n\t\tconst classes = useStyles()\r\n\r\n\t\treturn (\r\n\t\t\t<Dialog open={true} classes={{ paper: classes.dialog }}>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Decorated {...rest} />\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n\r\n\treturn JustDialog\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport {\r\n\tmetamaskChecks,\r\n\tmetamaskNetworkCheck,\r\n\tgetRelayerConfig,\r\n\texecute,\r\n} from 'actions'\r\nimport { Route, Switch, Redirect } from 'react-router'\r\nimport Dashboard from 'components/dashboard/dashboard/Dashboard'\r\nimport ConnectHoc from 'components/signin/ConnectHoc'\r\nimport {\r\n\tCreateGrantIdentity,\r\n\tCreateQuickIdentity,\r\n\tCreteFullIdentity,\r\n\t// DemoIdentity,\r\n\tLoginGrantIdentity,\r\n\tLoginStandardIdentity,\r\n\tLoginQuickIdentity,\r\n\tRecoverQuickIdentity,\r\n} from 'components/signin/identity/Identity'\r\nimport SideSelect from 'components/signin/side-select/SideSelect'\r\nimport PageNotFound from 'components/page_not_found/PageNotFound'\r\nimport Home from 'components/signin/Home'\r\nimport JustDialog from 'components/common/dialog/JustDialog'\r\nimport { migrateLegacyWallet, removeLegacyKey } from 'services/wallet/wallet'\r\nimport Translate from 'components/translate/Translate'\r\nimport { selectAuth, selectWallet, selectLocation } from 'selectors'\r\n\r\nconst ConnectedCreateGrantIdentity = ConnectHoc(JustDialog(CreateGrantIdentity))\r\nconst ConnectedGrantLogin = ConnectHoc(JustDialog(LoginGrantIdentity))\r\nconst ConnectedCreateQuickIdentity = ConnectHoc(JustDialog(CreateQuickIdentity))\r\nconst ConnectedQuickLogin = ConnectHoc(JustDialog(LoginQuickIdentity))\r\nconst ConnectedQuickRecovery = ConnectHoc(JustDialog(RecoverQuickIdentity))\r\nconst ConnectedCreateFullIdentity = ConnectHoc(JustDialog(CreteFullIdentity))\r\nconst ConnectedLoginStandardIdentity = ConnectHoc(\r\n\tJustDialog(LoginStandardIdentity)\r\n)\r\nconst ConnectedRoot = ConnectHoc(Home)\r\n\r\nconst PrivateRoute = ({ component: Component, auth, ...other }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...other}\r\n\t\t\trender={props =>\r\n\t\t\t\tauth === true ? ( //|| true\r\n\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nconst handleLegacyWallet = wallet => {\r\n\tconst { type, email, password, authType } = wallet || {}\r\n\r\n\tif (!type && email && password && authType === 'grant') {\r\n\t\tmigrateLegacyWallet({ email, password })\r\n\t\tremoveLegacyKey({ email, password })\r\n\t}\r\n}\r\n\r\nconst Root = () => {\r\n\tconst auth = useSelector(selectAuth)\r\n\tconst wallet = useSelector(selectWallet)\r\n\tconst location = useSelector(selectLocation)\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(getRelayerConfig())\r\n\t\texecute(metamaskChecks())\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\thandleLegacyWallet(wallet)\r\n\t}, [wallet])\r\n\r\n\tuseEffect(() => {\r\n\t\texecute(metamaskNetworkCheck())\r\n\t}, [location])\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<PrivateRoute auth={auth} path='/dashboard/:side' component={Dashboard} />\r\n\t\t\t<PrivateRoute auth={auth} path='/side-select' component={SideSelect} />\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/'\r\n\t\t\t\tcomponent={props => <ConnectedRoot {...props} noBackground />}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/identity/grant'\r\n\t\t\t\tcomponent={props => (\r\n\t\t\t\t\t<ConnectedCreateGrantIdentity {...props} noBackground />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/identity/quick'\r\n\t\t\t\tcomponent={props => (\r\n\t\t\t\t\t<ConnectedCreateQuickIdentity {...props} noBackground />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/login/grant'\r\n\t\t\t\tcomponent={props => <ConnectedGrantLogin {...props} noBackground />}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/login/full'\r\n\t\t\t\tcomponent={props => (\r\n\t\t\t\t\t<ConnectedLoginStandardIdentity {...props} noBackground />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/login/quick'\r\n\t\t\t\tcomponent={props => <ConnectedQuickLogin {...props} noBackground />}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/recover/quick'\r\n\t\t\t\tcomponent={props => <ConnectedQuickRecovery {...props} noBackground />}\r\n\t\t\t/>\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/identity/full'\r\n\t\t\t\tcomponent={props => (\r\n\t\t\t\t\t<ConnectedCreateFullIdentity {...props} noBackground />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t{/* <Route exact path=\"/identity/demo\" component={DemoIdentity} /> */}\r\n\t\t\t<Route>\r\n\t\t\t\t<PageNotFound />\r\n\t\t\t</Route>\r\n\t\t</Switch>\r\n\t)\r\n}\r\n\r\nexport default Translate(Root)\r\n","import React, { Component } from 'react'\r\nimport { HashRouter as Router } from 'react-router-dom'\r\nimport 'react-image-crop/dist/ReactCrop.css'\r\n// import './App.css'\r\nimport { Provider } from 'react-redux'\r\nimport configureStore from 'store/configureStore'\r\nimport history from 'store/history'\r\nimport { ConnectedRouter } from 'connected-react-router'\r\nimport Toast from 'components/toast/Toast'\r\nimport Confirm from 'components/confirm/Confirm'\r\nimport { PersistGate } from 'redux-persist/integration/react'\r\nimport Root from './Root'\r\nimport { MuiThemeProvider } from '@material-ui/core/styles'\r\nimport { themeMUI } from './themeMUi'\r\nimport MomentUtils from '@date-io/moment'\r\nimport { MuiPickersUtilsProvider } from 'material-ui-pickers'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\n\r\nconst { persistor, store } = configureStore\r\n// console.log('initial store', store.getState())\r\n\r\nconst onBeforeLift = () => {\r\n\t// take some action before the gate lifts\r\n}\r\n\r\nclass App extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<CssBaseline />\r\n\t\t\t\t<MuiThemeProvider theme={themeMUI}>\r\n\t\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t\t<Provider store={store}>\r\n\t\t\t\t\t\t\t<PersistGate onBeforeLift={onBeforeLift} persistor={persistor}>\r\n\t\t\t\t\t\t\t\t<ConnectedRouter history={history}>\r\n\t\t\t\t\t\t\t\t\t<Router>\r\n\t\t\t\t\t\t\t\t\t\t<div className='adex-dapp'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Root />\r\n\t\t\t\t\t\t\t\t\t\t\t<Toast />\r\n\t\t\t\t\t\t\t\t\t\t\t<Confirm />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Router>\r\n\t\t\t\t\t\t\t\t</ConnectedRouter>\r\n\t\t\t\t\t\t\t</PersistGate>\r\n\t\t\t\t\t\t</Provider>\r\n\t\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\t</MuiThemeProvider>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n)\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error)\r\n\t\t})\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type')\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t)\r\n\t\t})\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister()\r\n\t\t})\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './components/App/App'\r\nimport { unregister } from './serviceWorker'\r\n\r\n// Temp here?\r\nObject.values = function* values(obj) {\r\n\tfor (let prop of Object.keys(obj)) {\r\n\t\tyield obj[prop]\r\n\t}\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\nunregister()\r\n","module.exports = __webpack_public_path__ + \"static/media/no-image-box-eddie.09d4c583.jpg\";","module.exports = __webpack_public_path__ + \"static/media/trezor-logo-h.1da00f60.png\";","module.exports = \"data:image/png;base64,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\"","import { Signer } from 'ethers'\r\nimport { ethers, utils } from 'ethers'\r\nimport LedgerEth from '@ledgerhq/hw-app-eth'\r\nimport TransportU2F from '@ledgerhq/hw-transport-u2f'\r\nimport HDKey from 'hdkey'\r\nimport { constants } from 'adex-models'\r\n\r\nconst DEFAULT_HD_PATH = \"m/44'/60'/0'\"\r\n\r\nexport default class LedgerSigner extends Signer {\r\n\tconstructor(provider, opts = {}) {\r\n\t\tsuper()\r\n\t\tthis._provider = provider\r\n\t\tthis._path = opts.path || DEFAULT_HD_PATH\r\n\t\tthis._transport = TransportU2F\r\n\t}\r\n\r\n\tget path() {\r\n\t\treturn this._path\r\n\t}\r\n\tget provider() {\r\n\t\treturn this._provider\r\n\t}\r\n\r\n\taddrsFromPubKey = async (\r\n\t\tpublicKey = '',\r\n\t\tchainCode = '',\r\n\t\t{ from = 0, to = 19 } = {}\r\n\t) => {\r\n\t\tconst hdKey = new HDKey()\r\n\t\thdKey.publicKey = Buffer.from(publicKey, 'hex')\r\n\t\thdKey.chainCode = Buffer.from(chainCode, 'hex')\r\n\r\n\t\tconst addrs = []\r\n\t\tfor (let index = from; index < to; index++) {\r\n\t\t\tconst derivedKey = hdKey.derive(`m/${index}`).publicExtendedKey\r\n\r\n\t\t\tconst addr = utils.HDNode.fromExtendedKey(derivedKey).address\r\n\r\n\t\t\taddrs.push({\r\n\t\t\t\taddress: addr,\r\n\t\t\t\tpath: `${this.path}/${index}`,\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn addrs\r\n\t}\r\n\r\n\tgetAddresses = async ({ from = 0, to = 5 } = {}) => {\r\n\t\tconst transport = await this._transport.create()\r\n\t\tconst eth = new LedgerEth(transport)\r\n\t\tconst { publicKey, chainCode } = await eth.getAddress(\r\n\t\t\tthis.path,\r\n\t\t\tfalse,\r\n\t\t\ttrue\r\n\t\t)\r\n\r\n\t\tconst addresses = await this.addrsFromPubKey(publicKey, chainCode, {\r\n\t\t\tfrom,\r\n\t\t\tto,\r\n\t\t})\r\n\r\n\t\treturn addresses\r\n\t}\r\n\r\n\tsignTx = async params => {\r\n\t\tconst txProps = await utils.resolveProperties(params)\r\n\t\tconst txUnsigned = utils.serializeTransaction(txProps).substring(2)\r\n\r\n\t\tconst transport = await this._transport.create()\r\n\t\tconst eth = new LedgerEth(transport)\r\n\t\tconst { r, s, v } = await eth.signTransaction(this.path, txUnsigned)\r\n\r\n\t\tconst signature = {\r\n\t\t\tr: '0x' + r,\r\n\t\t\ts: '0x' + s,\r\n\t\t\tv,\r\n\t\t}\r\n\r\n\t\tconst txSigned = utils.serializeTransaction(txProps, signature)\r\n\r\n\t\treturn txSigned\r\n\t}\r\n\r\n\t/*\r\n\t * TODO: may not work.\r\n\t * The ledger device or u2f seems to broken\r\n\t * Can list the addresses\r\n\t * Can sign messages\r\n\t * Signs transactions\r\n\t * Actually it show the tx but does not return value after\r\n\t * confirmation on the device\r\n\t */\r\n\tsendTransaction = async params => {\r\n\t\tconst txSigned = await this.signTx(params)\r\n\t\tconst txData = this.provider.sendTransaction(txSigned)\r\n\t\treturn txData\r\n\t}\r\n\r\n\tsignMessage = async (message, opts = {}) => {\r\n\t\tif (!opts.hex) {\r\n\t\t\tif (typeof message === 'string') {\r\n\t\t\t\tmessage = utils.toUtf8Bytes(message)\r\n\t\t\t}\r\n\r\n\t\t\tmessage = ethers.utils.hexlify(message)\r\n\t\t}\r\n\r\n\t\tmessage = message.substring(2)\r\n\r\n\t\tconst transport = await this._transport.create()\r\n\t\tconst eth = new LedgerEth(transport)\r\n\r\n\t\tconst signature = await eth.signPersonalMessage(this.path, message)\r\n\t\tsignature.r = '0x' + signature.r\r\n\t\tsignature.s = '0x' + signature.s\r\n\r\n\t\tconst { address } = await eth.getAddress(this.path)\r\n\r\n\t\tconst res = {\r\n\t\t\tsignature: ethers.utils.joinSignature(signature),\r\n\t\t\thash: message,\r\n\t\t\tmode: constants.SignatureModes.GETH,\r\n\t\t\taddress,\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconnect = provider => {\r\n\t\treturn new LedgerSigner(provider, { path: this.path })\r\n\t}\r\n}\r\n","import base64 from 'base64url'\r\nimport ethers from 'ethers'\r\n\r\n// see https://github.com/ethereum/EIPs/issues/1341\r\n// Implements EIP 1341: Ethereum Web Tokens\r\n\r\nconst HEADER = base64.encode(\r\n\tJSON.stringify({\r\n\t\ttype: 'JWT',\r\n\t\talg: 'ETH',\r\n\t})\r\n)\r\n\r\n// signer is always etherjs Wallet: https://docs.ethers.io/ethers.js/html/api-wallet.html\r\n// .address is always checksummed\r\nfunction sign(signer, payload) {\r\n\tconst payloadEncoded = base64.encode(\r\n\t\tJSON.stringify({\r\n\t\t\t...payload,\r\n\t\t\taddress: signer.address,\r\n\t\t})\r\n\t)\r\n\treturn signer.signMessage(`${HEADER}.${payloadEncoded}`).then(function(sig) {\r\n\t\tconst sigBuf = Buffer.from(sig.signature.slice(2), 'hex')\r\n\t\treturn `${HEADER}.${payloadEncoded}.${base64.encode(sigBuf)}`\r\n\t})\r\n}\r\n\r\nfunction verify(token) {\r\n\tconst parts = token.split('.')\r\n\tif (parts.length !== 3) {\r\n\t\treturn Promise.reject(new Error('verify: token needs to be of 3 parts'))\r\n\t}\r\n\tconst msg = parts.slice(0, 2).join('.')\r\n\tconst sigBuf = Buffer.from(parts[2], 'base64')\r\n\ttry {\r\n\t\tconst from = ethers.utils.verifyMessage(msg, sigBuf)\r\n\t\tconst payload = JSON.parse(base64.decode(parts[1]))\r\n\t\treturn Promise.resolve({ from, payload })\r\n\t} catch (e) {\r\n\t\treturn Promise.reject(e)\r\n\t}\r\n}\r\n\r\nexport default { sign, verify }\r\n","module.exports = Module;","module.exports = __webpack_public_path__ + \"static/media/metamask-logo.45982b2b.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/video-placeholder.f25010ce.jpg\";","module.exports = __webpack_public_path__ + \"static/media/404.12db5cc0.png\";","module.exports = __webpack_public_path__ + \"static/media/download-metamask.d5cb0c90.png\";","module.exports = __webpack_public_path__ + \"static/media/metamask.023762b6.png\";","module.exports = __webpack_public_path__ + \"static/media/eddie-14.8bd0ccfa.png\";"],"sourceRoot":""}